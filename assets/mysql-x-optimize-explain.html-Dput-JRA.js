import{_ as a,c as n,a as i,o as l}from"./app-BQBjlK2G.js";const e={};function r(p,s){return l(),n("div",null,s[0]||(s[0]=[i(`<h1 id="mysql-explain使用分析" tabindex="-1"><a class="header-anchor" href="#mysql-explain使用分析"><span>MySQL - Explain使用分析</span></a></h1><h2 id="_1-简介" tabindex="-1"><a class="header-anchor" href="#_1-简介"><span>1. 简介</span></a></h2><p>MySQL 提供了一个EXPLAIN 命令，他可以对 SELECT语句进行分析，并输出SELECT 执行的详细信息，以供开发人员针对性优化</p><p>EXPLAIN 命令语法十分简单，在SELECT 语句前加上EXPLAIN</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>EXPLAIN SELECT * FROM user_info WHERE id &lt;300;</span></span></code></pre></div><h2 id="_2-准备" tabindex="-1"><a class="header-anchor" href="#_2-准备"><span>2. 准备</span></a></h2><p>为了方便演示EXPLAIN 的使用，首先我们需要建立两个测试用的表，并添加相应的数据</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">user_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">\` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  \`id\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;">   BIGINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)  </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  \`name\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  \`age\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;">  INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">11</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)              </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">\`id\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  KEY</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`name_index\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">\`name\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  ENGINE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> InnoDB</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> CHARSET </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;xys&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;a&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">21</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;b&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">23</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;c&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;d&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;e&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;f&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">21</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;g&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">23</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;h&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, age) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;i&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> \`</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">order_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">\` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  \`id\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;">           BIGINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)  </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  \`user_id\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;">      BIGINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)           </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  \`product_name\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">  \`productor\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;">    VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)          </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">\`id\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  KEY</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`user_product_detail_index\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">\`user_id\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">\`product_name\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">\`productor\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  ENGINE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> InnoDB</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> CHARSET </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;WHH&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p2&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;WL&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;DX&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;WHH&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p5&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;WL&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p3&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;MA&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;WHH&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;WHH&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info (user_id, product_name, productor) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">9</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;p8&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;TE&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-explain-输出格式" tabindex="-1"><a class="header-anchor" href="#_3-explain-输出格式"><span>3. EXPLAIN 输出格式</span></a></h2><p>EXPLAIN 命令的输出内容大致内容</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> explain </span><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">\\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: const</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: const</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>各列的含义</p><ul><li>id: SELECT 查询的标识符，每个SELECT 都会自动分配一个唯一的标识符</li><li>select_type: SELECT 查询的类型</li><li>table: 查询的是哪个表</li><li>partitions: 匹配的分区</li><li>type： 使用索引的类型</li><li>possible_keys: 此次查询可能选择的索引</li><li>key: 此次查询中确切使用到的索引</li><li>ref：哪个字段或常数与key字段一起被使用</li><li>rows：显示此查询一共扫描了多少行，这个是一个估计值</li><li>filtered: 表示此查询条件所过滤的数据的百分比</li><li>extra： 额外的信息</li></ul><h3 id="_3-1-select-type" tabindex="-1"><a class="header-anchor" href="#_3-1-select-type"><span>3.1 select_type</span></a></h3><p>select_type 表示查询的类型，他常用的取值有</p><ul><li>SIMPLE: 表示此查询不包含UNION 查询或子查询</li><li>PRIMARY: 表示此查询是最外层的查询</li><li>UNION: 表示此查询是UNION 的第二或随后的查询</li><li>DEPENDENT UNION, UNION 中的第二个或后面的查询语句，取决于外面的查询</li><li>UNION RESULT, UNION 的结果</li><li>SUBQUERY, 子查询中的第一个 SELECT</li><li>DEPENDENT SUBQUERY: 子查询中的第一个 SELECT, 取决于外面的查询. 即子查询依赖于外层查询的结果.</li></ul><h4 id="_3-1-1-simple" tabindex="-1"><a class="header-anchor" href="#_3-1-1-simple"><span>3.1.1 SIMPLE</span></a></h4><p>最常见的查询类别应该是 <code>SIMPLE</code> 了, 比如当我们的查询没有子查询, 也没有 UNION 查询时, 那么通常就是 <code>SIMPLE</code> 类型。例如：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> explain </span><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">\\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: const</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: const</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-1-2-union" tabindex="-1"><a class="header-anchor" href="#_3-1-2-union"><span>3.1.2 UNION</span></a></h4><p>如果我们使用了UNION 查询，那么EXPLAIN 输出的结果类似如下</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">EXPLAIN (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info  </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">IN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">      UNION</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    	(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">IN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span></code></pre></div><figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202403130852867.png" alt="image-20190910230049046" tabindex="0" loading="lazy"><figcaption>image-20190910230049046</figcaption></figure><h3 id="_3-2-table" tabindex="-1"><a class="header-anchor" href="#_3-2-table"><span>3.2 table</span></a></h3><p>表示查询设计的表或者衍生表</p><h3 id="_3-3-type-重要" tabindex="-1"><a class="header-anchor" href="#_3-3-type-重要"><span>3.3 type （重要）</span></a></h3><p><code>type</code> 字段比较重要, 它提供了判断查询是否高效的重要依据依据. 通过 <code>type</code> 字段, 我们判断此次查询是 <code>全表扫描</code> 还是 <code>索引扫描</code> 等.</p><h4 id="_3-3-1-system" tabindex="-1"><a class="header-anchor" href="#_3-3-1-system"><span>3.3.1 system</span></a></h4><p><code>system</code>: 表中只有一条数据. 这个类型是特殊的 <code>const</code> 类型.</p><h4 id="_3-3-2-const" tabindex="-1"><a class="header-anchor" href="#_3-3-2-const"><span>3.3.2 const</span></a></h4><p><code>const</code>: 针对主键或唯一索引的等值查询扫描, 最多只返回一行数据. const 查询速度非常快, 因为它仅仅读取一次即可.<br> 例如下面的这个查询, 它使用了主键索引, 因此 <code>type</code> 就是 <code>const</code> 类型的.</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> explain </span><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">\\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: const</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: const</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-3-eq-ref" tabindex="-1"><a class="header-anchor" href="#_3-3-3-eq-ref"><span>3.3.3 eq_ref</span></a></h4><p><code>eq_ref</code>: 此类型通常出现在多表的 join 查询, 表示对于前表的每一个结果, 都只能匹配到后表的一行结果. 并且查询的比较操作通常是 <code>=</code>, 查询效率较高. 例如:</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info, order_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> user_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> order_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">user_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">\\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: order_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: user_product_detail_index</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_product_detail_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">254</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: eq_ref</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">order_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.user_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> rows</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-4-ref" tabindex="-1"><a class="header-anchor" href="#_3-3-4-ref"><span>3.3.4 ref</span></a></h4><p><code>ref</code>: 此类型通常出现在多表的 join 查询, 针对于非唯一或非主键索引, 或者是使用了 <code>最左前缀</code> 规则索引的查询.<br> 例如下面这个例子中, 就使用到了 <code>ref</code> 类型的查询:</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info, order_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> user_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> order_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">user_id</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> order_info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">user_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">\\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: const</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: const</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: order_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: ref</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: user_product_detail_index</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_product_detail_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">9</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: const</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> index</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> rows</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-5-range" tabindex="-1"><a class="header-anchor" href="#_3-3-5-range"><span>3.3.5 range</span></a></h4><p><code>range</code>: 表示使用索引范围查询, 通过索引字段范围获取表中部分数据记录. 这个类型通常出现在 =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=, IS NULL, &lt;=&gt;, BETWEEN, IN() 操作中.<br> 当 <code>type</code> 是 <code>range</code> 时, 那么 EXPLAIN 输出的 <code>ref</code> 字段为 NULL, 并且 <code>key_len</code> 字段是此次查询中使用到的索引的最长的那个.</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    	FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_info</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    	WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">BETWEEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 8</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> \\G;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">range</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">7</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> where</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-5-index" tabindex="-1"><a class="header-anchor" href="#_3-3-5-index"><span>3.3.5 index</span></a></h4><p><code>index</code>: 表示全索引扫描(full index scan), 和 ALL 类型类似, 只不过 ALL 类型是全表扫描, 而 index 类型则仅仅扫描所有的索引, 而不扫描数据.<br><code>index</code> 类型通常出现在: 所要查询的数据直接在索引树中就可以获取到, 而不需要扫描数据. 当是这种情况时, Extra 字段 会显示 <code>Using index</code>.</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>mysql&gt; EXPLAIN SELECT name FROM  user_info \\G</span></span>
<span class="line"><span>*************************** 1. row ***************************</span></span>
<span class="line"><span>           id: 1</span></span>
<span class="line"><span>  select_type: SIMPLE</span></span>
<span class="line"><span>        table: user_info</span></span>
<span class="line"><span>   partitions: NULL</span></span>
<span class="line"><span>         type: index</span></span>
<span class="line"><span>possible_keys: NULL</span></span>
<span class="line"><span>          key: name_index</span></span>
<span class="line"><span>      key_len: 152</span></span>
<span class="line"><span>          ref: NULL</span></span>
<span class="line"><span>         rows: 10</span></span>
<span class="line"><span>     filtered: 100.00</span></span>
<span class="line"><span>        Extra: Using index</span></span>
<span class="line"><span>1 row in set, 1 warning (0.00 sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的例子中, 我们查询的 name 字段恰好是一个索引, 因此我们直接从索引中获取数据就可以满足查询的需求了, 而不需要查询表中的数据. 因此这样的情况下, type 的值是 <code>index</code>, 并且 Extra 的值是 <code>Using index</code>.</p><h4 id="_3-3-7-all" tabindex="-1"><a class="header-anchor" href="#_3-3-7-all"><span>3.3.7 ALL</span></a></h4><p>ALL: 表示全表扫描, 这个类型的查询是性能最差的查询之一. 通常来说, 我们的查询不应该出现 ALL 类型的查询, 因为这样的查询在数据量大的情况下, 对数据库的性能是巨大的灾难. 如一个查询是 ALL 类型查询, 那么一般来说可以对相应的字段添加索引来避免.<br> 下面是一个全表扫描的例子, 可以看到, 在全表扫描时, possible_keys 和 key 字段都是 NULL, 表示没有使用到索引, 并且 rows 十分巨大, 因此整个查询效率是十分低下的.</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> age </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  user_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> \\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: ALL</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> where</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="type类型性能比较" tabindex="-1"><a class="header-anchor" href="#type类型性能比较"><span>type类型性能比较</span></a></h4><p>通常来说, 不同的 type 类型的性能关系如下:<br><code>ALL &lt; index &lt; range ~ index_merge &lt; ref &lt; eq_ref &lt; const &lt; system</code><br><code>ALL</code> 类型因为是全表扫描, 因此在相同的查询条件下, 它是速度最慢的.<br> 而 <code>index</code> 类型的查询虽然不是全表扫描, 但是它扫描了所有的索引, 因此比 ALL 类型的稍快.<br> 后面的几种类型都是利用了索引来查询数据, 因此可以过滤部分或大部分数据, 因此查询效率就比较高了.</p><h3 id="_3-4-possible-keys" tabindex="-1"><a class="header-anchor" href="#_3-4-possible-keys"><span>3.4 possible_keys</span></a></h3><p><code>possible_keys</code> 表示 MySQL 在查询时, 能够使用到的索引. 注意, 即使有些索引在 <code>possible_keys</code> 中出现, 但是并不表示此索引会真正地被 MySQL 使用到. MySQL 在查询时具体使用了哪些索引, 由 <code>key</code> 字段决定.</p><h3 id="_3-5-key-重要" tabindex="-1"><a class="header-anchor" href="#_3-5-key-重要"><span>3.5 key(重要)</span></a></h3><p>此字段是 MySQL 在当前查询时所真正使用到的索引.</p><h3 id="_3-6-key-len" tabindex="-1"><a class="header-anchor" href="#_3-6-key-len"><span>3.6 key_len</span></a></h3><p>表示查询优化器使用了索引的字节数. 这个字段可以评估组合索引是否完全被使用, 或只有最左部分字段被使用到.<br> key_len 的计算规则如下:</p><ul><li>字符串 <ul><li>char(n): n 字节长度</li><li>varchar(n): 如果是 utf8 编码, 则是 3 <em>n + 2字节; 如果是 utf8mb4 编码, 则是 4</em> n + 2 字节.</li></ul></li><li>数值类型: <ul><li>TINYINT: 1字节</li><li>SMALLINT: 2字节</li><li>MEDIUMINT: 3字节</li><li>INT: 4字节</li><li>BIGINT: 8字节</li></ul></li><li>时间类型 <ul><li>DATE: 3字节</li><li>TIMESTAMP: 4字节</li><li>DATETIME: 8字节</li></ul></li><li>字段属性: NULL 属性 占用一个字节. 如果一个字段是 NOT NULL 的, 则没有此属性.</li></ul><p>我们来举两个简单的栗子:</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> product_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;p1&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> productor </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;WHH&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> \\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: order_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">range</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: user_product_detail_index</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_product_detail_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">9</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">4</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">12</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">50</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> index</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的例子是从表 order_info 中查询指定的内容, 而我们从此表的建表语句中可以知道, 表 <code>order_info</code> 有一个联合索引:</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>KEY \`user_product_detail_index\` (\`user_id\`, \`product_name\`, \`productor\`)</span></span></code></pre></div><p>不过此查询语句 <code>WHERE user_id &lt; 3 AND product_name = &#39;p1&#39; AND productor = &#39;WHH&#39;</code> 中, 因为先进行 user_id 的范围查询, 而根据 <code>最左前缀匹配</code> 原则, 当遇到范围查询时, 就停止索引的匹配, 因此实际上我们使用到的索引的字段只有 <code>user_id</code>, 因此在 <code>EXPLAIN</code> 中, 显示的 key_len 为 9. 因为 user_id 字段是 BIGINT, 占用 8 字节, 而 NULL 属性占用一个字节, 因此总共是 9 个字节. 若我们将user_id 字段改为 <code>BIGINT(20) NOT NULL DEFAULT &#39;0&#39;</code>, 则 key_length 应该是8.</p><p>上面因为 <code>最左前缀匹配</code> 原则, 我们的查询仅仅使用到了联合索引的 <code>user_id</code> 字段, 因此效率不算高.</p><p>接下来我们来看一下下一个例子:</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> product_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;p1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> \\G;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: order_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: ref</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: user_product_detail_index</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_product_detail_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">161</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: const,const</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> index</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这次的查询中, 我们没有使用到范围查询, key_len 的值为 161. 为什么呢? 因为我们的查询条件 <code>WHERE user_id = 1 AND product_name = &#39;p1&#39;</code> 中, 仅仅使用到了联合索引中的前两个字段, 因此 <code>keyLen(user_id) + keyLen(product_name) = 9 + 50 * 3 + 2 = 161</code></p><h3 id="_3-7-rows-重要" tabindex="-1"><a class="header-anchor" href="#_3-7-rows-重要"><span>3.7 rows（重要）</span></a></h3><p>rows 也是一个重要的字段. MySQL 查询优化器根据统计信息, 估算 SQL 要查找到结果集需要扫描读取的数据行数.<br> 这个值非常直观显示 SQL 的效率好坏, <strong>原则上 rows 越少越好.</strong></p><h3 id="_3-8-extra" tabindex="-1"><a class="header-anchor" href="#_3-8-extra"><span>3.8 Extra</span></a></h3><p>EXplain 中的很多额外的信息会在 Extra 字段显示, 常见的有以下几种内容:</p><ul><li><p>Using filesort<br> 当 Extra 中有 <code>Using filesort</code> 时, 表示 MySQL 需额外的排序操作, 不能通过索引顺序达到排序效果. 一般有 <code>Using filesort</code>, 都建议优化去掉, 因为这样的查询 CPU 资源消耗大.</p><p>例如下面的例子:</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> product_name \\G</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: order_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_product_detail_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">254</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> filesort</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们的索引是</p><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>KEY \`user_product_detail_index\` (\`user_id\`, \`product_name\`, \`productor\`)</span></span></code></pre></div><p>但是上面的查询中根据 <code>product_name</code> 来排序, 因此不能使用索引进行优化, 进而会产生 <code>Using filesort</code>.<br> 如果我们将排序依据改为 <code>ORDER BY user_id, product_name</code>, 那么就不会出现 <code>Using filesort</code> 了. 例如:</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> EXPLAIN </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> order_info </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> user_id, product_name \\G;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*************************** </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">. </span><span style="color:#C678DD;--shiki-dark:#C678DD;">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ***************************</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           id: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  select_type: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SIMPLE</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: order_info</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   partitions: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">possible_keys: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">          key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: user_product_detail_index</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      key_len: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">254</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">          ref: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">         rows</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">8</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     filtered: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        Extra: </span><span style="color:#C678DD;--shiki-dark:#C678DD;">Using</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> index</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> row</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> in</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> warning (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">00</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Using index</p><p>&quot;覆盖索引扫描&quot;, 表示查询在索引树中就可查找所需数据, 不用扫描表数据文件, 往往说明性能不错</p></li><li><p>Using temporary</p><p>查询有使用临时表, 一般出现于排序, 分组和多表 join 的情况, 查询效率不高, 建议优化.</p></li></ul><h2 id="_4-总结一下" tabindex="-1"><a class="header-anchor" href="#_4-总结一下"><span>4. 总结一下</span></a></h2><p>我们可以通过Explain 语句来判断sql是否高效，是否用到了索引。</p><ul><li>key：通过key的值为 <code>PRIMARY</code> 则使用到了索引</li><li>rows：rows扫描的行数，越小越好</li><li>type：通过type的值判断查询是否高效，判断此次是全表扫描还是索引扫描 <ul><li>ALL &lt; index &lt; range ~ index_merge &lt; ref &lt; eq_ref &lt; const &lt; system</li></ul></li></ul><h3 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章"><span>参考文章</span></a></h3><p><a href="https://segmentfault.com/a/1190000008131735" target="_blank" rel="noopener noreferrer">MySQL 性能优化神器 Explain 使用分析</a></p>`,77)]))}const o=a(e,[["render",r],["__file","mysql-x-optimize-explain.html.vue"]]),k=JSON.parse('{"path":"/posts/Database/MySQL/mysql-x-optimize-explain.html","title":"MySQL - Explain使用分析","lang":"zh-CN","frontmatter":{"aliases":"MySQL - Explain使用分析","tags":null,"cssclass":null,"source":null,"order":220,"category":["Mysql","数据库"],"created":"2024-02-22 10:49","updated":"2024-03-13 08:52","description":"MySQL - Explain使用分析 1. 简介 MySQL 提供了一个EXPLAIN 命令，他可以对 SELECT语句进行分析，并输出SELECT 执行的详细信息，以供开发人员针对性优化 EXPLAIN 命令语法十分简单，在SELECT 语句前加上EXPLAIN 2. 准备 为了方便演示EXPLAIN 的使用，首先我们需要建立两个测试用的表，并添加...","head":[["meta",{"property":"og:url","content":"https://mrjackc.github.io/posts/Database/MySQL/mysql-x-optimize-explain.html"}],["meta",{"property":"og:site_name","content":"mrjason’s Blog"}],["meta",{"property":"og:title","content":"MySQL - Explain使用分析"}],["meta",{"property":"og:description","content":"MySQL - Explain使用分析 1. 简介 MySQL 提供了一个EXPLAIN 命令，他可以对 SELECT语句进行分析，并输出SELECT 执行的详细信息，以供开发人员针对性优化 EXPLAIN 命令语法十分简单，在SELECT 语句前加上EXPLAIN 2. 准备 为了方便演示EXPLAIN 的使用，首先我们需要建立两个测试用的表，并添加..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202403130852867.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-21T07:03:09.000Z"}],["meta",{"property":"article:author","content":"MrJason"}],["meta",{"property":"article:modified_time","content":"2024-10-21T07:03:09.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MySQL - Explain使用分析\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202403130852867.png\\"],\\"dateModified\\":\\"2024-10-21T07:03:09.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MrJason\\",\\"url\\":\\"https://mrjackc.github.io\\"}]}"]]},"headers":[{"level":2,"title":"1. 简介","slug":"_1-简介","link":"#_1-简介","children":[]},{"level":2,"title":"2. 准备","slug":"_2-准备","link":"#_2-准备","children":[]},{"level":2,"title":"3. EXPLAIN 输出格式","slug":"_3-explain-输出格式","link":"#_3-explain-输出格式","children":[{"level":3,"title":"3.1 select_type","slug":"_3-1-select-type","link":"#_3-1-select-type","children":[]},{"level":3,"title":"3.2 table","slug":"_3-2-table","link":"#_3-2-table","children":[]},{"level":3,"title":"3.3 type （重要）","slug":"_3-3-type-重要","link":"#_3-3-type-重要","children":[]},{"level":3,"title":"3.4 possible_keys","slug":"_3-4-possible-keys","link":"#_3-4-possible-keys","children":[]},{"level":3,"title":"3.5 key(重要)","slug":"_3-5-key-重要","link":"#_3-5-key-重要","children":[]},{"level":3,"title":"3.6 key_len","slug":"_3-6-key-len","link":"#_3-6-key-len","children":[]},{"level":3,"title":"3.7 rows（重要）","slug":"_3-7-rows-重要","link":"#_3-7-rows-重要","children":[]},{"level":3,"title":"3.8 Extra","slug":"_3-8-extra","link":"#_3-8-extra","children":[]}]},{"level":2,"title":"4. 总结一下","slug":"_4-总结一下","link":"#_4-总结一下","children":[{"level":3,"title":"参考文章","slug":"参考文章","link":"#参考文章","children":[]}]}],"git":{"createdTime":1729494189000,"updatedTime":1729494189000,"contributors":[{"name":"MrJason","email":"845886914@qq.com","commits":1}]},"readingTime":{"minutes":11,"words":3299},"filePathRelative":"posts/Database/MySQL/mysql-x-optimize-explain.md","localizedDate":"2024年10月21日","excerpt":"\\n<h2>1. 简介</h2>\\n<p>MySQL 提供了一个EXPLAIN 命令，他可以对 SELECT语句进行分析，并输出SELECT 执行的详细信息，以供开发人员针对性优化</p>\\n<p>EXPLAIN 命令语法十分简单，在SELECT 语句前加上EXPLAIN</p>\\n<div class=\\"language-\\" data-ext=\\"\\" data-title=\\"\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\" style=\\"background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span>EXPLAIN SELECT * FROM user_info WHERE id &lt;300;</span></span></code></pre>\\n</div>","autoDesc":true}');export{o as comp,k as data};
