import{_ as a,c as o,a as n,o as r}from"./app-4x2aIoqi.js";const i={};function e(l,s){return r(),o("div",null,s[0]||(s[0]=[n(`<h1 id="定时任务" tabindex="-1"><a class="header-anchor" href="#定时任务"><span>定时任务</span></a></h1><p>定时任务的使用场景主要如下：</p><ul><li>时间驱动处理场景：每分钟扫描超时支付的订单，活动状态刷新，整点发送优惠券。</li><li>批量处理数据：按月批量统计报表数据，批量更新短信状态，实时性要求不高。</li></ul><p>年度最佳定时任务：每个月初的工资单的推送！！！</p><p>如果你对定时任务了解不多，可以后续阅读 <a href="http://www.iocoder.cn/Spring-Boot/Job/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 定时任务入门》 (opens new window)</a>文章。</p><p>项目基于 Quartz + MySQL 实现分布式定时任务，并提供 [基础设施 -&gt; 定时任务] 菜单，进行定时任务的统一管理，支持动态控制任务的添加、修改、开启、暂停、删除、执行一次等操作。</p><figure><img src="https://doc.iocoder.cn/img/定时任务/01.png" alt="定时任务" tabindex="0" loading="lazy"><figcaption>定时任务</figcaption></figure><ul><li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-job</code> (opens new window)</a>技术组件：基于 Quartz 框架的封装，提供简便的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/src/main/java/cn/iocoder/yudao/framework/quartz/core/handler/JobHandler.java" target="_blank" rel="noopener noreferrer">JobHandler (opens new window)</a>接入，任务的执行、重试，执行日志的记录。</li><li><code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/job/" target="_blank" rel="noopener noreferrer"><code>job</code> (opens new window)</a>业务模块，提供任务的动态管理，执行日志的存储。</li></ul><h2 id="_1-quartz-配置" tabindex="-1"><a class="header-anchor" href="#_1-quartz-配置"><span><a href="https://doc.iocoder.cn/job/#_1-quartz-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1. Quartz 配置</span></a></h2><p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L66-L93" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.quartz</code> 配置项，设置 Quartz 使用 MySQL 实现集群。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/定时任务/02.png" alt="配置文件" tabindex="0" loading="lazy"><figcaption>配置文件</figcaption></figure><p>考虑到 <code>local</code> 本地和 <code>dev</code> 测试环境使用相同的数据库，所以【本地】配置 <code>spring.quartz.auto-startup</code> 为 <code>false</code>，禁用本地执行定时任务的功能，影响测试环境。</p><h2 id="_2-实战案例" tabindex="-1"><a class="header-anchor" href="#_2-实战案例"><span><a href="https://doc.iocoder.cn/job/#_2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2. 实战案例</span></a></h2><p>以用户 Session 超时的定时任务举例子，讲解在项目中使用定时任务。</p><p>注意，需要修改 <code>application-local.yaml</code> 配置文件，将 <code>spring.quartz.auto-startup</code> 为 <code>true</code>，开启本地执行定任务的功能。</p><h3 id="_2-1-引入依赖" tabindex="-1"><a class="header-anchor" href="#_2-1-引入依赖"><span><a href="https://doc.iocoder.cn/job/#_2-1-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96" target="_blank" rel="noopener noreferrer">#</a>2.1 引入依赖</span></a></h3><p>在 <code>yudao-module-system-biz</code> 模块中，引入 <code>yudao-spring-boot-starter-job</code> 技术组件。如下所示：</p><div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;yudao-spring-boot-starter-job&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><h3 id="_2-2-usersessiontimeoutjob" tabindex="-1"><a class="header-anchor" href="#_2-2-usersessiontimeoutjob"><span><a href="https://doc.iocoder.cn/job/#_2-2-usersessiontimeoutjob" target="_blank" rel="noopener noreferrer">#</a>2.2 UserSessionTimeoutJob</span></a></h3><p>每个 <code>yudao-module-xxx-biz</code> 模块的 <code>job</code> 包，用于定义定时任务的 Job 类。</p><p>因此，在 <code>yudao-module-system-biz</code> 模块的 <code>job</code> 包下，创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/job/auth/UserSessionTimeoutJob.java" target="_blank" rel="noopener noreferrer">UserSessionTimeoutJob (opens new window)</a>类，实现 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/src/main/java/cn/iocoder/yudao/framework/quartz/core/handler/JobHandler.java#L8" target="_blank" rel="noopener noreferrer">JobHandler (opens new window)</a>接口，执行用户 Session 超时 Job。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/定时任务/03.png" alt="UserSessionTimeoutJob 类" tabindex="0" loading="lazy"><figcaption>UserSessionTimeoutJob 类</figcaption></figure><p>疑问：为什么添加 @TenantJob 注解？</p><p>声明 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/job/TenantJob.java" target="_blank" rel="noopener noreferrer"><code>@TenantJob</code> (opens new window)</a>注解在 Job 类上，实现<strong>并行</strong>遍历每个租户，执行定时任务的逻辑。</p><p>更多多租户的内容，可见 <a href="https://doc.iocoder.cn/saas-tenant/" target="_blank" rel="noopener noreferrer">《开发指南 —— SaaS 多租户》 (opens new window)</a>文档。</p><h3 id="_2-3-配置任务" tabindex="-1"><a class="header-anchor" href="#_2-3-配置任务"><span><a href="https://doc.iocoder.cn/job/#_2-3-%E9%85%8D%E7%BD%AE%E4%BB%BB%E5%8A%A1" target="_blank" rel="noopener noreferrer">#</a>2.3 配置任务</span></a></h3><p>① 点击 [新增] 按钮，填写定时任务 UserSessionTimeoutJob 的信息。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/定时任务/04.png" alt="新建任务" tabindex="0" loading="lazy"><figcaption>新建任务</figcaption></figure><ul><li>处理器的名字：对应的 Spring Bean 名字。例如说 UserSessionTimeoutJob 对应 userSessionTimeoutJob</li><li>Cron 表达式：执行周期，可通过 [生成表达式] 功能，进行生成 <img src="https://doc.iocoder.cn/img/定时任务/08.png" alt="新建任务" loading="lazy"></li><li>重试次数、重试间隔：执行失败后，立即重试的次数以及重试的间隔时间</li><li>超时时间监控：执行超过该时间后，发送告警邮件给开发【暂不支持，未来实现】</li></ul><p>常用的 Cron 表达式如下：</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10,14,16</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每天上午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点，下午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点、4</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 0/30</span><span style="color:#98C379;--shiki-dark:#98C379;"> 9-17</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 朝九晚五工作时间内，每半小时</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 12</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> WED</span><span style="color:#98C379;--shiki-dark:#98C379;"> 表示每个星期三中午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 12</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 12</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每天中午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 12</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每天上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每天上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每天上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2005</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2005</span><span style="color:#98C379;--shiki-dark:#98C379;"> 年的每天上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 14</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点到下午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2:59</span><span style="color:#98C379;--shiki-dark:#98C379;"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#98C379;--shiki-dark:#98C379;"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 0/5</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 14</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点到下午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2:55</span><span style="color:#98C379;--shiki-dark:#98C379;"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 5</span><span style="color:#98C379;--shiki-dark:#98C379;"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 0/5</span><span style="color:#98C379;--shiki-dark:#98C379;"> 14,18</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点到</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2:55</span><span style="color:#98C379;--shiki-dark:#98C379;"> 期间和下午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 6</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点到</span><span style="color:#98C379;--shiki-dark:#98C379;"> 6:55</span><span style="color:#98C379;--shiki-dark:#98C379;"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 5</span><span style="color:#98C379;--shiki-dark:#98C379;"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 0-5</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 14</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#98C379;--shiki-dark:#98C379;"> 点到下午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2:05</span><span style="color:#98C379;--shiki-dark:#98C379;"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#98C379;--shiki-dark:#98C379;"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10,44</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 14</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#98C379;--shiki-dark:#98C379;"> WED</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每年三月的星期三的下午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2:10</span><span style="color:#98C379;--shiki-dark:#98C379;"> 和</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2:44</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> MON-FRI</span><span style="color:#98C379;--shiki-dark:#98C379;"> 周一至周五的上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每月15日上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#98C379;--shiki-dark:#98C379;"> L</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每月最后一日的上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> 6L</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每月的最后一个星期五上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#98C379;--shiki-dark:#98C379;"> 6L</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2002-2005</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2002</span><span style="color:#98C379;--shiki-dark:#98C379;"> 年至</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2005</span><span style="color:#98C379;--shiki-dark:#98C379;"> 年，每月的最后一个星期五上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 6#3</span><span style="color:#98C379;--shiki-dark:#98C379;"> 每月的第三个星期五上午</span><span style="color:#98C379;--shiki-dark:#98C379;"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379;"> 触发</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 点击 [更多 -&gt; 任务详情] 按钮，可以查看任务的基础信息、后续的执行时间。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/定时任务/05.png" alt="新建任务" tabindex="0" loading="lazy"><figcaption>新建任务</figcaption></figure><h3 id="_2-4-测试任务" tabindex="-1"><a class="header-anchor" href="#_2-4-测试任务"><span><a href="https://doc.iocoder.cn/job/#_2-4-%E6%B5%8B%E8%AF%95%E4%BB%BB%E5%8A%A1" target="_blank" rel="noopener noreferrer">#</a>2.4 测试任务</span></a></h3><p>① 点击 [更多 -&gt; 执行一次] 按钮，立即执行一次 UserSessionTimeoutJob 定时任务。可以在 IDEA 控制台看到输出，如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/定时任务/06.png" alt="执行一次" tabindex="0" loading="lazy"><figcaption>执行一次</figcaption></figure><p>② 点击 [更多 -&gt; 调度日志] 按钮，可以查看到 UserSessionTimeoutJob 的执行日志。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/定时任务/07.png" alt="调度日志" tabindex="0" loading="lazy"><figcaption>调度日志</figcaption></figure><p>上次更新: 2022/04/22, 00:36:05</p>`,39)]))}const t=a(i,[["render",e],["__file","2.定时任务.html.vue"]]),c=JSON.parse('{"path":"/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/2.%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html","title":"定时任务","lang":"zh-CN","frontmatter":{"description":"定时任务 定时任务的使用场景主要如下： 时间驱动处理场景：每分钟扫描超时支付的订单，活动状态刷新，整点发送优惠券。 批量处理数据：按月批量统计报表数据，批量更新短信状态，实时性要求不高。 年度最佳定时任务：每个月初的工资单的推送！！！ 如果你对定时任务了解不多，可以后续阅读 《芋道 Spring Boot 定时任务入门》 (opens new wind...","watermark":true,"head":[["meta",{"property":"og:url","content":"https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/2.%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html"}],["meta",{"property":"og:site_name","content":"mrjason’s Blog"}],["meta",{"property":"og:title","content":"定时任务"}],["meta",{"property":"og:description","content":"定时任务 定时任务的使用场景主要如下： 时间驱动处理场景：每分钟扫描超时支付的订单，活动状态刷新，整点发送优惠券。 批量处理数据：按月批量统计报表数据，批量更新短信状态，实时性要求不高。 年度最佳定时任务：每个月初的工资单的推送！！！ 如果你对定时任务了解不多，可以后续阅读 《芋道 Spring Boot 定时任务入门》 (opens new wind..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/01.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-21T07:41:53.000Z"}],["meta",{"property":"article:author","content":"MrJason"}],["meta",{"property":"article:modified_time","content":"2024-11-21T07:41:53.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"定时任务\\",\\"image\\":[\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/01.png\\",\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/02.png\\",\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/03.png\\",\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/04.png\\",\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/08.png\\",\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/05.png\\",\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/06.png\\",\\"https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/07.png\\"],\\"dateModified\\":\\"2024-11-21T07:41:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MrJason\\",\\"url\\":\\"https://springg.us.kg\\"}]}"]]},"headers":[{"level":2,"title":"#1. Quartz 配置","slug":"_1-quartz-配置","link":"#_1-quartz-配置","children":[]},{"level":2,"title":"#2. 实战案例","slug":"_2-实战案例","link":"#_2-实战案例","children":[{"level":3,"title":"#2.1 引入依赖","slug":"_2-1-引入依赖","link":"#_2-1-引入依赖","children":[]},{"level":3,"title":"#2.2 UserSessionTimeoutJob","slug":"_2-2-usersessiontimeoutjob","link":"#_2-2-usersessiontimeoutjob","children":[]},{"level":3,"title":"#2.3 配置任务","slug":"_2-3-配置任务","link":"#_2-3-配置任务","children":[]},{"level":3,"title":"#2.4 测试任务","slug":"_2-4-测试任务","link":"#_2-4-测试任务","children":[]}]}],"git":{"createdTime":1732174913000,"updatedTime":1732174913000,"contributors":[{"name":"MrJason","email":"845886914@qq.com","commits":1}]},"readingTime":{"minutes":4.79,"words":1436},"filePathRelative":"posts/Java/Ruoyi-Vue-Pro/3.中间件手册/2.定时任务.md","localizedDate":"2024年11月21日","excerpt":"\\n<p>定时任务的使用场景主要如下：</p>\\n<ul>\\n<li>时间驱动处理场景：每分钟扫描超时支付的订单，活动状态刷新，整点发送优惠券。</li>\\n<li>批量处理数据：按月批量统计报表数据，批量更新短信状态，实时性要求不高。</li>\\n</ul>\\n<p>年度最佳定时任务：每个月初的工资单的推送！！！</p>\\n<p>如果你对定时任务了解不多，可以后续阅读 <a href=\\"http://www.iocoder.cn/Spring-Boot/Job/?yudao\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">《芋道 Spring Boot 定时任务入门》 (opens new window)</a>文章。</p>","autoDesc":true}');export{t as comp,c as data};
