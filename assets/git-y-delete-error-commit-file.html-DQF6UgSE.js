import{_ as t,c as a,a as i,o as r}from"./app-B-YfeyLA.js";const o={};function s(n,e){return r(),a("div",null,e[0]||(e[0]=[i('<h1 id="删除-git中的错误提交的文件-md" tabindex="-1"><a class="header-anchor" href="#删除-git中的错误提交的文件-md"><span><a href="http://xn--bcr377n.xn--git-x68d9umpj91jn4ci06cca4241dl8wa.md" target="_blank" rel="noopener noreferrer">删除.git中的错误提交的文件.md</a></span></a></h1><h2 id="_1-背景" tabindex="-1"><a class="header-anchor" href="#_1-背景"><span>1. 背景</span></a></h2><p>Git 操作时，经常“不小心”上传一些不必要的（大）文件，或者私密数据，等等。</p><p>当然可以从本地把这些文件删除，加入 <code>.gitignore</code>, 避免下次再上传。</p><p>然而，<strong>之前已经上传过的，还遗留在 git 历史中</strong></p><h2 id="_2-实例" tabindex="-1"><a class="header-anchor" href="#_2-实例"><span>2. 实例</span></a></h2><p>如下是一个我误将vue 的第三方依赖node_modules 添加到git 导致.git文件过大</p><figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404231018852.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3-操作步骤" tabindex="-1"><a class="header-anchor" href="#_3-操作步骤"><span>3. 操作步骤</span></a></h2><ol><li><p><a href="https://rtyley.github.io/bfg-repo-cleaner/" target="_blank" rel="noopener noreferrer">下载bfg.jar</a>, 直接将其复制到 <code>your-repo.git</code> 目录下</p></li><li><p>删除.git 中的文件或者文件夹</p><ul><li><p>删除文件</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">java</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -jar</span><span style="color:#98C379;--shiki-dark:#98C379;"> bfg-1.12.16.jar</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --delete-files</span><span style="color:#98C379;--shiki-dark:#98C379;"> test1.py</span></span></code></pre></div></li><li><p>删除文件夹</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">java</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -jar</span><span style="color:#98C379;--shiki-dark:#98C379;"> bfg-1.12.16.jar</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --delete-folders</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;{folderA,folderB,folderC}&quot;</span></span></code></pre></div></li></ul></li><li><p>执行如下 git 命令</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">git</span><span style="color:#98C379;--shiki-dark:#98C379;"> reflog</span><span style="color:#98C379;--shiki-dark:#98C379;"> expire</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --expire=now</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --all</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">git</span><span style="color:#98C379;--shiki-dark:#98C379;"> gc</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --prune=now</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --aggressive</span></span></code></pre></div><p>此时查看.git 文件夹，就可以看到文件变小了</p></li></ol><figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404231018896.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章"><span>参考文章</span></a></h2><p><a href="https://juejin.im/post/6844904045459537934" target="_blank" rel="noopener noreferrer">BFG Repo-Cleaner - 从 Git 历史中真正删除文件</a></p>',13)]))}const p=t(o,[["render",s],["__file","git-y-delete-error-commit-file.html.vue"]]),d=JSON.parse('{"path":"/posts/Git/git-y-delete-error-commit-file.html","title":"删除.git中的错误提交的文件.md","lang":"zh-CN","frontmatter":{"description":"删除.git中的错误提交的文件.md 1. 背景 Git 操作时，经常“不小心”上传一些不必要的（大）文件，或者私密数据，等等。 当然可以从本地把这些文件删除，加入 .gitignore, 避免下次再上传。 然而，之前已经上传过的，还遗留在 git 历史中 2. 实例 如下是一个我误将vue 的第三方依赖node_modules 添加到git 导致.g...","head":[["meta",{"property":"og:url","content":"https://mrjackc.github.io/posts/Git/git-y-delete-error-commit-file.html"}],["meta",{"property":"og:site_name","content":"mrjason’s Blog"}],["meta",{"property":"og:title","content":"删除.git中的错误提交的文件.md"}],["meta",{"property":"og:description","content":"删除.git中的错误提交的文件.md 1. 背景 Git 操作时，经常“不小心”上传一些不必要的（大）文件，或者私密数据，等等。 当然可以从本地把这些文件删除，加入 .gitignore, 避免下次再上传。 然而，之前已经上传过的，还遗留在 git 历史中 2. 实例 如下是一个我误将vue 的第三方依赖node_modules 添加到git 导致.g..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404231018852.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-21T07:03:09.000Z"}],["meta",{"property":"article:author","content":"MrJason"}],["meta",{"property":"article:modified_time","content":"2024-10-21T07:03:09.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"删除.git中的错误提交的文件.md\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404231018852.png\\",\\"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404231018896.png\\"],\\"dateModified\\":\\"2024-10-21T07:03:09.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MrJason\\",\\"url\\":\\"https://mrjackc.github.io\\"}]}"]]},"headers":[{"level":2,"title":"1. 背景","slug":"_1-背景","link":"#_1-背景","children":[]},{"level":2,"title":"2. 实例","slug":"_2-实例","link":"#_2-实例","children":[]},{"level":2,"title":"3. 操作步骤","slug":"_3-操作步骤","link":"#_3-操作步骤","children":[]},{"level":2,"title":"参考文章","slug":"参考文章","link":"#参考文章","children":[]}],"git":{"createdTime":1729494189000,"updatedTime":1729494189000,"contributors":[{"name":"MrJason","email":"845886914@qq.com","commits":1}]},"readingTime":{"minutes":0.81,"words":243},"filePathRelative":"posts/Git/git-y-delete-error-commit-file.md","localizedDate":"2024年10月21日","excerpt":"\\n<h2>1. 背景</h2>\\n<p>Git 操作时，经常“不小心”上传一些不必要的（大）文件，或者私密数据，等等。</p>\\n<p>当然可以从本地把这些文件删除，加入 <code>.gitignore</code>, 避免下次再上传。</p>\\n<p>然而，<strong>之前已经上传过的，还遗留在 git 历史中</strong></p>\\n<h2>2. 实例</h2>\\n<p>如下是一个我误将vue 的第三方依赖node_modules 添加到git 导致.git文件过大</p>\\n<figure><img src=\\"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404231018852.png\\" alt=\\"\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption></figcaption></figure>","autoDesc":true}');export{p as comp,d as data};
