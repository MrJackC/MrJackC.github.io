import{_ as a,c as n,a as i,o as l}from"./app-DP7tPpgD.js";const p={};function o(e,s){return l(),n("div",null,s[0]||(s[0]=[i(`<h1 id="sql开发" tabindex="-1"><a class="header-anchor" href="#sql开发"><span>SQL开发</span></a></h1><hr><h2 id="第1章-sql概述" tabindex="-1"><a class="header-anchor" href="#第1章-sql概述"><span>第1章：SQL概述</span></a></h2><p>SQL：Structured Query Language结构化查询语言，它是使用关系模型的数据库应用语言，由IBM上世纪70年代开发出来。后由美国国家标准局（ANSI）开始着手制定SQL标准，先后有SQL-86，SQL-89，SQL-92，SQL-99等标准。</p><h3 id="_1-sql的语言规范" tabindex="-1"><a class="header-anchor" href="#_1-sql的语言规范"><span>1. SQL的语言规范</span></a></h3><ul><li>mysql对于SQL语句不区分大小写，SQL语句关键字尽量大写</li><li>SQL 可以写在一行或者多行。为了提高可读性，各子句分行写，必要时使用缩进</li><li>关键字不能被缩写也不能分行</li><li>值，除了数值型，<strong>字符串型和日期时间类型使用单引号（&#39; &#39;）</strong></li><li>别名，尽量使用双引号（&quot; &quot;），而且不建议省略as</li><li>所有标点符号使用英文状态下的半角输入方式</li><li>必须保证所有(),单引号，双引号是成对结束的</li><li>可以使用（1）#单行注释 （2）--空格单行注释 （3）/* 多行注释 */</li></ul><h3 id="_2-命名规则" tabindex="-1"><a class="header-anchor" href="#_2-命名规则"><span>2. 命名规则</span></a></h3><ul><li>数据库、表名不得超过30个字符，变量名限制为29个</li><li>必须只能包含 A–Z, a–z, 0–9, _共63个字符</li><li>不能在对象名的字符间留空格</li><li>必须不能和用户定义的其他对象重名</li><li>必须保证你的字段没有和保留字、数据库系统或常用方法冲突</li><li>保持字段名和类型的一致性,在命名字段并为其指定数据类型的时候一定要保证一致性。假如数据类型在一个表里是整数,那在另一个表里可就别变成字符型了</li><li>在命令行中的要求：</li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716145050.png" alt="1554944183905" tabindex="0" loading="lazy"><figcaption>1554944183905</figcaption></figure><blockquote><p>说明：一个语句可以分开多行编写，以;或\\g结束</p></blockquote><h3 id="_3-sql分类" tabindex="-1"><a class="header-anchor" href="#_3-sql分类"><span>3. SQL分类</span></a></h3><ul><li><p><strong>DDL（Data Definition Languages)：数据定义语言</strong>，这些语句定义了不同的数据段、数据库、表、列、索引等数据库对象。</p><ul><li>主要的语句关键字包括<code>CREATE</code>、<code>DROP</code>、<code>ALTER</code>等。</li></ul></li><li><p><strong>DML（Data Manipulation Language）：数据操作语言</strong>，用于添加、删除、更新和查询数据库记录，并检查数据完整性。</p><ul><li>主要的语句关键字包括<code>INSERT</code>、<code>DELETE</code>、<code>UPDATE</code>、<code>SELECT</code>等。</li><li><strong>SELECT是SQL语言的基础，最为重要。</strong></li></ul></li><li><p><strong>DCL（Data Control Language）：数据控制语言</strong>，用于控制不同数据段直接的许可和访问级别的语句。这些语句定义了数据库、表、字段、用户的访问权限和安全级别。</p><ul><li>主要的语句关键字包括<code>GRANT</code>、<code>REVOKE</code>、<code>COMMIT</code>、<code>ROLLBACK</code>、<code>SAVEPOINT</code>等。</li></ul></li></ul><hr><h2 id="第2章-数据处理之查询" tabindex="-1"><a class="header-anchor" href="#第2章-数据处理之查询"><span>第2章：数据处理之查询</span></a></h2><h3 id="_2-1-基本的select语句" tabindex="-1"><a class="header-anchor" href="#_2-1-基本的select语句"><span>2.1 基本的SELECT语句</span></a></h3><h4 id="_2-1-1-select-from" tabindex="-1"><a class="header-anchor" href="#_2-1-1-select-from"><span>2.1.1 SELECT ... FROM</span></a></h4><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   标识选择哪些列</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     标识从哪个表中选择</span></span></code></pre></div><ul><li>选择全部列：</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   departments;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716145100.png" alt="1554950890895" tabindex="0" loading="lazy"><figcaption>1554950890895</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150437.png" alt="1554950903518" tabindex="0" loading="lazy"><figcaption>1554950903518</figcaption></figure><ul><li>选择特定的列：</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id, location_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   departments;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150441.png" alt="1554950947969" tabindex="0" loading="lazy"><figcaption>1554950947969</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716145129.png" alt="1554950953272" tabindex="0" loading="lazy"><figcaption>1554950953272</figcaption></figure><h4 id="_2-1-2-列的别名" tabindex="-1"><a class="header-anchor" href="#_2-1-2-列的别名"><span>2.1.2 列的别名</span></a></h4><ul><li><p>重命名一个列</p></li><li><p>便于计算</p></li><li><p>紧跟列名，也可以<strong>在列名和别名之间加入关键字AS，别名使用双引号</strong>，以便在别名中包含空格或特殊的字符并区分大小写。</p></li></ul><p>使用别名</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, commission_pct comm</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150459.png" alt="1554951616598" tabindex="0" loading="lazy"><figcaption>1554951616598</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150502.png" alt="1554951622467" tabindex="0" loading="lazy"><figcaption>1554951622467</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;Name&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, salary*</span><span style="color:#D19A66;--shiki-dark:#D19A66;">12</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;Annual Salary&quot;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173835.png" alt="1554951648377" tabindex="0" loading="lazy"><figcaption>1554951648377</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173833.png" alt="1554951655368" tabindex="0" loading="lazy"><figcaption>1554951655368</figcaption></figure><h4 id="_2-1-3-去除重复行" tabindex="-1"><a class="header-anchor" href="#_2-1-3-去除重复行"><span>2.1.3 去除重复行</span></a></h4><p>默认情况下，查询会返回全部行，包括重复行。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173829.png" alt="1554951711115" tabindex="0" loading="lazy"><figcaption>1554951711115</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173827.png" alt="1554951715923" tabindex="0" loading="lazy"><figcaption>1554951715923</figcaption></figure><p><strong>在SELECT语句中使用关键字DISTINCT去除重复行。</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT DISTINCT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173824.png" alt="1554951796570" tabindex="0" loading="lazy"><figcaption>1554951796570</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173822.png" alt="1554951801044" tabindex="0" loading="lazy"><figcaption>1554951801044</figcaption></figure><h4 id="_2-1-4-空值参与运算" tabindex="-1"><a class="header-anchor" href="#_2-1-4-空值参与运算"><span>2.1.4 空值参与运算</span></a></h4><ul><li>所有运算符或列值遇到null值，运算的结果都为null</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id,salary,commission_pct,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">12</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * salary * (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> + commission_pct) </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;annual_sal&quot;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees;</span></span></code></pre></div><h4 id="_2-1-5-显示表结构" tabindex="-1"><a class="header-anchor" href="#_2-1-5-显示表结构"><span>2.1.5 显示表结构</span></a></h4><p>使用DESCRIBE 或 DESC 命令，表示表结构。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">DESCRIBE employees;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173818.png" alt="1554951856201" tabindex="0" loading="lazy"><figcaption>1554951856201</figcaption></figure><h3 id="_2-2-过滤数据" tabindex="-1"><a class="header-anchor" href="#_2-2-过滤数据"><span>2.2 过滤数据</span></a></h3><h4 id="_2-2-1-select-from-where" tabindex="-1"><a class="header-anchor" href="#_2-2-1-select-from-where"><span>2.2.1 SELECT ... FROM ... WHERE</span></a></h4><p>背景：</p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173815.png" alt="1554952199742" tabindex="0" loading="lazy"><figcaption>1554952199742</figcaption></figure><ul><li>使用WHERE 子句，将不满足条件的行过滤掉</li><li><strong>WHERE子句紧随 FROM子句</strong></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name, job_id, department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 90</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173812.png" alt="1554952277028" tabindex="0" loading="lazy"><figcaption>1554952277028</figcaption></figure><h4 id="_2-2-2-比较运算符" tabindex="-1"><a class="header-anchor" href="#_2-2-2-比较运算符"><span>2.2.2 比较运算符</span></a></h4><h5 id="_1-基本操作符" tabindex="-1"><a class="header-anchor" href="#_1-基本操作符"><span>① 基本操作符</span></a></h5><table><thead><tr><th>操作符</th><th>含义</th></tr></thead><tbody><tr><td>=</td><td>等于(不是==)</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;=</td><td>大于、等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;=</td><td>小于、等于</td></tr><tr><td>&lt;&gt; 或 !=</td><td>不等于</td></tr></tbody></table><blockquote><p>说明：赋值符号使用 :=</p></blockquote><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&lt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173809.png" alt="1554970744610" tabindex="0" loading="lazy"><figcaption>1554970744610</figcaption></figure><h5 id="_2-其它比较运算符" tabindex="-1"><a class="header-anchor" href="#_2-其它比较运算符"><span>② 其它比较运算符</span></a></h5><table><thead><tr><th>操作符</th><th>含义</th></tr></thead><tbody><tr><td>BETWEEN ... AND</td><td>在两个值之间(包含边界)</td></tr><tr><td>IN(set)</td><td>等于值列表中的一个</td></tr><tr><td>LIKE</td><td>模糊查询</td></tr><tr><td>IS NULL</td><td>空值</td></tr></tbody></table><p><strong>1）BETWEEN ... AND</strong></p><p>使用 BETWEEN 运算来显示在一个区间内的值</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary </span><span style="color:#C678DD;--shiki-dark:#C678DD;">BETWEEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2500</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173806.png" alt="1554970965194" tabindex="0" loading="lazy"><figcaption>1554970965194</figcaption></figure><p><strong>2）IN</strong></p><p>使用 IN运算显示列表中的值。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name, salary, manager_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  manager_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">IN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">101</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">201</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173800.png" alt="1554973452273" tabindex="0" loading="lazy"><figcaption>1554973452273</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173803.png" alt="1554973455598" tabindex="0" loading="lazy"><figcaption>1554973455598</figcaption></figure><p><strong>3）LIKE</strong></p><ul><li><p>使用 LIKE 运算选择类似的值</p></li><li><p>选择条件可以包含字符或数字:</p><ul><li><code>**%**</code> <strong>代表零个或多个字符(任意个字符)</strong>。</li><li><code>**_**</code> <strong>代表一个字符</strong>。</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	first_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 	employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	first_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;S%&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li><code>%</code>和<code>_</code>可以同时使用。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  last_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;_o%&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173757.png" alt="1554973588723" tabindex="0" loading="lazy"><figcaption>1554973588723</figcaption></figure><p><strong>ESCAPE</strong></p><ul><li>回避特殊符号的：<strong>使用转义符</strong>。例如：将<code>[%]</code>转为<code>[$%]</code>、<code>[]</code>转为<code>[$]</code>，然后再加上<code>[ESCAPE&#39;$&#39;]</code>即可。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> job_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   jobs</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ‘IT\\_%‘;</span></span></code></pre></div><p>如果使用\\表示转义，要省略ESCAPE。如果不是\\，则要加上ESCAPE。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> job_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   jobs</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ‘IT$_%‘ escape ‘$‘;</span></span></code></pre></div><p><strong>4）NULL</strong></p><p>使用 IS (NOT) NULL 判断空值。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, manager_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  manager_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">IS</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173754.png" alt="1554973812597" tabindex="0" loading="lazy"><figcaption>1554973812597</figcaption></figure><h4 id="_2-2-3-逻辑运算符" tabindex="-1"><a class="header-anchor" href="#_2-2-3-逻辑运算符"><span>2.2.3 逻辑运算符</span></a></h4><table><thead><tr><th>操作符</th><th>含义</th></tr></thead><tbody><tr><td>&amp;&amp; （或AND）</td><td>逻辑且</td></tr><tr><td>||（或OR）</td><td>逻辑或</td></tr><tr><td>NOT</td><td>逻辑否</td></tr><tr><td>XOR</td><td>逻辑异或</td></tr></tbody></table><p><strong>1）&amp;&amp; （或AND）</strong></p><p><strong>AND要求并的关系为真。</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name, job_id, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10000</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;%MAN%&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173750.png" alt="1554973941432" tabindex="0" loading="lazy"><figcaption>1554973941432</figcaption></figure><p><strong>2）||（或OR）</strong></p><p><strong>OR要求或关系为真。</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name, job_id, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10000</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">OR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;%MAN%&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173746.png" alt="1554973982466" tabindex="0" loading="lazy"><figcaption>1554973982466</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173744.png" alt="1554974001609" tabindex="0" loading="lazy"><figcaption>1554974001609</figcaption></figure><p><strong>3）NOT</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, job_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> IN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;IT_PROG&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;ST_CLERK&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;SA_REP&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173741.png" alt="1554974033680" tabindex="0" loading="lazy"><figcaption>1554974033680</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173739.png" alt="1554974039660" tabindex="0" loading="lazy"><figcaption>1554974039660</figcaption></figure><p><strong>4）XOR</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name,department_id,salary </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) XOR salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 8000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h4 id="_2-2-4-算术运算符" tabindex="-1"><a class="header-anchor" href="#_2-2-4-算术运算符"><span>2.2.4 算术运算符</span></a></h4><table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>+</td><td>加法</td></tr><tr><td>-</td><td>减法</td></tr><tr><td>*</td><td>乘法</td></tr><tr><td>/ （或div）</td><td>除法</td></tr><tr><td>%（或mod）</td><td>取模</td></tr></tbody></table><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id,salary,department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id MOD </span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="_2-3-排序数据和分页" tabindex="-1"><a class="header-anchor" href="#_2-3-排序数据和分页"><span>2.3 排序数据和分页</span></a></h3><h4 id="_2-3-1-排序数据" tabindex="-1"><a class="header-anchor" href="#_2-3-1-排序数据"><span>2.3.1 排序数据</span></a></h4><ul><li><p>使用 ORDER BY 子句排序</p><ul><li><strong>ASC（ascend）: 升序</strong></li><li><strong>DESC（descend）:降序</strong></li></ul></li><li><p><strong>ORDER BY 子句在SELECT语句的结尾。</strong></p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   last_name, job_id, department_id, hire_date</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> hire_date ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173736.png" alt="1554974255957" tabindex="0" loading="lazy"><figcaption>1554974255957</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173734.png" alt="1554974260133" tabindex="0" loading="lazy"><figcaption>1554974260133</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   last_name, job_id, department_id, hire_date</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> hire_date </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DESC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173727.png" alt="1554974822229" tabindex="0" loading="lazy"><figcaption>1554974822229</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173730.png" alt="1554974827522" tabindex="0" loading="lazy"><figcaption>1554974827522</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name, salary*</span><span style="color:#D19A66;--shiki-dark:#D19A66;">12</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> annsal</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> annsal;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173724.png" alt="1554974853194" tabindex="0" loading="lazy"><figcaption>1554974853194</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173722.png" alt="1554974858252" tabindex="0" loading="lazy"><figcaption>1554974858252</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, department_id, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id, salary </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DESC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173714.png" alt="1554974901572" tabindex="0" loading="lazy"><figcaption>1554974901572</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173718.png" alt="1554974907498" tabindex="0" loading="lazy"><figcaption>1554974907498</figcaption></figure><ul><li>可以使用不在SELECT列表中的列排序。</li></ul><h4 id="_2-3-2-分页" tabindex="-1"><a class="header-anchor" href="#_2-3-2-分页"><span>2.3.2 分页</span></a></h4><ul><li><p><strong>MySQL中使用limit实现分页</strong></p></li><li><p>背景：查询返回的记录太多了，查看起来很不方便，怎么样能够实现分页查询呢？</p></li><li><p>分页原理</p><p>所谓分页显示，就是将数据库中的结果集，一段一段显示出来需要的条件。</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--前10条记录：</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> LIMIT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--第11至20条记录：</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> LIMIT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--第21至30条记录： </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> LIMIT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>公式**：（当前页数-1）<em>每页条数，每页条数</em>*</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">LIMIT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(PageNo - </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)*PageSize,PageSize;</span></span></code></pre></div><ul><li><strong>注意：limit子句必须放在整个查询语句的最后！</strong></li></ul><h3 id="_2-4-多表查询" tabindex="-1"><a class="header-anchor" href="#_2-4-多表查询"><span>2.4 多表查询</span></a></h3><h4 id="_2-4-1-笛卡尔积错误" tabindex="-1"><a class="header-anchor" href="#_2-4-1-笛卡尔积错误"><span>2.4.1 笛卡尔积错误</span></a></h4><p>举例：</p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173711.png" alt="1554974984600" tabindex="0" loading="lazy"><figcaption>1554974984600</figcaption></figure><p>从多个表中获取数据：</p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173708.png" alt="1554975020388" tabindex="0" loading="lazy"><figcaption>1554975020388</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees, departments;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173703.png" alt="1554975097631" tabindex="0" loading="lazy"><figcaption>1554975097631</figcaption></figure><p><strong>演示笛卡尔积的错误情况：</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(employee_id) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">输出107行</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(department_id)</span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">输出27行</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 107</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*</span><span style="color:#D19A66;--shiki-dark:#D19A66;">27</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dual;</span></span></code></pre></div><ul><li><p><strong>笛卡尔积会在下面条件下产生</strong>：</p><ul><li>省略连接条件</li><li>连接条件无效</li><li>所有表中的所有行互相连接</li></ul></li><li><p>为了避免笛卡尔积， 可以<strong>在 WHERE 加入有效的连接条件。</strong></p></li></ul><p><strong>MySQL连接</strong></p><p>使用连接在多个表中查询数据。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;">	table1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">table2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	table1, table2</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">	table1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> table2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li><p><strong>在 WHERE子句中写入连接条件。</strong></p></li><li><p><strong>在表中有相同列时，在列名之前加上表名前缀。</strong></p></li></ul><h4 id="_2-4-2-分类1-等值连接-vs-非等值连接" tabindex="-1"><a class="header-anchor" href="#_2-4-2-分类1-等值连接-vs-非等值连接"><span>2.4.2 分类1：等值连接 vs 非等值连接</span></a></h4><h5 id="_1-等值连接" tabindex="-1"><a class="header-anchor" href="#_1-等值连接"><span>① 等值连接</span></a></h5><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173659.png" alt="1554975496900" tabindex="0" loading="lazy"><figcaption>1554975496900</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> employees</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">employees</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">       employees</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">departments</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">       departments</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">location_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees, departments</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  employees</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> departments</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173657.png" alt="1554975522600" tabindex="0" loading="lazy"><figcaption>1554975522600</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173655.png" alt="1554975526339" tabindex="0" loading="lazy"><figcaption>1554975526339</figcaption></figure><p><strong>多个连接条件与 AND 操作符</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173651.png" alt="1554975606231" tabindex="0" loading="lazy"><figcaption>1554975606231</figcaption></figure><p><strong>区分重复的列名</strong></p><ul><li><p><strong>使用表名前缀在多个表中区分相同的列</strong>。</p></li><li><p>在不同表中具有相同列名的列可以用<strong>表的别名</strong>加以区分。</p></li></ul><p><strong>表的别名</strong></p><ul><li><p>使用别名可以简化查询。</p></li><li><p>使用表名前缀可以提高执行效率。</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">       d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">location_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e , departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p><strong>连接多个表</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173648.png" alt="1554978354431" tabindex="0" loading="lazy"><figcaption>1554978354431</figcaption></figure><p><strong>连接 n个表,至少需要n-1个连接条件。</strong><br> 例如：连接三个表，至少需要两个连接条件。</p><p>练习：查询出公司员工的 last_name,department_name, city</p><h5 id="_2-非等值连接" tabindex="-1"><a class="header-anchor" href="#_2-非等值连接"><span>② 非等值连接</span></a></h5><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225611.png" alt="1554978442447" tabindex="0" loading="lazy"><figcaption>1554978442447</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">salary</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">j</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">grade_level</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e, job_grades j</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">salary</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> BETWEEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> j</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">lowest_sal</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> AND</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> j</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">highest_sal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173622.png" alt="1554978477013" tabindex="0" loading="lazy"><figcaption>1554978477013</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225607.png" alt="1554978482652" tabindex="0" loading="lazy"><figcaption>1554978482652</figcaption></figure><h4 id="_2-4-3-分类2-自连接-vs-非自连接" tabindex="-1"><a class="header-anchor" href="#_2-4-3-分类2-自连接-vs-非自连接"><span>2.4.3 分类2：自连接 vs 非自连接</span></a></h4><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716173618.png" alt="1554978514321" tabindex="0" loading="lazy"><figcaption>1554978514321</figcaption></figure><ul><li>当table1和table2本质上是同一张表，只是用取别名的方式虚拟成两张表以代表不同的意义。然后两个表再进行内连接，外连接等查询</li></ul><p><strong>题目：查询employees表，返回“Xxx works for Xxx”</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> CONCAT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">worker</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39; works for &#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">       , </span><span style="color:#D19A66;--shiki-dark:#D19A66;">manager</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees worker, employees manager</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  worker</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">manager_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> manager</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225558.png" alt="1554978684947" tabindex="0" loading="lazy"><figcaption>1554978684947</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225601.png" alt="1554978690764" tabindex="0" loading="lazy"><figcaption>1554978690764</figcaption></figure><p>练习：查询出last_name为 ‘Chen’ 的员工的 manager 的信息</p><h4 id="_2-4-4-分类3-内连接-vs-外连接" tabindex="-1"><a class="header-anchor" href="#_2-4-4-分类3-内连接-vs-外连接"><span>2.4.4 分类3：内连接 vs 外连接</span></a></h4><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225552.png" alt="1554978955659" tabindex="0" loading="lazy"><figcaption>1554978955659</figcaption></figure><ul><li><p>内连接: 合并具有同一列的两个以上的表的行, <strong>结果集中不包含一个表与另一个表不匹配的行</strong></p></li><li><p>外连接: 两个表在连接过程中除了返回满足连接条件的行以外<strong>还返回左（或右）表中不满足条件的行</strong> <strong>，这种连接称为左（或右） 外连接</strong>。没有匹配的行时, 结果表中相应的列为空(NULL)。</p></li></ul><h5 id="_1-sql99-使用on子句创建连接" tabindex="-1"><a class="header-anchor" href="#_1-sql99-使用on子句创建连接"><span>① SQL99：使用ON子句创建连接</span></a></h5><ul><li><p>自然连接中是以具有相同名字的列为连接条件的。</p></li><li><p><strong>可以使用</strong> <strong>ON</strong> <strong>子句指定额外的连接条件</strong>。</p></li><li><p>这个连接条件是与其它条件分开的。</p></li><li><p><strong>ON</strong> <strong>子句使语句具有更高的易读性</strong>。</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">       d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">location_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e </span><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225549.png" alt="1554979073996" tabindex="0" loading="lazy"><figcaption>1554979073996</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225548.png" alt="1554979079395" tabindex="0" loading="lazy"><figcaption>1554979079395</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, city, department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   locations l</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">location_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> l</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">location_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225545.png" alt="1554979110008" tabindex="0" loading="lazy"><figcaption>1554979110008</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225543.png" alt="1554979115642" tabindex="0" loading="lazy"><figcaption>1554979115642</figcaption></figure><ul><li><strong>USING的使用</strong> (了解)</li></ul><p>只能和JOIN一起使用，而且要求<strong>两个</strong>关联字段在关联表中名称一致，而且只能表示关联字段值相等</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id,department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e </span><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">USING</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (department_id);</span></span></code></pre></div><h5 id="_2-左外连接" tabindex="-1"><a class="header-anchor" href="#_2-左外连接"><span>② 左外连接</span></a></h5><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">LEFT OUTER JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225541.png" alt="1554979200961" tabindex="0" loading="lazy"><figcaption>1554979200961</figcaption></figure><h5 id="_3-右外连接" tabindex="-1"><a class="header-anchor" href="#_3-右外连接"><span>③ 右外连接</span></a></h5><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">RIGHT OUTER JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225539.png" alt="1554979243194" tabindex="0" loading="lazy"><figcaption>1554979243194</figcaption></figure><h5 id="总结-sql-joins" tabindex="-1"><a class="header-anchor" href="#总结-sql-joins"><span>总结：SQL JOINS</span></a></h5><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225537.png" alt="1554979255233" tabindex="0" loading="lazy"><figcaption>1554979255233</figcaption></figure><p>补充：</p><p><strong>UNION操作符</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225532.png" alt="1554979317187" tabindex="0" loading="lazy"><figcaption>1554979317187</figcaption></figure><p>UNION 操作符返回两个查询的结果集的并集。</p><p><strong>UNION ALL操作符</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225530.png" alt="1554979343634" tabindex="0" loading="lazy"><figcaption>1554979343634</figcaption></figure><p>UNION ALL操作符返回两个查询的结果集的并集。对于两个结果集的重复部分，不去重。</p><h3 id="_2-5-单行函数" tabindex="-1"><a class="header-anchor" href="#_2-5-单行函数"><span>2.5 单行函数</span></a></h3><h4 id="_2-5-1-介绍" tabindex="-1"><a class="header-anchor" href="#_2-5-1-介绍"><span>2.5.1 介绍</span></a></h4><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225529.png" alt="1554979529525" tabindex="0" loading="lazy"><figcaption>1554979529525</figcaption></figure><p><strong>两种SQL函数</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716223055.png" alt="image-20200716223019520" tabindex="0" loading="lazy"><figcaption>image-20200716223019520</figcaption></figure><p><strong>单行函数</strong></p><ul><li><p>操作数据对象</p></li><li><p>接受参数返回一个结果</p></li><li><p><strong>只对一行进行变换</strong></p></li><li><p><strong>每行返回一个结果</strong></p></li><li><p>可以嵌套</p></li><li><p>参数可以是一列或一个值</p></li></ul><h4 id="_2-5-2-字符串函数" tabindex="-1"><a class="header-anchor" href="#_2-5-2-字符串函数"><span>2.5.2 字符串函数</span></a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td><mark>CONCAT(S1,S2,......,Sn)</mark></td><td>连接S1,S2,......,Sn为一个字符串</td></tr><tr><td><mark>CONCAT_WS(s, S1,S2,......,Sn)</mark></td><td>同CONCAT(s1,s2,...)函数，但是每个字符串之间要加上s</td></tr><tr><td>CHAR_LENGTH(s)</td><td>返回字符串s的字符数</td></tr><tr><td>LENGTH(s)</td><td>返回字符串s的字节数，和字符集有关</td></tr><tr><td>INSERT(str, index , len, instr)</td><td>将字符串str从第index位置开始，len个字符长的子串替换为字符串instr</td></tr><tr><td>UPPER(s) 或 UCASE(s)</td><td>将字符串s的所有字母转成大写字母</td></tr><tr><td>LOWER(s) 或LCASE(s)</td><td>将字符串s的所有字母转成小写字母</td></tr><tr><td>LEFT(s,n)</td><td>返回字符串s最左边的n个字符</td></tr><tr><td>RIGHT(s,n)</td><td>返回字符串s最右边的n个字符</td></tr><tr><td>LPAD(str, len, pad)</td><td>用字符串pad对str最左边进行填充，直到str的长度为len个字符</td></tr><tr><td>RPAD(str ,len, pad)</td><td>用字符串pad对str最右边进行填充，直到str的长度为len个字符</td></tr><tr><td>LTRIM(s)</td><td>去掉字符串s左侧的空格</td></tr><tr><td>RTRIM(s)</td><td>去掉字符串s右侧的空格</td></tr><tr><td>TRIM(s)</td><td>去掉字符串s开始与结尾的空格</td></tr><tr><td>TRIM(【BOTH 】s1 FROM s)</td><td>去掉字符串s开始与结尾的s1</td></tr><tr><td>TRIM(LEADING s1 FROM s)</td><td>去掉字符串s开始处的s1</td></tr><tr><td>TRIM(TRAILING s1 FROM s)</td><td>去掉字符串s结尾处的s1</td></tr><tr><td>REPEAT(str, n)</td><td>返回str重复n次的结果</td></tr><tr><td>REPLACE（str, a, b）</td><td>用字符串b替换字符串str中所有出现的字符串a</td></tr><tr><td>STRCMP(s1,s2)</td><td>比较字符串s1,s2</td></tr><tr><td><mark>SUBSTRING(s,index,len)</mark></td><td>返回从字符串s的index位置其len个字符</td></tr></tbody></table><ul><li><strong>举例1：大小写控制函数</strong></li></ul><table><thead><tr><th>函数</th><th>结果</th></tr></thead><tbody><tr><td><strong>LOWER(&#39;SQL Course&#39;)</strong></td><td><strong>sql course</strong></td></tr><tr><td><strong>UPPER(&#39;SQL Course&#39;)</strong></td><td><strong>SQL COURSE</strong></td></tr></tbody></table><blockquote><p>这类函数改变字符的大小写。</p></blockquote><ul><li><strong>举例2：字符控制函数</strong></li></ul><table><thead><tr><th>函数</th><th>结果</th></tr></thead><tbody><tr><td><strong>CONCAT(&#39;Hello&#39;,&#39;World&#39;)</strong></td><td><strong>HelloWorld</strong></td></tr><tr><td><strong>SUBSTR(&#39;HelloWorld&#39;,1,5)</strong></td><td><strong>Hello</strong></td></tr><tr><td><strong>LENGTH(&#39;HelloWorld&#39;)</strong></td><td><strong>10</strong></td></tr><tr><td><strong>INSTR(&#39;HelloWorld&#39;,&#39;W&#39;)</strong></td><td><strong>6</strong></td></tr><tr><td><strong>LPAD(salary,10,&#39;*&#39;)</strong></td><td><strong>*****24000</strong></td></tr><tr><td><strong>RPAD(salary,10, &#39;*&#39;)</strong></td><td><strong>24000*<em>*</em>***</strong></td></tr><tr><td><strong>TRIM(&#39;H&#39; FROM &#39;HelloWorld&#39;)</strong></td><td><strong>elloWorld</strong></td></tr><tr><td><strong>REPLACE(&#39;abcd&#39;,&#39;b&#39;,&#39;m&#39;)</strong></td><td><strong>amcd</strong></td></tr></tbody></table><h4 id="_2-5-3-数值函数" tabindex="-1"><a class="header-anchor" href="#_2-5-3-数值函数"><span>2.5.3 数值函数</span></a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>ABS(x)</td><td>返回x的绝对值</td></tr><tr><td>CEIL(x)</td><td>返回大于x的最小整数值</td></tr><tr><td>FLOOR(x)</td><td>返回小于x的最大整数值</td></tr><tr><td>MOD(x,y)</td><td>返回x/y的模</td></tr><tr><td>RAND()</td><td>返回0~1的随机值</td></tr><tr><td>ROUND(x,y)</td><td>返回参数x的四舍五入的有y位的小数的值</td></tr><tr><td>TRUNCATE(x,y)</td><td>返回数字x截断为y位小数的结果</td></tr><tr><td>SQRT(x)</td><td>返回x的平方根</td></tr><tr><td>POW(x,y)</td><td>返回x的y次方</td></tr></tbody></table><ul><li><strong>举例1：ROUND:四舍五入</strong></li></ul><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>ROUND(45.926, 2)     --&gt;  45.93</span></span></code></pre></div><ul><li><strong>举例2：TRUNCATE:截断</strong></li></ul><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>TRUNCATE(45.926)      --&gt; 45</span></span></code></pre></div><ul><li><strong>举例3：MOD:求余</strong></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">MOD(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1600</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">300</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)	 </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--&gt; 100</span></span></code></pre></div><h4 id="_2-5-4-日期函数" tabindex="-1"><a class="header-anchor" href="#_2-5-4-日期函数"><span>2.5.4 日期函数</span></a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td><strong>CURDATE()</strong> 或 CURRENT_DATE()</td><td>返回当前日期</td></tr><tr><td><strong>CURTIME()</strong> 或 CURRENT_TIME()</td><td>返回当前时间</td></tr><tr><td><strong>NOW()</strong> / SYSDATE() / CURRENT_TIMESTAMP() / LOCALTIME() / LOCALTIMESTAMP()</td><td>返回当前系统日期时间</td></tr><tr><td><strong>YEAR(date) / MONTH(date) / DAY(date) / HOUR(time) / MINUTE(time) / SECOND(time)</strong></td><td>返回具体的时间值</td></tr><tr><td>WEEK(date) / WEEKOFYEAR(date)</td><td>返回一年中的第几周</td></tr><tr><td>DAYOFWEEK(date)</td><td>返回周几，注意：周日是1，周一是2，。。。周六是7</td></tr><tr><td>WEEKDAY(date)</td><td>返回周几，注意，周1是0，周2是1，。。。周日是6</td></tr><tr><td>DAYNAME(date)</td><td>返回星期：MONDAY,TUESDAY.....SUNDAY</td></tr><tr><td>MONTHNAME(date)</td><td>返回月份：January，。。。。。</td></tr><tr><td>DATEDIFF(date1,date2) / TIMEDIFF(time1, time2)</td><td>返回date1 - date2的日期间隔 / 返回time1 - time2的时间间隔</td></tr><tr><td>DATE_ADD(datetime, INTERVAL expr type)</td><td>返回与给定日期时间相差INTERVAL时间段的日期时间</td></tr><tr><td>DATE_FORMAT(datetime ,fmt)</td><td>按照字符串fmt格式化日期datetime值</td></tr><tr><td>STR_TO_DATE(str, fmt)</td><td>按照字符串fmt对str进行解析，解析为一个日期</td></tr></tbody></table><p>其中：</p><p><strong>（1）DATE_ADD(datetime,INTERVAL expr type)</strong></p><p>表达式类型：</p><table><thead><tr><th>参数类型</th><th>参数类型</th></tr></thead><tbody><tr><td>YEAR</td><td>YEAR_MONTH</td></tr><tr><td>MONTH</td><td>DAY_HOUR</td></tr><tr><td>DAY</td><td>DAY_MINUTE</td></tr><tr><td>HOUR</td><td>DAY_SECOND</td></tr><tr><td>MINUTE</td><td>HOUR_MINUTE</td></tr><tr><td>SECOND</td><td>HOUR_SECOND</td></tr><tr><td></td><td>MINUTE_SECOND</td></tr></tbody></table><p>举例：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DATE_ADD(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOW</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(), INTERVAL </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> YEAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DATE_ADD(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOW</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(), INTERVAL -</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> YEAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);   #可以是负数</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DATE_ADD(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOW</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(), INTERVAL </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;1_1&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> YEAR_MONTH);   #需要单引号</span></span></code></pre></div><p><strong>（2）DATE_FORMAT(datetime,fmt) 和 STR_TO_DATE(str, fmt)</strong></p><table><thead><tr><th>格式符</th><th>说明</th><th>格式符</th><th>说明</th></tr></thead><tbody><tr><td><code>%</code>Y</td><td>4位数字表示年份</td><td><code>%</code>y</td><td>表示两位数字表示年份</td></tr><tr><td><code>%</code>M</td><td>月名表示月份（January,....）</td><td><code>%</code>m</td><td>两位数字表示月份（01,02,03。。。）</td></tr><tr><td><code>%</code>b</td><td>缩写的月名（Jan.，Feb.，....）</td><td><code>%</code>c</td><td>数字表示月份（1,2,3,...）</td></tr><tr><td><code>%</code>D</td><td>英文后缀表示月中的天数（1st,2nd,3rd,...）</td><td><code>%</code>d</td><td>两位数字表示月中的天数(01,02...)</td></tr><tr><td><code>%</code>e</td><td>数字形式表示月中的天数（1,2,3,4,5.....）</td><td></td><td></td></tr><tr><td><code>%</code>H</td><td>两位数字表示小数，24小时制（01,02..）</td><td><code>%</code>h和<code>%</code>I</td><td>两位数字表示小时，12小时制（01,02..）</td></tr><tr><td><code>%</code>k</td><td>数字形式的小时，24小时制(1,2,3)</td><td><code>%</code>l</td><td>数字形式表示小时，12小时制（1,2,3,4....）</td></tr><tr><td><code>%</code>i</td><td>两位数字表示分钟（00,01,02）</td><td><code>%</code>S和<code>%</code>s</td><td>两位数字表示秒(00,01,02...)</td></tr><tr><td><code>%</code>W</td><td>一周中的星期名称（Sunday...）</td><td><code>%</code>a</td><td>一周中的星期缩写（Sun.，Mon.,Tues.，..）</td></tr><tr><td><code>%</code>w</td><td>以数字表示周中的天数(0=Sunday,1=Monday....)</td><td></td><td></td></tr><tr><td><code>%</code>j</td><td>以3位数字表示年中的天数(001,002...)</td><td><code>%</code>U</td><td>以数字表示年中的第几周，（1,2,3。。）其中Sunday为周中第一天</td></tr><tr><td><code>%</code>u</td><td>以数字表示年中的第几周，（1,2,3。。）其中Monday为周中第一天</td><td></td><td></td></tr><tr><td><code>%</code>T</td><td>24小时制</td><td><code>%</code>r</td><td>12小时制</td></tr><tr><td><code>%</code>p</td><td>AM或PM</td><td><code>%\`\`%</code></td><td>表示<code>%</code></td></tr></tbody></table><p>举例：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> STR_TO_DATE(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;09/01/2009&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;%m/%d/%Y&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DUAL;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> STR_TO_DATE(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;20140422154706&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;%Y%m%d%H%i%s&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DUAL;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> STR_TO_DATE(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;2014-04-22 15:47:06&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;%Y-%m-%d %H:%i:%s&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> DUAL;</span></span></code></pre></div><h4 id="_2-5-5-流程函数" tabindex="-1"><a class="header-anchor" href="#_2-5-5-流程函数"><span>2.5.5 流程函数</span></a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>IF(value,t ,f)</td><td>如果value是真，返回t，否则返回f</td></tr><tr><td>IFNULL(value1, value2)</td><td>如果value1不为空，返回value1，否则返回value2</td></tr><tr><td>CASE WHEN 条件1 THEN result1 WHEN 条件2 THEN result2 .... [ELSE resultn] END</td><td>相当于Java的if...else if...else...</td></tr><tr><td>CASE expr WHEN 常量值1 THEN 值1 WHEN 常量值1 THEN 值1 .... [ELSE 值n] END</td><td>相当于Java的switch...case...</td></tr></tbody></table><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id,salary, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">CASE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> WHEN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> salary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15000</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;高薪&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">				  WHEN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> salary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10000</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;潜力股&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">				  WHEN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> salary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">8000</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;屌丝&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">				  ELSE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;草根&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> END</span><span style="color:#98C379;--shiki-dark:#98C379;">  &quot;描述&quot;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees;</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> oid</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;">\`status\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">CASE</span><span style="color:#98C379;--shiki-dark:#98C379;"> \`status\`</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> WHEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;未付款&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">								   WHEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;已付款&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">								   WHEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;已发货&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">								   WHEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 4</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;确认收货&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">								   ELSE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;无效订单&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> END</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> t_order;</span></span></code></pre></div><ul><li>举例1：</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">12</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * salary * (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> + </span><span style="color:#C678DD;--shiki-dark:#C678DD;">IFNULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(commission_pct,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees;</span></span></code></pre></div><ul><li>举例2：</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, job_id, salary,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">       CASE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">WHEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;IT_PROG&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">  THEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                   WHEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;ST_CLERK&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> THEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                   WHEN</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;SA_REP&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">   THEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">*salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">       ELSE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      salary </span><span style="color:#C678DD;--shiki-dark:#C678DD;">END</span><span style="color:#98C379;--shiki-dark:#98C379;">     &quot;REVISED_SALARY&quot;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225520.png" alt="1554980865631" tabindex="0" loading="lazy"><figcaption>1554980865631</figcaption></figure><p><strong>练习：查询部门号为 10,20, 30 的员工信息, 若部门号为 10, 则打印其工资的 1.1 倍, 20 号部门, 则打印其工资的 1.2 倍, 30 号部门打印其工资的 1.3 倍数。</strong></p><h4 id="_2-5-6-其他函数" tabindex="-1"><a class="header-anchor" href="#_2-5-6-其他函数"><span>2.5.6 其他函数</span></a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>database()</td><td>返回当前数据库名</td></tr><tr><td>version()</td><td>返回当前数据库版本</td></tr><tr><td>user()</td><td>返回当前登录用户名</td></tr><tr><td>password(str)</td><td>返回字符串str的加密版本，41位长的字符串</td></tr><tr><td>md5(str)</td><td>返回字符串str的md5值，也是一种加密方式</td></tr></tbody></table><h3 id="_2-6-分组函数" tabindex="-1"><a class="header-anchor" href="#_2-6-分组函数"><span>2.6 分组函数</span></a></h3><h4 id="_2-6-1-组函数介绍" tabindex="-1"><a class="header-anchor" href="#_2-6-1-组函数介绍"><span>2.6.1 组函数介绍</span></a></h4><ul><li><strong>什么是分组函数</strong></li></ul><p>分组函数作用于一组数据，并对一组数据返回一个值。</p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225517.png" alt="1554980924940" tabindex="0" loading="lazy"><figcaption>1554980924940</figcaption></figure><ul><li><p><strong>组函数类型</strong></p><ul><li><strong>AVG()</strong></li><li><strong>SUM()</strong></li><li><strong>MAX()</strong></li><li><strong>MIN()</strong></li><li>**COUNT() **</li></ul></li><li><p>组函数语法</p></li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225514.png" alt="1554981029920" tabindex="0" loading="lazy"><figcaption>1554981029920</figcaption></figure><h4 id="_2-6-2-avg和sum函数" tabindex="-1"><a class="header-anchor" href="#_2-6-2-avg和sum函数"><span>2.6.2 AVG和SUM函数</span></a></h4><p>可以对<strong>数值型数据</strong>使用AVG 和 SUM 函数。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> AVG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary), </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">MAX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary),</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary), </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">SUM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;%REP%&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225512.png" alt="1554981279723" tabindex="0" loading="lazy"><figcaption>1554981279723</figcaption></figure><h4 id="_2-6-3-min和max函数" tabindex="-1"><a class="header-anchor" href="#_2-6-3-min和max函数"><span>2.6.3 MIN和MAX函数</span></a></h4><p>可以对<strong>任意数据类型</strong>的数据使用 MIN 和 MAX 函数。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(hire_date), </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">MAX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(hire_date)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	  employees;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225510.png" alt="1554981253194" tabindex="0" loading="lazy"><figcaption>1554981253194</figcaption></figure><h4 id="_2-6-4-count函数" tabindex="-1"><a class="header-anchor" href="#_2-6-4-count函数"><span>2.6.4 COUNT函数</span></a></h4><p>COUNT(*)返回表中记录总数,适用于<strong>任意数据类型</strong>。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(*)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	  employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225507.png" alt="1554981241299" tabindex="0" loading="lazy"><figcaption>1554981241299</figcaption></figure><p>•COUNT(expr) 返回<strong>expr不为空</strong>的记录总数。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> COUNT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(commission_pct)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225505.png" alt="1554981328678" tabindex="0" loading="lazy"><figcaption>1554981328678</figcaption></figure><ul><li><p><strong>问题：用count(*)，count(1)谁好呢?</strong></p><p>其实，对于myisam引擎的表是没有区别的。这种引擎内部有一计数器在维护着行数。</p><p>Innodb引擎的表用count(*)直接读行数，效率很低，因为innodb真的要去数一遍。</p></li></ul><h4 id="_2-6-5-group-by" tabindex="-1"><a class="header-anchor" href="#_2-6-5-group-by"><span>2.6.5 GROUP BY</span></a></h4><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225503.png" alt="1554981374920" tabindex="0" loading="lazy"><figcaption>1554981374920</figcaption></figure><p><strong>可以使用GROUP BY子句将表中的数据分成若干组</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> column, group_function(column)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">[WHERE	condition]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">[GROUP BY	group_by_expression]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">[ORDER BY	column]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><blockquote><p><strong>明确：WHERE一定放在FROM后面</strong></p></blockquote><p><strong>在SELECT列表中所有未包含在组函数中的列都应该包含在 GROUP BY子句中</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">AVG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225456.png" alt="1554981539408" tabindex="0" loading="lazy"><figcaption>1554981539408</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225459.png" alt="1554981544191" tabindex="0" loading="lazy"><figcaption>1554981544191</figcaption></figure><p>包含在 GROUP BY 子句中的列不必包含在SELECT 列表中</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">   AVG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225454.png" alt="1554981574152" tabindex="0" loading="lazy"><figcaption>1554981574152</figcaption></figure><p><strong>使用多个列分组</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225452.png" alt="1554981607442" tabindex="0" loading="lazy"><figcaption>1554981607442</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id dept_id, job_id, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">SUM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id, job_id ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225450.png" alt="1554981624864" tabindex="0" loading="lazy"><figcaption>1554981624864</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225448.png" alt="1554981629733" tabindex="0" loading="lazy"><figcaption>1554981629733</figcaption></figure><h4 id="_2-6-6-having" tabindex="-1"><a class="header-anchor" href="#_2-6-6-having"><span>2.6.6 HAVING</span></a></h4><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225446.png" alt="1554981656798" tabindex="0" loading="lazy"><figcaption>1554981656798</figcaption></figure><ul><li><strong>非法使用组函数</strong><ul><li><strong>不能在</strong> <strong>WHERE</strong> <strong>子句中使用组函数。</strong></li><li><strong>可以在</strong> <strong>HAVING</strong> <strong>子句中使用组函数。</strong></li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">AVG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">    AVG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 8000</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225440.png" alt="1554981724375" tabindex="0" loading="lazy"><figcaption>1554981724375</figcaption></figure><p><strong>过滤分组：HAVING子句</strong></p><ol><li>行已经被分组。</li><li>使用了组函数。</li><li>满足HAVING 子句中条件的分组将被显示。</li></ol><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225438.png" alt="1554981808091" tabindex="0" loading="lazy"><figcaption>1554981808091</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">MAX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">HAVING</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">   MAX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225435.png" alt="1554981824564" tabindex="0" loading="lazy"><figcaption>1554981824564</figcaption></figure><h3 id="_2-7-小结" tabindex="-1"><a class="header-anchor" href="#_2-7-小结"><span>2.7 小结</span></a></h3><ul><li>查询的结构</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...,....,...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...,...,....</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 多表的连接条件</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 不包含组函数的过滤条件</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...,...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">HAVING</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 包含组函数的过滤条件</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ... </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ASC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">/</span><span style="color:#C678DD;--shiki-dark:#C678DD;">DESC</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">LIMIT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...,...</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">或</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...,....,...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ... </span><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ... </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 多表的连接条件</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 不包含组函数的过滤条件</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">/</span><span style="color:#C678DD;--shiki-dark:#C678DD;">OR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 不包含组函数的过滤条件</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...,...</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">HAVING</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 包含组函数的过滤条件</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ... </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ASC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">/</span><span style="color:#C678DD;--shiki-dark:#C678DD;">DESC</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">LIMIT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ...,...</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>执行的顺序</li></ul><h2 id="第3章-子查询" tabindex="-1"><a class="header-anchor" href="#第3章-子查询"><span>第3章：子查询</span></a></h2><h3 id="_3-1-基本介绍" tabindex="-1"><a class="header-anchor" href="#_3-1-基本介绍"><span>3.1 基本介绍</span></a></h3><p>实际问题：</p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716225657.png" alt="1554991034688" tabindex="0" loading="lazy"><figcaption>1554991034688</figcaption></figure><hr><ul><li><p><strong>子查询 (内查询) 在主查询之前一次执行完成。</strong></p></li><li><p><strong>子查询的结果被主查询(外查询)使用 。</strong></p></li><li><p><strong>子查询的类型：</strong></p><ul><li><p>单行子查询</p></li><li><p>多行子查询</p></li></ul></li><li><p><strong>注意事项</strong></p><ul><li><strong>子查询要包含在括号内</strong></li><li><strong>将子查询放在比较条件的右侧</strong></li><li>单行操作符对应单行子查询，多行操作符对应多行子查询</li></ul></li></ul><h3 id="_3-2-单行子查询" tabindex="-1"><a class="header-anchor" href="#_3-2-单行子查询"><span>3.2 单行子查询</span></a></h3><h4 id="_3-2-1-单行比较操作符" tabindex="-1"><a class="header-anchor" href="#_3-2-1-单行比较操作符"><span>3.2.1 单行比较操作符</span></a></h4><table><thead><tr><th>操作符</th><th>含义</th></tr></thead><tbody><tr><td>=</td><td>equal to</td></tr><tr><td>&gt;</td><td>greater than</td></tr><tr><td>&gt;=</td><td>greater than or equal to</td></tr><tr><td>&lt;</td><td>less than</td></tr><tr><td>&lt;=</td><td>less than or equal to</td></tr><tr><td>&lt;&gt;</td><td>not equal to</td></tr></tbody></table><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">               (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  last_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;Abel&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p><strong>题目：返回job_id与141号员工相同，salary比143号员工多的员工姓名，job_id和工资</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, job_id, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  job_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> job_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 141</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 143</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p><strong>题目：返回公司工资最少的员工的last_name,job_id和salary</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, job_id, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees);</span></span></code></pre></div><h4 id="_3-2-2-子查询中的-having-子句" tabindex="-1"><a class="header-anchor" href="#_3-2-2-子查询中的-having-子句"><span>3.2.2 子查询中的 HAVING 子句</span></a></h4><ul><li>首先执行子查询。</li><li>向主查询中的HAVING 子句返回结果。</li></ul><p><strong>题目：查询最低工资大于50号部门最低工资的部门id和其最低工资</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">HAVING</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">   MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary) </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                       (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                        FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                        WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h4 id="_3-2-3-子查询中的空值问题" tabindex="-1"><a class="header-anchor" href="#_3-2-3-子查询中的空值问题"><span>3.2.3 子查询中的空值问题</span></a></h4><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name, job_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  job_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> job_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  last_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;Haas&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><blockquote><p><strong>子查询不返回任何行</strong></p></blockquote><h4 id="_3-2-4-非法使用子查询" tabindex="-1"><a class="header-anchor" href="#_3-2-4-非法使用子查询"><span>3.2.4 非法使用子查询</span></a></h4><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">   MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">     employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id);</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150423.png" alt="1554992135819" tabindex="0" loading="lazy"><figcaption>1554992135819</figcaption></figure><blockquote><p><strong>多行子查询使用单行比较符</strong></p></blockquote><h3 id="_3-2-多行子查询" tabindex="-1"><a class="header-anchor" href="#_3-2-多行子查询"><span>3.2 多行子查询</span></a></h3><ul><li><p>返回多行。</p></li><li><p>使用多行比较操作符。</p></li></ul><table><thead><tr><th>操作符</th><th>含义</th></tr></thead><tbody><tr><td>IN</td><td>等于列表中的<strong>任意一个</strong></td></tr><tr><td>ANY</td><td>和子查询返回的<strong>某一个</strong>值比较</td></tr><tr><td>ALL</td><td>和子查询返回的<strong>所有</strong>值比较</td></tr></tbody></table><blockquote><p>体会any和all的区别</p></blockquote><h4 id="_3-2-1-使用any或all操作符" tabindex="-1"><a class="header-anchor" href="#_3-2-1-使用any或all操作符"><span>3.2.1 使用ANY或ALL操作符</span></a></h4><p><strong>题目：返回其它job_id中比job_id为‘IT_PROG’部门任一工资低的员工的员工号、姓名、job_id 以及salary</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150419.png" alt="1554992658876" tabindex="0" loading="lazy"><figcaption>1554992658876</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150413.png" alt="1554992664594" tabindex="0" loading="lazy"><figcaption>1554992664594</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150416.png" alt="1554992668429" tabindex="0" loading="lazy"><figcaption>1554992668429</figcaption></figure><p><strong>题目：返回其它job_id中比job_id为‘IT_PROG’部门所有工资都低的员工的员工号、姓名、job_id以及salary</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150410.png" alt="1554992753654" tabindex="0" loading="lazy"><figcaption>1554992753654</figcaption></figure><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150407.png" alt="1554992759467" tabindex="0" loading="lazy"><figcaption>1554992759467</figcaption></figure><h4 id="_3-2-2-空值问题" tabindex="-1"><a class="header-anchor" href="#_3-2-2-空值问题"><span>3.2.2 空值问题</span></a></h4><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150403.png" alt="1554992822094" tabindex="0" loading="lazy"><figcaption>1554992822094</figcaption></figure><h3 id="_3-3-相关子查询" tabindex="-1"><a class="header-anchor" href="#_3-3-相关子查询"><span>3.3 相关子查询</span></a></h3><p>相关子查询按照一行接一行的顺序执行，主查询的每一行都执行一次子查询。</p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716150351.png" alt="1554992898234" tabindex="0" loading="lazy"><figcaption>1554992898234</figcaption></figure><p>说明：<strong>子查询中使用主查询中的列</strong></p><p><strong>题目：查询员工中工资大于本部门平均工资的员工的last_name,salary和其department_id</strong></p><p><strong>方式一：相关子查询</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200716234305.png" alt="image-20200716234305456" tabindex="0" loading="lazy"><figcaption>image-20200716234305456</figcaption></figure><p><strong>方式二：在from中使用子查询</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> last_name,salary,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">e1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e1,(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id,</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">AVG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(salary) dept_avg_sal </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees </span><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id) e2</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> e1.</span><span style="color:#98C379;--shiki-dark:#98C379;">\`department_id\`</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AND</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">dept_avg_sal</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &lt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> e1.</span><span style="color:#98C379;--shiki-dark:#98C379;">\`salary\`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p><strong>题目：查询员工的id,salary,按照department_name 排序</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id,salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ORDER BY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">	  SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">	  FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">	  WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> e.</span><span style="color:#98C379;--shiki-dark:#98C379;">\`department_id\`</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> d.</span><span style="color:#98C379;--shiki-dark:#98C379;">\`department_id\`</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	);</span></span></code></pre></div><h3 id="_3-4-exists操作符" tabindex="-1"><a class="header-anchor" href="#_3-4-exists操作符"><span>3.4 EXISTS操作符</span></a></h3><ul><li><p>EXISTS 操作符检查在子查询中是否存在满足条件的行</p></li><li><p><strong>如果在子查询中存在满足条件的行：</strong></p><ul><li>不在子查询中继续查找</li><li>条件返回 TRUE</li></ul></li><li><p><strong>如果在子查询中不存在满足条件的行：</strong></p><ul><li>条件返回 FALSE</li><li>继续在子查询中查找</li></ul></li></ul><p><strong>题目：查询公司管理者的employee_id,last_name,job_id,department_id信息</strong></p><p>方式一：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name, job_id, department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#C678DD;--shiki-dark:#C678DD;">  EXISTS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ( </span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;X&#39;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e2</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  e2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">manager_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">                        e1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p>方式二：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT DISTINCT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">last_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">job_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">e1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees e1 </span><span style="color:#C678DD;--shiki-dark:#C678DD;">JOIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e2</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">manager_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><p>方式三：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id,last_name,job_id,department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">IN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">		     SELECT DISTINCT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> manager_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">		     FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">		     </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">		     );</span></span></code></pre></div><p><strong>题目：查询departments表中，不存在于employees表中的部门的department_id和department_name</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id, department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NOT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> EXISTS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;X&#39;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                  FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                  WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717001944.png" alt="image-20200717001944051" tabindex="0" loading="lazy"><figcaption>image-20200717001944051</figcaption></figure><h3 id="_3-5-相关更新" tabindex="-1"><a class="header-anchor" href="#_3-5-相关更新"><span>3.5 相关更新</span></a></h3><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> table1 alias1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    column </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> expression</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   table2 alias2</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                 WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  alias1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> alias2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p>使用相关子查询依据一个表中的数据更新另一个表的数据。</p><p>练习：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">）</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ADD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(department_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">14</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">）</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    department_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_name </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">	                       FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">	                       WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h3 id="_3-6-相关删除" tabindex="-1"><a class="header-anchor" href="#_3-6-相关删除"><span>3.6 相关删除</span></a></h3><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;"> DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> table1 alias1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;"> WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> column operator (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> expression</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                        FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   table2 alias2</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">                        WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  alias1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> alias2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">column</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><p><strong>使用相关子查询依据一个表中的数据删除另一个表的数据</strong></p><p><strong>题目：删除表employees中，其与emp_history表皆有的数据</strong></p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">           (</span><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   emp_history </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">employee_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h2 id="第4章-创建和管理表-ddl" tabindex="-1"><a class="header-anchor" href="#第4章-创建和管理表-ddl"><span>第4章：创建和管理表 ---DDL</span></a></h2><h3 id="_4-1-创建和删除数据库" tabindex="-1"><a class="header-anchor" href="#_4-1-创建和删除数据库"><span>4.1 创建和删除数据库</span></a></h3><ul><li>创建一个保存员工信息的数据库</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">create</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> database</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> employees</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><blockquote><p>注意：database不能改名。一些可视化工具可以改名，它是建新库,把所有表复制到新库,再删旧库完成的。</p></blockquote><ul><li>查看当前所有的数据库</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">show databases;</span></span></code></pre></div><ul><li>使用指定的某个数据库</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">use</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 数据库名;</span></span></code></pre></div><ul><li>查看指定库下所有的表</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">show tables </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 数据库名;</span></span></code></pre></div><ul><li>删除指定的数据库</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">drop</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> database</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 数据库名;</span></span></code></pre></div><ul><li>查看当前正在使用的数据库</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> DATABASE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">() </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dual;</span></span></code></pre></div><blockquote><p>注意：要操作表格和数据之前必须先说明是对哪个数据库进行操作，否则就要对所有对象加上“数据库名.”。</p></blockquote><h3 id="_4-2-标识符命名规则" tabindex="-1"><a class="header-anchor" href="#_4-2-标识符命名规则"><span>4.2 标识符命名规则</span></a></h3><ul><li>数据库名不得超过30个字符，变量名限制为29个</li><li>必须只能包含 A–Z, a–z, 0–9, _共63个字符</li><li>不能在对象名的字符间留空格</li><li>必须不能和用户定义的其他对象重名</li><li>必须保证你的字段没有和保留字、数据库系统或常用方法冲突</li><li>保持字段名和类型的一致性,在命名字段并为其指定数据类型的时候一定要保证一致性。假如数据类型在一个表里是整数,那在另一个表里就不要变成字符型了</li></ul><h3 id="_4-3-常用的数据类型" tabindex="-1"><a class="header-anchor" href="#_4-3-常用的数据类型"><span>4.3 常用的数据类型</span></a></h3><h4 id="_4-3-1-mysql中的数据类型" tabindex="-1"><a class="header-anchor" href="#_4-3-1-mysql中的数据类型"><span>4.3.1 MySQL中的数据类型</span></a></h4><ul><li><strong>整型（xxxint）</strong></li><li>位类型(bit)</li><li><strong>浮点型</strong>（float和double、real）</li><li>定点数（decimal,numeric）</li><li><strong>日期时间类型</strong>（date,time,datetime,year）</li><li><strong>字符串</strong>（char,varchar,xxxtext）</li><li>二进制数据（xxxBlob、xxbinary）</li><li>枚举（enum）</li><li>集合（set）</li></ul><h4 id="_4-3-2-常用数据类型及其范围" tabindex="-1"><a class="header-anchor" href="#_4-3-2-常用数据类型及其范围"><span>4.3.2 常用数据类型及其范围</span></a></h4><table><thead><tr><th>数据类型</th><th>描述</th></tr></thead><tbody><tr><td>INT</td><td>从-2<sup>31到2</sup>31-1的整型数据。存储大小为 4个字节</td></tr><tr><td>CHAR(<em>size</em>)</td><td>定长字符数据。若未指定，默认为1个字符，最大长度255</td></tr><tr><td>VARCHAR(<em>size</em>)</td><td>可变长字符数据，根据字符串实际长度保存，<strong>必须指定长度</strong></td></tr><tr><td>FLOAT(M,D)</td><td>单精度，M=整数位+小数位，D=小数位。 D&lt;=M&lt;=255,0&lt;=D&lt;=30，默认M+D&lt;=6</td></tr><tr><td>DOUBLE(M,D)</td><td>双精度。D&lt;=M&lt;=255,0&lt;=D&lt;=30，默认M+D&lt;=15</td></tr><tr><td>DATE</td><td>日期型数据，格式’YYYY-MM-DD’</td></tr><tr><td>BLOB</td><td>二进制形式的长文本数据，最大可达4G</td></tr><tr><td>TEXT</td><td>长文本数据，最大可达4G</td></tr></tbody></table><h3 id="_4-4-创建表" tabindex="-1"><a class="header-anchor" href="#_4-4-创建表"><span>4.4 创建表</span></a></h3><h4 id="_4-4-1-创建方式一" tabindex="-1"><a class="header-anchor" href="#_4-4-1-创建方式一"><span>4.4.1 创建方式一</span></a></h4><ul><li><strong>必须具备：</strong><ul><li>CREATE TABLE权限</li><li>存储空间</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> [schema.]</span><span style="color:#C678DD;--shiki-dark:#C678DD;">table</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(column datatype </span><span style="color:#E06C75;--shiki-dark:#E06C75;">[DEFAULT expr][, ...]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li><strong>必须指定：</strong><ul><li>表名</li><li>列名, 数据类型, <strong>尺寸</strong></li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> dept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">deptno </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">dname </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">14</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">loc </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">13</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">DESCRIBE dept;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717002540.png" alt="image-20200717002540577" tabindex="0" loading="lazy"><figcaption>image-20200717002540577</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--创建表</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  --int类型，自增</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  emp_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  --最多保存20个中英文字符</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  emp_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">CHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  --总位数不超过15位</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  salary DOUBLE,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  --日期类型</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  birthday </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  --主键</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (emp_id)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) ;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717002619.png" alt="image-20200717002619386" tabindex="0" loading="lazy"><figcaption>image-20200717002619386</figcaption></figure><ul><li>查看表的定义：</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">SHOW </span><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 表名;</span></span></code></pre></div><h4 id="_4-4-2-创建方式二-基于现有的表" tabindex="-1"><a class="header-anchor" href="#_4-4-2-创建方式二-基于现有的表"><span>4.4.2 创建方式二：基于现有的表</span></a></h4><ul><li><p>使用 AS subquery 选项，<strong>将创建表和插入数据结合起来</strong></p><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717002700.png" alt="image-20200717002700289" tabindex="0" loading="lazy"><figcaption>image-20200717002700289</figcaption></figure></li><li><p>指定的列和子查询中的列要一一对应</p></li><li><p>通过列名和默认值定义列</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">create</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp1</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> as</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">create</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp2</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> as</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees </span><span style="color:#C678DD;--shiki-dark:#C678DD;">where</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--创建的emp2是空表</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> dept80</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id, last_name, salary*</span><span style="color:#D19A66;--shiki-dark:#D19A66;">12</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ANNSAL, hire_date</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 80</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">DESCRIBE dept80;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717002857.png" alt="image-20200717002857080" tabindex="0" loading="lazy"><figcaption>image-20200717002857080</figcaption></figure><h3 id="_4-5-修改表" tabindex="-1"><a class="header-anchor" href="#_4-5-修改表"><span>4.5 修改表</span></a></h3><p><strong>使用 ALTER TABLE 语句可以实现：</strong></p><ul><li><p>向已有的表中添加列</p></li><li><p>修改现有表中的列</p></li><li><p>删除现有表中的列</p></li><li><p>重命名现有表中的列</p></li></ul><h4 id="_4-5-1-追加一个列" tabindex="-1"><a class="header-anchor" href="#_4-5-1-追加一个列"><span>4.5.1 追加一个列</span></a></h4><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dept80 </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ADD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717002922.png" alt="image-20200717002921887" tabindex="0" loading="lazy"><figcaption>image-20200717002921887</figcaption></figure><h4 id="_4-5-2-修改一个列" tabindex="-1"><a class="header-anchor" href="#_4-5-2-修改一个列"><span>4.5.2 修改一个列</span></a></h4><ul><li>可以修改列的数据类型, 尺寸和默认值</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	dept80</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">MODIFY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (last_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">));</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	dept80</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">MODIFY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">		(salary double(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">9</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">default</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 1000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>对默认值的修改只影响今后对表的修改</li></ul><h4 id="_4-5-3-重命名一个列" tabindex="-1"><a class="header-anchor" href="#_4-5-3-重命名一个列"><span>4.5.3 重命名一个列</span></a></h4><p>使用 CHANGE old_column new_column dataType子句重命名列。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  dept80</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">CHANGE department_name dept_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h4 id="_4-5-4-删除一个列" tabindex="-1"><a class="header-anchor" href="#_4-5-4-删除一个列"><span>4.5.4 删除一个列</span></a></h4><p>使用 DROP COLUMN 子句删除不再需要的列。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  dept80</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> COLUMN  job_id;</span></span></code></pre></div><h3 id="_4-6-重命名表" tabindex="-1"><a class="header-anchor" href="#_4-6-重命名表"><span>4.6 重命名表</span></a></h3><ul><li><p>执行RENAME语句改变表, 视图的名称</p><ul><li>方式一：</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">RENAME </span><span style="color:#C678DD;--shiki-dark:#C678DD;">TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">TO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> myemp;</span></span></code></pre></div><ul><li>方式二：</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dept</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">RENAME </span><span style="color:#E06C75;--shiki-dark:#E06C75;">[TO]</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> detail_dept;  </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- [TO]可以省略</span></span></code></pre></div></li><li><p>必须是对象的拥有者</p></li></ul><h3 id="_4-7-删除表" tabindex="-1"><a class="header-anchor" href="#_4-7-删除表"><span>4.7 删除表</span></a></h3><ul><li><p>数据和结构都被删除</p></li><li><p>所有正在运行的相关事务被提交</p></li><li><p>所有相关索引被删除</p></li><li><p>DROP TABLE 语句不能回滚</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dept80;</span></span></code></pre></div><h3 id="_4-8-清空表" tabindex="-1"><a class="header-anchor" href="#_4-8-清空表"><span>4.8 清空表</span></a></h3><ul><li>TRUNCATE TABLE语句: <ul><li>删除表中所有的数据</li><li>释放表的存储空间</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">TRUNCATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> detail_dept;</span></span></code></pre></div><ul><li><p>TRUNCATE语句<strong>不能回滚</strong></p></li><li><p>可以使用 DELETE 语句删除数据,可以回滚</p></li><li><p>对比：</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> autocommit </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> false;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  delete</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp2;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp2;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  rollback</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">  select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp2;</span></span></code></pre></div><h2 id="第5章-数据库事务" tabindex="-1"><a class="header-anchor" href="#第5章-数据库事务"><span>第5章：数据库事务</span></a></h2><h3 id="_5-1-什么是事务" tabindex="-1"><a class="header-anchor" href="#_5-1-什么是事务"><span>5.1 什么是事务</span></a></h3><ul><li><p>**事务：<strong>一组逻辑操作单元</strong>,**使数据从一种状态变换到另一种状态。</p></li><li><p>数据库事务由以下的部分组成:</p><ul><li><strong>一个或多个DML 语句</strong></li><li>一个 DDL(Data Definition Language – 数据定义语言) 语句</li><li>一个 DCL(Data Control Language – 数据控制语言) 语句</li></ul></li></ul><h3 id="_5-2-如何处理事务" tabindex="-1"><a class="header-anchor" href="#_5-2-如何处理事务"><span>5.2 如何处理事务</span></a></h3><ul><li><p><strong>事务处理</strong>（事务操作）：<strong>保证所有事务都作为一个工作单元来执行，即使出现了故障，都不能改变这种执行方式。当在一个事务中执行多个操作时，要么所有的事务都被提交(commit)，那么这些修改就永久地保存下来；要么数据库管理系统将放弃所作的所有修改，整个事务回滚(rollback)到最初状态。</strong></p></li><li><p>为确保数据库中数据的<strong>一致性</strong>,数据的操纵应当是离散的成组的逻辑单元:当它全部完成时,数据的一致性可以保持,而当这个单元中的一部分操作失败,整个事务应全部视为错误,所有从起始点以后的操作应全部回退到开始状态。</p></li><li><p>当一个连接对象被创建时，默认情况下是自动提交事务：每次执行一个SQL 语句时，如果执行成功，就会向数据库自动提交，而不能回滚。</p></li><li><p><strong>具体过程：</strong></p><ol><li><strong>设置提交状态：SET AUTOCOMMIT = FALSE;</strong></li><li>以第一个 DML 语句的执行作为开始</li><li>以下面的其中之一作为结束: <ul><li><strong>COMMIT或ROLLBACK语句</strong></li><li>DDL 语句（<strong>自动提交</strong>）</li><li>用户会话正常结束</li><li>系统异常终止</li></ul></li></ol></li><li><p><strong>COMMIT和ROLLBACK语句的优点</strong></p><ul><li><strong>确保数据完整性。</strong></li><li>数据改变被提交之前预览。</li><li>将逻辑上相关的操作分组。</li></ul></li></ul><blockquote><p><strong>数据完整性</strong>：</p><p>​ 存储在数据库中的所有数据值均处于正确的状态。如果数据库中存储有不正确的数据值，则该数据库称为已丧失数据完整性。</p><p><strong>数据库采用多种方法来保证数据完整性，包括外键、束约、规则和触发器。</strong></p></blockquote><ul><li><p><strong>提交或回滚前的数据状态</strong></p><ul><li>改变前的数据状态是可以恢复的</li><li>执行 DML 操作的用户可以通过 SELECT 语句查询提交或回滚之前的修正</li><li>其他用户不能看到当前用户所做的改变，直到当前用户结束事务。</li><li>DML语句所涉及到的行被锁定， 其他用户不能操作。</li></ul></li><li><p><strong>提交后的数据状态</strong></p><ul><li>数据的改变已经被保存到数据库中。</li><li>改变前的数据已经丢失。</li><li>所有用户可以看到结果。</li><li>锁被释放， 其他用户可以操作涉及到的数据。</li></ul></li><li><p><strong>数据回滚后的状态</strong></p><p>使用 ROLLBACK 语句可使数据变化失效：</p><ul><li><p>数据改变被取消。</p></li><li><p>修改前的数据状态可以被恢复。</p></li></ul></li></ul><h3 id="_5-3-事务的acid属性" tabindex="-1"><a class="header-anchor" href="#_5-3-事务的acid属性"><span>5.3 事务的ACID属性</span></a></h3><ol><li><p><strong>原子性（Atomicity）</strong><br> 原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。</p></li><li><p><strong>一致性（Consistency）</strong><br> 事务必须使数据库从一个一致性状态变换到另外一个一致性状态。</p></li><li><p><strong>隔离性（Isolation）</strong><br> 事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</p></li><li><p><strong>持久性（Durability）</strong><br> 持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</p></li></ol><h3 id="_5-4-数据库的隔离级别" tabindex="-1"><a class="header-anchor" href="#_5-4-数据库的隔离级别"><span>5.4 数据库的隔离级别</span></a></h3><ul><li><p>对于同时运行的多个事务, 当这些事务访问数据库中相同的数据时, 如果没有采取必要的隔离机制, 就会导致各种并发问题:</p><ul><li><strong>脏读</strong>: 对于两个事务 T1, T2, T1 读取了已经被 T2 更新但还<strong>没有被提交</strong>的字段。 之后, 若 T2 回滚, T1读取的内容就是临时且无效的。</li><li><strong>不可重复读</strong>: 对于两个事务T1, T2, T1 读取了一个字段, 然后 T2 <strong>更新</strong>了该字段。 之后, T1再次读取同一个字段, 值就不同了。</li><li><strong>幻读</strong>: 对于两个事务T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中<strong>插入</strong>了一些新的行。 之后, 如果 T1 再次读取同一个表, 就会多出几行。</li></ul></li><li><p><strong>数据库事务的隔离性</strong>：数据库系统必须具有隔离并发运行各个事务的能力, 使它们不会相互影响, 避免各种并发问题。</p></li><li><p>**一个事务与其他事务隔离的程度称为隔离级别。**数据库规定了多种事务隔离级别, 不同隔离级别对应不同的干扰程度, 隔离级别越高, 数据一致性就越好, 但并发性越弱。</p></li><li><p><strong>数据库提供的 4 种事务隔离级别：</strong></p></li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003437.png" alt="image-20200717003437740" tabindex="0" loading="lazy"><figcaption>image-20200717003437740</figcaption></figure><ul><li><p>Oracle 支持的 2 种事务隔离级别：<strong>READ COMMITED</strong>, SERIALIZABLE。 Oracle 默认的事务隔离级别为: READ COMMITED 。</p></li><li><p>Mysql 支持 4 种事务隔离级别。 Mysql 默认的事务隔离级别为: <strong>REPEATABLE READ</strong></p></li><li><p><strong>在MySql中设置隔离级别</strong></p><ul><li>每启动一个 mysql 程序, 就会获得一个单独的数据库连接。每个数据库连接都有一个全局变量 @@tx_isolation, 表示当前的事务隔离级别.</li><li>查看当前的隔离级别: <strong>SELECT @@tx_isolation;</strong></li><li>查看全局的隔离级别: <strong>SELECT @@global.tx_isolation;</strong></li><li>设置当前 mySQL 连接的隔离级别:</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">set</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tx_isolation </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;repeatable-read&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>设置数据库系统的全局的隔离级别:</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">set</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> global</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> tx_isolation </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;read-committed&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><blockquote><p>注意：这里的隔离级别中间是减号，不是下划线。</p></blockquote></li></ul><h2 id="第6章-数据处理之增删改" tabindex="-1"><a class="header-anchor" href="#第6章-数据处理之增删改"><span>第6章：数据处理之增删改</span></a></h2><h3 id="_6-1-插入数据" tabindex="-1"><a class="header-anchor" href="#_6-1-插入数据"><span>6.1 插入数据</span></a></h3><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003501.png" alt="image-20200717003501575" tabindex="0" loading="lazy"><figcaption>image-20200717003501575</figcaption></figure><ul><li>使用 INSERT 语句向表中插入数据。</li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003520.png" alt="image-20200717003520751" tabindex="0" loading="lazy"><figcaption>image-20200717003520751</figcaption></figure><ul><li>使用这种语法一次只能向表中插入<strong>一条</strong>数据。</li><li>为每一列添加一个新值。</li><li>按列的默认顺序列出各个列的值。</li><li>在 INSERT 子句中随意列出列名和他们的值。</li><li>VALUES也可以写成VALUE，但是VALUES是标准写法。</li><li><strong>字符和日期型数据应包含在单引号中</strong>。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments(department_id, department_name, </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">                        manager_id, location_id)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">70</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Pub&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1700</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li><p><strong>向表中插入空值</strong></p><ul><li>隐式方式：在列名表中省略该列的值。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	departments (department_id,department_name )</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> (</span><span style="color:#D19A66;--shiki-dark:#D19A66;">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Purchasing&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>显示方式：在VALUES 子句中指定空值。</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	departments</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">		(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Finance&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li><strong>同时插入多行数据</strong></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">VALUES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Tom&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Jerry&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),(</span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;Rose&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li><strong>从其它表中拷贝数据</strong><ul><li>在 INSERT 语句中加入子查询。</li><li><strong>不必书写</strong> <strong>VALUES</strong> <strong>子句。</strong></li><li>子查询中的值列表应与 INSERT 子句中的列名对应。</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp2 </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 90</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">INSERT INTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sales_reps(id, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, salary, commission_pct)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id, last_name, salary, commission_pct</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  job_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">LIKE</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;%REP%&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="_6-2-更新数据" tabindex="-1"><a class="header-anchor" href="#_6-2-更新数据"><span>6.2 更新数据</span></a></h3><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003621.png" alt="image-20200717003620920" tabindex="0" loading="lazy"><figcaption>image-20200717003620920</figcaption></figure><ul><li>使用 UPDATE 语句更新数据。</li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003638.png" alt="image-20200717003638740" tabindex="0" loading="lazy"><figcaption>image-20200717003638740</figcaption></figure><ul><li><p>可以一次更新<strong>多条</strong>数据。</p></li><li><p>如果需要回滚数据，需要保证在DML前，进行设置：<strong>SET AUTOCOMMIT = FALSE;</strong></p></li></ul><hr><ul><li>使用 <strong>WHERE</strong> 子句指定需要更新的数据。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 70</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 113</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>如果省略 WHERE 子句，则表中的所有数据都将被更新。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 	copy_emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    	department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 110</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li><strong>更新中的数据完整性错误</strong></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 55</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 110</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003724.png" alt="image-20200717003724463" tabindex="0" loading="lazy"><figcaption>image-20200717003724463</figcaption></figure><blockquote><p>说明：不存在 55 号部门</p></blockquote><h3 id="_6-3-删除数据" tabindex="-1"><a class="header-anchor" href="#_6-3-删除数据"><span>6.3 删除数据</span></a></h3><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003741.png" alt="image-20200717003741604" tabindex="0" loading="lazy"><figcaption>image-20200717003741604</figcaption></figure><ul><li>使用 DELETE 语句从表中删除数据</li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003756.png" alt="image-20200717003756085" tabindex="0" loading="lazy"><figcaption>image-20200717003756085</figcaption></figure><ul><li>使用 WHERE 子句删除指定的记录。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  department_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;Finance&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>如果省略 WHERE 子句，则表中的全部数据将被删除</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  copy_emp;</span></span></code></pre></div><ul><li><strong>删除中的数据完整性错误</strong></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DELETE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> departments</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">       department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 60</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717003824.png" alt="image-20200717003824226" tabindex="0" loading="lazy"><figcaption>image-20200717003824226</figcaption></figure><blockquote><p>说明：You cannot delete a row that contains a primary key that is used as a foreign key in another table.</p></blockquote><h2 id="第7章-约束-constraint" tabindex="-1"><a class="header-anchor" href="#第7章-约束-constraint"><span>第7章：约束(constraint)</span></a></h2><h3 id="_7-1-什么是约束" tabindex="-1"><a class="header-anchor" href="#_7-1-什么是约束"><span>7.1 什么是约束</span></a></h3><ul><li>为了保证数据的一致性和完整性，SQL规范以约束的方式对<strong>表数据进行额外的条件限制</strong>。 <ul><li>实体完整性（Entity Integrity）：例如，同一个表中，不能存在两条完全相同无法区分的记录</li><li>域完整性（Domain Integrity）：例如：年龄范围0-120，性别范围“男/女”</li><li>引用完整性（Referential Integrity）：例如：员工所在部门，在部门表中要能找到这个部门</li><li>用户自定义完整性（User-defined Integrity）：例如：用户名唯一、密码不能为空等，本部门经理的工资不得高于本部门职工的平均工资的5倍。</li></ul></li><li>约束是表级的强制规定</li><li>可以在<strong>创建表时规定约束（通过 CREATE TABLE 语句）</strong>，或者在<strong>表创建之后也可以（通过 ALTER TABLE 语句）</strong></li><li>**根据约束数据列的限制，**约束可分为： <ul><li><strong>单列约束</strong>：每个约束只约束一列</li><li><strong>多列约束</strong>：每个约束可约束多列数据</li></ul></li><li><strong>根据约束的作用范围</strong>，约束可分为： <ul><li><strong>列级约束</strong>：只能作用在一个列上，跟在列的定义后面</li><li><strong>表级约束</strong>：可以作用在多个列上，不与列一起，而是单独定义</li></ul></li><li><strong>根据约束起的作用</strong>，约束可分为： <ul><li><strong>NOT NULL</strong> <strong>非空约束，规定某个字段不能为空</strong></li><li><strong>UNIQUE</strong> <strong>唯一约束</strong>，<strong>规定某个字段在整个表中是唯一的</strong></li><li><strong>PRIMARY KEY 主键(非空且唯一)约束</strong></li><li><strong>FOREIGN KEY</strong> <strong>外键约束</strong></li><li><strong>CHECK</strong> <strong>检查约束</strong></li><li><strong>DEFAULT</strong> <strong>默认值约束</strong></li></ul></li></ul><blockquote><p>注意： MySQL不支持check约束，但可以使用check约束，而没有任何效果</p></blockquote><ul><li>查看某个表已有的约束</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> * </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> information_schema</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">table_constraints</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> table_name </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;employees&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="_7-2-not-null约束" tabindex="-1"><a class="header-anchor" href="#_7-2-not-null约束"><span>7.2 NOT NULL约束</span></a></h3><ul><li>not null：<strong>保证列值不能为空</strong></li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004006.png" alt="image-20200717004006290" tabindex="0" loading="lazy"><figcaption>image-20200717004006290</figcaption></figure><ul><li><p>非空约束用于确保当前列的值不为空值，非空约束只能出现在表对象的列上。</p></li><li><p>Null类型特征：</p><ul><li>所有的类型的值都可以是null，包括int、float等数据类型</li><li>空字符串&#39;&#39;不等于null，0也不等于null</li></ul></li><li><p><strong>创建 not null 约束</strong></p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;abc&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">sex </span><span style="color:#C678DD;--shiki-dark:#C678DD;">CHAR</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li><strong>增加 not null 约束</strong></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">MODIFY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sex </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>取消 not null 约束</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">MODIFY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> sex </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>取消 not null 约束，增加默认值</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">MODIFY</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;abc&#39;</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><h3 id="_7-3-unique约束" tabindex="-1"><a class="header-anchor" href="#_7-3-unique约束"><span>7.3 UNIQUE约束</span></a></h3><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004106.png" alt="image-20200717004106262" tabindex="0" loading="lazy"><figcaption>image-20200717004106262</figcaption></figure><ul><li><p>同一个表可以有多个唯一约束。</p></li><li><p>唯一约束可以是某一个列的值唯一，也可以多个列组合的值唯一。</p></li><li><p>在创建唯一约束的时候，如果不给唯一约束名称，就默认和列名相同。</p></li><li><p><strong>MySQL会给唯一约束的列上默认创建一个唯一索引。</strong></p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> t_course</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	cid </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	cname </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">UNIQUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">	description</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;"> NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">25</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;"> PASSWORD</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">16</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> --使用表级约束语法</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;"> CONSTRAINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> uk_name_pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD;">UNIQUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#C678DD;--shiki-dark:#C678DD;">PASSWORD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><blockquote><p>表示用户名和密码组合不能重复</p></blockquote><ul><li>添加唯一约束</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> USER </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ADD</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> UNIQUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#C678DD;--shiki-dark:#C678DD;">PASSWORD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> USER </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ADD</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> CONSTRAINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> uk_name_pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD;">UNIQUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#C678DD;--shiki-dark:#C678DD;">PASSWORD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> USER </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">MODIFY</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">UNIQUE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li><p>删除约束</p><ul><li>删除唯一约束只能通过删除唯一索引的方式删除。</li><li>删除时需要指定唯一索引名，唯一索引名就和唯一约束名一样。</li><li>如果创建唯一约束时未指定名称，如果是单列，就默认和列名相同，如果是组合列，那么默认和()中排在第一个的列名相同。也可以自定义唯一性约束名。</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> USER </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> INDEX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> uk_name_pwd;</span></span></code></pre></div><blockquote><p>注意：如果忘记名称，可以通过“<strong><code>show index from 表名称</code>;</strong>”查看。</p></blockquote><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004340.png" alt="image-20200717004339934" tabindex="0" loading="lazy"><figcaption>image-20200717004339934</figcaption></figure><h3 id="_7-4-primary-key-约束" tabindex="-1"><a class="header-anchor" href="#_7-4-primary-key-约束"><span>7.4 PRIMARY KEY 约束</span></a></h3><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004401.png" alt="image-20200717004401227" tabindex="0" loading="lazy"><figcaption>image-20200717004401227</figcaption></figure><ul><li><p>主键约束相当于<strong>唯一约束+非空约束的组合</strong>，主键约束列不允许重复，也不允许出现空值</p></li><li><p>如果是多列组合的主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。</p></li><li><p><strong>每个表最多只允许一个主键</strong>，建立主键约束可以在列级别创建，也可以在表级别上创建。</p></li><li><p><strong>MySQL的主键名总是PRIMARY</strong>，就算自己命名了主键约束名也没用。</p></li><li><p>当创建主键约束时，系统默认会在所在的列和列组合上建立对应的<strong>主键索引</strong>。删除主键时，也会直接删除主键索引。</p><ul><li>列级模式</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT ,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>表级模式</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CONSTRAINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp5_id_pk </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(id)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>组合模式</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp6</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">pwd </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CONSTRAINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp7_pk </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,pwd)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div></li><li><p>删除主键约束</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp5</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><blockquote><p>说明：删除主键约束，不需要指定主键名，因为一个表只有一个主键，删除主键约束后，非空还存在。</p></blockquote><ul><li>添加主键约束</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp5</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ADD</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,pwd);</span></span></code></pre></div><ul><li>修改主键约束</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp5</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">MODIFY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li><strong>补充：关于自增长auto_increment的使用</strong><ul><li>整数类型的字段才可以设置自增长</li><li>当需要产生唯一标识符或顺序值时，可设置自增长</li><li><strong>一个表最多只能有一个自增长列</strong></li><li>自增长列必须非空（已经隐式满足了）</li><li><strong>自增长列必须声明有主键约束或唯一性约束</strong></li><li>InnoDB表的自动增长列可以手动插入，但是插入的值如果是空或者0，则实际插入的将是自动增长后的值。</li></ul></li></ul><h3 id="_7-5-foreign-key-约束" tabindex="-1"><a class="header-anchor" href="#_7-5-foreign-key-约束"><span>7.5 FOREIGN KEY 约束</span></a></h3><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004524.png" alt="image-20200717004524480" tabindex="0" loading="lazy"><figcaption>image-20200717004524480</figcaption></figure><ul><li><p><strong>基本理解：</strong></p><ul><li>外键约束是保证一个或两个表之间的参照完整性，外键是构建于一个表的两个字段或是两个表的两个字段之间的参照关系</li><li>同一个表可以有多个外键约束</li><li>从表的外键值必须在主表中能找到或者为空。当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖该记录的数据，然后才可以删除主表的数据</li><li><strong>注意：外键约束的参照列，在主表中引用的只能是主键或唯一键约束的列</strong></li><li>从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样</li></ul></li><li><p><strong>注意点：</strong></p><ul><li>在创建外键约束时，如果不给外键约束名称，<strong>默认名不是列名，而是自动产生一个外键名</strong>（例如 student_ibfk_1;），也可以指定外键约束名。</li><li><strong>当创建外键约束时，系统默认会在所在的列上建立对应的普通索引</strong>。但是索引名是列名，不是外键的约束名。</li><li><strong>删除外键时，关于外键列上的普通索引需要单独删除</strong>。</li><li>还有一种就是级联删除子表数据。</li></ul></li><li><p><strong>创建外键约束</strong></p><ul><li>主表</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> dept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">dept_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">dept_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>从表</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> emp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">emp_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">last_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">dept_id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CONSTRAINT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp_dept_id_fk </span><span style="color:#C678DD;--shiki-dark:#C678DD;">FOREIGN KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(dept_id) </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">REFERENCES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dept(dept_id)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><blockquote><p>– FOREIGN KEY: 在表级指定子表中的列</p><p>– REFERENCES: 标示在父表中的列</p></blockquote></li><li><p><strong>创建多列外键组合，必须使用表级约束</strong></p><ul><li>主表</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> classes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">number</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#C678DD;--shiki-dark:#C678DD;">number</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>从表</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> student</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">classes_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">classes_number </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FOREIGN KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(classes_name,classes_number) </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">REFERENCES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> classes(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#C678DD;--shiki-dark:#C678DD;">number</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div></li><li><p>删除外键约束</p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FOREIGN KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp_dept_id_fk;</span></span></code></pre></div><blockquote><p>说明：外键列上的索引，需要单独删除。比如：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 表名称 </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> INDEX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 外键列索引名; </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> t_emp </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> INDEX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dept_id; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 举例</span></span></code></pre></div><p>查看索引名：</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">show </span><span style="color:#C678DD;--shiki-dark:#C678DD;">index</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> 表名称;</span></span></code></pre></div></blockquote><ul><li>增加外键约束</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ALTER</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> emp</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ADD</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> [CONSTRAINT emp_dept_id_fk]</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> FOREIGN KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(dept_id) </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">REFERENCES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> dept(dept_id);</span></span></code></pre></div><ul><li>关于删除操作：级联删除与级联置空 <ul><li><strong>ON DELETE CASCADE(级联删除)</strong>: 当父表中的列被删除时，子表中相对应的列也被删除</li><li><strong>ON DELETE SET NULL(级联置空)</strong>: 当父表中的列被删除时，子表中相应的列的值置空</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> student</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">( </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">), </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">classes_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">classes_number </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*表级别联合外键*/</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FOREIGN KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(classes_name, classes_number) </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">REFERENCES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> classes(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">number</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ON DELETE CASCADE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>关于修改操作：级联修改与级联置空 <ul><li>**ON UPDATE CASCADE(级联修改)：**当父表中的列值由a修改为b时，子表中相对应的列值为a的改为值b</li><li>**ON UPDATE SET NULL(级联置空)：**子表中相应的列的值置空</li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> student</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">( </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">), </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">classes_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">classes_number </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*表级别联合外键*/</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FOREIGN KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(classes_name, classes_number) </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">REFERENCES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> classes(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">number</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> CASCADE);</span></span></code></pre></div><h3 id="_7-6-check-约束" tabindex="-1"><a class="header-anchor" href="#_7-6-check-约束"><span>7.6 CHECK 约束</span></a></h3><ul><li>MySQL可以使用check约束，但check约束对数据验证没有任何作用,添加数据时，没有任何错误或警告</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> temp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">age </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> CHECK</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(age </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">&gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 20</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(id)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h3 id="_7-7-default约束" tabindex="-1"><a class="header-anchor" href="#_7-7-default约束"><span>7.7 DEFAULT约束</span></a></h3><ul><li>一旦设置默认值，在插入数据时，如果此字段没有显式赋值，则赋值为默认值。</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> TABLE</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> myemp</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">id </span><span style="color:#C678DD;--shiki-dark:#C678DD;">INT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> AUTO_INCREMENT </span><span style="color:#C678DD;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VARCHAR</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">15</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">salary DOUBLE(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">) </span><span style="color:#C678DD;--shiki-dark:#C678DD;">DEFAULT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 2000</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h2 id="第8章-其它数据库对象" tabindex="-1"><a class="header-anchor" href="#第8章-其它数据库对象"><span>第8章：其它数据库对象</span></a></h2><h3 id="_8-1-常见的数据库对象" tabindex="-1"><a class="header-anchor" href="#_8-1-常见的数据库对象"><span>8.1 常见的数据库对象</span></a></h3><table><thead><tr><th>对象</th><th>描述</th></tr></thead><tbody><tr><td>表(TABLE)</td><td><strong>基本的数据存储集合，由行和列组成</strong></td></tr><tr><td>视图(VIEW)</td><td><strong>从表中抽出的逻辑上相关的数据集合</strong></td></tr><tr><td>序列(SEQUENCE)</td><td><strong>提供有规律的数值。</strong></td></tr><tr><td>索引(INDEX)</td><td><strong>提高查询的效率</strong></td></tr><tr><td>同义词(SYNONYM)</td><td><strong>给对象起别名</strong></td></tr></tbody></table><h3 id="_8-2-视图-view" tabindex="-1"><a class="header-anchor" href="#_8-2-视图-view"><span>8.2 视图（VIEW）</span></a></h3><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004736.png" alt="image-20200717004735835" tabindex="0" loading="lazy"><figcaption>image-20200717004735835</figcaption></figure><ul><li><p>视图是一种虚表</p></li><li><p><strong>视图建立在已有表的基础上</strong>, 视图赖以建立的这些表称为<strong>基表</strong></p></li><li><p>向视图提供数据内容的语句为 SELECT 语句, 可以将视图理解为<strong>存储起来的</strong> <strong>SELECT</strong> <strong>语句</strong></p></li><li><p>视图向用户提供基表数据的另一种表现形式</p></li><li><p>为什么使用视图？</p><ul><li>控制数据访问</li><li><strong>简化查询</strong></li><li>避免重复访问相同的数据</li></ul></li><li><p>简单视图和复杂视图</p></li></ul><table><thead><tr><th>特性</th><th>简单视图</th><th>复杂视图</th></tr></thead><tbody><tr><td>表的数量</td><td>一个</td><td>一个或多个</td></tr><tr><td>函数</td><td>没有</td><td>有</td></tr><tr><td>分组</td><td>没有</td><td>有</td></tr><tr><td>DML操作</td><td>可以</td><td>有时可以</td></tr></tbody></table><ul><li><p>创建视图</p><ul><li><strong>在</strong> <strong>CREATE VIEW</strong> <strong>语句中嵌入子查询</strong></li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004818.png" alt="image-20200717004818823" tabindex="0" loading="lazy"><figcaption>image-20200717004818823</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VIEW</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> 	empvu80</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id, last_name, salary</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 80</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>子查询可以是复杂的 SELECT 语句</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">create or replace</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> view</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> empview</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">as</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employee_id emp_id,last_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,department_name</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">from</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e,departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">Where</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div></li><li><p>创建视图时在子查询中给列定义<strong>别名</strong></p></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VIEW</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> salvu50</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id ID_NUMBER, last_name </span><span style="color:#C678DD;--shiki-dark:#C678DD;">NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,salary*</span><span style="color:#D19A66;--shiki-dark:#D19A66;">12</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> ANN_SALARY</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li>描述视图结构</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">DESCRIBE empvu80;</span></span></code></pre></div><blockquote><p>说明：在选择视图中的列时应使用别名</p></blockquote><ul><li>查询视图</li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">	salvu80;</span></span></code></pre></div><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717004844.png" alt="image-20200717004844490" tabindex="0" loading="lazy"><figcaption>image-20200717004844490</figcaption></figure><ul><li><strong>修改视图</strong><ul><li>使用CREATE <strong>OR REPLACE</strong> VIEW 子句<strong>修改视图</strong></li></ul></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE OR REPLACE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VIEW</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;"> empvu80</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(id_number, </span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, sal, department_id)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  employee_id, first_name || </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39; &#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> || last_name, salary, department_id</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> department_id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 80</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><blockquote><p>说明：CREATE VIEW 子句中各列的别名应和子查询中各列相对应。</p></blockquote><ul><li><strong>创建复杂视图</strong></li></ul><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> VIEW</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">	dept_sum_vu</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#C678DD;--shiki-dark:#C678DD;">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, minsal, maxsal, avgsal)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">AS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">SELECT</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">, </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">MIN</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">salary</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">), </span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">MAX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">salary</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">),</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">AVG</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#D19A66;--shiki-dark:#D19A66;">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">salary</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">FROM</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> employees e, departments d</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">WHERE</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">GROUP BY</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  d</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#D19A66;--shiki-dark:#D19A66;">department_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><ul><li><p><strong>视图中使用DML的规定</strong></p><ul><li><p>可以在简单视图中使用DML操作</p></li><li><p>当视图定义中包含以下元素之一时不能使用delete:</p><ul><li>组函数</li><li>GROUP BY 子句</li><li>DISTINCT 关键字</li><li>ROWNUM 伪列</li></ul></li><li><p>当视图定义中包含以下元素之一时不能使用update:</p><ul><li>组函数</li><li>GROUP BY子句</li><li>DISTINCT 关键字</li><li>ROWNUM 伪列</li><li>列的定义为表达式</li></ul></li><li><p>当视图定义中包含以下元素之一时不能使用insert:</p><ul><li>组函数</li><li>GROUP BY 子句</li><li>DISTINCT 关键字</li><li>ROWNUM 伪列</li><li>列的定义为表达式</li><li>表中非空的列在视图定义中未包括</li></ul></li></ul></li><li><p><strong>删除视图</strong></p><p>删除视图只是删除视图的定义，并不会删除基表的数据。</p><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"></span></code></pre></div></li></ul><p>DROP VIEW empvu80;</p><div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>### 8.3 索引（INDEX）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 8.3.1 基本介绍</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 一种独立于表的模式对象, 可以存储在与表不同的磁盘或表空间中，**是一个单独的、物理的数据库结构**</span></span>
<span class="line"><span>- 索引被删除或损坏, 不会对表产生影响, 其影响的只是**查询的速度**</span></span>
<span class="line"><span>- 索引一旦建立, 数据库管理系统会对其进行自动维护, 而且由数据库管理系统决定何时使用索引。用户不用在查询语句中指定使用哪个索引</span></span>
<span class="line"><span>- 在删除一个表时,所有基于该表的索引会自动被删除</span></span>
<span class="line"><span>- 通过指针加速数据库服务器的查询速度</span></span>
<span class="line"><span>- **通过快速定位数据的方法，减少磁盘** **I/O**</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 8.3.2 索引的介绍</span></span>
<span class="line"><span></span></span>
<span class="line"><span>例如：一本字典，如何快速找到某个字，可以给字典加目录，对数据库来说,索引的作用即是给&quot;数据&quot;加目录。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>设有N条随机记录,不用索引,平均查找N/2次,那么用了索引之后呢。如果是btree(二叉树)索引， 则是logN。                                        如果是hash(哈希)索引，时间复杂度是1。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- MySQL提供多种索引类型供选择：</span></span>
<span class="line"><span>- 普通索引</span></span>
<span class="line"><span>- 唯一性索引</span></span>
<span class="line"><span>- 主键索引：只有一个主键索引</span></span>
<span class="line"><span>- 全文索引：MySQL5.X版本只有MyISAM存储引擎支持FULLTEXT，并且只限于CHAR、VARCHAR和TEXT类型的列上创建。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- **MySQL的索引方法：**</span></span>
<span class="line"><span>- HASH</span></span>
<span class="line"><span>- BTREE（MySQL中多数索引都以BTREE的形式保存。）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 8.3.3 创建索引</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- **自动创建**: 在定义 PRIMARY KEY 或 UNIQUE 约束后系统自动在相应的列上创建**唯一性**索引</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- **手动创建**: 用户可以在其它列上创建非唯一的索引，以加速查询</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 在一个或多个列上创建索引</span></span>
<span class="line"><span></span></span>
<span class="line"><span>![image-20200717005009015](https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717005009.png)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 在表 EMPLOYEES的列 LAST_NAME 上创建索引</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`sql</span></span>
<span class="line"><span>CREATE INDEX 	emp_last_name_idx</span></span>
<span class="line"><span>ON 		employees(last_name);</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>索引的优缺点</strong></p><ul><li>索引的优点：加快了查询速度(select )</li><li>索引的缺点：降低了增,删,改的速度(update/delete/insert)，增大了表的文件大小(索引文件甚至可能比数据文件还大)</li></ul></li><li><p><strong>什么时候创建索引</strong></p><p>以下情况可以创建索引:</p><ul><li><p>列中数据值分布范围很广</p></li><li><p>列经常在 WHERE 子句或连接条件中出现</p></li><li><p>表经常被访问而且数据量很大 ，访问的数据大概占数据总量的2%到4%</p></li></ul></li><li><p><strong>什么时候不要创建索引</strong></p><p>下列情况不要创建索引:</p><ul><li>表很小</li><li>列不经常作为连接条件或出现在WHERE子句中</li><li>查询的数据大于2%到4%</li><li>表经常更新</li><li>索引散列值,过于集中的值不要索引，例如:给性别&quot;男&quot;,&quot;女&quot;加索引,意义不大</li></ul></li></ul><blockquote><p>索引不需要用，只是说我们在用name进行查询的时候，速度会更快。当然查的速度快了，插入的速度就会慢。因为插入数据的同时，还需要维护一个索引。</p></blockquote><h4 id="_8-3-4-删除索引" tabindex="-1"><a class="header-anchor" href="#_8-3-4-删除索引"><span>8.3.4 删除索引</span></a></h4><ul><li>使用DROP INDEX 命令删除索引</li></ul><figure><img src="https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic GO/20200717005038.png" alt="image-20200717005038415" tabindex="0" loading="lazy"><figcaption>image-20200717005038415</figcaption></figure><div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">DROP</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> INDEX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> upper_last_name_idx</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">ON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> uppers;</span></span></code></pre></div><ul><li><p>只有索引的拥有者或拥有DROP ANY INDEX 权限的用户才可以删除索引</p></li><li><p>删除操作是不可回滚的</p></li></ul>`,586)]))}const t=a(p,[["render",o],["__file","SQL开发.html.vue"]]),c=JSON.parse(`{"path":"/posts/BigData/02_Hive%E6%80%BB%E7%BB%93/SQL%E5%BC%80%E5%8F%91.html","title":"SQL开发","lang":"zh-CN","frontmatter":{"description":"SQL开发 第1章：SQL概述 SQL：Structured Query Language结构化查询语言，它是使用关系模型的数据库应用语言，由IBM上世纪70年代开发出来。后由美国国家标准局（ANSI）开始着手制定SQL标准，先后有SQL-86，SQL-89，SQL-92，SQL-99等标准。 1. SQL的语言规范 mysql对于SQL语句不区分大小...","watermark":true,"head":[["meta",{"property":"og:url","content":"https://springg.us.kg/posts/BigData/02_Hive%E6%80%BB%E7%BB%93/SQL%E5%BC%80%E5%8F%91.html"}],["meta",{"property":"og:site_name","content":"mrjason’s Blog"}],["meta",{"property":"og:title","content":"SQL开发"}],["meta",{"property":"og:description","content":"SQL开发 第1章：SQL概述 SQL：Structured Query Language结构化查询语言，它是使用关系模型的数据库应用语言，由IBM上世纪70年代开发出来。后由美国国家标准局（ANSI）开始着手制定SQL标准，先后有SQL-86，SQL-89，SQL-92，SQL-99等标准。 1. SQL的语言规范 mysql对于SQL语句不区分大小..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716145050.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-28T01:58:08.000Z"}],["meta",{"property":"article:author","content":"MrJason"}],["meta",{"property":"article:modified_time","content":"2024-10-28T01:58:08.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SQL开发\\",\\"image\\":[\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716145050.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716145100.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150437.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150441.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716145129.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150459.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150502.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173835.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173833.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173829.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173827.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173824.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173822.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173818.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173815.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173812.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173809.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173806.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173800.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173803.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173757.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173754.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173750.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173746.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173744.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173741.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173739.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173736.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173734.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173727.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173730.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173724.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173722.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173714.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173718.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173711.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173708.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173703.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173659.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173657.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173655.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173651.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173648.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225611.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173622.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225607.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716173618.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225558.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225601.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225552.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225549.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225548.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225545.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225543.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225541.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225539.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225537.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225532.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225530.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225529.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716223055.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225520.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225517.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225514.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225512.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225510.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225507.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225505.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225503.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225456.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225459.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225454.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225452.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225450.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225448.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225446.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225440.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225438.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225435.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716225657.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150423.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150419.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150413.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150416.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150410.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150407.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150403.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716150351.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200716234305.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717001944.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717002540.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717002619.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717002700.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717002857.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717002922.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003437.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003501.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003520.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003621.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003638.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003724.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003741.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003756.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717003824.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004006.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004106.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004340.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004401.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004524.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004736.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004818.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717004844.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717005009.png\\",\\"https://lian-zp.oss-cn-shenzhen.aliyuncs.com/pic%20GO/20200717005038.png\\"],\\"dateModified\\":\\"2024-10-28T01:58:08.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MrJason\\",\\"url\\":\\"https://springg.us.kg\\"}]}"]]},"headers":[{"level":2,"title":"第1章：SQL概述","slug":"第1章-sql概述","link":"#第1章-sql概述","children":[{"level":3,"title":"1. SQL的语言规范","slug":"_1-sql的语言规范","link":"#_1-sql的语言规范","children":[]},{"level":3,"title":"2. 命名规则","slug":"_2-命名规则","link":"#_2-命名规则","children":[]},{"level":3,"title":"3. SQL分类","slug":"_3-sql分类","link":"#_3-sql分类","children":[]}]},{"level":2,"title":"第2章：数据处理之查询","slug":"第2章-数据处理之查询","link":"#第2章-数据处理之查询","children":[{"level":3,"title":"2.1 基本的SELECT语句","slug":"_2-1-基本的select语句","link":"#_2-1-基本的select语句","children":[]},{"level":3,"title":"2.2 过滤数据","slug":"_2-2-过滤数据","link":"#_2-2-过滤数据","children":[]},{"level":3,"title":"2.3  排序数据和分页","slug":"_2-3-排序数据和分页","link":"#_2-3-排序数据和分页","children":[]},{"level":3,"title":"2.4 多表查询","slug":"_2-4-多表查询","link":"#_2-4-多表查询","children":[]},{"level":3,"title":"2.5 单行函数","slug":"_2-5-单行函数","link":"#_2-5-单行函数","children":[]},{"level":3,"title":"2.6 分组函数","slug":"_2-6-分组函数","link":"#_2-6-分组函数","children":[]},{"level":3,"title":"2.7 小结","slug":"_2-7-小结","link":"#_2-7-小结","children":[]}]},{"level":2,"title":"第3章：子查询","slug":"第3章-子查询","link":"#第3章-子查询","children":[{"level":3,"title":"3.1 基本介绍","slug":"_3-1-基本介绍","link":"#_3-1-基本介绍","children":[]},{"level":3,"title":"3.2 单行子查询","slug":"_3-2-单行子查询","link":"#_3-2-单行子查询","children":[]},{"level":3,"title":"3.2 多行子查询","slug":"_3-2-多行子查询","link":"#_3-2-多行子查询","children":[]},{"level":3,"title":"3.3  相关子查询","slug":"_3-3-相关子查询","link":"#_3-3-相关子查询","children":[]},{"level":3,"title":"3.4 EXISTS操作符","slug":"_3-4-exists操作符","link":"#_3-4-exists操作符","children":[]},{"level":3,"title":"3.5 相关更新","slug":"_3-5-相关更新","link":"#_3-5-相关更新","children":[]},{"level":3,"title":"3.6 相关删除","slug":"_3-6-相关删除","link":"#_3-6-相关删除","children":[]}]},{"level":2,"title":"第4章：创建和管理表 ---DDL","slug":"第4章-创建和管理表-ddl","link":"#第4章-创建和管理表-ddl","children":[{"level":3,"title":"4.1 创建和删除数据库","slug":"_4-1-创建和删除数据库","link":"#_4-1-创建和删除数据库","children":[]},{"level":3,"title":"4.2 标识符命名规则","slug":"_4-2-标识符命名规则","link":"#_4-2-标识符命名规则","children":[]},{"level":3,"title":"4.3 常用的数据类型","slug":"_4-3-常用的数据类型","link":"#_4-3-常用的数据类型","children":[]},{"level":3,"title":"4.4 创建表","slug":"_4-4-创建表","link":"#_4-4-创建表","children":[]},{"level":3,"title":"4.5 修改表","slug":"_4-5-修改表","link":"#_4-5-修改表","children":[]},{"level":3,"title":"4.6 重命名表","slug":"_4-6-重命名表","link":"#_4-6-重命名表","children":[]},{"level":3,"title":"4.7 删除表","slug":"_4-7-删除表","link":"#_4-7-删除表","children":[]},{"level":3,"title":"4.8 清空表","slug":"_4-8-清空表","link":"#_4-8-清空表","children":[]}]},{"level":2,"title":"第5章：数据库事务","slug":"第5章-数据库事务","link":"#第5章-数据库事务","children":[{"level":3,"title":"5.1 什么是事务","slug":"_5-1-什么是事务","link":"#_5-1-什么是事务","children":[]},{"level":3,"title":"5.2 如何处理事务","slug":"_5-2-如何处理事务","link":"#_5-2-如何处理事务","children":[]},{"level":3,"title":"5.3 事务的ACID属性","slug":"_5-3-事务的acid属性","link":"#_5-3-事务的acid属性","children":[]},{"level":3,"title":"5.4 数据库的隔离级别","slug":"_5-4-数据库的隔离级别","link":"#_5-4-数据库的隔离级别","children":[]}]},{"level":2,"title":"第6章：数据处理之增删改","slug":"第6章-数据处理之增删改","link":"#第6章-数据处理之增删改","children":[{"level":3,"title":"6.1 插入数据","slug":"_6-1-插入数据","link":"#_6-1-插入数据","children":[]},{"level":3,"title":"6.2 更新数据","slug":"_6-2-更新数据","link":"#_6-2-更新数据","children":[]},{"level":3,"title":"6.3 删除数据","slug":"_6-3-删除数据","link":"#_6-3-删除数据","children":[]}]},{"level":2,"title":"第7章：约束(constraint)","slug":"第7章-约束-constraint","link":"#第7章-约束-constraint","children":[{"level":3,"title":"7.1 什么是约束","slug":"_7-1-什么是约束","link":"#_7-1-什么是约束","children":[]},{"level":3,"title":"7.2 NOT NULL约束","slug":"_7-2-not-null约束","link":"#_7-2-not-null约束","children":[]},{"level":3,"title":"7.3 UNIQUE约束","slug":"_7-3-unique约束","link":"#_7-3-unique约束","children":[]},{"level":3,"title":"7.4 PRIMARY KEY 约束","slug":"_7-4-primary-key-约束","link":"#_7-4-primary-key-约束","children":[]},{"level":3,"title":"7.5 FOREIGN KEY 约束","slug":"_7-5-foreign-key-约束","link":"#_7-5-foreign-key-约束","children":[]},{"level":3,"title":"7.6 CHECK 约束","slug":"_7-6-check-约束","link":"#_7-6-check-约束","children":[]},{"level":3,"title":"7.7 DEFAULT约束","slug":"_7-7-default约束","link":"#_7-7-default约束","children":[]}]},{"level":2,"title":"第8章：其它数据库对象","slug":"第8章-其它数据库对象","link":"#第8章-其它数据库对象","children":[{"level":3,"title":"8.1 常见的数据库对象","slug":"_8-1-常见的数据库对象","link":"#_8-1-常见的数据库对象","children":[]},{"level":3,"title":"8.2 视图（VIEW）","slug":"_8-2-视图-view","link":"#_8-2-视图-view","children":[]}]}],"git":{"createdTime":1730080688000,"updatedTime":1730080688000,"contributors":[{"name":"MrJason","email":"845886914@qq.com","commits":1}]},"readingTime":{"minutes":45.6,"words":13681},"filePathRelative":"posts/BigData/02_Hive总结/SQL开发.md","localizedDate":"2024年10月28日","excerpt":"\\n<hr>\\n<h2>第1章：SQL概述</h2>\\n<p>SQL：Structured Query Language结构化查询语言，它是使用关系模型的数据库应用语言，由IBM上世纪70年代开发出来。后由美国国家标准局（ANSI）开始着手制定SQL标准，先后有SQL-86，SQL-89，SQL-92，SQL-99等标准。</p>\\n<h3>1. SQL的语言规范</h3>\\n<ul>\\n<li>mysql对于SQL语句不区分大小写，SQL语句关键字尽量大写</li>\\n<li>SQL 可以写在一行或者多行。为了提高可读性，各子句分行写，必要时使用缩进</li>\\n<li>关键字不能被缩写也不能分行</li>\\n<li>值，除了数值型，<strong>字符串型和日期时间类型使用单引号（' '）</strong></li>\\n<li>别名，尽量使用双引号（\\" \\"），而且不建议省略as</li>\\n<li>所有标点符号使用英文状态下的半角输入方式</li>\\n<li>必须保证所有(),单引号，双引号是成对结束的</li>\\n<li>可以使用（1）#单行注释 （2）--空格单行注释 （3）/*  多行注释  */</li>\\n</ul>","autoDesc":true}`);export{t as comp,c as data};
