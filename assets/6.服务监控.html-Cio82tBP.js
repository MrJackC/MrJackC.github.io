import{_ as n,c as r,a as o,o as t}from"./app-CZJgH_ea.js";const a={};function i(p,e){return t(),r("div",null,e[0]||(e[0]=[o('<h1 id="服务监控" tabindex="-1"><a class="header-anchor" href="#服务监控"><span>服务监控</span></a></h1><p>系统使用 Spring Boot Admin 和 SkyWalking 实现后端服务的监控。</p><h2 id="_1-spring-boot-admin" tabindex="-1"><a class="header-anchor" href="#_1-spring-boot-admin"><span><a href="https://doc.iocoder.cn/server-monitor/#_1-spring-boot-admin" target="_blank" rel="noopener noreferrer">#</a>1. Spring Boot Admin</span></a></h2><p>阅读 <a href="https://www.iocoder.cn/Spring-Boot/Admin/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 监控工具 Admin 入门》 (opens new window)</a>文章，入门 Spring Boot Admin。</p><p>注意，Spring Boot Admin 是内嵌在 <code>yudao-server</code> 后端项目中，无需单独启动。</p><h3 id="_1-1-配置" tabindex="-1"><a class="header-anchor" href="#_1-1-配置"><span><a href="https://doc.iocoder.cn/server-monitor/#_1-1-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1.1 配置</span></a></h3><p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L136-L146" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.boot.admin</code> 配置项，设置 Spring Boot Admin 的配置。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/01.png" alt=" 配置文件" tabindex="0" loading="lazy"><figcaption> 配置文件</figcaption></figure><p>疑问：prod 生产环境下，后端部署多个 JVM 进程时，spring.boot.admin.client.url 填写哪个 IP？</p><ul><li>第一步，在 Nginx 中配置 <code>/admin</code> 路径，转发到多个 JVM 的 IP 上，使用 <a href="https://blog.csdn.net/bolg_hero/article/details/73382117" target="_blank" rel="noopener noreferrer"><code>backup</code> (opens new window)</a>参数实现主备。注意，该转发只允许内网访问，避免安全问题！！！</li><li>第二步，设置 <code>spring.boot.admin.client.url</code> 配置项，为 Nginx 的 <code>内置 IP/admin</code> 地址。</li></ul><h3 id="_1-2-使用" tabindex="-1"><a class="header-anchor" href="#_1-2-使用"><span><a href="https://doc.iocoder.cn/server-monitor/#_1-2-%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>1.2 使用</span></a></h3><p>① 访问 <a href="http://127.0.0.1:48080/admin/applications" target="_blank" rel="noopener noreferrer">http://127.0.0.1:48080/admin/applications (opens new window)</a>地址，可以在 Spring Boot Admin 中，查看到应用与实例的列表。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/02.png" alt="应用 - 列表" tabindex="0" loading="lazy"><figcaption>应用 - 列表</figcaption></figure><p>② 点击 <code>yudao-server</code> 应用，再点击实例，可以查看到该实例的细节信息。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/03.png" alt="应用 - 明细" tabindex="0" loading="lazy"><figcaption>应用 - 明细</figcaption></figure><p>③ 点击 [日志 -&gt; 日志文件] 菜单，查看该示例的日志内容。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/04.png" alt="应用 - 日志" tabindex="0" loading="lazy"><figcaption>应用 - 日志</figcaption></figure><p>点击 [日志 -&gt; 日志文件] 菜单，可动态修改 Logger 的日志级别，方便排查线上的某些 BUG。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/05.png" alt="应用 - 日志" tabindex="0" loading="lazy"><figcaption>应用 - 日志</figcaption></figure><p>补充说明：也可以通过前端的 [基础设施 -&gt; Java 监控] 菜单。</p><p>前端 [基础设施 -&gt; Java 监控] 菜单，通过 iframe 内嵌后端 <code>/admin/applications</code> 路径。</p><p>如果你想自定义地址，可以前往 [基础设置 -&gt; 配置管理] 菜单，设置 key 为 <code>url.spring-boot-admin</code> 配置项。</p><h2 id="_2-skywalking" tabindex="-1"><a class="header-anchor" href="#_2-skywalking"><span><a href="https://doc.iocoder.cn/server-monitor/#_2-skywalking" target="_blank" rel="noopener noreferrer">#</a>2. SkyWalking</span></a></h2><p>阅读 <a href="https://www.iocoder.cn/SkyWalking/install/?yudao" target="_blank" rel="noopener noreferrer">《芋道 SkyWalking 极简入门》 (opens new window)</a>文章，入门 SkyWalking。</p><p>注意，SkyWalking 需要单独启动，预计需要 4 核 8G 的硬件资源。</p><h3 id="_2-1-配置" tabindex="-1"><a class="header-anchor" href="#_2-1-配置"><span><a href="https://doc.iocoder.cn/server-monitor/#_2-1-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>2.1 配置</span></a></h3><p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/logback-spring.xml" target="_blank" rel="noopener noreferrer"><code>logback-spring.xml</code> (opens new window)</a>配置文件中，添加 SkyWalking 收集日志的 appender 配置。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/10.png" alt=" 配置" tabindex="0" loading="lazy"><figcaption> 配置</figcaption></figure><p>② 修改 SkyWalking 在前端项目的 [基础设施 -&gt; 监控平台] 对应的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/infra/skywalking/index.vue#L11" target="_blank" rel="noopener noreferrer"><code>skywaling/index.vue</code> (opens new window)</a>文件，调整为你 SkyWalking 的访问地址。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/11.png" alt=" 文件" tabindex="0" loading="lazy"><figcaption> 文件</figcaption></figure><h3 id="_2-2-使用" tabindex="-1"><a class="header-anchor" href="#_2-2-使用"><span><a href="https://doc.iocoder.cn/server-monitor/#_2-2-%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>2.2 使用</span></a></h3><p>① 点击 [基础设施 -&gt; 监控平台] 菜单，可以看到 SkyWalking 提供的监控平台。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/21.png" alt="基础设施 -&gt; 监控平台" tabindex="0" loading="lazy"><figcaption>基础设施 -&gt; 监控平台</figcaption></figure><p>② 点击 <code>yudao-server</code> 服务，查看该服务的监控信息。如下图所示：</p><figure><img src="https://doc.iocoder.cn/img/服务监控/22.png" alt=" 服务" tabindex="0" loading="lazy"><figcaption> 服务</figcaption></figure><p>补充说明：</p><p>前端 [基础设施 -&gt; 监控平台] 菜单，通过 iframe 内嵌 <code>http://skywalking.iocoder.cn</code> 路径。</p><p>如果你想自定义地址，可以前往 [基础设置 -&gt; 配置管理] 菜单，设置 key 为 <code>url.skywalking</code> 配置项。</p><h2 id="_3-更多监控系统" tabindex="-1"><a class="header-anchor" href="#_3-更多监控系统"><span><a href="https://doc.iocoder.cn/server-monitor/#_3-%E6%9B%B4%E5%A4%9A%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer">#</a>3. 更多监控系统</span></a></h2><h3 id="_3-1-prometheus" tabindex="-1"><a class="header-anchor" href="#_3-1-prometheus"><span><a href="https://doc.iocoder.cn/server-monitor/#_3-1-prometheus" target="_blank" rel="noopener noreferrer">#</a>3.1 Prometheus</span></a></h3><p>参见 <a href="https://www.iocoder.cn/Prometheus/install/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Prometheus + Grafana + Alertmanager 极简入门 》 (opens new window)</a>文章。</p><h3 id="_3-2-elk" tabindex="-1"><a class="header-anchor" href="#_3-2-elk"><span><a href="https://doc.iocoder.cn/server-monitor/#_3-2-elk" target="_blank" rel="noopener noreferrer">#</a>3.2 ELK</span></a></h3><p>参见 <a href="https://www.iocoder.cn/Elasticsearch/ELK-install/?yudao" target="_blank" rel="noopener noreferrer">芋道 ELK(Elasticsearch + Logstash + Kibana) 极简入门 (opens new window)</a>文章。</p><h3 id="_3-3-sentry" tabindex="-1"><a class="header-anchor" href="#_3-3-sentry"><span><a href="https://doc.iocoder.cn/server-monitor/#_3-3-sentry" target="_blank" rel="noopener noreferrer">#</a>3.3 Sentry</span></a></h3><p>参见 <a href="https://www.iocoder.cn/Sentry/install/?yudao" target="_blank" rel="noopener noreferrer">《Sentry 极简入门 》 (opens new window)</a>文章。</p><p>上次更新: 2023/04/07, 23:25:01</p>',46)]))}const d=n(a,[["render",i],["__file","6.服务监控.html.vue"]]),l=JSON.parse('{"path":"/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/6.%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html","title":"服务监控","lang":"zh-CN","frontmatter":{"description":"服务监控 系统使用 Spring Boot Admin 和 SkyWalking 实现后端服务的监控。 #1. Spring Boot Admin 阅读 《芋道 Spring Boot 监控工具 Admin 入门》 (opens new window)文章，入门 Spring Boot Admin。 注意，Spring Boot Admin 是内嵌在 ...","watermark":true,"head":[["meta",{"property":"og:url","content":"https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/6.%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html"}],["meta",{"property":"og:site_name","content":"mrjason’s Blog"}],["meta",{"property":"og:title","content":"服务监控"}],["meta",{"property":"og:description","content":"服务监控 系统使用 Spring Boot Admin 和 SkyWalking 实现后端服务的监控。 #1. Spring Boot Admin 阅读 《芋道 Spring Boot 监控工具 Admin 入门》 (opens new window)文章，入门 Spring Boot Admin。 注意，Spring Boot Admin 是内嵌在 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/01.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-21T07:41:53.000Z"}],["meta",{"property":"article:author","content":"MrJason"}],["meta",{"property":"article:modified_time","content":"2024-11-21T07:41:53.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"服务监控\\",\\"image\\":[\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/01.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/02.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/03.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/04.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/05.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/10.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/11.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/21.png\\",\\"https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/22.png\\"],\\"dateModified\\":\\"2024-11-21T07:41:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MrJason\\",\\"url\\":\\"https://springg.us.kg\\"}]}"]]},"headers":[{"level":2,"title":"#1. Spring Boot Admin","slug":"_1-spring-boot-admin","link":"#_1-spring-boot-admin","children":[{"level":3,"title":"#1.1 配置","slug":"_1-1-配置","link":"#_1-1-配置","children":[]},{"level":3,"title":"#1.2 使用","slug":"_1-2-使用","link":"#_1-2-使用","children":[]}]},{"level":2,"title":"#2. SkyWalking","slug":"_2-skywalking","link":"#_2-skywalking","children":[{"level":3,"title":"#2.1 配置","slug":"_2-1-配置","link":"#_2-1-配置","children":[]},{"level":3,"title":"#2.2 使用","slug":"_2-2-使用","link":"#_2-2-使用","children":[]}]},{"level":2,"title":"#3. 更多监控系统","slug":"_3-更多监控系统","link":"#_3-更多监控系统","children":[{"level":3,"title":"#3.1 Prometheus","slug":"_3-1-prometheus","link":"#_3-1-prometheus","children":[]},{"level":3,"title":"#3.2 ELK","slug":"_3-2-elk","link":"#_3-2-elk","children":[]},{"level":3,"title":"#3.3 Sentry","slug":"_3-3-sentry","link":"#_3-3-sentry","children":[]}]}],"git":{"createdTime":1732174913000,"updatedTime":1732174913000,"contributors":[{"name":"MrJason","email":"845886914@qq.com","commits":1}]},"readingTime":{"minutes":3.18,"words":953},"filePathRelative":"posts/Java/Ruoyi-Vue-Pro/10.运维手册/6.服务监控.md","localizedDate":"2024年11月21日","excerpt":"\\n<p>系统使用 Spring Boot Admin 和 SkyWalking 实现后端服务的监控。</p>\\n<h2><a class=\\"header-anchor\\" href=\\"#_1-spring-boot-admin\\"><span></span></a><a href=\\"https://doc.iocoder.cn/server-monitor/#_1-spring-boot-admin\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">#</a>1. Spring Boot Admin</h2>\\n<p>阅读 <a href=\\"https://www.iocoder.cn/Spring-Boot/Admin/?yudao\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">《芋道 Spring Boot 监控工具 Admin 入门》 (opens new window)</a>文章，入门 Spring Boot Admin。</p>","autoDesc":true}');export{d as comp,l as data};
