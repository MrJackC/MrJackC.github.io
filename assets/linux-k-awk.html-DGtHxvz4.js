import{_ as a,c as n,a as i,o as l}from"./app-CZJgH_ea.js";const o={};function p(e,s){return l(),n("div",null,s[0]||(s[0]=[i(`<h1 id="awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤"><span>awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤</span></a></h1><h2 id="_1-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_1-ç®€ä»‹"><span>1 ç®€ä»‹</span></a></h2><p>awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼Œawkåœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚</p><h2 id="_2-è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_2-è¯­æ³•"><span>2 è¯­æ³•</span></a></h2><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">awk</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;{pattern + action}&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;"> {filenames}</span></span></code></pre></div><p>å°½ç®¡æ“ä½œå¯èƒ½ä¼šå¾ˆå¤æ‚ï¼Œä½†è¯­æ³•æ€»æ˜¯è¿™æ ·ï¼Œå…¶ä¸­ pattern è¡¨ç¤º AWK åœ¨æ•°æ®ä¸­æŸ¥æ‰¾çš„å†…å®¹ï¼Œè€Œ action æ˜¯åœ¨æ‰¾åˆ°åŒ¹é…å†…å®¹æ—¶æ‰€æ‰§è¡Œçš„ä¸€ç³»åˆ—å‘½ä»¤ã€‚èŠ±æ‹¬å·ï¼ˆ{}ï¼‰ä¸éœ€è¦åœ¨ç¨‹åºä¸­å§‹ç»ˆå‡ºç°ï¼Œä½†å®ƒä»¬ç”¨äºæ ¹æ®ç‰¹å®šçš„æ¨¡å¼å¯¹ä¸€ç³»åˆ—æŒ‡ä»¤è¿›è¡Œåˆ†ç»„ã€‚ patternå°±æ˜¯è¦è¡¨ç¤ºçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æ–œæ æ‹¬èµ·æ¥ã€‚</p><p>awkè¯­è¨€çš„æœ€åŸºæœ¬åŠŸèƒ½æ˜¯åœ¨æ–‡ä»¶æˆ–è€…å­—ç¬¦ä¸²ä¸­åŸºäºæŒ‡å®šè§„åˆ™æµè§ˆå’ŒæŠ½å–ä¿¡æ¯ï¼ŒawkæŠ½å–ä¿¡æ¯åï¼Œæ‰èƒ½è¿›è¡Œå…¶ä»–æ–‡æœ¬æ“ä½œã€‚å®Œæ•´çš„awkè„šæœ¬é€šå¸¸ç”¨æ¥æ ¼å¼åŒ–æ–‡æœ¬æ–‡ä»¶ä¸­çš„ä¿¡æ¯ã€‚</p><p>é€šå¸¸ï¼Œawkæ˜¯ä»¥æ–‡ä»¶çš„ä¸€è¡Œä¸ºå¤„ç†å•ä½çš„ã€‚awkæ¯æ¥æ”¶æ–‡ä»¶çš„ä¸€è¡Œï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„å‘½ä»¤ï¼Œæ¥å¤„ç†æ–‡æœ¬ã€‚</p><h2 id="_3-awkå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#_3-awkå…¥é—¨"><span>3 awkå…¥é—¨</span></a></h2><p>å‡è®¾last -n 5çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@iZwz914d1peizv4h7laju4Z ~]#  last -n 5 </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ä»…å–å‡ºå‰äº”è¡Œ</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#98C379;--shiki-dark:#98C379;">     pts/3</span><span style="color:#D19A66;--shiki-dark:#D19A66;">        223.104.6.18</span><span style="color:#98C379;--shiki-dark:#98C379;">     Thu</span><span style="color:#98C379;--shiki-dark:#98C379;"> Apr</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 21</span><span style="color:#98C379;--shiki-dark:#98C379;"> 17:22</span><span style="color:#98C379;--shiki-dark:#98C379;">   still</span><span style="color:#98C379;--shiki-dark:#98C379;"> logged</span><span style="color:#98C379;--shiki-dark:#98C379;"> in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#98C379;--shiki-dark:#98C379;">     pts/2</span><span style="color:#D19A66;--shiki-dark:#D19A66;">        223.104.6.18</span><span style="color:#98C379;--shiki-dark:#98C379;">     Thu</span><span style="color:#98C379;--shiki-dark:#98C379;"> Apr</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 21</span><span style="color:#98C379;--shiki-dark:#98C379;"> 17:22</span><span style="color:#98C379;--shiki-dark:#98C379;">   still</span><span style="color:#98C379;--shiki-dark:#98C379;"> logged</span><span style="color:#98C379;--shiki-dark:#98C379;"> in</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">   </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#98C379;--shiki-dark:#98C379;">     pts/3</span><span style="color:#D19A66;--shiki-dark:#D19A66;">        223.104.6.18</span><span style="color:#98C379;--shiki-dark:#98C379;">     Thu</span><span style="color:#98C379;--shiki-dark:#98C379;"> Apr</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 21</span><span style="color:#98C379;--shiki-dark:#98C379;"> 16:30</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> 17:13</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  (00:43)    </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#98C379;--shiki-dark:#98C379;">     pts/2</span><span style="color:#D19A66;--shiki-dark:#D19A66;">        223.104.6.18</span><span style="color:#98C379;--shiki-dark:#98C379;">     Thu</span><span style="color:#98C379;--shiki-dark:#98C379;"> Apr</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 21</span><span style="color:#98C379;--shiki-dark:#98C379;"> 16:30</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> 17:13</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  (00:43)    </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#98C379;--shiki-dark:#98C379;">     pts/3</span><span style="color:#D19A66;--shiki-dark:#D19A66;">        223.104.6.12</span><span style="color:#98C379;--shiki-dark:#98C379;">     Tue</span><span style="color:#98C379;--shiki-dark:#98C379;"> Apr</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 19</span><span style="color:#98C379;--shiki-dark:#98C379;"> 17:35</span><span style="color:#98C379;--shiki-dark:#98C379;"> -</span><span style="color:#98C379;--shiki-dark:#98C379;"> 17:52</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  (00:17)</span></span></code></pre></div><p>å¦‚æœåªæ˜¯æ˜¾ç¤ºæœ€è¿‘ç™»å½•çš„5ä¸ªå¸å·ï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@iZwz914d1peizv4h7laju4Z ~]# last -n 5 | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">awk</span><span style="color:#98C379;--shiki-dark:#98C379;">  &#39;{print $1}&#39;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span></span></code></pre></div><p>awkå·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼šè¯»å…¥æœ‰&#39;\\n&#39;æ¢è¡Œç¬¦åˆ†å‰²çš„ä¸€æ¡è®°å½•ï¼Œç„¶åå°†è®°å½•æŒ‰æŒ‡å®šçš„åŸŸåˆ†éš”ç¬¦åˆ’åˆ†åŸŸï¼Œå¡«å……åŸŸï¼Œ0åˆ™è¡¨ç¤ºæ‰€æœ‰åŸŸ,0åˆ™è¡¨ç¤ºæ‰€æœ‰åŸŸ,1è¡¨ç¤ºç¬¬ä¸€ä¸ªåŸŸ,ğ‘›è¡¨ç¤ºç¬¬ğ‘›ä¸ªåŸŸã€‚é»˜è®¤åŸŸåˆ†éš”ç¬¦æ˜¯&quot;ç©ºç™½é”®&quot;æˆ–&quot;[ğ‘¡ğ‘ğ‘]é”®&quot;,æ‰€ä»¥nè¡¨ç¤ºç¬¬nä¸ªåŸŸã€‚é»˜è®¤åŸŸåˆ†éš”ç¬¦æ˜¯&quot;ç©ºç™½é”®&quot;æˆ–&quot;[tab]é”®&quot;,æ‰€ä»¥1è¡¨ç¤ºç™»å½•ç”¨æˆ·ï¼Œ$3è¡¨ç¤ºç™»å½•ç”¨æˆ·ip,ä»¥æ­¤ç±»æ¨ã€‚</p><p>å¦‚æœåªæ˜¯æ˜¾ç¤º/etc/passwdçš„è´¦æˆ·ï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@iZwz914d1peizv4h7laju4Z ~]# cat /etc/passwd |</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">awk</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  -F</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;:&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;">  &#39;{print $1}&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">bin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">daemon</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">adm</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">lp</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sync</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">shutdown</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">halt</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mail</span></span></code></pre></div><p>è¿™ç§æ˜¯awk+actionçš„ç¤ºä¾‹ï¼Œæ¯è¡Œéƒ½ä¼šæ‰§è¡Œaction{print $1}ã€‚</p><p><strong>-FæŒ‡å®šåŸŸåˆ†éš”ç¬¦ä¸º&#39;:&#39;ã€‚</strong></p><p>å¦‚æœåªæ˜¯æ˜¾ç¤º/etc/passwdçš„è´¦æˆ·å’Œè´¦æˆ·å¯¹åº”çš„shell,è€Œè´¦æˆ·ä¸shellä¹‹é—´ä»¥tabé”®åˆ†å‰²ï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@iZwz914d1peizv4h7laju4Z ~]# cat /etc/passwd |</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">awk</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  -F</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;:&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;">  &#39;{print $1&quot;\\t&quot;$7}&#39;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#98C379;--shiki-dark:#98C379;">    /bin/bash</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">bin</span><span style="color:#98C379;--shiki-dark:#98C379;">     /sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">daemon</span><span style="color:#98C379;--shiki-dark:#98C379;">  /sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">adm</span><span style="color:#98C379;--shiki-dark:#98C379;">     /sbin/nologin</span></span></code></pre></div><p>å¦‚æœåªæ˜¯æ˜¾ç¤º/etc/passwdçš„è´¦æˆ·å’Œè´¦æˆ·å¯¹åº”çš„shell,è€Œè´¦æˆ·ä¸shellä¹‹é—´ä»¥é€—å·åˆ†å‰²,è€Œä¸”åœ¨æ‰€æœ‰è¡Œæ·»åŠ åˆ—åname,shell,åœ¨æœ€åä¸€è¡Œæ·»åŠ &quot;blue,/bin/nosh&quot;ï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@iZwz914d1peizv4h7laju4Z ~]# cat /etc/passwd |</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">awk</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  -F</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;:&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;">  &#39;BEGIN {print &quot;name,shell&quot;}  {print $1&quot;,&quot;$7} END {print &quot;blue,/bin/nosh&quot;}&#39;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">name,shell</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root,/bin/bash</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">bin,/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">daemon,/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">adm,/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">lp,/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sync,/bin/sync</span></span></code></pre></div><p>awkå·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼šå…ˆæ‰§è¡ŒBEGINGï¼Œç„¶åè¯»å–æ–‡ä»¶ï¼Œè¯»å…¥æœ‰/næ¢è¡Œç¬¦åˆ†å‰²çš„ä¸€æ¡è®°å½•ï¼Œç„¶åå°†è®°å½•æŒ‰æŒ‡å®šçš„åŸŸåˆ†éš”ç¬¦åˆ’åˆ†åŸŸï¼Œå¡«å……åŸŸï¼Œ0åˆ™è¡¨ç¤ºæ‰€æœ‰åŸŸ,0åˆ™è¡¨ç¤ºæ‰€æœ‰åŸŸ,1è¡¨ç¤ºç¬¬ä¸€ä¸ªåŸŸ,$nè¡¨ç¤ºç¬¬nä¸ªåŸŸ,éšåå¼€å§‹æ‰§è¡Œæ¨¡å¼æ‰€å¯¹åº”çš„åŠ¨ä½œactionã€‚æ¥ç€å¼€å§‹è¯»å…¥ç¬¬äºŒæ¡è®°å½•Â·Â·Â·Â·Â·Â·ç›´åˆ°æ‰€æœ‰çš„è®°å½•éƒ½è¯»å®Œï¼Œæœ€åæ‰§è¡ŒENDæ“ä½œã€‚</p><p>æœç´¢/etc/passwdæœ‰rootå…³é”®å­—çš„æ‰€æœ‰è¡Œï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@iZwz914d1peizv4h7laju4Z ~]# awk -F: </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;/root/{print $7}&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /etc/passwd   </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/bin/bash</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/sbin/nologin</span></span></code></pre></div><p>è¿™é‡ŒæŒ‡å®šäº†action{print $7}ã€‚</p><h2 id="_4-awk-è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#_4-awk-è¿›é˜¶"><span>4 awk è¿›é˜¶</span></a></h2><h3 id="_4-1-å†…ç½®å˜é‡" tabindex="-1"><a class="header-anchor" href="#_4-1-å†…ç½®å˜é‡"><span>4.1 å†…ç½®å˜é‡</span></a></h3><p>awkæœ‰è®¸å¤šå†…ç½®å˜é‡ç”¨æ¥è®¾ç½®ç¯å¢ƒä¿¡æ¯ï¼Œè¿™äº›å˜é‡å¯ä»¥è¢«æ”¹å˜ï¼Œä¸‹é¢ç»™å‡ºäº†æœ€å¸¸ç”¨çš„ä¸€äº›å˜é‡ã€‚</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">ARGC</span><span style="color:#98C379;--shiki-dark:#98C379;">               å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">ARGV</span><span style="color:#98C379;--shiki-dark:#98C379;">               å‘½ä»¤è¡Œå‚æ•°æ’åˆ—</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">ENVIRON</span><span style="color:#98C379;--shiki-dark:#98C379;">            æ”¯æŒé˜Ÿåˆ—ä¸­ç³»ç»Ÿç¯å¢ƒå˜é‡çš„ä½¿ç”¨</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">FILENAME</span><span style="color:#98C379;--shiki-dark:#98C379;">           awkæµè§ˆçš„æ–‡ä»¶å</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">FNR</span><span style="color:#98C379;--shiki-dark:#98C379;">                æµè§ˆæ–‡ä»¶çš„è®°å½•æ•°</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">FS</span><span style="color:#98C379;--shiki-dark:#98C379;">                 è®¾ç½®è¾“å…¥åŸŸåˆ†éš”ç¬¦ï¼Œç­‰ä»·äºå‘½ä»¤è¡Œ</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -Fé€‰é¡¹</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">NF</span><span style="color:#98C379;--shiki-dark:#98C379;">                 æµè§ˆè®°å½•çš„åŸŸçš„ä¸ªæ•°</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">NR</span><span style="color:#98C379;--shiki-dark:#98C379;">                 å·²è¯»çš„è®°å½•æ•°</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">OFS</span><span style="color:#98C379;--shiki-dark:#98C379;">                è¾“å‡ºåŸŸåˆ†éš”ç¬¦</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">ORS</span><span style="color:#98C379;--shiki-dark:#98C379;">                è¾“å‡ºè®°å½•åˆ†éš”ç¬¦</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">RS</span><span style="color:#98C379;--shiki-dark:#98C379;">                 æ§åˆ¶è®°å½•åˆ†éš”ç¬¦</span></span></code></pre></div><p>æ­¤å¤–,0å˜é‡æ˜¯æŒ‡æ•´æ¡è®°å½•ã€‚0å˜é‡æ˜¯æŒ‡æ•´æ¡è®°å½•ã€‚1è¡¨ç¤ºå½“å‰è¡Œçš„ç¬¬ä¸€ä¸ªåŸŸ,$2è¡¨ç¤ºå½“å‰è¡Œçš„ç¬¬äºŒä¸ªåŸŸ,......ä»¥æ­¤ç±»æ¨ã€‚</p><p>ç»Ÿè®¡/etc/passwd:æ–‡ä»¶åï¼Œæ¯è¡Œçš„è¡Œå·ï¼Œæ¯è¡Œçš„åˆ—æ•°ï¼Œå¯¹åº”çš„å®Œæ•´è¡Œå†…å®¹:</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@iZwz914d1peizv4h7laju4Z ~]# awk  -F </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;:&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;">  &#39;{print &quot;filename:&quot; FILENAME &quot;,linenumber:&quot; NR &quot;,columns:&quot; NF &quot;,linecontent:&quot;$0}&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /etc/passwd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">filename:/etc/passwd,linenumber:1,columns:7,linecontent:root:x:0:0:root:/root:/bin/bash</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">filename:/etc/passwd,linenumber:2,columns:7,linecontent:bin:x:1:1:bin:/bin:/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">filename:/etc/passwd,linenumber:3,columns:7,linecontent:daemon:x:2:2:daemon:/sbin:/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">filename:/etc/passwd,linenumber:4,columns:7,linecontent:adm:x:3:4:adm:/var/adm:/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">filename:/etc/passwd,linenumber:5,columns:7,linecontent:lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">filename:/etc/passwd,linenumber:6,columns:7,linecontent:sync:x:5:0:sync:/sbin:/bin/sync</span></span></code></pre></div><h3 id="_4-2-å˜é‡å’Œèµ‹å€¼" tabindex="-1"><a class="header-anchor" href="#_4-2-å˜é‡å’Œèµ‹å€¼"><span>4.2 å˜é‡å’Œèµ‹å€¼</span></a></h3><p>é™¤äº†awkçš„å†…ç½®å˜é‡ï¼Œawkè¿˜å¯ä»¥è‡ªå®šä¹‰å˜é‡ã€‚</p><p>ä¸‹é¢ç»Ÿè®¡/etc/passwdçš„è´¦æˆ·äººæ•°ï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">awk</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;{count++;print $0;} END{print &quot;user count is &quot;, count}&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/passwd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root:x:0:0:root:/root:/bin/bash</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">user</span><span style="color:#98C379;--shiki-dark:#98C379;"> count</span><span style="color:#98C379;--shiki-dark:#98C379;"> is</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  25</span></span></code></pre></div><p>countæ˜¯è‡ªå®šä¹‰å˜é‡ã€‚ä¹‹å‰çš„action{}é‡Œéƒ½æ˜¯åªæœ‰ä¸€ä¸ªprint,å…¶å®printåªæ˜¯ä¸€ä¸ªè¯­å¥ï¼Œè€Œaction{}å¯ä»¥æœ‰å¤šä¸ªè¯­å¥ï¼Œä»¥;å·éš”å¼€ã€‚</p><p>è¿™é‡Œæ²¡æœ‰åˆå§‹åŒ–countï¼Œè™½ç„¶é»˜è®¤æ˜¯0ï¼Œä½†æ˜¯å¦¥å½“çš„åšæ³•è¿˜æ˜¯åˆå§‹åŒ–ä¸º0:</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">awk</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;BEGIN {count=0;print &quot;[start]user count is &quot;, count} {count=count+1;print $0;} END{print &quot;[end]user count is &quot;, count}&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/passwd</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[start]user count is  0</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root:x:0:0:root:/root:/bin/bash</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">nexus:x:1001:1001::/home/nexus:/bin/bash</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[end]user count is  25</span></span></code></pre></div><h3 id="_4-3-æ¡ä»¶è¯­å¥" tabindex="-1"><a class="header-anchor" href="#_4-3-æ¡ä»¶è¯­å¥"><span>4.3 æ¡ä»¶è¯­å¥</span></a></h3><p>awkä¸­çš„æ¡ä»¶è¯­å¥æ˜¯ä»Cè¯­è¨€ä¸­å€Ÿé‰´æ¥çš„ï¼Œç”¨æ³•ä¸Cè¯­è¨€ä¸€è‡´ã€‚</p><p>ç»Ÿè®¡æŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å ç”¨çš„å­—èŠ‚æ•°,è¿‡æ»¤4096å¤§å°çš„æ–‡ä»¶(ä¸€èˆ¬éƒ½æ˜¯æ–‡ä»¶å¤¹):</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#ls -l |awk &#39;BEGIN {size=0;print &quot;[start]size is &quot;, size} {if($5!=4096){size=size+$5;}} END{print &quot;[end]size is &quot;, size/1024/1024,&quot;M&quot;}&#39; </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[end]size is  8.22339 M</span></span></code></pre></div><h3 id="_4-4-å¾ªç¯è¯­å¥" tabindex="-1"><a class="header-anchor" href="#_4-4-å¾ªç¯è¯­å¥"><span>4.4 å¾ªç¯è¯­å¥</span></a></h3><p>awkä¸­çš„å¾ªç¯è¯­å¥åŒæ ·å€Ÿé‰´äºCè¯­è¨€ï¼Œæ”¯æŒwhileã€do/whileã€forã€breakã€continueï¼Œè¿™äº›å…³é”®å­—çš„è¯­ä¹‰å’ŒCè¯­è¨€ä¸­çš„è¯­ä¹‰å®Œå…¨ç›¸åŒã€‚</p><h3 id="_4-5-æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#_4-5-æ•°ç»„"><span>4.5 æ•°ç»„</span></a></h3><p>å› ä¸ºawkä¸­æ•°ç»„çš„ä¸‹æ ‡å¯ä»¥æ˜¯æ•°å­—å’Œå­—æ¯ï¼Œæ•°ç»„çš„ä¸‹æ ‡é€šå¸¸è¢«ç§°ä¸ºå…³é”®å­—(key)ã€‚å€¼å’Œå…³é”®å­—éƒ½å­˜å‚¨åœ¨å†…éƒ¨çš„ä¸€å¼ é’ˆå¯¹key/valueåº”ç”¨hashçš„è¡¨æ ¼é‡Œã€‚ç”±äºhashä¸æ˜¯é¡ºåºå­˜å‚¨ï¼Œå› æ­¤åœ¨æ˜¾ç¤ºæ•°ç»„å†…å®¹æ—¶ä¼šå‘ç°ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯æŒ‰ç…§ä½ é¢„æ–™çš„é¡ºåºæ˜¾ç¤ºå‡ºæ¥çš„ã€‚æ•°ç»„å’Œå˜é‡ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ä½¿ç”¨æ—¶è‡ªåŠ¨åˆ›å»ºçš„ï¼Œawkä¹ŸåŒæ ·ä¼šè‡ªåŠ¨åˆ¤æ–­å…¶å­˜å‚¨çš„æ˜¯æ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œawkä¸­çš„æ•°ç»„ç”¨æ¥ä»è®°å½•ä¸­æ”¶é›†ä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºè®¡ç®—æ€»å’Œã€ç»Ÿè®¡å•è¯ä»¥åŠè·Ÿè¸ªæ¨¡æ¿è¢«åŒ¹é…çš„æ¬¡æ•°ç­‰ç­‰ã€‚</p><p>æ˜¾ç¤º/etc/passwdçš„è´¦æˆ·ï¼š</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#awk -F &#39;:&#39; &#39;BEGIN {count=0;} {name[count] = $1;count++;}; END{for (i = 0; i &lt; NR; i++) print i, name[i]}&#39; /etc/passwd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">0</span><span style="color:#98C379;--shiki-dark:#98C379;"> root</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">1</span><span style="color:#98C379;--shiki-dark:#98C379;"> daemon</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">2</span><span style="color:#98C379;--shiki-dark:#98C379;"> bin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">3</span><span style="color:#98C379;--shiki-dark:#98C379;"> sys</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">4</span><span style="color:#98C379;--shiki-dark:#98C379;"> sync</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">5</span><span style="color:#98C379;--shiki-dark:#98C379;"> games</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">......</span></span></code></pre></div><p>è¿™é‡Œä½¿ç”¨forå¾ªç¯éå†æ•°ç»„ã€‚</p>`,51)]))}const t=a(o,[["render",p],["__file","linux-k-awk.html.vue"]]),k=JSON.parse(`{"path":"/posts/Linux/linux-k-awk.html","title":"awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤","lang":"zh-CN","frontmatter":{"description":"awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤ 1 ç®€ä»‹ awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼Œawkåœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚ 2 è¯­æ³• å°½ç®¡æ“ä½œå¯èƒ½ä¼šå¾ˆå¤æ‚ï¼Œä½†è¯­æ³•æ€»æ˜¯è¿™æ ·ï¼Œå…¶ä¸­ pattern è¡¨ç¤º AWK åœ¨æ•°æ®ä¸­æŸ¥æ‰¾çš„å†…å®¹ï¼Œ...","watermark":true,"head":[["meta",{"property":"og:url","content":"https://springg.us.kg/posts/Linux/linux-k-awk.html"}],["meta",{"property":"og:site_name","content":"mrjasonâ€™s Blog"}],["meta",{"property":"og:title","content":"awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤"}],["meta",{"property":"og:description","content":"awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤ 1 ç®€ä»‹ awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼Œawkåœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚ 2 è¯­æ³• å°½ç®¡æ“ä½œå¯èƒ½ä¼šå¾ˆå¤æ‚ï¼Œä½†è¯­æ³•æ€»æ˜¯è¿™æ ·ï¼Œå…¶ä¸­ pattern è¡¨ç¤º AWK åœ¨æ•°æ®ä¸­æŸ¥æ‰¾çš„å†…å®¹ï¼Œ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-21T07:03:09.000Z"}],["meta",{"property":"article:author","content":"MrJason"}],["meta",{"property":"article:modified_time","content":"2024-10-21T07:03:09.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"awkå¼ºå¤§çš„æ–‡æœ¬åˆ†æå‘½ä»¤\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-21T07:03:09.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MrJason\\",\\"url\\":\\"https://springg.us.kg\\"}]}"]]},"headers":[{"level":2,"title":"1 ç®€ä»‹","slug":"_1-ç®€ä»‹","link":"#_1-ç®€ä»‹","children":[]},{"level":2,"title":"2 è¯­æ³•","slug":"_2-è¯­æ³•","link":"#_2-è¯­æ³•","children":[]},{"level":2,"title":"3 awkå…¥é—¨","slug":"_3-awkå…¥é—¨","link":"#_3-awkå…¥é—¨","children":[]},{"level":2,"title":"4 awk è¿›é˜¶","slug":"_4-awk-è¿›é˜¶","link":"#_4-awk-è¿›é˜¶","children":[{"level":3,"title":"4.1 å†…ç½®å˜é‡","slug":"_4-1-å†…ç½®å˜é‡","link":"#_4-1-å†…ç½®å˜é‡","children":[]},{"level":3,"title":"4.2 å˜é‡å’Œèµ‹å€¼","slug":"_4-2-å˜é‡å’Œèµ‹å€¼","link":"#_4-2-å˜é‡å’Œèµ‹å€¼","children":[]},{"level":3,"title":"4.3 æ¡ä»¶è¯­å¥","slug":"_4-3-æ¡ä»¶è¯­å¥","link":"#_4-3-æ¡ä»¶è¯­å¥","children":[]},{"level":3,"title":"4.4 å¾ªç¯è¯­å¥","slug":"_4-4-å¾ªç¯è¯­å¥","link":"#_4-4-å¾ªç¯è¯­å¥","children":[]},{"level":3,"title":"4.5 æ•°ç»„","slug":"_4-5-æ•°ç»„","link":"#_4-5-æ•°ç»„","children":[]}]}],"git":{"createdTime":1729494189000,"updatedTime":1729494189000,"contributors":[{"name":"MrJason","email":"845886914@qq.com","commits":1}]},"readingTime":{"minutes":5.86,"words":1759},"filePathRelative":"posts/Linux/linux-k-awk.md","localizedDate":"2024å¹´10æœˆ21æ—¥","excerpt":"\\n<h2>1 ç®€ä»‹</h2>\\n<p>awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼Œawkåœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚</p>\\n<h2>2 è¯­æ³•</h2>\\n<div class=\\"language-bash\\" data-ext=\\"bash\\" data-title=\\"bash\\"><pre class=\\"shiki shiki-themes one-dark-pro one-dark-pro vp-code\\" style=\\"background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color:#61AFEF;--shiki-dark:#61AFEF\\">awk</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> '{pattern + action}'</span><span style=\\"color:#98C379;--shiki-dark:#98C379\\"> {filenames}</span></span></code></pre>\\n</div>","autoDesc":true}`);export{t as comp,k as data};
