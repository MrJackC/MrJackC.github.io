import{_ as a,c as n,a as i,o as l}from"./app-DP7tPpgD.js";const e={};function r(p,s){return l(),n("div",null,s[0]||(s[0]=[i(`<h1 id="minio部署-minio安装" tabindex="-1"><a class="header-anchor" href="#minio部署-minio安装"><span>Minio部署 - MinIO安装</span></a></h1><h2 id="_1-简介" tabindex="-1"><a class="header-anchor" href="#_1-简介"><span>1. 简介</span></a></h2><blockquote><p>MinIO 是一个基于Apache License v2.0开源协议的对象存储服务。它兼容亚马逊S3云存储服务接口，非 常适合于存储大容量非结构化的数据，例如图片、视频、日志文件、备份数据和容器/虚拟机镜像等，而 一个对象文件可以是任意大小，从几kb到最大5T不等。 MinIO是一个非常轻量的服务,可以很简单的和其他应用的结合，类似 NodeJS, Redis 或者 MySQL。</p></blockquote><p>一个对象存储服务，适合存储非结构化数据。如图片、视频、日志文件等</p><h3 id="_1-1-优点" tabindex="-1"><a class="header-anchor" href="#_1-1-优点"><span>1.1 优点</span></a></h3><ul><li>部署简单: 一个single二进制文件即是一切，还可支持各种平台。</li><li>minio支持海量存储，可按zone扩展(原zone不受任何影响)，支持单个对象最大5TB;</li><li>兼容Amazon S3接口，充分考虑开发人员的需求和体验;</li><li>低冗余且磁盘损坏高容忍，标准且最高的数据冗余系数为2(即存储一个1M的数据对象，实际占用 磁盘空间为2M)。但在任意n/2块disk损坏的情况下依然可以读出数据(n为一个纠删码集合(Erasure Coding Set)中的disk数量)。并且这种损坏恢复是基于单个对象的，而不是基于整个存储卷的。</li><li>读写性能优异</li></ul><h2 id="_2-安装" tabindex="-1"><a class="header-anchor" href="#_2-安装"><span>2. 安装</span></a></h2><h3 id="_2-1-centos7-单机部署" tabindex="-1"><a class="header-anchor" href="#_2-1-centos7-单机部署"><span>2.1 Centos7 单机部署</span></a></h3><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">wget</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -q</span><span style="color:#98C379;--shiki-dark:#98C379;"> http://dl.minio.org.cn/server/minio/release/linux-amd64/minio</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">chmod</span><span style="color:#98C379;--shiki-dark:#98C379;"> +x</span><span style="color:#98C379;--shiki-dark:#98C379;"> minio</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#启动minio server服务，指定数据存储目录/mnt/data</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">./minio</span><span style="color:#98C379;--shiki-dark:#98C379;"> server</span><span style="color:#98C379;--shiki-dark:#98C379;"> /mnt/data</span></span></code></pre></div><figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404301408426.png" alt="image-20210925212033260" tabindex="0" loading="lazy"><figcaption>image-20210925212033260</figcaption></figure><p>默认用户名密码minioadmin:minioadmin，修改默认用户名密码可以使用：</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">export</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> MINIO_ROOT_USER</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#E06C75;--shiki-dark:#E06C75;">admin</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">export</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> MINIO_ROOT_PASSWORD</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">12345678</span></span></code></pre></div><p>默认的配置目录是\${HOME}/.minio，可以通过--config-dir命令自定义配置目录：</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">./minio</span><span style="color:#98C379;--shiki-dark:#98C379;"> server</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --config-dir</span><span style="color:#98C379;--shiki-dark:#98C379;"> /mnt/config</span><span style="color:#98C379;--shiki-dark:#98C379;"> /mnt/data</span></span></code></pre></div><p>控制台监听端口是动态生成的，可以通过--console-address &quot;:port&quot;指定静态端口</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">./minio</span><span style="color:#98C379;--shiki-dark:#98C379;"> server</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> /mnt/data</span></span></code></pre></div><figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404301408472.png" alt="image-20210925212415270" tabindex="0" loading="lazy"><figcaption>image-20210925212415270</figcaption></figure><h3 id="_2-2-docker安装" tabindex="-1"><a class="header-anchor" href="#_2-2-docker安装"><span>2.2 docker安装</span></a></h3><p>注：跟中文官网有巨大不同。中文官网没有指定console端口</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="color:#98C379;--shiki-dark:#98C379;"> run</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> 9000:9000</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> 9001:50000</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --name</span><span style="color:#98C379;--shiki-dark:#98C379;"> minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">-v </span><span style="color:#98C379;--shiki-dark:#98C379;">/mnt/data:/data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">-v </span><span style="color:#98C379;--shiki-dark:#98C379;">/mnt/config:/root/.minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">minio/minio </span><span style="color:#98C379;--shiki-dark:#98C379;">server</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data</span></span></code></pre></div><p>MinIO自定义用户名密码</p><div class="language-sh" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">docker</span><span style="color:#98C379;--shiki-dark:#98C379;"> run</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -d</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> 9000:9000</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> 9001:50000</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --name</span><span style="color:#98C379;--shiki-dark:#98C379;"> minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">-e </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;MINIO_ROOT_USER=admin&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">-e </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;MINIO_ROOT_PASSWORD=12345678&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">-v </span><span style="color:#98C379;--shiki-dark:#98C379;">/mnt/data:/data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">-v </span><span style="color:#98C379;--shiki-dark:#98C379;">/mnt/config:/root/.minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">minio/minio </span><span style="color:#98C379;--shiki-dark:#98C379;">server</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --console-address</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;:9001&quot;</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data</span></span></code></pre></div><h3 id="_2-3-docker-compose-单实例安装" tabindex="-1"><a class="header-anchor" href="#_2-3-docker-compose-单实例安装"><span>2.3 docker-compose 单实例安装</span></a></h3><div class="language-yml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">services</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  minio</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">minio/minio:RELEASE.2021-10-27T16-29-42Z</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    container_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">minio</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    ports</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # api 端口</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;9000:9000&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 控制台端口</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;9001:9001&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    environment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 时区上海</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      TZ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">Asia/Shanghai</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 管理后台用户名</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_ACCESS_KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">admin</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 管理后台密码，最小8个字符</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_SECRET_KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">zsz123456</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # https需要指定域名</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_SERVER_URL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 开启压缩 on 开启 off 关闭</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_COMPRESS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;off&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 扩展名 .pdf,.doc 为空 所有类型均压缩</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_COMPRESS_EXTENSIONS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # mime 类型 application/pdf 为空 所有类型均压缩</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_COMPRESS_MIME_TYPES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 映射当前目录下的data目录至容器内/data目录</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">./data:/data</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 映射配置目录</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">./config:/root/.minio/</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">server --address &#39;:9000&#39; --console-address &#39;:9001&#39; /data</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 指定容器中的目录 /data</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    privileged</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # restart: always</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-docker-compose-单实例支持https" tabindex="-1"><a class="header-anchor" href="#_2-4-docker-compose-单实例支持https"><span>2.4 docker-compose 单实例支持https</span></a></h3><div class="language-yml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&#39;3&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">services</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  minio</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">minio/minio:RELEASE.2021-10-27T16-29-42Z</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    container_name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">minio</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    ports</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # api 端口</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;9000:9000&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 控制台端口</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;9001:9001&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    environment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 时区上海</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      TZ</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">Asia/Shanghai</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 管理后台用户名</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_ROOT_USER</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">admin</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 管理后台密码，最小8个字符</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_ROOT_PASSWORD</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">zsz123456</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # https需要指定域名</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_SERVER_URL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;https://minio.xxx.com:9000&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_BROWSER_REDIRECT_URL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;https://minio.xxx.com:9001&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 开启压缩 on 开启 off 关闭</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_COMPRESS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;off&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 扩展名 .pdf,.doc 为空 所有类型均压缩</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_COMPRESS_EXTENSIONS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # mime 类型 application/pdf 为空 所有类型均压缩</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">      MINIO_COMPRESS_MIME_TYPES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 映射当前目录下的data目录至容器内/data目录</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">./data:/data</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 映射配置目录</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      - </span><span style="color:#98C379;--shiki-dark:#98C379;">./config:/root/.minio</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    command</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#98C379;--shiki-dark:#98C379;">server --address &#39;:9000&#39; --console-address &#39;:9001&#39; /data</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 指定容器中的目录 /data</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    privileged</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">: </span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # restart: always</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-docker-compose-集群安装" tabindex="-1"><a class="header-anchor" href="#_2-5-docker-compose-集群安装"><span>2.5 docker-compose 集群安装</span></a></h3><p>主要有两文件，docker-compose.yaml 和 nginx.conf</p><h4 id="_2-5-1-docker-compose-yaml" tabindex="-1"><a class="header-anchor" href="#_2-5-1-docker-compose-yaml"><span>2.5.1 docker-compose.yaml</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">version</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;3.7&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;"># </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">Settings</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> and configurations that are common </span><span style="color:#C678DD;--shiki-dark:#C678DD;">for</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> all containers</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">x</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">common</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> &amp;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">common</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  image</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> quay</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">io</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">RELEASE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF;">2022</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">07</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">17T15</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">43</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">14Z</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  command</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> server </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">--</span><span style="color:#E06C75;--shiki-dark:#E06C75;">console</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">address </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;:9001&quot;</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> http</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//minio{1...4}/data{1...2}</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  expose</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">    -</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;9000&quot;</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">    -</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;9001&quot;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  environment</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    MINIO_ROOT_USER</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minioadmin</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    MINIO_ROOT_PASSWORD</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minioadmin</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  healthcheck</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    test</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> [</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;CMD&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;curl&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;-f&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;http://localhost:9000/minio/health/live&quot;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">]</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    interval</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> 30s</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    timeout</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> 20s</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    retries</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;"># starts </span><span style="color:#D19A66;--shiki-dark:#D19A66;">4</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> docker containers running minio server instances</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;"># using nginx reverse proxy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> load balancing</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> you can access</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;"># it through port </span><span style="color:#D19A66;--shiki-dark:#D19A66;">9000.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">services</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  minio1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">    &lt;&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">common</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio1</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data1</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  minio2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">    &lt;&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">common</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio2</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data1</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  minio3</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">    &lt;&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">common</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio3</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data3</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data1</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data3</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  minio4</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">    &lt;&lt;</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;"> *</span><span style="color:#E06C75;--shiki-dark:#E06C75;">minio</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">common</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio4</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data4</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data1</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data4</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">data2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  nginx</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    image</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> nginx</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1.19</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF;">2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#E06C75;--shiki-dark:#E06C75;">alpine</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    hostname</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> nginx</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    volumes</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> .</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">nginx</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">conf</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">etc</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E06C75;--shiki-dark:#E06C75;">nginx</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">/</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">nginx</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">conf</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    ports</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;9000:9000&quot;</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;9001:9001&quot;</span><span style="color:#E06C75;--shiki-dark:#E06C75;">  </span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">    depends_on</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio1</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio2</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio3</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">      -</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> minio4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">## </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">By</span><span style="color:#C678DD;--shiki-dark:#C678DD;"> default</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;"> this</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> config uses </span><span style="color:#C678DD;--shiki-dark:#C678DD;">default</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> local driver</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">## </span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">For</span><span style="color:#E06C75;--shiki-dark:#E06C75;"> custom volumes replace with volume driver configuration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">.</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">volumes</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data1</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data2</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data3</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data3</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data4</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">1</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75;">  data4</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">-</span><span style="color:#D19A66;--shiki-dark:#D19A66;">2</span><span style="color:#C678DD;--shiki-dark:#C678DD;">:</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-5-2-nginx-conf" tabindex="-1"><a class="header-anchor" href="#_2-5-2-nginx-conf"><span>2.5.2 nginx.conf</span></a></h4><div class="language-nginx line-numbers-mode" data-ext="nginx" data-title="nginx"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">user </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> nginx;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">worker_processes </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> auto;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">error_log </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /var/log/nginx/error.log </span><span style="color:#D19A66;--shiki-dark:#D19A66;">warn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">pid </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">       /var/run/nginx.pid;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">events</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    worker_connections </span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 4096</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">http</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    include </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      /etc/nginx/mime.types;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    default_type </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> application/octet-stream;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    log_format </span><span style="color:#D19A66;--shiki-dark:#D19A66;"> main</span><span style="color:#98C379;--shiki-dark:#98C379;">  &#39;$</span><span style="color:#E06C75;--shiki-dark:#E06C75;">remote_addr</span><span style="color:#98C379;--shiki-dark:#98C379;"> - $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">remote_user</span><span style="color:#98C379;--shiki-dark:#98C379;"> [$</span><span style="color:#E06C75;--shiki-dark:#E06C75;">time_local</span><span style="color:#98C379;--shiki-dark:#98C379;">] &quot;$</span><span style="color:#E06C75;--shiki-dark:#E06C75;">request</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot; &#39;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">                      &#39;$</span><span style="color:#E06C75;--shiki-dark:#E06C75;">status</span><span style="color:#98C379;--shiki-dark:#98C379;"> $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">body_bytes_sent</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;$</span><span style="color:#E06C75;--shiki-dark:#E06C75;">http_referer</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot; &#39;</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">                      &#39;&quot;$</span><span style="color:#E06C75;--shiki-dark:#E06C75;">http_user_agent</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot; &quot;$</span><span style="color:#E06C75;--shiki-dark:#E06C75;">http_x_forwarded_for</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    access_log </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> /var/log/nginx/access.log  </span><span style="color:#D19A66;--shiki-dark:#D19A66;">main</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    sendfile </span><span style="color:#D19A66;--shiki-dark:#D19A66;">       on</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    keepalive_timeout </span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 65</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # include /etc/nginx/conf.d/*.conf;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    upstream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio1:9000;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio2:9000;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio3:9000;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio4:9000;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    upstream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> console {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        ip_hash</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio1:9001;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio2:9001;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio3:9001;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> minio4:9001;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        listen </span><span style="color:#D19A66;--shiki-dark:#D19A66;">      9000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        listen </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> [::]:9000;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server_name </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> localhost;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # To allow special characters in headers</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        ignore_invalid_headers </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Allow any size file to be uploaded.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Set to a value such as 1000m; to restrict file size to a specific value</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        client_max_body_size </span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # To disable buffering</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        proxy_buffering </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        proxy_request_buffering </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        location</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> / {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">Host $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">http_host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-Real-IP $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">remote_addr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-Forwarded-For $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">proxy_add_x_forwarded_for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-Forwarded-Proto $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">scheme</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_connect_timeout </span><span style="color:#D19A66;--shiki-dark:#D19A66;">300</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # Default is HTTP/1, keepalive is only enabled in HTTP/1.1</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_http_version </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1.1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">Connection </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            chunked_transfer_encoding </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_pass </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">http://minio;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">    server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        listen </span><span style="color:#D19A66;--shiki-dark:#D19A66;">      9001</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        listen </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> [::]:9001;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        server_name </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> localhost;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # To allow special characters in headers</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        ignore_invalid_headers </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Allow any size file to be uploaded.</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Set to a value such as 1000m; to restrict file size to a specific value</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        client_max_body_size </span><span style="color:#D19A66;--shiki-dark:#D19A66;">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # To disable buffering</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        proxy_buffering </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        proxy_request_buffering </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">        location</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> / {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">Host $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">http_host</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-Real-IP $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">remote_addr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-Forwarded-For $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">proxy_add_x_forwarded_for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-Forwarded-Proto $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">scheme</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-NginX-Proxy </span><span style="color:#D19A66;--shiki-dark:#D19A66;">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # This is necessary to pass the correct IP to be hashed</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            real_ip_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">X-Real-IP;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_connect_timeout </span><span style="color:#D19A66;--shiki-dark:#D19A66;">300</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">            </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # To support websocket</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_http_version </span><span style="color:#D19A66;--shiki-dark:#D19A66;">1.1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">Upgrade $</span><span style="color:#E06C75;--shiki-dark:#E06C75;">http_upgrade</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">Connection </span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;upgrade&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">            </span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            chunked_transfer_encoding </span><span style="color:#D19A66;--shiki-dark:#D19A66;">off</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">            proxy_pass </span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">http://console;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章"><span>参考文章</span></a></h2><p><a href="https://www.bilibili.com/s/video/BV1Pq4y1U7ha" target="_blank" rel="noopener noreferrer"><strong>【2021最新版】分布式文件系统MinIO教学视频，通俗易懂！</strong></a></p>`,34)]))}const k=a(e,[["render",r],["__file","minio-install.html.vue"]]),c=JSON.parse('{"path":"/posts/Architect/minio/minio-install.html","title":"Minio部署 - MinIO安装","lang":"zh-CN","frontmatter":{"aliases":"Minio部署 - MinIO安装","tags":null,"cssclass":null,"source":null,"order":500,"category":["Minio"],"created":"2024-04-24 14:35","updated":"2024-04-30 14:08","description":"Minio部署 - MinIO安装 1. 简介 MinIO 是一个基于Apache License v2.0开源协议的对象存储服务。它兼容亚马逊S3云存储服务接口，非 常适合于存储大容量非结构化的数据，例如图片、视频、日志文件、备份数据和容器/虚拟机镜像等，而 一个对象文件可以是任意大小，从几kb到最大5T不等。 MinIO是一个非常轻量的服务,可以很...","watermark":true,"head":[["meta",{"property":"og:url","content":"https://springg.us.kg/posts/Architect/minio/minio-install.html"}],["meta",{"property":"og:site_name","content":"mrjason’s Blog"}],["meta",{"property":"og:title","content":"Minio部署 - MinIO安装"}],["meta",{"property":"og:description","content":"Minio部署 - MinIO安装 1. 简介 MinIO 是一个基于Apache License v2.0开源协议的对象存储服务。它兼容亚马逊S3云存储服务接口，非 常适合于存储大容量非结构化的数据，例如图片、视频、日志文件、备份数据和容器/虚拟机镜像等，而 一个对象文件可以是任意大小，从几kb到最大5T不等。 MinIO是一个非常轻量的服务,可以很..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404301408426.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-28T01:58:08.000Z"}],["meta",{"property":"article:author","content":"MrJason"}],["meta",{"property":"article:modified_time","content":"2024-10-28T01:58:08.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Minio部署 - MinIO安装\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404301408426.png\\",\\"https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404301408472.png\\"],\\"dateModified\\":\\"2024-10-28T01:58:08.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MrJason\\",\\"url\\":\\"https://springg.us.kg\\"}]}"]]},"headers":[{"level":2,"title":"1. 简介","slug":"_1-简介","link":"#_1-简介","children":[{"level":3,"title":"1.1 优点","slug":"_1-1-优点","link":"#_1-1-优点","children":[]}]},{"level":2,"title":"2. 安装","slug":"_2-安装","link":"#_2-安装","children":[{"level":3,"title":"2.1 Centos7 单机部署","slug":"_2-1-centos7-单机部署","link":"#_2-1-centos7-单机部署","children":[]},{"level":3,"title":"2.2 docker安装","slug":"_2-2-docker安装","link":"#_2-2-docker安装","children":[]},{"level":3,"title":"2.3 docker-compose 单实例安装","slug":"_2-3-docker-compose-单实例安装","link":"#_2-3-docker-compose-单实例安装","children":[]},{"level":3,"title":"2.4 docker-compose 单实例支持https","slug":"_2-4-docker-compose-单实例支持https","link":"#_2-4-docker-compose-单实例支持https","children":[]},{"level":3,"title":"2.5 docker-compose 集群安装","slug":"_2-5-docker-compose-集群安装","link":"#_2-5-docker-compose-集群安装","children":[]}]},{"level":2,"title":"参考文章","slug":"参考文章","link":"#参考文章","children":[]}],"git":{"createdTime":1730080688000,"updatedTime":1730080688000,"contributors":[{"name":"MrJason","email":"845886914@qq.com","commits":1}]},"readingTime":{"minutes":4.78,"words":1434},"filePathRelative":"posts/Architect/minio/minio-install.md","localizedDate":"2024年10月28日","excerpt":"\\n<h2>1. 简介</h2>\\n<blockquote>\\n<p>MinIO 是一个基于Apache License v2.0开源协议的对象存储服务。它兼容亚马逊S3云存储服务接口，非 常适合于存储大容量非结构化的数据，例如图片、视频、日志文件、备份数据和容器/虚拟机镜像等，而 一个对象文件可以是任意大小，从几kb到最大5T不等。 MinIO是一个非常轻量的服务,可以很简单的和其他应用的结合，类似 NodeJS, Redis 或者 MySQL。</p>\\n</blockquote>\\n<p>一个对象存储服务，适合存储非结构化数据。如图片、视频、日志文件等</p>\\n<h3>1.1 优点</h3>\\n<ul>\\n<li>部署简单: 一个single二进制文件即是一切，还可支持各种平台。</li>\\n<li>minio支持海量存储，可按zone扩展(原zone不受任何影响)，支持单个对象最大5TB;</li>\\n<li>兼容Amazon S3接口，充分考虑开发人员的需求和体验;</li>\\n<li>低冗余且磁盘损坏高容忍，标准且最高的数据冗余系数为2(即存储一个1M的数据对象，实际占用 磁盘空间为2M)。但在任意n/2块disk损坏的情况下依然可以读出数据(n为一个纠删码集合(Erasure Coding Set)中的disk数量)。并且这种损坏恢复是基于单个对象的，而不是基于整个存储卷的。</li>\\n<li>读写性能优异</li>\\n</ul>","autoDesc":true}');export{k as comp,c as data};
