<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://springg.us.kg/rss.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <atom:link href="https://springg.us.kg/rss.xml" rel="self" type="application/rss+xml"/>
    <title>mrjason’s Blog</title>
    <link>https://springg.us.kg/</link>
    <description>春鸽鸽的博客</description>
    <language>zh-CN</language>
    <pubDate>Tue, 26 Nov 2024 09:35:38 GMT</pubDate>
    <lastBuildDate>Tue, 26 Nov 2024 09:35:38 GMT</lastBuildDate>
    <generator>@vuepress/plugin-feed</generator>
    <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
    <category>架构</category>
    <item>
      <title>读懂XHR、Ajax，Fetch</title>
      <link>https://springg.us.kg/posts/Web/frontend-js/XHR.html</link>
      <guid>https://springg.us.kg/posts/Web/frontend-js/XHR.html</guid>
      <source url="https://springg.us.kg/rss.xml">读懂XHR、Ajax，Fetch</source>
      <description>读懂XHR、Ajax，Fetch XHR、Ajax、Fetch到底是个啥 概述 要对XHR、Ajax、fetch有个深刻的掌握，让我们先来了解一下xhr、ajax、fetch 这三者都是个啥？以及他们的区别和联系。 首先，什么是XHR，XHR是XMLHttpRequest的缩写，它是是浏览器内置的一种对HTTP请求和响应的处理方式，能够获取和发送数据，...</description>
      <pubDate>Tue, 26 Nov 2024 09:28:04 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>XHR、Ajax、Fetch到底是个啥</h2>
<h3>概述</h3>
<p>要对<a href="https://so.csdn.net/so/search?q=XHR&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">XHR</a>、Ajax、fetch有个深刻的掌握，让我们先来了解一下xhr、ajax、fetch 这三者都是个啥？以及他们的区别和联系。</p>
<ol>
<li>首先，什么是XHR，XHR是XMLHttpRequest的缩写，它是是<strong>浏览器内置的一种对HTTP请求和响应的处理方式</strong>，能够获取和发送数据，支持流处理、进度事件和断点续传，是fetch和Ajax的基础。</li>
<li>其次，那什么是ajax呢？ ajax是Asynchronous JavaScript And XML（异步的JS和XML）的缩写，<strong>是一种实现无页面刷新的情况下使用XHR对象向服务器发起请求获取服务器端数据的技术。</strong> 它可以使用JSON、XML、html和text文本等格式发送和接收数据<br>
ajax最吸引人的<strong>特性</strong>就是它的**“异步”**特性，也就是说可以 <strong>在不刷新页面的情况下实现与服务器的通信，交换数据，或更新页面。</strong></li>
<li>最后，那什么又是Fetch呢？Fetch是基于Promise的新式API，主要用于获取资源，支持流处理和通过拦截器来处理请求和响应，可以在浏览器端和Node.js中使用。</li>
</ol>
<h3><a class="header-anchor" href="#一次完整的ajax请求过程"><span>一次完整的</span></a><a href="https://so.csdn.net/so/search?q=ajax&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">Ajax</a>请求过程</h3>
<ol>
<li>创建网络请求的ajax对象（使用XHR）</li>
<li>监听XHR对象状态的变化，或者监听onload事件（请求完成时触发）</li>
<li>配置网络请求（通过open方法）</li>
<li>发送send网络请求</li>
</ol>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 1.创建XMLHttpReqest对象</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 2.监听对象状态的改变（宏任务）</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 监听四种状态</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// xhr.onreadystatechange = function() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 	// 1.如果状态不是DONE状态，直接返回</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 	if(xhr.readystate !== XMLHttpRequest.DONE)	return </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 	// 2.确定拿到了数据</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 	console.log(xhr.response)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 监听onload事件，是可以确定拿到了数据的</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onload</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 3.配置请求的方式/URL等</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">responseType</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "json"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3000</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"get"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"http://xxx.xx.xx"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 4.发送请求</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 5.获取数据</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>XHR的state的说明</h4>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/20241126152401.png" alt="图片来自 coderwhy 老师" tabindex="0" loading="lazy"><figcaption>图片来自 coderwhy 老师</figcaption></figure>
<h4>http的响应状态码的说明</h4>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/httpsi-blog.csdnimg.cnblog_migratea803d11aff4b3bc9c4549227f08bc159.png#pic_center.png" alt="图片来自 coderwhy 老师" tabindex="0" loading="lazy"><figcaption>图片来自 coderwhy 老师</figcaption></figure>
<h3><a class="header-anchor" href="#客户端传递参数的四种方式"><span></span></a><a href="https://so.csdn.net/so/search?q=%E5%AE%A2%E6%88%B7%E7%AB%AF&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">客户端</a>传递参数的四种方式</h3>
<p>现在我们知道了一次完整的ajax的请求过程是什么样子，但是我们对于客户端发送请求传递的参数方式还不甚了解，接下来就一起来看一下吧</p>
<p>在开发中，我们使用最多的是get和post请求，在发送请求的过程中，我们也可以传递给服务器数据<br>
常见的传递给服务器数据的有以下几种：</p>
<ol>
<li>get请求的query参数</li>
<li>post请求 x-www-form-urlencoded格式</li>
<li>post请求FormData格式</li>
<li>post请求JSON格式（最常用）<br>
接下来看一下示例吧</li>
</ol>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;!</span><span style="color:#E06C75;--shiki-dark:#E06C75">DOCTYPE</span><span style="color:#D19A66;--shiki-dark:#D19A66"> html</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">html</span><span style="color:#D19A66;--shiki-dark:#D19A66"> lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"en"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">head</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> http-equiv</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"X-UA-Compatible"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"IE=edge"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"viewport"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"width=device-width, initial-scale=1.0"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;客户端传递参数的四种方式&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">head</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">form</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"info"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">input</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"username"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">input</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"password"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"password"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">form</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"send"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;发送请求&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  	const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> formEl</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">querySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">".info"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> sendBtn</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">querySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">".send"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    sendBtn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onclick</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  // 创建xhr对象</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 监听数据响应</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onload</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 配置请求</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">responseType</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "json"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  // 1.方式1：get请求传递参数</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'get'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'http://xxx.xx.xx/getData?page=1&amp;pageSize=30'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  // 2.方式2：post请求（urlencoded）</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'post'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">	  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> urlParams</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "page=1&amp;pageSize=30"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Content-type'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'application/x-www-form-urlencoded'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">urlParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  // 3.方式3：post请求传递参数（FormData）</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  // 说明：因为post请求的默认content-type就是formdata格式，所以就不用再设置了</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'post'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  // 将formElement对象转成FormData对象</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> formData</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FormData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">formEl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      formData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"admin"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">123456</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">formData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  // 4.方式4：post =&gt; JSON</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'post'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">	  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> jsonParams</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> JSON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stringify</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span><span style="color:#E06C75;--shiki-dark:#E06C75">page</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">pageSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">30</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">})</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Content-type'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'application/json, charset=utf-8'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">jsonParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  	</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">html</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>ajax网络请求过程的封装</h3>
<h4>方式1：普通封装</h4>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> myAjax</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  method</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "get"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {},</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  headers</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {},</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  failure</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {}) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 1.创建xhr对象</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 2.监听XHR对象状态的变化</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onreadystatechange</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">readyState</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !==</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">DONE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">return</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 对网络请求返回的状态码进行处理</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 200</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &amp;&amp;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 300</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ||</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 304</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      success</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &amp;&amp;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      failure</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &amp;&amp;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> failure</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 3.设置响应的类型</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">responseType</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "json"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> timeout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 4.1 设置请求参数</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> params</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">keys</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  					.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">key</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> `</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#E06C75;--shiki-dark:#E06C75">key</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">=</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">encodeURIComponent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> paramsString</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">join</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"&amp;"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 4.2 设置header，发送网络请求</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toLowerCase</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">===</span><span style="color:#98C379;--shiki-dark:#98C379"> "get"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> "?"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E06C75;--shiki-dark:#E06C75"> paramsString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">keys</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">headerKey</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    	return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    })</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Content-type'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'application/x-www-form-urlencoded'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">keys</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">headerKey</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">     	return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]) </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    })</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">paramsString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> xhr</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>复杂请求方式</h4>
<p>SpringBoot后端通过这样的方式接收参数<br>
@RequestBody  注解List接收工单编号，前端传递数组<br>
<img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/image.png.png" alt="springBoot后端接收参数方式" loading="lazy"></p>
<p>Vue中的axios方式调用接口<br>
<img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/image-2.png.png" alt="vue前端封装请求方式" loading="lazy"></p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/image-1.png.png" alt="浏览器中的网络请求" tabindex="0" loading="lazy"><figcaption>浏览器中的网络请求</figcaption></figure>
<p>xhr方式调用接口代码段</p>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// xhr发起post的请求   但是请求参数中还有部分参数的写法</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getGisLayerInfoByWorkIdApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">([],</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        sceneName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'JMQ'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        city</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'呼和浩特'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        minLongitude</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">101.05931</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        maxLongitude</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">111.896898</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        minLatitude</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">39.906337</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        maxLatitude</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">41.957453</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        layerType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'面'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  getGisLayerInfoByWorkIdApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">workOrderId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">gisQuery</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      var</span><span style="color:#E06C75;--shiki-dark:#E06C75"> xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 创建查询字符串</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> queryString</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> URLSearchParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">gisQuery</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 配置请求参数</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'POST'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">`http://xxxx/gis-management-system/api/layerLibrary/getGisLayerInfoByWorkId?</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#E06C75;--shiki-dark:#E06C75">queryString</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 设置请求头</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Content-Type'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'application/json;charset=utf-8'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 处理响应</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onreadystatechange</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">readyState</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">DONE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">          if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">            // 解析 JSON 响应</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            var</span><span style="color:#E06C75;--shiki-dark:#E06C75"> response</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> JSON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">parse</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">responseText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">gisData</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 更新 gisData</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'请求错误：'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">statusText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">bind</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">); </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 绑定 this</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 发送请求，注意将工作订单 ID 和查询对象字符串化</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">JSON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stringify</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">workOrderId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 单纯的xhr发起post的请求</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 创建一个新的 XMLHttpRequest 对象</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">var</span><span style="color:#E06C75;--shiki-dark:#E06C75"> xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 配置请求类型和 URL</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'POST'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'http://xxxx/gis-management-system/api/gisSceneInfo/pageList'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);  </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// true 表示异步请求</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 设置请求头（如果需要）</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Content-Type'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'application/json'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 监听请求状态变化</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onreadystatechange</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">readyState</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">DONE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 请求已完成，检查响应状态</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">            // 请求成功，处理响应</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Response:'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">responseText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">            // 请求失败，处理错误</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">error</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Error:'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">statusText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 创建要发送的数据</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">var</span><span style="color:#E06C75;--shiki-dark:#E06C75"> data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    sceneName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'DZJ'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 发送 JSON 数据</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">JSON</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">stringify</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>方式2：基于Promise进行抽取封装</h4>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> myAjax</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  method</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "get"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {},</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  headers</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {},</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">  failure</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {}) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> promise</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Promise</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">resolve</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">reject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 1.创建xhr对象</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 2.监听XHR对象状态的变化</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onreadystatechange</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">readyState</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !==</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">DONE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">return</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 对网络请求返回的状态码进行处理</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 200</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &amp;&amp;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 300</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ||</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 304</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        resolve</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        reject</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">statusText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 3.设置响应的类型</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">responseType</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "json"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> timeout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 4.1 设置请求参数</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> params</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">keys</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">              		 .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">key</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#98C379;--shiki-dark:#98C379"> `</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#E06C75;--shiki-dark:#E06C75">key</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">=</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">encodeURIComponent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> paramsString</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">join</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"&amp;"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 4.2 设置header，发送网络请求</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toLowerCase</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">===</span><span style="color:#98C379;--shiki-dark:#98C379"> "get"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> "?"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E06C75;--shiki-dark:#E06C75"> paramsString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">keys</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">headerKey</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">])</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      })</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Content-type'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'application/x-www-form-urlencoded'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">keys</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">headerKey</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">headers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">headerKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]) </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      })</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">paramsString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }) </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  promise</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> xhr</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  return</span><span style="color:#E06C75;--shiki-dark:#E06C75"> promise</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>fetch网络请求</h3>
<p>fetch可以看做是早期的XHR替代方案，它提供了一种更加现代化的处理方案：<br>
比如：</p>
<ul>
<li>
<p>返回值是一个Promise对象，可以优雅的对返回结果进行处理</p>
</li>
<li>
<p>不像XHR一样，所有的操作都放在一个对象上</p>
</li>
</ul>
<h4>Fetch数据的响应</h4>
<p>fetch的数据响应主要分为两个阶段：<br>
<strong>阶段一：当服务器返回了响应（response）</strong></p>
<ul>
<li>
<p>fetch返回的promise就使用内建的Response class 对象来对响应头进行解析</p>
</li>
<li>
<p>在这个阶段，可以通过检查响应头，来检查HTTP状态以确定请求是否成功</p>
</li>
<li>
<p>如果fetch无法建立HTTP请求，例如网络问题，亦或是请求的网址不存在，那么promise就会reject</p>
</li>
<li>
<p>异常的HTTP状态，例如404或500，不会导致error</p>
</li>
</ul>
<p>可以在response的属性中看到HTTP状态：</p>
<ul>
<li>
<p>status：HTTP状态码，例如200</p>
</li>
<li>
<p>ok: 布尔值，如果HTTP状态码为200 - 299，则为true</p>
</li>
</ul>
<p><strong>阶段二：为了获取response body，我们需要使用一个其他的方法调用</strong></p>
<ul>
<li>
<p>response.text() – 读取response，并以文本形式返回response</p>
</li>
<li>
<p>response.json() – 将response解析为JSON</p>
</li>
</ul>
<h3>fetch网络请求的过程</h3>
<h4>基于Promise</h4>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">fetch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">res</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">res</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">})</span></span></code></pre>
</div><h4>基于async、await的方案</h4>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">async</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">	const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> res</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> fetch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">	const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> res</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">json</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3>基于XHR和fetch进行文件上传</h3>
<p>最后，我们来说一下基于XHR和fetch如何进行文件上传，看代码吧</p>
<h4>XHR</h4>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;!</span><span style="color:#E06C75;--shiki-dark:#E06C75">DOCTYPE</span><span style="color:#D19A66;--shiki-dark:#D19A66"> html</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">html</span><span style="color:#D19A66;--shiki-dark:#D19A66"> lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"en"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">head</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> http-equiv</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"X-UA-Compatible"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"IE=edge"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"viewport"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"width=device-width, initial-scale=1.0"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;基于XHR进行文件上传&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">head</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">input</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"file"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"file"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"upload"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;上传文件&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> uploadBtn</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">querySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">".upload"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    uploadBtn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onclick</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 1.创建对象</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> xhr</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 2.监听结果</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onload</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onprogress</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">event</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">event</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      </span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">responseType</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "json"</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">open</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"post"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 表单</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileEl</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">querySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">".file"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> file</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileEl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">files</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> formData</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FormData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      formData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"avatar"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      xhr</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">formData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">html</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4>fetch</h4>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;!</span><span style="color:#E06C75;--shiki-dark:#E06C75">DOCTYPE</span><span style="color:#D19A66;--shiki-dark:#D19A66"> html</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">html</span><span style="color:#D19A66;--shiki-dark:#D19A66"> lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"en"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">head</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> charset</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> http-equiv</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"X-UA-Compatible"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"IE=edge"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"viewport"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"width=device-width, initial-scale=1.0"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;基于fetch进行文件上传&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">head</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">input</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"file"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"file"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"upload"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;上传文件&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> uploadBtn</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">querySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">".upload"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    uploadBtn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">onclick</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> async</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 表单</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileEl</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> document</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">querySelector</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">".file"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> file</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileEl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">files</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> formData</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> FormData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      formData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">append</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"avatar"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 发送fetch请求</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> response</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> fetch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"post"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">formData</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      })</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> res</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">json</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      console</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"res:"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">res</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">body</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">html</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>]]></content:encoded>
      <enclosure url="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/20241126152401.png" type="image/png"/>
    </item>
    <item>
      <title>相关资料</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/1.%E5%85%A8%E7%BD%91%E8%B5%84%E6%96%99.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/1.%E5%85%A8%E7%BD%91%E8%B5%84%E6%96%99.html</guid>
      <source url="https://springg.us.kg/rss.xml">相关资料</source>
      <description>相关资料 在线文档用油猴脚本可以看 Fuck-Yudao SQL脚本 网盘地址1 网盘地址2 离线文档 文档地址</description>
      <pubDate>Thu, 21 Nov 2024 08:42:43 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在线文档用油猴脚本可以看 <a href="https://greasyfork.org/zh-CN/scripts/494723-yudao" target="_blank" rel="noopener noreferrer">Fuck-Yudao</a></p>
<p>SQL脚本</p>
<p><a href="https://pan.baidu.com/s/1XENZNOhpLD8KmiMc8i8fMA?pwd=eyqa" target="_blank" rel="noopener noreferrer">网盘地址1</a></p>
<p><a href="https://pan.baidu.com/s/1wr9D0D71ZZt4iNCWUaYCAw?pwd=6666" target="_blank" rel="noopener noreferrer">网盘地址2</a></p>
<p>离线文档 <a href="https://gitee.com/li_yu_jiang/yudao-docs.git" target="_blank" rel="noopener noreferrer">文档地址</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>代码热加载</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/10.%E4%BB%A3%E7%A0%81%E7%83%AD%E5%8A%A0%E8%BD%BD.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/10.%E4%BB%A3%E7%A0%81%E7%83%AD%E5%8A%A0%E8%BD%BD.html</guid>
      <source url="https://springg.us.kg/rss.xml">代码热加载</source>
      <description>代码热加载 在日常开发中，我们需要经常修改 Java 代码，手动重启项目，查看修改后的效果。如果在项目小时，重启速度比较快，等待的时间是较短的。但是随着项目逐渐变大，重启的速度变慢，等待时间 1-2 min 是比较常见的。 这样就导致我们开发效率降低，影响我们的下班时间，哈哈哈~ 那么是否有方式能够实现，在我们修改完 Java 代码之后，能够不重启项目...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在日常开发中，我们需要经常修改 Java 代码，手动重启项目，查看修改后的效果。如果在项目小时，重启速度比较快，等待的时间是较短的。但是随着项目逐渐变大，重启的速度变慢，等待时间 1-2 min 是比较常见的。</p>
<p>这样就导致我们开发效率降低，影响我们的下班时间，哈哈哈~</p>
<p>那么是否有方式能够实现，在我们修改完 Java 代码之后，能够不重启项目呢？答案是有的，通过 <strong>代码热加载</strong> 的方式。实现方案有三种：</p>
<ol>
<li>spring-boot-devtools【不推荐】</li>
<li>IDEA 自带 HowSwap 功能【推荐】</li>
<li>JRebel 插件【最推荐】</li>
</ol>
<h2><a class="header-anchor" href="#_1-spring-boot-devtools"><span></span></a><a href="https://doc.iocoder.cn/dev-hot-swap/#_1-spring-boot-devtools" target="_blank" rel="noopener noreferrer">#</a>1. spring-boot-devtools</h2>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.running-your-application.hot-swapping" target="_blank" rel="noopener noreferrer">spring-boot-devtools (opens new window)</a>是 Spring Boot 提供的开发者工具，它会监控当前应用所在的 classpath 下的文件发生变化，进行<strong>自动重启</strong>。</p>
<p>devtools 存在重启速度较慢的问题，所以不推荐！</p>
<h2><a class="header-anchor" href="#_2-idea-自带-howswap-功能"><span></span></a><a href="https://doc.iocoder.cn/dev-hot-swap/#_2-idea-%E8%87%AA%E5%B8%A6-howswap-%E5%8A%9F%E8%83%BD" target="_blank" rel="noopener noreferrer">#</a>2. IDEA 自带 HowSwap 功能</h2>
<p>该功能是 IDEA Ultimate 旗舰版的专属功能，不支持 IDEA Community 社区版。</p>
<h3><a class="header-anchor" href="#_2-1-如何使用"><span></span></a><a href="https://doc.iocoder.cn/dev-hot-swap/#_2-1-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>2.1 如何使用</h3>
<p>① 设置 Spring Boot 启动类，开启 HotSwap 功能。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/IDEA配置热加载.png" alt="IDEA 配置热加载" tabindex="0" loading="lazy"><figcaption>IDEA 配置热加载</figcaption></figure>
<p>② Debug 运行该启动类，等待项目启动完成。</p>
<p>③ 每次修改 Java 代码后，点击左下角的「热加载」按钮，即可实现代码热加载。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/IDEA代码热加载.png" alt="IDEA 代码热加载" tabindex="0" loading="lazy"><figcaption>IDEA 代码热加载</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-存在问题"><span></span></a><a href="https://doc.iocoder.cn/dev-hot-swap/#_2-2-%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98" target="_blank" rel="noopener noreferrer">#</a>2.2 存在问题</h3>
<p>IDEA 自带 HowSwap 功能，支持比较有限，很多修改都不支持。例如说：</p>
<ul>
<li>只能增加方法或字段但不可以减少方法或字段</li>
<li>只能增加可见性不能减少</li>
<li>只能维持已有方法的签名而不能修改等等。</li>
</ul>
<p>你可以认为，只支持方法内的代码修改热加载。</p>
<p>如果想要相对完美的方案，建议使用 JRebel 插件。</p>
<h2><a class="header-anchor" href="#_3-jrebel-插件【最推荐】"><span></span></a><a href="https://doc.iocoder.cn/dev-hot-swap/#_3-jrebel-%E6%8F%92%E4%BB%B6%E3%80%90%E6%9C%80%E6%8E%A8%E8%8D%90%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>3. JRebel 插件【最推荐】</h2>
<p>JRebel 插件是目前最好用的热加载插件，它支持 IDEA Ultimate 旗舰版、Community 社区版。</p>
<h3><a class="header-anchor" href="#_3-1-如何安装"><span></span></a><a href="https://doc.iocoder.cn/dev-hot-swap/#_3-1-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">#</a>3.1 如何安装</h3>
<p>① 点击 <a href="https://plugins.jetbrains.com/plugin/4441-jrebel-and-xrebel/versions" target="_blank" rel="noopener noreferrer">https://plugins.jetbrains.com/plugin/4441-jrebel-and-xrebel/versions (opens new window)</a>地址，必须下载 <strong>2022.4.1</strong> 版本。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/JRebel下载.png" alt="JRebel 下载" tabindex="0" loading="lazy"><figcaption>JRebel 下载</figcaption></figure>
<p>② 打开 [Preference -&gt; Plugins] 菜单，点击「Install Plugin from Disk...」按钮，选择刚下载的 JRebel 插件的压缩包。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/JRebel安装.png" alt="JRebel 安装" tabindex="0" loading="lazy"><figcaption>JRebel 安装</figcaption></figure>
<p>安装完成后，需要重启 IDEA 生效。</p>
<p>③ 打开 [Preference -&gt; JRebel &amp; XRebel] 菜单，输入 GUID address 为 <code>https://jrebel.qekang.com/1e67ec1b-122f-4708-87d0-c1995dc0cdaa</code> ，邮件随便写，完成 JRebel 的激活。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/JRebel激活.png" alt="JRebel 激活" tabindex="0" loading="lazy"><figcaption>JRebel 激活</figcaption></figure>
<p>之后，点击「Work Offline」按钮，设置 JRebel 为离线，避免因为网络问题导致激活失效。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/JRebel离线.png" alt="JRebel 离线" tabindex="0" loading="lazy"><figcaption>JRebel 离线</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-如何使用"><span></span></a><a href="https://doc.iocoder.cn/dev-hot-swap/#_3-2-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>3.2 如何使用</h3>
<p>① 点击「Debug With JRebel」按钮，使用 JRebel 启动项目。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/JRebel启动项目.png" alt="JRebel 启动项目" tabindex="0" loading="lazy"><figcaption>JRebel 启动项目</figcaption></figure>
<p>② 每次修改 Java 代码后，点击左下角的「热加载」按钮，即可实现代码热加载。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码热加载/JRebel代码热加载.png" alt="JRebel 代码热加载" tabindex="0" loading="lazy"><figcaption>JRebel 代码热加载</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E4%BB%A3%E7%A0%81%E7%83%AD%E5%8A%A0%E8%BD%BD/IDEA%E9%85%8D%E7%BD%AE%E7%83%AD%E5%8A%A0%E8%BD%BD.png" type="image/png"/>
    </item>
    <item>
      <title>一键改包</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/11.%E4%B8%80%E9%94%AE%E6%94%B9%E5%8C%85.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/11.%E4%B8%80%E9%94%AE%E6%94%B9%E5%8C%85.html</guid>
      <source url="https://springg.us.kg/rss.xml">一键改包</source>
      <description>一键改包 项目提供了 ProjectReactor (opens new window)程序，支持一键改包，包括 Maven 的 groupId、artifactId、Java 的根 package、前端的 title、数据库的 SQL 配置、应用的 application.yaml 配置文件等等。效果如下图所示： 效果效果 友情提示：修改包名后，未来...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目提供了 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/test/java/cn/iocoder/yudao/ProjectReactor.java" target="_blank" rel="noopener noreferrer">ProjectReactor (opens new window)</a>程序，支持一键改包，包括 Maven 的 <code>groupId</code>、<code>artifactId</code>、Java 的根 <code>package</code>、前端的 <code>title</code>、数据库的 SQL 配置、应用的 <code>application.yaml</code> 配置文件等等。效果如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/一键改包/01.png" alt="效果" tabindex="0" loading="lazy"><figcaption>效果</figcaption></figure>
<p>友情提示：修改包名后，未来合并最新的代码可能会有一定的成本。</p>
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/project-rename/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07yzBuZFu" target="_blank" rel="noopener noreferrer">08、如何实现一键改包？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#操作步骤"><span></span></a><a href="https://doc.iocoder.cn/project-rename/#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4" target="_blank" rel="noopener noreferrer">#</a>操作步骤</h2>
<p>① 第一步，使用 <a href="http://www.iocoder.cn/categories/IDEA/?self" target="_blank" rel="noopener noreferrer">IDEA (opens new window)</a>克隆 <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/ruoyi-vue-pro (opens new window)</a>仓库的最新代码，并给该仓库一个 <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">Star (opens new window)</a>。</p>
<p>② 第二步，打开 ProjectReactor 类，填写 <code>groupIdNew</code>、<code>artifactIdNew</code>、<code>packageNameNew</code>、<code>titleNew</code> 属性。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/一键改包/02.png" alt="效果" tabindex="0" loading="lazy"><figcaption>效果</figcaption></figure>
<p>③ 第三步，执行 ProjectReactor 的 <code>#main(String[] args)</code> 方法，它会基于当前项目，<strong>复制</strong>一个新项目到 <code>projectBaseDirNew</code> 目录，并进行相关的改名逻辑。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">13:02:36.765</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [main] INFO cn.iocoder.yudao.ProjectReactor - [main][开始获得需要重写的文件]</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">13:02:41.530</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [main] INFO cn.iocoder.yudao.ProjectReactor - [main][需要重写的文件数量：2825，预计需要 5-10 秒]</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">13:02:45.799</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [main] INFO cn.iocoder.yudao.ProjectReactor - [main][重写完成]</span></span></code></pre>
</div><p>④ 第四步，使用 IDEA 打开 <code>projectBaseDirNew</code> 目录，参考 <a href="https://doc.iocoder.cn/quick-start" target="_blank" rel="noopener noreferrer">《开发指南 —— 快速启动》</a> 文档，进行项目的启动。<strong>注意</strong>，一定要重新执行 SQL 的导入！！！</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E4%B8%80%E9%94%AE%E6%94%B9%E5%8C%85/01.png" type="image/png"/>
    </item>
    <item>
      <title>删除功能</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/12.%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/12.%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD.html</guid>
      <source url="https://springg.us.kg/rss.xml">删除功能</source>
      <description>删除功能 项目内置功能较多，会存在一些你可能用不到的功能。一般的情况下，建议通过设置该功能对应的菜单为【禁用】，实现功能的“删除”。如下图所示： 设置菜单为禁用设置菜单为禁用 后续，如果你又需要使用到该功能，只需要设置该功能对应的菜单为【开启】即可。 🙂 当然，如果你希望彻底删除功能，那么就需要采用删除代码的方式。整个过程如下： ① 【菜单】第一步，...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目内置<a href="https://doc.iocoder.cn/feature" target="_blank" rel="noopener noreferrer">功能</a>较多，会存在一些你可能用不到的功能。一般的情况下，建议通过设置该功能对应的菜单为【<strong>禁用</strong>】，实现功能的“删除”。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/设置菜单禁用.png" alt="设置菜单为禁用" tabindex="0" loading="lazy"><figcaption>设置菜单为禁用</figcaption></figure>
<p>后续，如果你又需要使用到该功能，只需要设置该功能对应的菜单为【<strong>开启</strong>】即可。</p>
<p>🙂 当然，如果你希望彻底删除功能，那么就需要采用删除代码的方式。整个过程如下：</p>
<p>① 【菜单】第一步，使用管理后台的菜单管理，删除对应的菜单、按钮。<br>
② 【数据库表】第二步，删除对应的数据库表。<br>
③ 【后端代码】第三步，删除对应的 Controller、Service、数据库实体等后端代码；然后启动后端项目，若存在代码报错，则继续删除相关联的代码，之后如此反复，直到成功。<br>
④ 【前端代码】第四步，删除对应的 View 和 API 等前端代码；然后启动前端项目，若存在代码报错，则继续删除相关联的代码，之后如此反复，直到成功。</p>
<p>下面，我们来举一些例子。</p>
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07EUrZrNV" target="_blank" rel="noopener noreferrer">从零开始 07：如何有效的删除不用的功能？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#删除「多租户」功能"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%E5%88%A0%E9%99%A4%E3%80%8C%E5%A4%9A%E7%A7%9F%E6%88%B7%E3%80%8D%E5%8A%9F%E8%83%BD" target="_blank" rel="noopener noreferrer">#</a>删除「多租户」功能</h2>
<ul>
<li>对应功能的文档：<a href="https://doc.iocoder.cn/saas-tenant/" target="_blank" rel="noopener noreferrer">多租户</a></li>
<li>对应的关键字是 <code>tenant</code></li>
</ul>
<h3><a class="header-anchor" href="#第一步-删除菜单"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%E7%AC%AC%E4%B8%80%E6%AD%A5-%E5%88%A0%E9%99%A4%E8%8F%9C%E5%8D%95" target="_blank" rel="noopener noreferrer">#</a>第一步，删除菜单</h3>
<p>删除“租户管理“下的所有菜单，从最里层的按钮开始。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-删除菜单.png" alt="删除“租户管理“菜单" tabindex="0" loading="lazy"><figcaption>删除“租户管理“菜单</figcaption></figure>
<h3><a class="header-anchor" href="#第二步-删除数据库表"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8" target="_blank" rel="noopener noreferrer">#</a>第二步，删除数据库表</h3>
<p>删除 <code>system_tenant</code> 和 <code>system_tenant_package</code> 表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-删除数据库表.png" alt="删除数据库表" tabindex="0" loading="lazy"><figcaption>删除数据库表</figcaption></figure>
<h3><a class="header-anchor" href="#第三步-删除后端代码"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%E7%AC%AC%E4%B8%89%E6%AD%A5-%E5%88%A0%E9%99%A4%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>第三步，删除后端代码</h3>
<p>① 删除 <code>yudao-module-system-api</code> 模块的 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/tenant" target="_blank" rel="noopener noreferrer"><code>api/tenant</code> (opens new window)</a>包。</p>
<p>② 删除 <code>yudao-module-system-api</code> 模块的 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/enums/ErrorCodeConstants.java" target="_blank" rel="noopener noreferrer">ErrorCodeConstants (opens new window)</a>类中，和租户、租户套餐相关的错误码。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-删除错误码.png" alt="删除错误码" tabindex="0" loading="lazy"><figcaption>删除错误码</figcaption></figure>
<p>如果想删除的更干净，可以把 <code>system_error_code</code> 表中，对应编号的错误码也都删除一下。</p>
<p>③ 删除 <code>yudao-module-system-biz</code> 模块的如下包：</p>
<ul>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/api/tenant" target="_blank" rel="noopener noreferrer"><code>api/tenant</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/tenant" target="_blank" rel="noopener noreferrer"><code>controller/admin/tenant</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/tenant" target="_blank" rel="noopener noreferrer"><code>service/tenant</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/test/java/cn/iocoder/yudao/module/system/service/tenant" target="_blank" rel="noopener noreferrer"><code>test/service/tenant</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/tenant" target="_blank" rel="noopener noreferrer"><code>dal/dataobject/tenant</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/mysql/tenant" target="_blank" rel="noopener noreferrer"><code>dal/mysql/tenant</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/convert/tenant" target="_blank" rel="noopener noreferrer"><code>convert/tenant</code>(opens new window)</a></li>
</ul>
<p>④ 删除 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-biz-tenant</code> (opens new window)</a>模块。</p>
<p>然后，使用 IDEA 搜索 <code>yudao-spring-boot-starter-biz-tenant</code> 关键字，删除 Maven 中所有对它的定义与引用。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-删除Maven依赖.png" alt="删除  使用" tabindex="0" loading="lazy"><figcaption>删除  使用</figcaption></figure>
<p>之后，使用 IDEA 刷新下 Maven 依赖。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-刷新Maven依赖.png" alt="租户-刷新Maven依赖" tabindex="0" loading="lazy"><figcaption>租户-刷新Maven依赖</figcaption></figure>
<p>⑤ 运行 YudaoServerApplication 启动类，会报 <code>cn.iocoder.yudao.framework.tenant.core.db</code> 不存在的错误，需要将继承 TenantBaseDO 的数据库实体，都改成继承 BaseDO 基类。</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-修改继承BaseDO类.png" alt="租户-修改继承BaseDO类" tabindex="0" loading="lazy"><figcaption>租户-修改继承BaseDO类</figcaption></figure>
<p>⑥ 运行 YudaoServerApplication 启动类，会报 <code>cn.iocoder.yudao.framework.tenant.core.aop</code> 不存在的错误，需要去除对 <code>@TenantIgnore</code> 注解的使用。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-删除@TenantIgnore注解.png" alt="租户-删除@TenantIgnore注解" tabindex="0" loading="lazy"><figcaption>租户-删除@TenantIgnore注解</figcaption></figure>
<p>⑦ 运行 YudaoServerApplication 启动类，会报 <code>cn.iocoder.yudao.module.system.service.tenant</code> 不存在的错误，需要去除对 TenantService 的使用。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-删除TenantService的使用.png" alt="租户-删除TenantService的使用" tabindex="0" loading="lazy"><figcaption>租户-删除TenantService的使用</figcaption></figure>
<p>⑧ 运行 YudaoServerApplication 启动类，会报 <code>cn.iocoder.yudao.framework.tenant.core.context</code> 不存在的错误，需要去除对 TenantContextHolder 的使用。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-删除TenantContextHolder的使用.png" alt="租户-删除TenantContextHolder的使用" tabindex="0" loading="lazy"><figcaption>租户-删除TenantContextHolder的使用</figcaption></figure>
<p>⑨ 运行 YudaoServerApplication 启动类，终于成功了！！！</p>
<p>ps：可以将 <code>application.yaml</code> 配置文件中，对应的 <code>yudao.tenant</code> 配置项给进一步删除。</p>
<h3><a class="header-anchor" href="#第四步-删除前端代码"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%E7%AC%AC%E5%9B%9B%E6%AD%A5-%E5%88%A0%E9%99%A4%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>第四步，删除前端代码</h3>
<p>以 <code>yudao-admin-ui</code> 为示例~</p>
<p>① 删除 View 和 API 的前端代码：</p>
<ul>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/views/system/tenant" target="_blank" rel="noopener noreferrer"><code>views/system/tenant</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/views/system/tenantPackage" target="_blank" rel="noopener noreferrer"><code>views/system/tenantPackage</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/api/system/tenant.js" target="_blank" rel="noopener noreferrer"><code>api/system/tenant.js</code>(opens new window)</a></li>
<li><a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/api/system/tenantPackage.js" target="_blank" rel="noopener noreferrer"><code>api/system/tenantPackage.js</code>(opens new window)</a></li>
</ul>
<p>② 在 <code>yudao-admin-ui</code> 目录下，执行 <code>npm run local</code> 成功。访问登录页，结果访问白屏。需要清理 <code>login.vue</code> 页，涉及 <code>tenant</code> 关键字的代码。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-清理login页的代码.png" alt="清理 login.vue 的代码" tabindex="0" loading="lazy"><figcaption>清理 login.vue 的代码</figcaption></figure>
<p>刷新，成功访问登录界面。</p>
<p>③ 在 <code>yudao-admin-ui</code> 目录下，搜索 <code>tenant</code> 或 <code>Tenant</code> 关键字，可进一步清理多租户的代码。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/删除功能/租户-进一步清理前端代码.png" alt="进一步清理前端代码" tabindex="0" loading="lazy"><figcaption>进一步清理前端代码</figcaption></figure>
<h3><a class="header-anchor" href="#第五步-测试验收"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%E7%AC%AC%E4%BA%94%E6%AD%A5-%E6%B5%8B%E8%AF%95%E9%AA%8C%E6%94%B6" target="_blank" rel="noopener noreferrer">#</a>第五步，测试验收</h3>
<p>至此，我们已经完成了多租户的代码删除，还是蛮艰辛的~</p>
<p>后续，你可以简单测试一下，看看是不是删除代码，导致一些小问题。</p>
<h2><a class="header-anchor" href="#更多"><span></span></a><a href="https://doc.iocoder.cn/delete-code/#%E6%9B%B4%E5%A4%9A" target="_blank" rel="noopener noreferrer">#</a>更多...</h2>
<p>如果你有其它功能想要删除，可以在 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/issues" target="_blank" rel="noopener noreferrer">Issue (opens new window)</a>留言，可以不断补充到该文档。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E8%AE%BE%E7%BD%AE%E8%8F%9C%E5%8D%95%E7%A6%81%E7%94%A8.png" type="image/png"/>
    </item>
    <item>
      <title>内网穿透</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/13.%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/13.%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html</guid>
      <source url="https://springg.us.kg/rss.xml">内网穿透</source>
      <description>内网穿透 在和外部系统对接时，经常需要将本地的服务，暴露到外网中。这时候，就需要使用内网穿透工具了。例如说：支付宝回调、微信支付回调、微信公众号接入、微信小程序接入等等。 常见的内网穿透工具，例如说，ngrok (opens new window)、frp (opens new window)、natapa (opens new window)等等。 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在和外部系统对接时，经常需要将本地的服务，暴露到外网中。这时候，就需要使用内网穿透工具了。例如说：支付宝回调、微信支付回调、微信公众号接入、微信小程序接入等等。</p>
<p>常见的内网穿透工具，例如说，<a href="https://ngrok.com/" target="_blank" rel="noopener noreferrer">ngrok (opens new window)</a>、<a href="https://github.com/fatedier/frp" target="_blank" rel="noopener noreferrer">frp (opens new window)</a>、<a href="https://natapp.cn/" target="_blank" rel="noopener noreferrer">natapa (opens new window)</a>等等。</p>
<p>这里，我们使用 natapp 作为内网穿透工具，转发到后端的 48080 端口。</p>
<h2><a class="header-anchor" href="#_1-第一步-购买隧道"><span></span></a><a href="https://doc.iocoder.cn/natapp/#_1-%E7%AC%AC%E4%B8%80%E6%AD%A5-%E8%B4%AD%E4%B9%B0%E9%9A%A7%E9%81%93" target="_blank" rel="noopener noreferrer">#</a>1. 第一步，购买隧道</h2>
<p>访问 <a href="https://natapp.cn/tunnel/buy/free" target="_blank" rel="noopener noreferrer">https://natapp.cn/tunnel/buy/free (opens new window)</a>地址，免费购买一个隧道。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/第三步-免费购买一个隧道.png" alt="免费购买一个隧道" tabindex="0" loading="lazy"><figcaption>免费购买一个隧道</figcaption></figure>
<h2><a class="header-anchor" href="#_2-第二步-启动隧道"><span></span></a><a href="https://doc.iocoder.cn/natapp/#_2-%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%90%AF%E5%8A%A8%E9%9A%A7%E9%81%93" target="_blank" rel="noopener noreferrer">#</a>2. 第二步，启动隧道</h2>
<p>购买完成后，参考 <a href="https://natapp.cn/article/natapp_newbie" target="_blank" rel="noopener noreferrer">《NATAPP 1 分钟快速新手图文教程》 (opens new window)</a>文档，将 natapp 进行启动。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/第三步-启动隧道.png" alt="启动隧道" tabindex="0" loading="lazy"><figcaption>启动隧道</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8E%A5%E5%85%A5/%E7%AC%AC%E4%B8%89%E6%AD%A5-%E5%85%8D%E8%B4%B9%E8%B4%AD%E4%B9%B0%E4%B8%80%E4%B8%AA%E9%9A%A7%E9%81%93.png" type="image/png"/>
    </item>
    <item>
      <title>功能列表</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/4.%E5%8A%9F%E8%83%BD%E5%88%97%E8%A1%A8.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/4.%E5%8A%9F%E8%83%BD%E5%88%97%E8%A1%A8.html</guid>
      <source url="https://springg.us.kg/rss.xml">功能列表</source>
      <description>功能列表 芋道，以开发者为中心，打造中国第一流的快速开发平台，全部开源，个人与企业可 100% 免费使用。 管理后台的电脑端：Vue3 提供 element-plus (opens new window)、vben(ant-design-vue) (opens new window)两个版本，Vue2 提供 element-ui (opens new ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><strong>芋道</strong>，以开发者为中心，打造中国第一流的快速开发平台，全部开源，个人与企业可 100% 免费使用。</p>
<ul>
<li>管理后台的电脑端：Vue3 提供 <a href="https://gitee.com/yudaocode/yudao-ui-admin-vue3" target="_blank" rel="noopener noreferrer">element-plus (opens new window)</a>、<a href="https://gitee.com/yudaocode/yudao-ui-admin-vben" target="_blank" rel="noopener noreferrer">vben(ant-design-vue) (opens new window)</a>两个版本，Vue2 提供 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-ui-admin" target="_blank" rel="noopener noreferrer">element-ui (opens new window)</a>版本</li>
<li>管理后台的移动端：采用 <a href="https://github.com/dcloudio/uni-app" target="_blank" rel="noopener noreferrer">uni-app (opens new window)</a>方案，一份代码多终端适配，同时支持 APP、小程序、H5！</li>
<li>后端采用 Spring Boot、MySQL + MyBatis Plus、Redis + Redisson</li>
<li>数据库可使用 MySQL、Oracle、PostgreSQL、SQL Server、MariaDB、国产达梦 DM、TiDB 等</li>
<li>权限认证使用 Spring Security &amp; Token &amp; Redis，支持多终端、多种用户的认证系统，支持 SSO 单点登录</li>
<li>支持加载动态权限菜单，按钮级别权限控制，本地缓存提升性能</li>
<li>支持 SaaS 多租户系统，可自定义每个租户的权限，提供透明化的多租户底层封装</li>
<li>工作流使用 Flowable，支持动态表单、在线设计流程、会签 / 或签、多种任务分配方式</li>
<li>高效率开发，使用代码生成器可以一键生成前后端代码 + 单元测试 + Swagger 接口文档 + Validator 参数校验</li>
<li>集成微信小程序、微信公众号、企业微信、钉钉等三方登陆，集成支付宝、微信等支付与退款</li>
<li>集成阿里云、腾讯云等短信渠道，集成 MinIO、阿里云、腾讯云、七牛云等云存储服务</li>
<li>集成报表设计器、大屏设计器，通过拖拽即可生成酷炫的报表与大屏</li>
</ul>
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/feature/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07rbyjM7A" target="_blank" rel="noopener noreferrer">从零开始 01：视频课程导读：项目简介、功能列表、技术选型(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07FiIaQr3" target="_blank" rel="noopener noreferrer">从零开始 04：自顶向下，讲解项目的整体结构（上）(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07yNfE6un" target="_blank" rel="noopener noreferrer">从零开始 04：自顶向下，讲解项目的整体结构（下）(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#🐼-内置功能"><span></span></a><a href="https://doc.iocoder.cn/feature/#%F0%9F%90%BC-%E5%86%85%E7%BD%AE%E5%8A%9F%E8%83%BD" target="_blank" rel="noopener noreferrer">#</a>🐼 内置功能</h2>
<p>系统内置多种多种业务功能，可以用于快速你的业务系统：</p>
<figure><img src="https://static.iocoder.cn/ruoyi-vue-pro-biz.png" alt="功能分层" tabindex="0" loading="lazy"><figcaption>功能分层</figcaption></figure>
<ul>
<li>系统功能</li>
<li>基础设施</li>
<li>工作流程</li>
<li>支付系统</li>
<li>会员中心</li>
<li>数据报表</li>
<li>商城系统</li>
<li>微信公众号</li>
</ul>
<blockquote>
<p>友情提示：本项目基于 RuoYi-Vue 修改，<strong>重构优化</strong>后端的代码，<strong>美化</strong>前端的界面。</p>
<ul>
<li>额外新增的功能，我们使用 🚀 标记。</li>
<li>重新实现的功能，我们使用 ⭐️ 标记。</li>
</ul>
</blockquote>
<p>🙂 所有功能，都通过 <strong>单元测试</strong> 保证高质量。</p>
<h3><a class="header-anchor" href="#系统功能"><span></span></a><a href="https://doc.iocoder.cn/feature/#%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD" target="_blank" rel="noopener noreferrer">#</a>系统功能</h3>
<p>|      | 功能       | 描述                                                         |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://static.iocoder.cn/ruoyi-vue-pro-biz.png" type="image/png"/>
    </item>
    <item>
      <title>快速启动（适合“后端”工程师）</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/5.%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%EF%BC%88%E9%80%82%E5%90%88%E2%80%9C%E5%90%8E%E7%AB%AF%E2%80%9D%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/5.%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%EF%BC%88%E9%80%82%E5%90%88%E2%80%9C%E5%90%8E%E7%AB%AF%E2%80%9D%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89.html</guid>
      <source url="https://springg.us.kg/rss.xml">快速启动（适合“后端”工程师）</source>
      <description>快速启动（适合“后端”工程师） 目标：使用 IDEA 工具，将后端项目 ruoyi-vue-pro (opens new window)运行起来，并按需启动前端项目。 整个过程非常简单，预计 10 分钟就可以完成，取决于大家的网速。 从零开始 02：在 Windows 环境下，如何运行前后端项目？(opens new window) 从零开始 03：在...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>目标：使用 IDEA 工具，将后端项目 <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">ruoyi-vue-pro (opens new window)</a>运行起来，并按需启动前端项目。</p>
<p>整个过程非常简单，预计 10 分钟就可以完成，取决于大家的网速。</p>
<ul>
<li><a href="https://t.zsxq.com/07BeiEA6Q" target="_blank" rel="noopener noreferrer">从零开始 02：在 Windows 环境下，如何运行前后端项目？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07FUNnYFm" target="_blank" rel="noopener noreferrer">从零开始 03：在 MacOS 环境下，如何运行前后端项目？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_1-克隆代码"><span></span></a><a href="https://doc.iocoder.cn/quick-start/#_1-%E5%85%8B%E9%9A%86%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>1. 克隆代码</h2>
<p>使用 <a href="http://www.iocoder.cn/categories/IDEA/?self" target="_blank" rel="noopener noreferrer">IDEA (opens new window)</a>克隆 <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/ruoyi-vue-pro (opens new window)</a>仓库的最新代码，并给该仓库一个 <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">Star (opens new window)</a>。</p>
<blockquote>
<p>友情提示：IDEA 请使用至少 2020 版本，不知道怎么激活的可以看看 <a href="https://www.iocoder.cn/IDEA/idea-2020-reset-eval/?yudao" target="_blank" rel="noopener noreferrer">《IDEA 破解新招 - 无限重置30天试用期（适用于 2018、2019、2020、2021 所有版本） 》 (opens new window)</a>文章！</p>
<p>注意：不支持使用 Eclipse 启动项目，因为它没有支持 Lombok 和 Mapstruct 的插件。</p>
</blockquote>
<p>克隆完成后，耐心等待 Maven 下载完相关的依赖。</p>
<figure><img src="http://static.iocoder.cn/images/Yudao/2022-02-04/11.png?imageView2/2/format/webp/w/1280" alt="项目一览" tabindex="0" loading="lazy"><figcaption>项目一览</figcaption></figure>
<blockquote>
<p>友情提示：项目的每个模块的作用，可见 <a href="https://doc.iocoder.cn/project-intro/" target="_blank" rel="noopener noreferrer">《开发指南 —— 项目结构》</a> 文档。</p>
</blockquote>
<p>使用的 SpringBoot 版本较新，所以需要下载一段时间。趁着这个时间，胖友可以给项目添加一个 <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">Star (opens new window)</a>，支持下艿艿。</p>
<p>接口文档？</p>
<p>阅读 <a href="https://doc.iocoder.cn/api-doc" target="_blank" rel="noopener noreferrer">《开发指南 —— 接口文档》</a> 呀~~</p>
<h2><a class="header-anchor" href="#_3-初始化-mysql"><span></span></a><a href="https://doc.iocoder.cn/quick-start/#_3-%E5%88%9D%E5%A7%8B%E5%8C%96-mysql" target="_blank" rel="noopener noreferrer">#</a>3. 初始化 MySQL</h2>
<p>友情提示？</p>
<p>如果你是 PostgreSQL、Oracle、SQL Server 等其它数据库，也是可以的。</p>
<p>因为我主要使用 MySQL数据库为主，所以其它数据库的 SQL 文件可能存在滞后，可以加入 <a href="https://doc.iocoder.cn/qun" target="_blank" rel="noopener noreferrer">用户群</a> 反馈。</p>
<p>项目使用 MySQL 存储数据，所以需要启动一个 MySQL 服务，建议使用 <strong>5.7</strong> 版本。</p>
<p>① 创建一个名字为 <code>ruoyi-vue-pro</code> 数据库，执行对应数据库类型的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/sql" target="_blank" rel="noopener noreferrer"><code>sql</code> (opens new window)</a>目录下的 SQL 文件，进行初始化。</p>
<figure><img src="https://doc.iocoder.cn/img/快速启动/快速启动.png" alt="导入 MySQL 数据库" tabindex="0" loading="lazy"><figcaption>导入 MySQL 数据库</figcaption></figure>
<p>② 默认配置下，MySQL 需要启动在 3306 端口，并且账号是 root，密码是 123456。如果不一致，需要修改 <code>application-local.yaml</code> 配置文件。</p>
<figure><img src="http://static.iocoder.cn/images/Yudao/2022-03-01/01.png?imageView2/2/format/webp/w/1280" alt="修改配置文件" tabindex="0" loading="lazy"><figcaption>修改配置文件</figcaption></figure>
<h2><a class="header-anchor" href="#_4-初始化-redis"><span></span></a><a href="https://doc.iocoder.cn/quick-start/#_4-%E5%88%9D%E5%A7%8B%E5%8C%96-redis" target="_blank" rel="noopener noreferrer">#</a>4. 初始化 Redis</h2>
<p>项目使用 Redis 缓存数据，所以需要启动一个 Redis 服务。</p>
<p>一定要使用 <strong>5.0</strong> 以上的版本，项目使用 Redis Stream 作为消息队列。</p>
<blockquote>
<p>不会安装的胖友，可以选择阅读下文，良心的艿艿。</p>
<ul>
<li>Windows 安装 Redis 指南：<a href="http://www.iocoder.cn/Redis/windows-install" target="_blank" rel="noopener noreferrer">http://www.iocoder.cn/Redis/windows-install(opens new window)</a></li>
<li>Mac 安装 Redis 指南：<a href="http://www.iocoder.cn/Redis/mac-install" target="_blank" rel="noopener noreferrer">http://www.iocoder.cn/Redis/mac-install(opens new window)</a></li>
</ul>
</blockquote>
<p>默认配置下，Redis 启动在 6379 端口，不设置账号密码。如果不一致，需要修改 <code>application-local.yaml</code> 配置文件。</p>
<figure><img src="http://static.iocoder.cn/images/Yudao/2022-03-01/02.png?imageView2/2/format/webp/w/1280" alt="修改配置文件" tabindex="0" loading="lazy"><figcaption>修改配置文件</figcaption></figure>
<h2><a class="header-anchor" href="#_5-启动后端项目"><span></span></a><a href="https://doc.iocoder.cn/quick-start/#_5-%E5%90%AF%E5%8A%A8%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener noreferrer">#</a>5. 启动后端项目</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server" target="_blank" rel="noopener noreferrer"><code>yudao-server</code> (opens new window)</a>是后端项目，提供管理后台、用户 APP 的 RESTful API 接口。</p>
<h3><a class="header-anchor" href="#_5-1-编译项目"><span></span></a><a href="https://doc.iocoder.cn/quick-start/#_5-1-%E7%BC%96%E8%AF%91%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener noreferrer">#</a>5.1 编译项目</h3>
<p>第一步，使用 IDEA 打开 Terminal 终端，在 <strong>根目录</strong> 下直接执行 <code>mvn clean install package '-Dmaven.test.skip=true'</code> 命令，将项目进行初始化的打包，预计需要 1 分钟左右。成功后，控制台日志如下：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[INFO] BUILD SUCCESS</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[INFO]</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="http://static.iocoder.cn/images/Yudao/2022-02-04/11.png?imageView2/2/format/webp/w/1280" type="image/"/>
    </item>
    <item>
      <title>快速启动（适合“前端”工程师）</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/6.%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%EF%BC%88%E9%80%82%E5%90%88%E2%80%9C%E5%89%8D%E7%AB%AF%E2%80%9D%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/6.%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%EF%BC%88%E9%80%82%E5%90%88%E2%80%9C%E5%89%8D%E7%AB%AF%E2%80%9D%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89.html</guid>
      <source url="https://springg.us.kg/rss.xml">快速启动（适合“前端”工程师）</source>
      <description>快速启动（适合“前端”工程师） 目标：在 本地 将前端项目运行起来，使用 远程 演示环境的后端服务。 整个过程非常简单，预计 5 分钟就可以完成，取决于大家的网速。 接口文档？ 阅读 《开发指南 —— 接口文档》 呀~~ #2. 启动 Vue3 + element-plus 管理后台 yudao-ui-admin-vue3 (opens new win...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>目标：在 <strong>本地</strong> 将前端项目运行起来，使用 <strong>远程</strong> 演示环境的后端服务。</p>
<p>整个过程非常简单，预计 5 分钟就可以完成，取决于大家的网速。</p>
<p>接口文档？</p>
<p>阅读 <a href="https://doc.iocoder.cn/api-doc" target="_blank" rel="noopener noreferrer">《开发指南 —— 接口文档》</a> 呀~~</p>
<h2><a class="header-anchor" href="#_2-启动-vue3-element-plus-管理后台"><span></span></a><a href="https://doc.iocoder.cn/quick-start-front/#_2-%E5%90%AF%E5%8A%A8-vue3-element-plus-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0" target="_blank" rel="noopener noreferrer">#</a>2. 启动 Vue3 + element-plus 管理后台</h2>
<p><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/" target="_blank" rel="noopener noreferrer"><code>yudao-ui-admin-vue3</code> (opens new window)</a>是前端 Vue3 管理后台项目。</p>
<p>① 克隆 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3.git" target="_blank" rel="noopener noreferrer">https://github.com/yudaocode/yudao-ui-admin-vue3.git (opens new window)</a>项目，并 Star 关注下该项目。</p>
<p>② 在根目录执行如下命令，进行启动：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装 pnpm，提升依赖的安装速度</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> config</span><span style="color:#98C379;--shiki-dark:#98C379"> set</span><span style="color:#98C379;--shiki-dark:#98C379"> registry</span><span style="color:#98C379;--shiki-dark:#98C379"> https://registry.npmjs.org</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -g</span><span style="color:#98C379;--shiki-dark:#98C379"> pnpm</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装依赖</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">pnpm</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 启动服务</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#98C379;--shiki-dark:#98C379"> front</span></span></code></pre>
</div><p>③ 启动完成后，浏览器会自动打开 <a href="http://localhost/" target="_blank" rel="noopener noreferrer">http://localhost:80 (opens new window)</a>地址，可以看到前端界面。</p>
<figure><img src="https://static.iocoder.cn/images/Yudao/2022-09-04/yudao-admin-vue3-login.png?imageView2/2/format/webp/w/1280" alt="前端界面" tabindex="0" loading="lazy"><figcaption>前端界面</figcaption></figure>
<p>友情提示：Vue3 使用 Vite 构建，所以它存在如下的情况，都是正常的：</p>
<ol>
<li>项目启动很快，浏览器打开需要等待 1 分钟左右，请保持耐心。</li>
<li>点击菜单，感觉会有一点卡顿，因为 Vite 采用懒加载机制。不用担心，最终部署到生产环境，就不存在这个问题了。</li>
</ol>
<p>详细说明，可见 <a href="https://juejin.cn/post/7129041114174062628" target="_blank" rel="noopener noreferrer">《为什么有人说 Vite 快，有人却说 Vite 慢？》 (opens new window)</a>文章。</p>
<h2><a class="header-anchor" href="#_3-启动-vue3-vben-ant-design-vue-管理后台"><span></span></a><a href="https://doc.iocoder.cn/quick-start-front/#_3-%E5%90%AF%E5%8A%A8-vue3-vben-ant-design-vue-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0" target="_blank" rel="noopener noreferrer">#</a>3. 启动 Vue3 + vben(ant-design-vue) 管理后台</h2>
<p><a href="https://github.com/yudaocode/yudao-ui-admin-vben/" target="_blank" rel="noopener noreferrer"><code>yudao-ui-admin-vue3</code> (opens new window)</a>是前端 Vue3 + vben(ant-design-vue) 管理后台项目。</p>
<p>① 克隆 <a href="https://github.com/yudaocode/yudao-ui-admin-vben.git" target="_blank" rel="noopener noreferrer">https://github.com/yudaocode/yudao-ui-admin-vben.git (opens new window)</a>项目，并 Star 关注下该项目。</p>
<p>② 在根目录执行如下命令，进行启动：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装 pnpm，提升依赖的安装速度</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> config</span><span style="color:#98C379;--shiki-dark:#98C379"> set</span><span style="color:#98C379;--shiki-dark:#98C379"> registry</span><span style="color:#98C379;--shiki-dark:#98C379"> https://registry.npmjs.org</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -g</span><span style="color:#98C379;--shiki-dark:#98C379"> pnpm</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装依赖</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">pnpm</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 启动服务</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#98C379;--shiki-dark:#98C379"> front</span></span></code></pre>
</div><p>③ 启动完成后，浏览器会自动打开 <a href="http://localhost/" target="_blank" rel="noopener noreferrer">http://localhost:80 (opens new window)</a>地址，可以看到前端界面。</p>
<figure><img src="https://doc.iocoder.cn/img/快速启动/前端界面-vben.png" alt="前端界面" tabindex="0" loading="lazy"><figcaption>前端界面</figcaption></figure>
<h2><a class="header-anchor" href="#_4-启动-vue2-管理后台"><span></span></a><a href="https://doc.iocoder.cn/quick-start-front/#_4-%E5%90%AF%E5%8A%A8-vue2-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0" target="_blank" rel="noopener noreferrer">#</a>4. 启动 Vue2 管理后台</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/" target="_blank" rel="noopener noreferrer"><code>yudao-ui-admin</code> (opens new window)</a>是前端 Vue2 管理后台项目。</p>
<p>〇 克隆 <a href="https://github.com/YunaiV/ruoyi-vue-pro.git" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/ruoyi-vue-pro.git (opens new window)</a>项目，并 Star 关注下该项目。</p>
<p>① 在 <code>yudao-ui-admin</code> 目录下，执行如下命令，进行启动：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 进入项目目录</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">cd</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-ui-admin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装 Yarn，提升依赖的安装速度</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --global</span><span style="color:#98C379;--shiki-dark:#98C379"> yarn</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装依赖</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yarn</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 启动服务</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#98C379;--shiki-dark:#98C379"> front</span></span></code></pre>
</div><figure><img src="http://static.iocoder.cn/images/Yudao/2021-02-21/41.png?imageView2/2/format/webp/w/1280" alt="启动前端项目" tabindex="0" loading="lazy"><figcaption>启动前端项目</figcaption></figure>
<p>② 启动完成后，浏览器会自动打开 <a href="http://localhost:1024/" target="_blank" rel="noopener noreferrer">http://localhost:1024 (opens new window)</a>地址，可以看到前端界面。</p>
<figure><img src="https://static.iocoder.cn/images/Yudao/2022-09-04/yudao-admin-vue2-login.png?imageView2/2/format/webp/w/1280" alt="前端界面" tabindex="0" loading="lazy"><figcaption>前端界面</figcaption></figure>
<h2><a class="header-anchor" href="#_5-启动-uni-app-管理后台"><span></span></a><a href="https://doc.iocoder.cn/quick-start-front/#_5-%E5%90%AF%E5%8A%A8-uni-app-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0" target="_blank" rel="noopener noreferrer">#</a>5. 启动 uni-app 管理后台</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin-uniapp/" target="_blank" rel="noopener noreferrer"><code>yudao-ui-admin-uniapp</code> (opens new window)</a>是前端 uni-app 管理后台项目。</p>
<p>〇 克隆 <a href="https://github.com/YunaiV/ruoyi-vue-pro.git" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/ruoyi-vue-pro.git (opens new window)</a>项目，并 Star 关注下该项目。</p>
<p>① 下载 <a href="https://www.dcloud.io/hbuilderx.html" target="_blank" rel="noopener noreferrer">HBuilder (opens new window)</a>工具，并进行安装。</p>
<p>② 点击 HBuilder 的 [文件 -&gt; 导入 -&gt; 从本地项目导入...] 菜单，选择项目的 <code>yudao-ui-admin-uniapp</code> 目录。</p>
<p>然后，修改 <code>config.js</code> 配置文件的 <code>baseUrl</code> 后端服务的地址为 <code>'http://api-dashboard.yudao.iocoder.cn</code>。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/快速启动/修改后台uniapp的config.png" alt="修改  配置文件的  后端服务的地址" tabindex="0" loading="lazy"><figcaption>修改  配置文件的  后端服务的地址</figcaption></figure>
<p>③ 执行如下命令，安装 npm 依赖：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 进入项目目录</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">cd</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-ui-admin-uniapp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 安装 npm 依赖</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> i</span></span></code></pre>
</div><p>④ 点击 HBuilder 的 [运行 -&gt; 运行到内置浏览器] 菜单，使用 H5 的方式运行。成功后，界面如下图所示：</p>
<figure><img src="https://static.iocoder.cn/images/Yudao/2022-09-04/yudao-admin-uniapp-login.png?imageView2/2/format/webp/w/1280" alt="前端界面" tabindex="0" loading="lazy"><figcaption>前端界面</figcaption></figure>
<p>友情提示：登录时，滑块验证码，在内存浏览器可能存在兼容性的问题，此时使用 Chrome 浏览器，并使用“开发者工具”，设置为 iPhone 12 Pro 模式！</p>
<h2><a class="header-anchor" href="#_6-启动-uni-app-用户前台"><span></span></a><a href="https://doc.iocoder.cn/quick-start-front/#_6-%E5%90%AF%E5%8A%A8-uni-app-%E7%94%A8%E6%88%B7%E5%89%8D%E5%8F%B0" target="_blank" rel="noopener noreferrer">#</a>6. 启动 uni-app 用户前台</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-app/" target="_blank" rel="noopener noreferrer"><code>yudao-ui-app</code> (opens new window)</a>是前端 uni-app 用户前台项目。</p>
<p>〇 克隆 <a href="https://github.com/YunaiV/ruoyi-vue-pro.git" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/ruoyi-vue-pro.git (opens new window)</a>项目，并 Star 关注下该项目。</p>
<p>① 下载 <a href="https://www.dcloud.io/hbuilderx.html" target="_blank" rel="noopener noreferrer">HBuilder (opens new window)</a>工具，并进行安装。</p>
<p>② 点击 HBuilder 的 [文件 -&gt; 导入 -&gt; 从本地项目导入...] 菜单，选择项目的 <code>yudao-ui-app</code> 目录</p>
<p>然后，修改 <code>config.js</code> 配置文件的 <code>baseUrl</code> 后端服务的地址为 <code>'http://api-dashboard.yudao.iocoder.cn/app-api</code>。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/快速启动/修改前台uniapp的config.png" alt="修改  配置文件的  后端服务的地址" tabindex="0" loading="lazy"><figcaption>修改  配置文件的  后端服务的地址</figcaption></figure>
<p>③ 点击 HBuilder 的 [运行 -&gt; 运行到内置浏览器] 菜单，使用 H5 的方式运行。成功后，界面如下图所示：</p>
<figure><img src="http://static.iocoder.cn/images/Yudao/2021-02-21/71.png?imageView2/2/format/webp/w/1280" alt="前端界面" tabindex="0" loading="lazy"><figcaption>前端界面</figcaption></figure>
<h2><a class="header-anchor" href="#_7-参与项目"><span></span></a><a href="https://doc.iocoder.cn/quick-start-front/#_7-%E5%8F%82%E4%B8%8E%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener noreferrer">#</a>7. 参与项目</h2>
<p>如果你想参与到前端项目的开发，可以微信 wangwenbin-server 噢。</p>
<p>近期，重点开发 Vue3 管理后台、uniapp 商城，欢迎大家参与进来。</p>
<p>上次更新: 2023/04/15, 00:03:57</p>
]]></content:encoded>
      <enclosure url="https://static.iocoder.cn/images/Yudao/2022-09-04/yudao-admin-vue3-login.png?imageView2/2/format/webp/w/1280" type="image/"/>
    </item>
    <item>
      <title>接口文档</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/7.%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/7.%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3.html</guid>
      <source url="https://springg.us.kg/rss.xml">接口文档</source>
      <description>接口文档 项目使用 Swagger 实现 RESTful API 的接口文档，提供两种解决方案： *【推荐】 Apifox (opens new window)：强大的 API 工具，支持 API 文档、API 调试、API Mock、API 自动化测试 Knife4j：简易的 API 工具，仅支持 API 文档、API 调试 为什么选择 Swagge...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目使用 Swagger 实现 RESTful API 的接口文档，提供两种解决方案：</p>
<p>*【推荐】 <a href="http://mtw.so/62me9n" target="_blank" rel="noopener noreferrer">Apifox (opens new window)</a>：强大的 API 工具，支持 API 文档、API 调试、API Mock、API 自动化测试</p>
<ul>
<li>Knife4j：简易的 API 工具，仅支持 API 文档、API 调试</li>
</ul>
<p>为什么选择 Swagger 呢？</p>
<p>Swagger 通过 Java 注解实现 API 接口文档的编写。相比使用 Java 注释的方式，注解提供更加规范的接口定义方式，开发体验更好。</p>
<p>如果你没有学习 Swagger，可以阅读 <a href="https://www.iocoder.cn/Spring-Boot/Swagger/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot API 接口文档 Swagger 入门 》 (opens new window)</a>文章。</p>
<h2><a class="header-anchor" href="#_1-apifox-使用"><span></span></a><a href="https://doc.iocoder.cn/api-doc/#_1-apifox-%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>1. Apifox 使用</h2>
<p>本小节，我们来将项目中的 API 接口，一键导入到 Apifox 中，并使用它发起一次 API 的调用。</p>
<h3><a class="header-anchor" href="#_1-1-下载工具"><span></span></a><a href="https://doc.iocoder.cn/api-doc/#_1-1-%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7" target="_blank" rel="noopener noreferrer">#</a>1.1 下载工具</h3>
<p>点击 <a href="http://mtw.so/62me9n" target="_blank" rel="noopener noreferrer">Apifox (opens new window)</a>首页，下载对应的 Apifox 桌面版。如下图所示：</p>
<p>为什么要下载 Apifox 桌面版？</p>
<p>艿艿已经卸载 Postman，使用 Apifox 进行替代。国产软件，yyds 永远滴神！</p>
<p>国内很多互联网公司，包括百度、阿里、腾讯、字节跳动等等在内，都在使用 Apifox 作为 API 工具。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/01.png" alt="Apifox 下载" tabindex="0" loading="lazy"><figcaption>Apifox 下载</figcaption></figure>
<p>解压后，双击进行安装即可。黑色界面，非常酷炫。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/02.png" alt="Apifox 界面" tabindex="0" loading="lazy"><figcaption>Apifox 界面</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-api-导入"><span></span></a><a href="https://doc.iocoder.cn/api-doc/#_1-2-api-%E5%AF%BC%E5%85%A5" target="_blank" rel="noopener noreferrer">#</a>1.2 API 导入</h3>
<p>① 先点击「示例项目」，再点击「+」按钮，选择「导入」选项。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/03.png" alt="Apifox 界面 —— 导入" tabindex="0" loading="lazy"><figcaption>Apifox 界面 —— 导入</figcaption></figure>
<p>② 先选择「URL 导入」按钮，填写 Swagger 数据 URL 为 <code>http://127.0.0.1:48080/v3/api-docs</code>。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/04.png" alt="Apifox 界面 —— Swagger" tabindex="0" loading="lazy"><figcaption>Apifox 界面 —— Swagger</figcaption></figure>
<p>③ 先点击「提交」按钮，再点击「确认导入」按钮，完成 API 接口的导入。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/05.png" alt="Apifox 界面 —— Swagger" tabindex="0" loading="lazy"><figcaption>Apifox 界面 —— Swagger</figcaption></figure>
<p>④ 导入完成后，点击「接口管理」按钮，可以查看到 API 列表。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/06.png" alt="Apifox 界面 —— 接口管理" tabindex="0" loading="lazy"><figcaption>Apifox 界面 —— 接口管理</figcaption></figure>
<h3><a class="header-anchor" href="#_1-3-api-调试"><span></span></a><a href="https://doc.iocoder.cn/api-doc/#_1-3-api-%E8%B0%83%E8%AF%95" target="_blank" rel="noopener noreferrer">#</a>1.3 API 调试</h3>
<p>① 先点击右上角「请选择环境」，再点击「管理环境」选项，填写测试环境的地址为 <code>http://127.0.0.1:48080</code>，并进行保存。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/07.png" alt="Apifox 界面 —— 管理环境" tabindex="0" loading="lazy"><figcaption>Apifox 界面 —— 管理环境</figcaption></figure>
<p>② 点击「管理后台 —— 认证」的「使用账号密码登录」接口，查看该 API 接口的定义。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/08.png" alt="Apifox 界面 —— 认证" tabindex="0" loading="lazy"><figcaption>Apifox 界面 —— 认证</figcaption></figure>
<p>③ 点击「运行」按钮，填写 Headers 的 <code>tenant-id</code> 为 1，再点击 Body 的「自动生成」按钮，最后点击「发送」按钮。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/09.png" alt="Apifox 界面 —— 认证" tabindex="0" loading="lazy"><figcaption>Apifox 界面 —— 认证</figcaption></figure>
<h2><a class="header-anchor" href="#_2-knife4j-使用"><span></span></a><a href="https://doc.iocoder.cn/api-doc/#_2-knife4j-%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>2. Knife4j 使用</h2>
<p>浏览器访问 <a href="http://127.0.0.1:48080/doc.html" target="_blank" rel="noopener noreferrer">http://127.0.0.1:48080/doc.html (opens new window)</a>地址，使用 Knife4j 查看 API 接口文档。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/21.png" alt="Knife4j 界面" tabindex="0" loading="lazy"><figcaption>Knife4j 界面</figcaption></figure>
<p>① 点击任意一个接口，进行接口的调用测试。这里，使用「管理后台 - 用户个中心」的“获得登录用户信息”举例子。</p>
<p>② 点击左侧「调试」按钮，并将请求头部的 <code>header-id</code> 和 <code>Authorization</code> 勾选上。</p>
<p>其中，<code>header-id</code> 为租户编号，<code>Authorization</code> 的 <code>"Bearer test"</code> 后面为用户编号（模拟哪个用户操作）。</p>
<p>③ 点击「发送」按钮，即可发起一次 API 的调用。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/Knife4j调用.png" alt="Knife4j 调试" tabindex="0" loading="lazy"><figcaption>Knife4j 调试</figcaption></figure>
<h2><a class="header-anchor" href="#_3-swagger-技术组件"><span></span></a><a href="https://doc.iocoder.cn/api-doc/#_3-swagger-%E6%8A%80%E6%9C%AF%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>3. Swagger 技术组件</h2>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/pom.xml" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-web</code> (opens new window)</a>技术组件的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/src/main/java/cn/iocoder/yudao/framework/swagger/package-info.java" target="_blank" rel="noopener noreferrer"><code>swagger</code> (opens new window)</a>包，实现了对 Swagger 的封装。</p>
<p>② 如果想要禁用 Swagger 功能，可通过 <code>springdoc.api-docs.enable</code> 配置项为 <code>false</code>。一般情况下，建议 prod 生产环境进行禁用，避免发生安全问题。</p>
<figure><img src="https://doc.iocoder.cn/img/接口文档/Swagger关闭.png" alt="Swagger 关闭" tabindex="0" loading="lazy"><figcaption>Swagger 关闭</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/01.png" type="image/png"/>
    </item>
    <item>
      <title>技术选型</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/8.%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/8.%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B.html</guid>
      <source url="https://springg.us.kg/rss.xml">技术选型</source>
      <description>技术选型 #技术架构图 架构图架构图 #👍 相关视频教程 从零开始 01：视频课程导读：项目简介、功能列表、技术选型(opens new window) 从零开始 04：自顶向下，讲解项目的整体结构（上）(opens new window) 从零开始 04：自顶向下，讲解项目的整体结构（下）(opens new window) #👻 后端 #系统环...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#技术架构图"><span></span></a><a href="https://doc.iocoder.cn/technology/#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E5%9B%BE" target="_blank" rel="noopener noreferrer">#</a>技术架构图</h2>
<figure><img src="https://static.iocoder.cn/ruoyi-vue-pro-architecture.png?imageView2/2/format/webp" alt="架构图" tabindex="0" loading="lazy"><figcaption>架构图</figcaption></figure>
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/technology/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07rbyjM7A" target="_blank" rel="noopener noreferrer">从零开始 01：视频课程导读：项目简介、功能列表、技术选型(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07FiIaQr3" target="_blank" rel="noopener noreferrer">从零开始 04：自顶向下，讲解项目的整体结构（上）(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07yNfE6un" target="_blank" rel="noopener noreferrer">从零开始 04：自顶向下，讲解项目的整体结构（下）(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#👻-后端"><span></span></a><a href="https://doc.iocoder.cn/technology/#%F0%9F%91%BB-%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>👻 后端</h2>
<h3><a class="header-anchor" href="#系统环境"><span></span></a><a href="https://doc.iocoder.cn/technology/#%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">#</a>系统环境</h3>
<p>| 框架  | 说明                | 版本     | 学习指南                                                     |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://static.iocoder.cn/ruoyi-vue-pro-architecture.png?imageView2/2/format/webp" type="image/"/>
    </item>
    <item>
      <title>项目结构</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/9.%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/1.%E8%90%8C%E6%96%B0%E5%BF%85%E8%AF%BB/9.%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84.html</guid>
      <source url="https://springg.us.kg/rss.xml">项目结构</source>
      <description>项目结构 项目结构项目结构 #👍 相关视频教程 从零开始 01：视频课程导读：项目简介、功能列表、技术选型(opens new window) 从零开始 04：自顶向下，讲解项目的整体结构（上）(opens new window) 从零开始 04：自顶向下，讲解项目的整体结构（下）(opens new window) #👻 后端结构 后端采用模块化...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<figure><img src="https://doc.iocoder.cn/img/项目结构/01.png" alt="项目结构" tabindex="0" loading="lazy"><figcaption>项目结构</figcaption></figure>
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/project-intro/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07rbyjM7A" target="_blank" rel="noopener noreferrer">从零开始 01：视频课程导读：项目简介、功能列表、技术选型(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07FiIaQr3" target="_blank" rel="noopener noreferrer">从零开始 04：自顶向下，讲解项目的整体结构（上）(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07yNfE6un" target="_blank" rel="noopener noreferrer">从零开始 04：自顶向下，讲解项目的整体结构（下）(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#👻-后端结构"><span></span></a><a href="https://doc.iocoder.cn/project-intro/#%F0%9F%91%BB-%E5%90%8E%E7%AB%AF%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>👻 后端结构</h2>
<p>后端采用模块化的架构，按照功能拆分成多个 Maven Module，提升开发与研发的效率，带来更好的可维护性。</p>
<p>一共有<strong>四</strong>类 Maven Module：</p>
<p>| Maven Module         | 作用                         |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/01.png" type="image/png"/>
    </item>
    <item>
      <title>开发环境</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/1.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/1.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html</guid>
      <source url="https://springg.us.kg/rss.xml">开发环境</source>
      <description>开发环境 在系统开发的经典模型，一般会分成 2 类 5 种环境： 【线下】本地环境(local)、开发环境(dev)、测试环境(test) 【线上】预发布环境(stage)、生产环境(prod) 环境示例环境示例 每个环境、每个项目使用独立的二级域名 线下、线上各一套 MySQL 数据库，多个环境共享使用 每个环境对应一个配置文件，后端使用 appli...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在系统开发的经典模型，一般会分成 2 类 5 种环境：</p>
<ul>
<li>【线下】本地环境(local)、开发环境(dev)、测试环境(test)</li>
<li>【线上】预发布环境(stage)、生产环境(prod)</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/开发环境/01.png" alt="环境示例" tabindex="0" loading="lazy"><figcaption>环境示例</figcaption></figure>
<ul>
<li>每个环境、每个项目使用独立的二级域名</li>
<li>线下、线上各一套 MySQL 数据库，多个环境共享使用</li>
<li>每个环境对应一个配置文件，后端使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-dev.yaml" target="_blank" rel="noopener noreferrer"><code>application-{env}.yaml</code> (opens new window)</a>文件，前端使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/.env.dev" target="_blank" rel="noopener noreferrer"><code>.env.{env}</code> (opens new window)</a>文件</li>
</ul>
<p>友情提示：项目中暂时没有 test、stage、production 等环境的配置，需要自己创建。</p>
<p>另外，本文的 MySQL 数据库是基础设施的“泛指”，包括 Redis 缓存、MQ 消息队列，都需要线上线下独立。</p>
<h2><a class="header-anchor" href="#_1-本地环境"><span></span></a><a href="https://doc.iocoder.cn/dev-env/#_1-%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">#</a>1. 本地环境</h2>
<p>后端工程师使用 <code>application-local.yaml</code> 配置文件，在本地电脑启动后端服务，连接线下 MySQL 数据库。考虑到不影响 dev、test 环境，会配置禁用定时任务、MQ 集群消费的执行。</p>
<p>前端工程师也会在本地电脑启动前端服务，一般不使用 <code>.env.local</code> 配置文件，而是使用 <code>.env.dev</code> 配置文件，访问 dev 环境的后端服务。如果需要和后端进行本地联调，可以使用 <code>.env.local</code> 配置文件。</p>
<h2><a class="header-anchor" href="#_2-开发环境"><span></span></a><a href="https://doc.iocoder.cn/dev-env/#_2-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">#</a>2. 开发环境</h2>
<p>dev 环境的用户是前端工程师、后端工程师，主要用于前后端的联调、又或者功能开发完后的自测。</p>
<p>一些公司可能不提供 dev 环境，直接使用 test 环境，适合团队规模较小的团队，可以降低服务器的成本。</p>
<p>不过，测试工程师可能比较反感 dev 和 test 环境不隔离，因为他们是按照测试用例，一轮一轮的进行验收。这个时候，如果前端或者后端工程师部署了 test 环境，“破坏”了他当前轮次的验收。</p>
<p>疑问：开发环境可以使用独立的 MySQL 数据库吗？</p>
<p>当然是可以的，提供更好的环境隔离性，避免开发阶段产生过多的脏数据，影响 test 环境的验收。</p>
<p>不过呢，这也带来额外的成本，部署程序到 test 环境时，需要做一次数据库的同步。</p>
<h2><a class="header-anchor" href="#_3-测试环境"><span></span></a><a href="https://doc.iocoder.cn/dev-env/#_3-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">#</a>3. 测试环境</h2>
<p>test 环境的用户是产品经理、测试工程师，主要用于他们的功能验收。</p>
<p>考虑到 test 环境的稳定性，一般建议由测试工程师使用 Jenkins 等工具，完成该环境的部署。具体的原因，上面 dev 环境已经解释了。</p>
<p>疑问：如果需要并行验收多个功能，怎么办？</p>
<p>并行验收多个功能时候，对应不同的 Git 分支，需要搭建多套测试环境。</p>
<h2><a class="header-anchor" href="#_4-预发布环境"><span></span></a><a href="https://doc.iocoder.cn/dev-env/#_4-%E9%A2%84%E5%8F%91%E5%B8%83%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">#</a>4. 预发布环境</h2>
<p>stage 环境的用户是产品经理、测试工程师，连接线上 MySQL 数据库，基于真实的数据，进行功能的全回归测试。</p>
<p>因为数据更加真实，且更具多样性，所以往往也会测试出较多的 Bug。比较好的解决方案，是将线上数据库定期脱敏，导入线下数据库。</p>
<p>考虑到 stage 环境的安全性，一般由技术经理、运维工程师进行部署。</p>
<p>一些公司可能不提供 stage 环境，直接上线到 production 环境，风险非常高，容易产生较多报错。</p>
<h2><a class="header-anchor" href="#_5-生产环境"><span></span></a><a href="https://doc.iocoder.cn/dev-env/#_5-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">#</a>5. 生产环境</h2>
<p>production 环境的用户是真实用户，即线上环境。一般发布上线时，会进行核心功能的快速测试，避免主流程存在问题。</p>
<p>考虑到 production 环境的问题排查效率，会给技术核心开放 MySQL 数据库的读权限。</p>
<p>上次更新: 2023/03/01, 00:29:36</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/01.png" type="image/png"/>
    </item>
    <item>
      <title>Linux 部署</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/2.Linux%20%E9%83%A8%E7%BD%B2.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/2.Linux%20%E9%83%A8%E7%BD%B2.html</guid>
      <source url="https://springg.us.kg/rss.xml">Linux 部署</source>
      <description>Linux 部署 本小节，讲解如何将前端 + 后端项目，使用 Shell 脚本，部署到 dev 开发环境下的一台 Linux 服务器上。如下图所示： Linux 部署Linux 部署 #1. 配置 MySQL #1.1 安装 MySQL（可选） 友情提示：安装 MySQL 是可选步骤，也可以购买 MySQL 云服务。 ① 执行如下命令，进行 MySQL...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，讲解如何将前端 + 后端项目，<strong>使用 Shell 脚本</strong>，部署到 dev 开发环境下的一台 Linux 服务器上。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/01.png" alt="Linux 部署" tabindex="0" loading="lazy"><figcaption>Linux 部署</figcaption></figure>
<h2><a class="header-anchor" href="#_1-配置-mysql"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_1-%E9%85%8D%E7%BD%AE-mysql" target="_blank" rel="noopener noreferrer">#</a>1. 配置 MySQL</h2>
<h3><a class="header-anchor" href="#_1-1-安装-mysql-可选"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_1-1-%E5%AE%89%E8%A3%85-mysql-%E5%8F%AF%E9%80%89" target="_blank" rel="noopener noreferrer">#</a>1.1 安装 MySQL（可选）</h3>
<p>友情提示：安装 MySQL 是可选步骤，也可以购买 MySQL 云服务。</p>
<p>① 执行如下命令，进行 MySQL 的安装。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ① 安装 MySQL 5.7 版本的软件源 https://dev.mysql.com/downloads/repo/yum/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">rpm</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -Uvh</span><span style="color:#98C379;--shiki-dark:#98C379"> https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ② 安装 MySQL Server 5.7 版本</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yum</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql-server</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --nogpgcheck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ③ 查看 MySQL 的安装版本。结果是 mysqld  Ver 5.7.37 for Linux on x86_64 (MySQL Community Server (GPL))</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysqld</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --version</span></span></code></pre>
</div><p>② 修改 <code>/etc/my.cnf</code> 文件，在文末加上 <code>lower_case_table_names=1</code> 和 <code>validate_password=off</code> 配置，执行 <code>systemctl restart mysqld</code> 命令重启。</p>
<p>③ 执行 <code>grep password /var/log/mysqld.log</code> 命令，获得 MySQL 临时密码。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2022-04-16T09:39:57.365086Z</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [Note] A temporary password is generated </span><span style="color:#C678DD;--shiki-dark:#C678DD">for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> root@localhost: ZOKUaehW2e.e</span></span></code></pre>
</div><p>④ 执行如下命令，修改 MySQL 的密码，设置允许远程连接。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ① 连接 MySQL Server 服务，并输入临时密码</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">mysql</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -uroot</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ② 修改密码，123456 可改成你想要的密码</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">alter</span><span style="color:#98C379;--shiki-dark:#98C379"> user</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'@'localhost'</span><span style="color:#98C379;--shiki-dark:#98C379"> identified</span><span style="color:#98C379;--shiki-dark:#98C379"> by</span><span style="color:#98C379;--shiki-dark:#98C379"> '123456'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ③ 设置允许远程连接</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">use</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">update</span><span style="color:#98C379;--shiki-dark:#98C379"> user</span><span style="color:#98C379;--shiki-dark:#98C379"> set</span><span style="color:#98C379;--shiki-dark:#98C379"> host</span><span style="color:#98C379;--shiki-dark:#98C379"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> '%'</span><span style="color:#98C379;--shiki-dark:#98C379"> where</span><span style="color:#98C379;--shiki-dark:#98C379"> user</span><span style="color:#98C379;--shiki-dark:#98C379"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> 'root'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">FLUSH</span><span style="color:#98C379;--shiki-dark:#98C379"> PRIVILEGES</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_1-2-导入-sql-脚本"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_1-2-%E5%AF%BC%E5%85%A5-sql-%E8%84%9A%E6%9C%AC" target="_blank" rel="noopener noreferrer">#</a>1.2 导入 SQL 脚本</h3>
<p>创建一个名字为 <code>ruoyi-vue-pro</code> 数据库，执行数据库对应的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/sql" target="_blank" rel="noopener noreferrer"><code>sql</code> (opens new window)</a>目录下的 SQL 文件，进行初始化。</p>
<figure><img src="https://doc.iocoder.cn/img/Docker部署/02.png" alt="使用 Navicat 导入 SQL 脚本" tabindex="0" loading="lazy"><figcaption>使用 Navicat 导入 SQL 脚本</figcaption></figure>
<h2><a class="header-anchor" href="#_2-配置-redis"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_2-%E9%85%8D%E7%BD%AE-redis" target="_blank" rel="noopener noreferrer">#</a>2. 配置 Redis</h2>
<p>友情提示：安装 Redis 是可选步骤，也可以购买 Redis 云服务。</p>
<p>执行如下命令，进行 Redis 的安装。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ① 安装 remi 软件源</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yum</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#98C379;--shiki-dark:#98C379"> http://rpms.famillecollet.com/enterprise/remi-release-7.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ② 安装最新 Redis 版本。如果想要安装指定版本，可使用 yum --enablerepo=remi install redis-6.0.6 -y 命令</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yum</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --enablerepo=remi</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#98C379;--shiki-dark:#98C379"> redis</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ③ 查看 Redis 的安装版本。结果是 Redis server v=6.2.6 sha=00000000:0 malloc=jemalloc-5.1.0 bits=64 build=4ab9a06393930489</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">redis-server</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ④ 启动 Redis 服务</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> restart</span><span style="color:#98C379;--shiki-dark:#98C379"> redis</span></span></code></pre>
</div><ul>
<li>端口是 6379，密码未设置</li>
</ul>
<h2><a class="header-anchor" href="#_3-部署后端"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_3-%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>3. 部署后端</h2>
<h3><a class="header-anchor" href="#_3-1-修改配置"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_3-1-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>3.1 修改配置</h3>
<p>后端 dev 开发环境对应的是 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-dev.yaml" target="_blank" rel="noopener noreferrer"><code>application-dev.yaml</code> (opens new window)</a>配置文件，主要是修改 MySQL 和 Redis 为你的地址。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/03.png" alt=" 配置文件" tabindex="0" loading="lazy"><figcaption> 配置文件</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-编译后端"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_3-2-%E7%BC%96%E8%AF%91%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>3.2 编译后端</h3>
<p>在项目的根目录下，执行 <code>mvn clean package -Dmaven.test.skip=true</code> 命令，编译后端项目，构建出它的 Jar 包。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/02.png" alt="编译后端" tabindex="0" loading="lazy"><figcaption>编译后端</figcaption></figure>
<p>疑问：-Dmaven.test.skip=true 是什么意思？</p>
<p>跳过单元测试的执行。如果你项目的单元测试写的不错，建议使用 <code>mvn clean package</code> 命令，执行单元测试，保证交付的质量。</p>
<h3><a class="header-anchor" href="#_3-3-上传-jar-包"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_3-3-%E4%B8%8A%E4%BC%A0-jar-%E5%8C%85" target="_blank" rel="noopener noreferrer">#</a>3.3 上传 Jar 包</h3>
<p>在 Linux 服务器上创建 <code>/work/projects/yudao-server</code> 目录，使用 <code>scp</code> 命令或者 FTP 工具，将 <code>yudao-server.jar</code> 上传到该目录下。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/04.png" alt="上传 Jar 包" tabindex="0" loading="lazy"><figcaption>上传 Jar 包</figcaption></figure>
<p>疑问：如果构建 War 包，部署到 Tomcat 下？</p>
<p>并不推荐采用 War 包部署到 Tomcat 下。如果真的需要，可以参考 <a href="https://www.baeldung.com/spring-boot-war-tomcat-deploy" target="_blank" rel="noopener noreferrer">《Deploy a Spring Boot WAR into a Tomcat Server》 (opens new window)</a>文章。</p>
<h3><a class="header-anchor" href="#_3-4-编写脚本"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_3-4-%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC" target="_blank" rel="noopener noreferrer">#</a>3.4 编写脚本</h3>
<p>在 <code>/work/projects/yudao-server</code> 目录下，新建 Shell 脚本 <code>deploy.sh</code>，用于启动后端项目。编写内容如下：</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#!/bin/bash</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">set</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">DATE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">$(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">date</span><span style="color:#98C379;--shiki-dark:#98C379"> +%Y%m%d%H%M</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 基础路径</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">BASE_PATH</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">/work/projects/yudao-server</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 服务名称。同时约定部署服务的 jar 包名字也为它。</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">SERVER_NAME</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">yudao-server</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 环境</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">PROFILES_ACTIVE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">dev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># heapError 存放路径</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">HEAP_ERROR_PATH</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75">$BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/heapError</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># JVM 参数</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">JAVA_OPS</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">"-Xms512m -Xmx512m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=</span><span style="color:#E06C75;--shiki-dark:#E06C75">$HEAP_ERROR_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># SkyWalking Agent 配置</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#export SW_AGENT_NAME=$SERVER_NAME</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#export SW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.0.84:11800</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#export SW_GRPC_LOG_SERVER_HOST=192.168.0.84</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#export SW_AGENT_TRACE_IGNORE_PATH="Redisson/PING,/actuator/**,/admin/**"</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#export JAVA_AGENT=-javaagent:/work/skywalking/apache-skywalking-apm-bin/agent/skywalking-agent.jar</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 停止：优雅关闭之前已经启动的服务</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> stop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">    echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[stop] 开始停止 </span><span style="color:#E06C75;--shiki-dark:#E06C75">$BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    PID</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">$(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ps</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -ef</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grep</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grep</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -v</span><span style="color:#98C379;--shiki-dark:#98C379"> "grep"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">awk</span><span style="color:#98C379;--shiki-dark:#98C379"> '{print $2}'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # 如果 Java 服务启动中，则进行关闭</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [ </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-n</span><span style="color:#98C379;--shiki-dark:#98C379"> "</span><span style="color:#E06C75;--shiki-dark:#E06C75">$PID</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ]; </span><span style="color:#C678DD;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        # 正常关闭</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">        echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[stop] </span><span style="color:#E06C75;--shiki-dark:#E06C75">$BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#98C379;--shiki-dark:#98C379"> 运行中，开始 kill [</span><span style="color:#E06C75;--shiki-dark:#E06C75">$PID</span><span style="color:#98C379;--shiki-dark:#98C379">]"</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">        kill</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -15</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $PID</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        # 等待最大 120 秒，直到关闭完成。</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ((</span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 120</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">++</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">))</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            do</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">                sleep</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                PID</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">$(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">ps</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -ef</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grep</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">grep</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -v</span><span style="color:#98C379;--shiki-dark:#98C379"> "grep"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">awk</span><span style="color:#98C379;--shiki-dark:#98C379"> '{print $2}'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [ </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-n</span><span style="color:#98C379;--shiki-dark:#98C379"> "</span><span style="color:#E06C75;--shiki-dark:#E06C75">$PID</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ]; </span><span style="color:#C678DD;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">                    echo</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span><span style="color:#98C379;--shiki-dark:#98C379"> ".\c"</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                else</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">                    echo</span><span style="color:#98C379;--shiki-dark:#98C379"> '[stop] 停止 $BASE_PATH/$SERVER_NAME 成功'</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    break</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                fi</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">		    done</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        # 如果正常关闭失败，那么进行强制 kill -9 进行关闭</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [ </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">-n</span><span style="color:#98C379;--shiki-dark:#98C379"> "</span><span style="color:#E06C75;--shiki-dark:#E06C75">$PID</span><span style="color:#98C379;--shiki-dark:#98C379">"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ]; </span><span style="color:#C678DD;--shiki-dark:#C678DD">then</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">            echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[stop] </span><span style="color:#E06C75;--shiki-dark:#E06C75">$BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#98C379;--shiki-dark:#98C379"> 失败，强制 kill -9 </span><span style="color:#E06C75;--shiki-dark:#E06C75">$PID</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">            kill</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -9</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $PID</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        fi</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # 如果 Java 服务未启动，则无需关闭</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    else</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">        echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[stop] </span><span style="color:#E06C75;--shiki-dark:#E06C75">$BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#98C379;--shiki-dark:#98C379"> 未启动，无需停止"</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    fi</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 启动：启动后端项目</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> start</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # 开启启动前，打印启动参数</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">    echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[start] 开始启动 </span><span style="color:#E06C75;--shiki-dark:#E06C75">$BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">    echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[start] JAVA_OPS: </span><span style="color:#E06C75;--shiki-dark:#E06C75">$JAVA_OPS</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">    echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[start] JAVA_AGENT: </span><span style="color:#E06C75;--shiki-dark:#E06C75">$JAVA_AGENT</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">    echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[start] PROFILES: </span><span style="color:#E06C75;--shiki-dark:#E06C75">$PROFILES_ACTIVE</span><span style="color:#98C379;--shiki-dark:#98C379">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # 开始启动</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    nohup</span><span style="color:#98C379;--shiki-dark:#98C379"> java</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -server</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $JAVA_OPS</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $JAVA_AGENT</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -jar</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#98C379;--shiki-dark:#98C379">.jar</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --spring.profiles.active=</span><span style="color:#E06C75;--shiki-dark:#E06C75">$PROFILES_ACTIVE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> &gt; </span><span style="color:#98C379;--shiki-dark:#98C379">nohup.out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> 2&gt;&amp;1 &amp;</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">    echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "[start] 启动 </span><span style="color:#E06C75;--shiki-dark:#E06C75">$BASE_PATH</span><span style="color:#98C379;--shiki-dark:#98C379">/</span><span style="color:#E06C75;--shiki-dark:#E06C75">$SERVER_NAME</span><span style="color:#98C379;--shiki-dark:#98C379"> 完成"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># 部署</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> deploy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">    cd</span><span style="color:#E06C75;--shiki-dark:#E06C75"> $BASE_PATH</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # 第一步：停止 Java 服务</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    stop</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # 第二步：启动 Java 服务</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    start</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">deploy</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>友情提示：</p>
<p>脚本的详细讲解，可见 <a href="https://www.iocoder.cn/Jenkins/install/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Jenkins 极简入门 》 (opens new window)</a>的「2.3 远程服务器配置 」小节。</p>
<p>如果你想要修改脚本，主要关注 <code>BASE_PATH</code>、<code>PROFILES_ACTIVE</code>、<code>JAVA_OPS</code> 三个参数。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/05.png" alt="可修改参数" tabindex="0" loading="lazy"><figcaption>可修改参数</figcaption></figure>
<h3><a class="header-anchor" href="#_3-5-启动后端"><span></span></a><a href="https://doc.iocoder.cn/deployment-linux/#_3-5-%E5%90%AF%E5%8A%A8%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>3.5 启动后端</h3>
<p>① 【可选】执行 <code>yum install -y java-1.8.0-openjdk</code> 命令，安装 OpenJDK <strong>8</strong>。</p>
<p>友情提示：如果已经安装 JDK，可不安装。建议使用的 JDK 版本为 8、11、17 这三个。</p>
<p>② 执行 <code>sh deploy.sh</code> 命令，启动后端项目。日志如下：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[stop] 开始停止 /work/projects/yudao-server/yudao-server</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[stop] /work/projects/yudao-server/yudao-server 未启动，无需停止</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[start] 开始启动 /work/projects/yudao-server/yudao-server</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[start] JAVA_OPS: -Xms512m -Xmx512m -XX:+HeapDumpOnOutOfMemoryError -XX:</span><span style="color:#E06C75;--shiki-dark:#E06C75">HeapDumpPath</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">/work/projects/yudao-server/heapError</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[start] JAVA_AGENT:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[start] PROFILES: dev</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[start] 启动 /work/projects/yudao-server/yudao-server 完成</span></span></code></pre>
</div><p>③ 执行 <code>tail -f nohup.out</code> 命令，查看启动日志。看到如下内容，说明启动完成：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2022-04-13</span><span style="color:#98C379;--shiki-dark:#98C379"> 00:06:20.049</span><span style="color:#98C379;--shiki-dark:#98C379">  INFO</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1395</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Linux%E9%83%A8%E7%BD%B2/01.png" type="image/png"/>
    </item>
    <item>
      <title>Docker 部署</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/3.Docker%20%E9%83%A8%E7%BD%B2.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/3.Docker%20%E9%83%A8%E7%BD%B2.html</guid>
      <source url="https://springg.us.kg/rss.xml">Docker 部署</source>
      <description>Docker 部署 本小节，讲解如何将前端 + 后端项目，使用 Docker 容器，部署到 dev 开发环境下的一台 Linux 服务器上。如下图所示： Docker 部署Docker 部署 注意：服务器的 IP 地址。 外网 IP：139.9.196.247 内网 IP：192.168.0.213 下属所有涉及到 IP 的配置，需要替换成你自己的。 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，讲解如何将前端 + 后端项目，<strong>使用 Docker 容器</strong>，部署到 dev 开发环境下的一台 Linux 服务器上。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Docker部署/01.png" alt="Docker 部署" tabindex="0" loading="lazy"><figcaption>Docker 部署</figcaption></figure>
<p>注意：服务器的 IP 地址。</p>
<ul>
<li>外网 IP：139.9.196.247</li>
<li>内网 IP：192.168.0.213</li>
</ul>
<p>下属所有涉及到 IP 的配置，需要替换成你自己的。</p>
<h2><a class="header-anchor" href="#_1-安装-docker"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_1-%E5%AE%89%E8%A3%85-docker" target="_blank" rel="noopener noreferrer">#</a>1. 安装 Docker</h2>
<p>执行如下命令，进行 Docker 的安装。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ① 使用 DaoCloud 的 Docker 高速安装脚本。参考 https://get.daocloud.io/#install-docker</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">curl</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -sSL</span><span style="color:#98C379;--shiki-dark:#98C379"> https://get.daocloud.io/docker</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ② 设置 DaoCloud 的 Docker 镜像中心，加速镜像的下载速度。参考 https://www.daocloud.io/mirror</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">curl</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -sSL</span><span style="color:#98C379;--shiki-dark:#98C379"> https://get.daocloud.io/daotools/set_mirror.sh</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sh</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -s</span><span style="color:#98C379;--shiki-dark:#98C379"> http://f1361db2.m.daocloud.io</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## ③ 启动 Docker 服务</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379"> start</span><span style="color:#98C379;--shiki-dark:#98C379"> docker</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_2-配置-mysql"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_2-%E9%85%8D%E7%BD%AE-mysql" target="_blank" rel="noopener noreferrer">#</a>2. 配置 MySQL</h2>
<h3><a class="header-anchor" href="#_2-1-安装-mysql-可选"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_2-1-%E5%AE%89%E8%A3%85-mysql-%E5%8F%AF%E9%80%89" target="_blank" rel="noopener noreferrer">#</a>2.1 安装 MySQL（可选）</h3>
<p>友情提示：使用 Docker 安装 MySQL 是可选步骤，也可以直接安装 MySQL，或者购买 MySQL 云服务。</p>
<p>① 执行如下命令，使用 Docker 启动 MySQL 容器。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">docker</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -v</span><span style="color:#98C379;--shiki-dark:#98C379"> /work/mysql/:/var/lib/mysql</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">-p </span><span style="color:#98C379;--shiki-dark:#98C379">3306:3306</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span><span style="color:#98C379;--shiki-dark:#98C379"> MYSQL_ROOT_PASSWORD=</span><span style="color:#D19A66;--shiki-dark:#D19A66">123456</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">--restart=always </span><span style="color:#D19A66;--shiki-dark:#D19A66">--name</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#98C379;--shiki-dark:#98C379"> mysql</span></span></code></pre>
</div><ul>
<li>数据库文件，挂载到服务器的的 <code>/work/mysql/</code> 目录下</li>
<li>端口是 3306，密码是 123456</li>
</ul>
<p>② 执行 <code>ls /work/mysql</code> 命令，查看 <code>/work/mysql/</code> 目录的数据库文件。</p>
<figure><img src="https://doc.iocoder.cn/img/Docker部署/03.png" alt="数据库文件" tabindex="0" loading="lazy"><figcaption>数据库文件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-导入-sql-脚本"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_2-2-%E5%AF%BC%E5%85%A5-sql-%E8%84%9A%E6%9C%AC" target="_blank" rel="noopener noreferrer">#</a>2.2 导入 SQL 脚本</h3>
<p>创建一个名字为 <code>ruoyi-vue-pro</code> 数据库，执行数据库对应的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/sql" target="_blank" rel="noopener noreferrer"><code>sql</code> (opens new window)</a>目录下的 SQL 文件，进行初始化。</p>
<figure><img src="https://doc.iocoder.cn/img/Docker部署/02.png" alt="使用 Navicat 导入 SQL 脚本" tabindex="0" loading="lazy"><figcaption>使用 Navicat 导入 SQL 脚本</figcaption></figure>
<h2><a class="header-anchor" href="#_3-配置-redis"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_3-%E9%85%8D%E7%BD%AE-redis" target="_blank" rel="noopener noreferrer">#</a>3. 配置 Redis</h2>
<p>友情提示：使用 Docker 安装 Redis 是可选步骤，也可以直接安装 Redis，或者购买 Redis 云服务。</p>
<p>执行如下命令，使用 Docker 启动 Redis 容器。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">docker</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --name</span><span style="color:#98C379;--shiki-dark:#98C379"> redis</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --restart=always</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span><span style="color:#98C379;--shiki-dark:#98C379"> 6379:6379</span><span style="color:#98C379;--shiki-dark:#98C379"> redis:5.0.14-alpine</span></span></code></pre>
</div><ul>
<li>端口是 6379，密码未设置</li>
</ul>
<h2><a class="header-anchor" href="#_4-部署后端"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_4-%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>4. 部署后端</h2>
<h3><a class="header-anchor" href="#_4-1-修改配置"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_4-1-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>4.1 修改配置</h3>
<p>后端 dev 开发环境对应的是 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-dev.yaml" target="_blank" rel="noopener noreferrer"><code>application-dev.yaml</code> (opens new window)</a>配置文件，主要是修改 MySQL 和 Redis 为你的地址。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/03.png" alt=" 配置文件" tabindex="0" loading="lazy"><figcaption> 配置文件</figcaption></figure>
<h3><a class="header-anchor" href="#_4-2-编译后端"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_4-2-%E7%BC%96%E8%AF%91%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>4.2 编译后端</h3>
<p>在项目的根目录下，执行 <code>mvn clean package -Dmaven.test.skip=true</code> 命令，编译后端项目，构建出它的 Jar 包。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/02.png" alt="编译后端" tabindex="0" loading="lazy"><figcaption>编译后端</figcaption></figure>
<p>疑问：-Dmaven.test.skip=true 是什么意思？</p>
<p>跳过单元测试的执行。如果你项目的单元测试写的不错，建议使用 <code>mvn clean package</code> 命令，执行单元测试，保证交付的质量。</p>
<h3><a class="header-anchor" href="#_4-3-上传-jar-包"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_4-3-%E4%B8%8A%E4%BC%A0-jar-%E5%8C%85" target="_blank" rel="noopener noreferrer">#</a>4.3 上传 Jar 包</h3>
<p>在 Linux 服务器上创建 <code>/work/projects/yudao-server</code> 目录，使用 <code>scp</code> 命令或者 FTP 工具，将 <code>yudao-server.jar</code> 上传到该目录下。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/04.png" alt="上传 Jar 包" tabindex="0" loading="lazy"><figcaption>上传 Jar 包</figcaption></figure>
<h3><a class="header-anchor" href="#_4-4-构建镜像"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_4-4-%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F" target="_blank" rel="noopener noreferrer">#</a>4.4 构建镜像</h3>
<p>① 在 <code>/work/projects/yudao-server</code> 目录下，新建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/Dockerfile" target="_blank" rel="noopener noreferrer">Dockerfile (opens new window)</a>文件，用于制作后端项目的 Docker 镜像。编写内容如下：</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## AdoptOpenJDK 停止发布 OpenJDK 二进制，而 Eclipse Temurin 是它的延伸，提供更好的稳定性</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 感谢复旦核博士的建议！灰子哥，牛皮！</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">FROM</span><span style="color:#98C379;--shiki-dark:#98C379"> eclipse-temurin:8-jre</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 创建目录，并使用它作为工作目录</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">RUN</span><span style="color:#98C379;--shiki-dark:#98C379"> mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -p</span><span style="color:#98C379;--shiki-dark:#98C379"> /yudao-server</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">WORKDIR</span><span style="color:#98C379;--shiki-dark:#98C379"> /yudao-server</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 将后端项目的 Jar 文件，复制到镜像中</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">COPY</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server.jar</span><span style="color:#98C379;--shiki-dark:#98C379"> app.jar</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 设置 TZ 时区</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 设置 JAVA_OPTS 环境变量，可通过 docker run -e "JAVA_OPTS=" 进行覆盖</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">ENV</span><span style="color:#98C379;--shiki-dark:#98C379"> TZ=Asia/Shanghai</span><span style="color:#98C379;--shiki-dark:#98C379"> JAVA_OPTS="-Xms512m -Xmx512m"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 暴露后端项目的 48080 端口</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">EXPOSE</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 48080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 启动后端项目</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">ENTRYPOINT</span><span style="color:#98C379;--shiki-dark:#98C379"> java</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> ${</span><span style="color:#E06C75;--shiki-dark:#E06C75">JAVA_OPTS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} </span><span style="color:#D19A66;--shiki-dark:#D19A66">-Djava.security.egd=file:/dev/./urandom</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -jar</span><span style="color:#98C379;--shiki-dark:#98C379"> app.jar</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 执行如下命令，构建名字为 <code>yudao-server</code> 的 Docker 镜像。</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">cd</span><span style="color:#98C379;--shiki-dark:#98C379"> /work/projects/yudao-server</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">docker</span><span style="color:#98C379;--shiki-dark:#98C379"> build</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -t</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server</span><span style="color:#98C379;--shiki-dark:#98C379"> .</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Docker部署/04.png" alt="构建镜像" tabindex="0" loading="lazy"><figcaption>构建镜像</figcaption></figure>
<p>③ 在 <code>/work/projects/yudao-server</code> 目录下，新建 Shell 脚本 <code>deploy.sh</code>，使用 Docker 启动后端项目。编写内容如下：</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#!/bin/bash</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">set</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -e</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 第一步：删除可能启动的老 yudao-server 容器</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "开始删除 yudao-server 容器"</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">docker</span><span style="color:#98C379;--shiki-dark:#98C379"> stop</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> || </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">true</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">docker</span><span style="color:#98C379;--shiki-dark:#98C379"> rm</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> || </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">true</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "完成删除 yudao-server 容器"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 第二步：启动新的 yudao-server 容器 \</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "开始启动 yudao-server 容器"</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">docker</span><span style="color:#98C379;--shiki-dark:#98C379"> run</span><span style="color:#D19A66;--shiki-dark:#D19A66"> -d</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">--name </span><span style="color:#98C379;--shiki-dark:#98C379">yudao-server</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">-p </span><span style="color:#98C379;--shiki-dark:#98C379">48080:48080</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">-e </span><span style="color:#98C379;--shiki-dark:#98C379">"SPRING_PROFILES_ACTIVE=dev"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">-v </span><span style="color:#98C379;--shiki-dark:#98C379">/work/projects/yudao-server:/root/logs/</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> \</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">yudao-server</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">echo</span><span style="color:#98C379;--shiki-dark:#98C379"> "正在启动 yudao-server 容器中，需要等待 60 秒左右"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>应用日志文件，挂载到服务器的的 <code>/work/projects/yudao-server</code> 目录下</li>
<li>通过 <code>SPRING_PROFILES_ACTIVE</code> 设置为 <code>dev</code> 开发环境</li>
</ul>
<h3><a class="header-anchor" href="#_4-5-启动后端"><span></span></a><a href="https://doc.iocoder.cn/deployment-docker/#_4-5-%E5%90%AF%E5%8A%A8%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>4.5 启动后端</h3>
<p>① 执行 <code>sh deploy.sh</code> 命令，使用 Docker 启动后端项目。日志如下：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">开始删除</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server</span><span style="color:#98C379;--shiki-dark:#98C379"> 容器</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yudao-server</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">yudao-server</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">完成删除</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server</span><span style="color:#98C379;--shiki-dark:#98C379"> 容器</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">开始启动</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server</span><span style="color:#98C379;--shiki-dark:#98C379"> 容器</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0dfd3dc409a53ae6b5e7c5662602cf5dcb52fd4d7f673bd74af7d21da8ead9d5</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">正在启动</span><span style="color:#98C379;--shiki-dark:#98C379"> yudao-server</span><span style="color:#98C379;--shiki-dark:#98C379"> 容器中，需要等待</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 60</span><span style="color:#98C379;--shiki-dark:#98C379"> 秒左右</span></span></code></pre>
</div><p>② 执行 <code>docker logs yudao-server</code> 命令，查看启动日志。看到如下内容，说明启动完成：</p>
<p>友情提示：如果日志比较多，可以使用 grep 进行过滤。</p>
<p>例如说：使用 <code>docker logs yudao-server | grep 48080</code></p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2022-04-15</span><span style="color:#98C379;--shiki-dark:#98C379"> 00:34:19.647</span><span style="color:#98C379;--shiki-dark:#98C379">  INFO</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 8</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Docker%E9%83%A8%E7%BD%B2/01.png" type="image/png"/>
    </item>
    <item>
      <title>Jenkins 部署</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/4.Jenkins%20%E9%83%A8%E7%BD%B2.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/4.Jenkins%20%E9%83%A8%E7%BD%B2.html</guid>
      <source url="https://springg.us.kg/rss.xml">Jenkins 部署</source>
      <description>Jenkins 部署 本小节，讲解如何将前端 + 后端项目，使用 Jenkins 工具，部署到 dev 开发环境下的一台 Linux 服务器上。如下图所示： Jenkins 部署Jenkins 部署 友情提示： 本文是 《开发指南 —— Linux 部署》 的加强版，差别在于使用 Jenkins 部署。 #1. 安装 Jenkins 阅读 《芋道 Je...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，讲解如何将前端 + 后端项目，<strong>使用 Jenkins 工具</strong>，部署到 dev 开发环境下的一台 Linux 服务器上。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Linux部署/01.png" alt="Jenkins 部署" tabindex="0" loading="lazy"><figcaption>Jenkins 部署</figcaption></figure>
<p>友情提示：</p>
<p>本文是 <a href="https://doc.iocoder.cn/deployment-linux" target="_blank" rel="noopener noreferrer">《开发指南 —— Linux 部署》</a> 的加强版，差别在于使用 Jenkins 部署。</p>
<h2><a class="header-anchor" href="#_1-安装-jenkins"><span></span></a><a href="https://doc.iocoder.cn/deployment-jenkins/#_1-%E5%AE%89%E8%A3%85-jenkins" target="_blank" rel="noopener noreferrer">#</a>1. 安装 Jenkins</h2>
<p>阅读 <a href="https://www.iocoder.cn/Jenkins/install/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Jenkins 极简入门 》 (opens new window)</a>文章，进行 Jenkins 的安装。</p>
<h2><a class="header-anchor" href="#_2-部署后端"><span></span></a><a href="https://doc.iocoder.cn/deployment-jenkins/#_2-%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>2. 部署后端</h2>
<p>阅读 <a href="https://www.iocoder.cn/Spring-Boot/Jenkins/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 持续交付 Jenkins 入门 》 (opens new window)</a>文章，进行后端的部署。</p>
<p>可参考 Jenkins 配置如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Jenkins部署/01.png" alt="Build" tabindex="0" loading="lazy"><figcaption>Build</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/Jenkins部署/02.png" alt="Post Steps" tabindex="0" loading="lazy"><figcaption>Post Steps</figcaption></figure>
<h2><a class="header-anchor" href="#_3-部署前端"><span></span></a><a href="https://doc.iocoder.cn/deployment-jenkins/#_3-%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>3. 部署前端</h2>
<p>可参考 Jenkins 配置如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Jenkins部署/11.png" alt="Build" tabindex="0" loading="lazy"><figcaption>Build</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/Jenkins部署/12.png" alt="Post Steps" tabindex="0" loading="lazy"><figcaption>Post Steps</figcaption></figure>
<p>上次更新: 2023/03/01, 00:29:36</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Linux%E9%83%A8%E7%BD%B2/01.png" type="image/png"/>
    </item>
    <item>
      <title>HTTPS 证书</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/5.HTTPS%20%E8%AF%81%E4%B9%A6.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/5.HTTPS%20%E8%AF%81%E4%B9%A6.html</guid>
      <source url="https://springg.us.kg/rss.xml">HTTPS 证书</source>
      <description>HTTPS 证书 本小节，讲解如何在 Nginx 配置 SSL 证书，实现前端和后端使用 HTTPS 安全访问的功能。 考虑到各大云服务厂商的文档写的比较齐全，这里更多做汇总与整理。 😜 如果想要免费的 SSL 证书，请申请 DV 单域名证书。如果要配置多个域名，可以申请多个 DV 单域名证书。 友情提示：HTTPS 的学习资料？ 《HTTPS 的工...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，讲解如何在 Nginx 配置 SSL 证书，实现前端和后端使用 HTTPS 安全访问的功能。</p>
<p>考虑到各大云服务厂商的文档写的比较齐全，这里更多做汇总与整理。</p>
<p>😜 如果想要免费的 SSL 证书，请申请 DV 单域名证书。如果要配置多个域名，可以申请多个 DV 单域名证书。</p>
<p>友情提示：HTTPS 的学习资料？</p>
<ul>
<li><a href="http://www.iocoder.cn/Fight/How-HTTPS-works/?yudao" target="_blank" rel="noopener noreferrer">《HTTPS 的工作原理》(opens new window)</a></li>
<li><a href="http://www.iocoder.cn/Fight/Interviewer-You-do-not-understand-how-HTTPS-works-and-you-are-telling-me-about-the-man-in-the-middle-attack/?yudao" target="_blank" rel="noopener noreferrer">《面试官：你连 HTTPS 原理没搞懂，还给我讲“中间人攻击”？》(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_1-阿里云-ssl【最常用】"><span></span></a><a href="https://doc.iocoder.cn/https/#_1-%E9%98%BF%E9%87%8C%E4%BA%91-ssl%E3%80%90%E6%9C%80%E5%B8%B8%E7%94%A8%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>1. 阿里云 SSL【最常用】</h2>
<p><a href="https://www.aliyun.com/product/cas" target="_blank" rel="noopener noreferrer">阿里云 SSL 证书(opens new window)</a></p>
<ul>
<li>第一步，<a href="https://help.aliyun.com/document_detail/205510.html" target="_blank" rel="noopener noreferrer">免费证书申购流程(opens new window)</a></li>
<li>第二步，<a href="https://help.aliyun.com/document_detail/98728.html" target="_blank" rel="noopener noreferrer">在 Nginx 或 Tengine 服务器上安装证书(opens new window)</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>服务监控</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/6.%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/10.%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/6.%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7.html</guid>
      <source url="https://springg.us.kg/rss.xml">服务监控</source>
      <description>服务监控 系统使用 Spring Boot Admin 和 SkyWalking 实现后端服务的监控。 #1. Spring Boot Admin 阅读 《芋道 Spring Boot 监控工具 Admin 入门》 (opens new window)文章，入门 Spring Boot Admin。 注意，Spring Boot Admin 是内嵌在 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>系统使用 Spring Boot Admin 和 SkyWalking 实现后端服务的监控。</p>
<h2><a class="header-anchor" href="#_1-spring-boot-admin"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_1-spring-boot-admin" target="_blank" rel="noopener noreferrer">#</a>1. Spring Boot Admin</h2>
<p>阅读 <a href="https://www.iocoder.cn/Spring-Boot/Admin/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 监控工具 Admin 入门》 (opens new window)</a>文章，入门 Spring Boot Admin。</p>
<p>注意，Spring Boot Admin 是内嵌在 <code>yudao-server</code> 后端项目中，无需单独启动。</p>
<h3><a class="header-anchor" href="#_1-1-配置"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_1-1-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1.1 配置</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L136-L146" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.boot.admin</code> 配置项，设置 Spring Boot Admin 的配置。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/01.png" alt=" 配置文件" tabindex="0" loading="lazy"><figcaption> 配置文件</figcaption></figure>
<p>疑问：prod 生产环境下，后端部署多个 JVM 进程时，spring.boot.admin.client.url 填写哪个 IP？</p>
<ul>
<li>第一步，在 Nginx 中配置 <code>/admin</code> 路径，转发到多个 JVM 的 IP 上，使用 <a href="https://blog.csdn.net/bolg_hero/article/details/73382117" target="_blank" rel="noopener noreferrer"><code>backup</code> (opens new window)</a>参数实现主备。注意，该转发只允许内网访问，避免安全问题！！！</li>
<li>第二步，设置 <code>spring.boot.admin.client.url</code> 配置项，为 Nginx 的 <code>内置 IP/admin</code> 地址。</li>
</ul>
<h3><a class="header-anchor" href="#_1-2-使用"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_1-2-%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>1.2 使用</h3>
<p>① 访问 <a href="http://127.0.0.1:48080/admin/applications" target="_blank" rel="noopener noreferrer">http://127.0.0.1:48080/admin/applications (opens new window)</a>地址，可以在 Spring Boot Admin 中，查看到应用与实例的列表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/02.png" alt="应用 - 列表" tabindex="0" loading="lazy"><figcaption>应用 - 列表</figcaption></figure>
<p>② 点击 <code>yudao-server</code> 应用，再点击实例，可以查看到该实例的细节信息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/03.png" alt="应用 - 明细" tabindex="0" loading="lazy"><figcaption>应用 - 明细</figcaption></figure>
<p>③ 点击 [日志 -&gt; 日志文件] 菜单，查看该示例的日志内容。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/04.png" alt="应用 - 日志" tabindex="0" loading="lazy"><figcaption>应用 - 日志</figcaption></figure>
<p>点击 [日志 -&gt; 日志文件] 菜单，可动态修改 Logger 的日志级别，方便排查线上的某些 BUG。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/05.png" alt="应用 - 日志" tabindex="0" loading="lazy"><figcaption>应用 - 日志</figcaption></figure>
<p>补充说明：也可以通过前端的 [基础设施 -&gt; Java 监控] 菜单。</p>
<p>前端 [基础设施 -&gt; Java 监控] 菜单，通过 iframe 内嵌后端 <code>/admin/applications</code> 路径。</p>
<p>如果你想自定义地址，可以前往 [基础设置 -&gt; 配置管理] 菜单，设置 key 为 <code>url.spring-boot-admin</code> 配置项。</p>
<h2><a class="header-anchor" href="#_2-skywalking"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_2-skywalking" target="_blank" rel="noopener noreferrer">#</a>2. SkyWalking</h2>
<p>阅读 <a href="https://www.iocoder.cn/SkyWalking/install/?yudao" target="_blank" rel="noopener noreferrer">《芋道 SkyWalking 极简入门》 (opens new window)</a>文章，入门 SkyWalking。</p>
<p>注意，SkyWalking 需要单独启动，预计需要 4 核 8G 的硬件资源。</p>
<h3><a class="header-anchor" href="#_2-1-配置"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_2-1-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>2.1 配置</h3>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/logback-spring.xml" target="_blank" rel="noopener noreferrer"><code>logback-spring.xml</code> (opens new window)</a>配置文件中，添加 SkyWalking 收集日志的 appender 配置。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/10.png" alt=" 配置" tabindex="0" loading="lazy"><figcaption> 配置</figcaption></figure>
<p>② 修改 SkyWalking 在前端项目的 [基础设施 -&gt; 监控平台] 对应的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/infra/skywalking/index.vue#L11" target="_blank" rel="noopener noreferrer"><code>skywaling/index.vue</code> (opens new window)</a>文件，调整为你 SkyWalking 的访问地址。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/11.png" alt=" 文件" tabindex="0" loading="lazy"><figcaption> 文件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-使用"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_2-2-%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>2.2 使用</h3>
<p>① 点击 [基础设施 -&gt; 监控平台] 菜单，可以看到 SkyWalking 提供的监控平台。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/21.png" alt="基础设施 -> 监控平台" tabindex="0" loading="lazy"><figcaption>基础设施 -&gt; 监控平台</figcaption></figure>
<p>② 点击 <code>yudao-server</code> 服务，查看该服务的监控信息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/服务监控/22.png" alt=" 服务" tabindex="0" loading="lazy"><figcaption> 服务</figcaption></figure>
<p>补充说明：</p>
<p>前端 [基础设施 -&gt; 监控平台] 菜单，通过 iframe 内嵌 <code>http://skywalking.iocoder.cn</code> 路径。</p>
<p>如果你想自定义地址，可以前往 [基础设置 -&gt; 配置管理] 菜单，设置 key 为 <code>url.skywalking</code> 配置项。</p>
<h2><a class="header-anchor" href="#_3-更多监控系统"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_3-%E6%9B%B4%E5%A4%9A%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer">#</a>3. 更多监控系统</h2>
<h3><a class="header-anchor" href="#_3-1-prometheus"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_3-1-prometheus" target="_blank" rel="noopener noreferrer">#</a>3.1 Prometheus</h3>
<p>参见 <a href="https://www.iocoder.cn/Prometheus/install/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Prometheus + Grafana + Alertmanager 极简入门 》 (opens new window)</a>文章。</p>
<h3><a class="header-anchor" href="#_3-2-elk"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_3-2-elk" target="_blank" rel="noopener noreferrer">#</a>3.2 ELK</h3>
<p>参见 <a href="https://www.iocoder.cn/Elasticsearch/ELK-install/?yudao" target="_blank" rel="noopener noreferrer">芋道 ELK(Elasticsearch + Logstash + Kibana) 极简入门 (opens new window)</a>文章。</p>
<h3><a class="header-anchor" href="#_3-3-sentry"><span></span></a><a href="https://doc.iocoder.cn/server-monitor/#_3-3-sentry" target="_blank" rel="noopener noreferrer">#</a>3.3 Sentry</h3>
<p>参见 <a href="https://www.iocoder.cn/Sentry/install/?yudao" target="_blank" rel="noopener noreferrer">《Sentry 极简入门 》 (opens new window)</a>文章。</p>
<p>上次更新: 2023/04/07, 23:25:01</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7/01.png" type="image/png"/>
    </item>
    <item>
      <title>开发规范</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/1.%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/1.%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.html</guid>
      <source url="https://springg.us.kg/rss.xml">开发规范</source>
      <description>开发规范 #1. view 页面 在 @views (opens new window)目录下，每个模块对应一个目录，它的所有功能的 .vue 都放在该目录里。 目录 目录 一般来说，一个路由对应一个 .vue 文件。 #2. api 请求 在 @/api (opens new window)目录下，每个模块对应一个 .api 文件。 目录 目录 每个...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#_1-view-页面"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_1-view-%E9%A1%B5%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>1. view 页面</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/views" target="_blank" rel="noopener noreferrer"><code>@views</code> (opens new window)</a>目录下，每个模块对应一个目录，它的所有功能的 <code>.vue</code> 都放在该目录里。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/开发规范/01.png" alt=" 目录" tabindex="0" loading="lazy"><figcaption> 目录</figcaption></figure>
<p>一般来说，一个路由对应一个 <code>.vue</code> 文件。</p>
<h2><a class="header-anchor" href="#_2-api-请求"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_2-api-%E8%AF%B7%E6%B1%82" target="_blank" rel="noopener noreferrer">#</a>2. api 请求</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/api" target="_blank" rel="noopener noreferrer"><code>@/api</code> (opens new window)</a>目录下，每个模块对应一个 <code>.api</code> 文件。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/开发规范/02.png" alt=" 目录" tabindex="0" loading="lazy"><figcaption> 目录</figcaption></figure>
<p>每个 API 方法，会调用 <code>request</code> 方法，发起对后端 RESTful API 的调用。</p>
<h3><a class="header-anchor" href="#_2-1-请求封装"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_2-1-%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85" target="_blank" rel="noopener noreferrer">#</a>2.1 请求封装</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/utils/request.js" target="_blank" rel="noopener noreferrer"><code>@/utils/request</code> (opens new window)</a>基于 <a href="http://axios-js.com/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer">axios (opens new window)</a>封装，统一处理 GET、POST 方法的请求参数、请求头，以及错误提示信息等。</p>
<h4><a class="header-anchor" href="#_2-1-1-创建-axios-实例"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_2-1-1-%E5%88%9B%E5%BB%BA-axios-%E5%AE%9E%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2.1.1 创建 axios 实例</h4>
<ul>
<li><code>baseURL</code> 基础路径</li>
<li><code>timeout</code> 超时时间</li>
</ul>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">实现代码</summary><div class="language-JavaScript extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-javascript codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h4><a class="header-anchor" href="#_2-1-2-request-拦截器"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_2-1-2-request-%E6%8B%A6%E6%88%AA%E5%99%A8" target="_blank" rel="noopener noreferrer">#</a>2.1.2 Request 拦截器</h4>
<ul>
<li><code>Authorization</code>、<code>tenant-id</code> 请求头</li>
<li>GET 请求参数的拼接</li>
</ul>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">实现代码</summary><div class="language-JavaScript extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-javascript codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token parameter" style="margin: 0px; padding: 0px;"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token parameter" style="margin: 0px; padding: 0px;"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h4><a class="header-anchor" href="#_2-1-3-response-拦截器"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_2-1-3-response-%E6%8B%A6%E6%88%AA%E5%99%A8" target="_blank" rel="noopener noreferrer">#</a>2.1.3 Response 拦截器</h4>
<ul>
<li>Token 失效、登录过期时，跳回首页</li>
<li>请求失败，Message 错误提示</li>
</ul>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">实现代码</summary><div class="language-JavaScript extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-javascript codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token parameter" style="margin: 0px; padding: 0px;"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token class-name" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token parameter" style="margin: 0px; padding: 0px;"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h3><a class="header-anchor" href="#_2-2-交互流程"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_2-2-%E4%BA%A4%E4%BA%92%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>2.2 交互流程</h3>
<p>一个完整的前端 UI 交互到服务端处理流程，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/开发规范/03.png" alt="交互流程" tabindex="0" loading="lazy"><figcaption>交互流程</figcaption></figure>
<p>以 [系统管理 -&gt; 用户管理] 菜单为例，查看它是如何读取用户列表的。代码如下：</p>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// ① api/system/user.js</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> request</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> '@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 查询用户列表</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> listUser</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">query</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'/system/user/page'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'get'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">query</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// ② views/system/user/index.vue</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">listUser</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> "@/api/system/user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    userList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    loading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  methods</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    getList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">loading</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      listUser</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">response</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">userList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">rows</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">loading</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3><a class="header-anchor" href="#_2-3-自定义-baseurl-基础路径"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_2-3-%E8%87%AA%E5%AE%9A%E4%B9%89-baseurl-%E5%9F%BA%E7%A1%80%E8%B7%AF%E5%BE%84" target="_blank" rel="noopener noreferrer">#</a>2.3 自定义 <code>baseURL</code> 基础路径</h3>
<p>如果想要自定义的 <code>baseURL</code> 基础路径，可以通过 <code>baseURL</code> 进行直接覆盖。示例如下：</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> listUser</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">query</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'/system/user/page'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'get'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">query</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        baseURL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'https://www.iocoder.cn'</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 自定义</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_3-component-组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_3-component-%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>3. component 组件</h2>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/components" target="_blank" rel="noopener noreferrer"><code>@/components</code> (opens new window)</a>目录下，实现<strong>全局</strong>组件，被所有模块所公用。例如说，富文本编辑器、各种各搜索组件、封装的分页组件等等。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/开发规范/04.png" alt="全局组件" tabindex="0" loading="lazy"><figcaption>全局组件</figcaption></figure>
<p>② 每个模块的业务组件，可实现在 <code>views</code> 目录下，自己模块的目录的 <code>components</code> 目录下，避免单个 <code>.vue</code> 文件过大，降低维护成功。例如说，<code>@/views/pay/app/components/xxx.vue</code>。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/开发规范/05.png" alt="业务组件" tabindex="0" loading="lazy"><figcaption>业务组件</figcaption></figure>
<h2><a class="header-anchor" href="#_4-style-样式"><span></span></a><a href="https://doc.iocoder.cn/vue2/dev-spec/#_4-style-%E6%A0%B7%E5%BC%8F" target="_blank" rel="noopener noreferrer">#</a>4. style 样式</h2>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/styles" target="_blank" rel="noopener noreferrer"><code>@/styles</code> (opens new window)</a>目录下，实现<strong>全局</strong>样式，被所有页面所公用。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/开发规范/06.png" alt="全局样式" tabindex="0" loading="lazy"><figcaption>全局样式</figcaption></figure>
<p>② 每个 <code>.vue</code> 页面，可在 <code>&lt;style /&gt;</code> 标签中添加样式，注意需要添加 <code>scoped</code> 表示只作用在当前页面里，避免造成全局的样式污染。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/开发规范/07.png" alt="业务样式" tabindex="0" loading="lazy"><figcaption>业务样式</figcaption></figure>
<p>上次更新: 2023/03/01, 00:29:36</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue2/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/01.png" type="image/png"/>
    </item>
    <item>
      <title>菜单路由</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/2.%E8%8F%9C%E5%8D%95%E8%B7%AF%E7%94%B1.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/2.%E8%8F%9C%E5%8D%95%E8%B7%AF%E7%94%B1.html</guid>
      <source url="https://springg.us.kg/rss.xml">菜单路由</source>
      <description>菜单路由 前端项目基于 element-ui-admin 实现，它的 路由和侧边栏 (opens new window)是组织起一个后台应用的关键骨架。 侧边栏和路由是绑定在一起的，所以你只有在 @/router/index.js (opens new window)下面配置对应的路由，侧边栏就能动态的生成了，大大减轻了手动重复编辑侧边栏的工作量。 当...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>前端项目基于 element-ui-admin 实现，它的 <a href="https://panjiachen.github.io/vue-element-admin-site/zh/guide/essentials/router-and-nav.html#%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noopener noreferrer">路由和侧边栏 (opens new window)</a>是组织起一个后台应用的关键骨架。</p>
<p>侧边栏和路由是绑定在一起的，所以你只有在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/router/index.js" target="_blank" rel="noopener noreferrer">@/router/index.js (opens new window)</a>下面配置对应的路由，侧边栏就能动态的生成了，大大减轻了手动重复编辑侧边栏的工作量。</p>
<p>当然，这样就需要在配置路由的时候，遵循一些约定的规则。</p>
<h2><a class="header-anchor" href="#_1-路由配置"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_1-%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1. 路由配置</h2>
<p>首先，我们了解一下本项目配置路由时，提供了哪些配置项：</p>
<div class="language-js line-numbers-mode" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 当设置 true 的时候该路由不会在侧边栏出现 如 401，login 等页面，或者如一些编辑页面 /edit/1</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">hidden</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // (默认 false)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 当设置 noRedirect 的时候该路由在面包屑导航中不可被点击</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">redirect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'noRedirect'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 1. 当你一个路由下面的 children 声明的路由大于 1 个时，自动会变成嵌套的模式。例如说，组件页面</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 2. 只有一个时，会将那个子路由当做根路由显示在侧边栏。例如说，如引导页面</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 若你想不管路由下面的 children 声明的个数都显示你的根路由，</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 你可以设置 alwaysShow: true，这样它就会忽略之前定义的规则，一直显示根路由</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">alwaysShow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'router-name'</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 设定路由的名字，一定要填写不然使用 &lt;keep-alive&gt; 时会出现各种问题</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">meta</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  roles</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span><span style="color:#98C379;--shiki-dark:#98C379">'admin'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">'editor'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 设置该路由进入的权限，支持多个权限叠加</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'title'</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 设置该路由在侧边栏和面包屑中展示的名字</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'svg-name'</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 设置该路由的图标，支持 svg-class，也支持 el-icon-x element-ui 的 icon</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  noCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 如果设置为 true，则不会被 &lt;keep-alive&gt; 缓存(默认 false)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  breadcrumb</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> //  如果设置为 false，则不会在breadcrumb面包屑中显示(默认 true)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  affix</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 如果设置为 true，它则会固定在 tags-view 中(默认 false)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 当路由设置了该属性，则会高亮相对应的侧边栏。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 这在某些场景非常有用，比如：一个文章的列表页路由为：/article/list</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 点击文章进入文章详情页，这时候路由为 /article/1，但你想在侧边栏高亮文章列表的路由，就可以进行如下设置</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  activeMenu</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'/article/list'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>普通示例</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'/system/test'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">Layout</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  redirect</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'noRedirect'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  hidden</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  alwaysShow</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  meta</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'系统管理'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"system"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  children</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'index'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">(resolve)</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> =&gt;</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> require(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'@/views/index'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">], </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">resolve),</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'Test'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    meta</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">      title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'测试管理'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">      icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'user'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }]</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>外链示例</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'https:</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">//www.iocoder.cn',</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">  meta:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">'芋道源码'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> : </span><span style="color:#98C379;--shiki-dark:#98C379">"guide"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_2-路由"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_2-%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener noreferrer">#</a>2. 路由</h2>
<p>项目的路由分为两种：静态路由、动态路由。</p>
<h3><a class="header-anchor" href="#_2-1-静态路由"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_2-1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener noreferrer">#</a>2.1 静态路由</h3>
<p>静态路由，代表那些不需要动态判断权限的路由，如登录页、404、个人中心等通用页面。</p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/router/index.js" target="_blank" rel="noopener noreferrer">@/router/index.js (opens new window)</a>的 <code>constantRoutes</code>，就是配置对应的公共路由。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/01.png" alt="静态路由" tabindex="0" loading="lazy"><figcaption>静态路由</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-动态路由"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_2-2-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener noreferrer">#</a>2.2 动态路由</h3>
<p>动态路由，代表那些需要根据用户动态判断权限，并通过 <a href="https://router.vuejs.org/guide/advanced/dynamic-routing.html#adding-routes" target="_blank" rel="noopener noreferrer">addRoutes (opens new window)</a>动态添加的页面，如用户管理、角色管理等功能页面。</p>
<p>在用户登录成功后，会触发 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/store/modules/permission.js#L29" target="_blank" rel="noopener noreferrer"><code>@/store/modules/permission.js</code> (opens new window)</a>请求后端的菜单 RESTful API 接口，获取用户<strong>有权限</strong>的菜单列表，并转化添加到路由中。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/02.png" alt="动态路由" tabindex="0" loading="lazy"><figcaption>动态路由</figcaption></figure>
<p>友情提示：</p>
<ol>
<li>动态路由可以在 [系统管理 -&gt; 菜单管理] 进行新增和修改操作，请求的后端 RESTful API 接口是 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L83-L93" target="_blank" rel="noopener noreferrer"><code>/admin-api/system/list-menus</code>(opens new window)</a></li>
<li>动态路由在生产环境下会默认使用路由懒加载，实现方式参考 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/store/modules/permission.js#L108-L110" target="_blank" rel="noopener noreferrer">loadView (opens new window)</a>方法的判断</li>
</ol>
<h3><a class="header-anchor" href="#_2-3-路由跳转"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_2-3-%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC" target="_blank" rel="noopener noreferrer">#</a>2.3 路由跳转</h3>
<p>使用 <code>router.push</code> 方法，可以实现跳转到不同的页面。</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 简单跳转</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">$router</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">push</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"/system/user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 跳转页面并设置请求参数，使用 `query` 属性</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">$router</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">push</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"/system/user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">query</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span><span style="color:#E06C75;--shiki-dark:#E06C75">id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"芋道"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">} });</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_3-菜单管理"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_3-%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>3. 菜单管理</h2>
<p>项目的菜单在 [系统管理 -&gt; 菜单管理] 进行管理，支持<strong>无限</strong>层级，提供目录、菜单、按钮三种类型。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/03.png" alt="系统管理 -> 菜单管理" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 菜单管理</figcaption></figure>
<p>菜单可在 [系统管理 -&gt; 角色管理] 被分配给角色。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/04.png" alt="系统管理 -> 角色管理" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 角色管理</figcaption></figure>
<h3><a class="header-anchor" href="#_3-1-新增目录"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_3-1-%E6%96%B0%E5%A2%9E%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>3.1 新增目录</h3>
<p>① 大多数情况下，目录是作为菜单的【分类】：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/05.png" alt="新增目录 —— 菜单的分类" tabindex="0" loading="lazy"><figcaption>新增目录 —— 菜单的分类</figcaption></figure>
<p>② 目录也提供实现【外链】的能力：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/06.png" alt="新增目录 —— 外链" tabindex="0" loading="lazy"><figcaption>新增目录 —— 外链</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-新增菜单"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_3-2-%E6%96%B0%E5%A2%9E%E8%8F%9C%E5%8D%95" target="_blank" rel="noopener noreferrer">#</a>3.2 新增菜单</h3>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/07.png" alt="新增菜单" tabindex="0" loading="lazy"><figcaption>新增菜单</figcaption></figure>
<h3><a class="header-anchor" href="#_3-3-新增按钮"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_3-3-%E6%96%B0%E5%A2%9E%E6%8C%89%E9%92%AE" target="_blank" rel="noopener noreferrer">#</a>3.3 新增按钮</h3>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/08.png" alt="新增按钮" tabindex="0" loading="lazy"><figcaption>新增按钮</figcaption></figure>
<h2><a class="header-anchor" href="#_4-权限控制"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_4-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6" target="_blank" rel="noopener noreferrer">#</a>4. 权限控制</h2>
<p>前端通过权限控制，隐藏用户没有权限的按钮等，实现功能级别的权限。</p>
<p>友情提示：前端的权限控制，主要是提升用户体验，避免操作后发现没有权限。</p>
<p>最终在请求到后端时，还是会进行一次权限的校验。</p>
<h3><a class="header-anchor" href="#_4-1-v-haspermi-指令"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_4-1-v-haspermi-%E6%8C%87%E4%BB%A4" target="_blank" rel="noopener noreferrer">#</a>4.1 v-hasPermi 指令</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/directive/permission/hasPermi.js" target="_blank" rel="noopener noreferrer"><code>v-hasPermi</code> (opens new window)</a>指令，基于权限字符，进行权限的控制。</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 单个 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-hasPermi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"['system:user:create']"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;存在权限字符串才能看到&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 多个，满足任一一个即可 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-hasPermi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"['system:user:create', 'system:user:update']"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;包含权限字符串才能看到&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_4-2-v-hasrole-指令"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_4-2-v-hasrole-%E6%8C%87%E4%BB%A4" target="_blank" rel="noopener noreferrer">#</a>4.2 v-hasRole 指令</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/directive/permission/hasRole.js" target="_blank" rel="noopener noreferrer"><code>v-hasRole</code> (opens new window)</a>指令，基于角色标识，机进行的控制。</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 单个 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-hasRole</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"['admin']"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;管理员才能看到&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 多个，满足任一一个即可 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-hasRole</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"['role1', 'role2']"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;包含角色才能看到&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_4-3-结合-v-if-指令"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_4-3-%E7%BB%93%E5%90%88-v-if-%E6%8C%87%E4%BB%A4" target="_blank" rel="noopener noreferrer">#</a>4.3 结合 v-if 指令</h3>
<p>在某些情况下，它是不适合使用 <code>v-hasPermi</code> 或 <code>v-hasRole</code> 指令，如元素标签组件。此时，只能通过手动设置 <code>v-if</code>，通过使用全局权限判断函数，用法是基本一致的。</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"checkPermi(['system:user:create'])"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"用户管理"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"user"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;用户管理&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"checkPermi(['system:user:create', 'system:user:update'])"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"参数管理"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"menu"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;参数管理&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"checkRole(['admin'])"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"角色管理"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"role"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;角色管理&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"checkRole(['admin','common'])"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"定时任务"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"job"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;定时任务&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">   &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">checkPermi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">checkRole</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> "@/utils/permission"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 权限判断函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">   methods</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    checkPermi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    checkRole</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2><a class="header-anchor" href="#_5-页面缓存"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_5-%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">#</a>5. 页面缓存</h2>
<p>由于目前 <code>keep-alive</code> 和 <code>router-view</code> 是强耦合的，而且查看 Vue 的文档和源码不难发现 <code>keep-alive</code> 的 <code>include</code> 默认是优先匹配组件的 <code>name</code> ，所以在编写路由 <code>router</code> 和路由对应的 view component 的时候一定要确保两者的 name 是完全一致的。</p>
<p>注意，切记 view component 的 <code>name</code> 命名时候尽量保证唯一性，切记不要和某些组件的命名重复了，不然会递归引用最后内存溢出等问题。</p>
<p>友情提示：页面缓存是什么？</p>
<p>简单来说，Tab 切换时，开启页面缓存的 Tab 保持原本的状态，不进行刷新（不请求数据）。</p>
<p>详细可见 <a href="https://vuejs.org/guide/built-ins/keep-alive.html" target="_blank" rel="noopener noreferrer">Vue 文档 —— KeepAlive(opens new window)</a></p>
<h3><a class="header-anchor" href="#_5-1-静态路由的示例"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_5-1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>5.1 静态路由的示例</h3>
<p>① router 路由的 <code>name</code> 声明如下：</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'create-form'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: ()</span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'@/views/form/create'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'createForm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  meta</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">title</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'createForm'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'table'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>② view component 的 <code>name</code> 声明如下：</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'createForm'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>一定要保证两者的名字相同，切记写重或者写错。默认如果不写 <code>name</code> 就不会被缓存，详情见 <a href="https://github.com/vuejs/vue/issues/6938#issuecomment-345728620" target="_blank" rel="noopener noreferrer">issue (opens new window)</a>。</p>
<h3><a class="header-anchor" href="#_5-2-动态路由的示例"><span></span></a><a href="https://doc.iocoder.cn/vue2/route/#_5-2-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>5.2 动态路由的示例</h3>
<figure><img src="https://doc.iocoder.cn/img/Vue2/菜单路由/09.png" alt="示例" tabindex="0" loading="lazy"><figcaption>示例</figcaption></figure>
<p>上次更新: 2023/03/01, 00:29:36</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue2/%E8%8F%9C%E5%8D%95%E8%B7%AF%E7%94%B1/01.png" type="image/png"/>
    </item>
    <item>
      <title>Icon 图标</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/3.Icon%20%E5%9B%BE%E6%A0%87.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/3.Icon%20%E5%9B%BE%E6%A0%87.html</guid>
      <source url="https://springg.us.kg/rss.xml">Icon 图标</source>
      <description>Icon 图标 Element UI 内置多种 Icon 图标，可参考 Element Icon 图标 (opens new window)的文档。 在项目的 /src/assets/icons/svg (opens new window)目录下，自定义了 Icon 图标，默认注册到全局中，可以在项目中任意地方使用。如下图所示： 目录 目录 #1. 使...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Element UI 内置多种 Icon 图标，可参考 <a href="https://element.eleme.cn/#/zh-CN/component/icon" target="_blank" rel="noopener noreferrer">Element Icon 图标 (opens new window)</a>的文档。</p>
<p>在项目的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/assets/icons/svg" target="_blank" rel="noopener noreferrer"><code>/src/assets/icons/svg</code> (opens new window)</a>目录下，自定义了 Icon 图标，默认注册到全局中，可以在项目中任意地方使用。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/Icon图标/01.png" alt=" 目录" tabindex="0" loading="lazy"><figcaption> 目录</figcaption></figure>
<h2><a class="header-anchor" href="#_1-使用方式"><span></span></a><a href="https://doc.iocoder.cn/vue2/icon/#_1-%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F" target="_blank" rel="noopener noreferrer">#</a>1. 使用方式</h2>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 示例一：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    icon-class 为 icon 的名字</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    class-name 为 icon 的自定义 class</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">svg-icon</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon-class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"password"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class-name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'custom-class'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 示例二：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    icon 为 Element UI 的图标</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-plus"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;新增&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 示例三：结合上述两示例 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">svg-icon</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon-class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"password"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class-name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'custom-class'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt; 新增</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2><a class="header-anchor" href="#_2-自定义图标"><span></span></a><a href="https://doc.iocoder.cn/vue2/icon/#_2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%BE%E6%A0%87" target="_blank" rel="noopener noreferrer">#</a>2. 自定义图标</h2>
<p>① 访问 <a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer">https://www.iconfont.cn/ (opens new window)</a>地址，搜索你想要的图标，下载 SVG 格式。如下图所示：</p>
<p>友情提示：其它 SVG 图标网站也可以。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/Icon图标/02.png" alt="下载 SVG 格式" tabindex="0" loading="lazy"><figcaption>下载 SVG 格式</figcaption></figure>
<p>② 将 SVG 图标添加到 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/icons/svg" target="_blank" rel="noopener noreferrer"><code>@/icons/svg</code> (opens new window)</a>目录下，然后进行使用。</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">svg-icon</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon-class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"helpless"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_3-改变颜色"><span></span></a><a href="https://doc.iocoder.cn/vue2/icon/#_3-%E6%94%B9%E5%8F%98%E9%A2%9C%E8%89%B2" target="_blank" rel="noopener noreferrer">#</a>3. 改变颜色</h2>
<p><code>&lt;svg-icon /&gt;</code> 默认会读取其父级的 color <code>fill: currentColor;</code> 。</p>
<p>你可以改变父级的 <code>color</code> ，或者直接改变 <code>fill</code> 的颜色即可。</p>
<p>疑问：</p>
<p>如果你遇到图标颜色不对，可以参照本 <a href="https://github.com/PanJiaChen/vue-element-admin/issues/330" target="_blank" rel="noopener noreferrer">issue (opens new window)</a>进行修改</p>
<p>上次更新: 2023/03/01, 00:29:36</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue2/Icon%E5%9B%BE%E6%A0%87/01.png" type="image/png"/>
    </item>
    <item>
      <title>字典数据</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/4.%E5%AD%97%E5%85%B8%E6%95%B0%E6%8D%AE.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/4.%E5%AD%97%E5%85%B8%E6%95%B0%E6%8D%AE.html</guid>
      <source url="https://springg.us.kg/rss.xml">字典数据</source>
      <description>字典数据 本小节，讲解前端如何使用 [系统管理 -&amp;gt; 字典管理] 菜单的字典数据，例如说字典数据的下拉框、单选 / 多选按钮、高亮展示等等。 字典管理字典管理 #1. 全局缓存 用户登录成功后，前端会从后端获取到全量的字典数据，缓存在 store 中。如下图所示： 字典 store字典 store 这样，前端在使用到字典数据时，无需重复请求后端，提升用...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，讲解前端如何使用 [系统管理 -&gt; 字典管理] 菜单的字典数据，例如说字典数据的下拉框、单选 / 多选按钮、高亮展示等等。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/字典数据/01.png" alt="字典管理" tabindex="0" loading="lazy"><figcaption>字典管理</figcaption></figure>
<h2><a class="header-anchor" href="#_1-全局缓存"><span></span></a><a href="https://doc.iocoder.cn/vue2/dict/#_1-%E5%85%A8%E5%B1%80%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">#</a>1. 全局缓存</h2>
<p>用户登录成功后，前端会从后端获取到全量的字典数据，缓存在 store 中。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/字典数据/02.png" alt="字典 store" tabindex="0" loading="lazy"><figcaption>字典 store</figcaption></figure>
<p>这样，前端在使用到字典数据时，无需重复请求后端，提升用户体验。</p>
<p>不过，缓存暂时未提供刷新，所以在字典数据发生变化时，需要用户刷新浏览器，进行重新加载。</p>
<h2><a class="header-anchor" href="#_2-dict-type"><span></span></a><a href="https://doc.iocoder.cn/vue2/dict/#_2-dict-type" target="_blank" rel="noopener noreferrer">#</a>2. DICT_TYPE</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/utils/dict.js#L8-L58" target="_blank" rel="noopener noreferrer"><code>dict.js</code> (opens new window)</a>文件中，使用 <code>DICT_TYPE</code> 枚举了字典的 KEY。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/字典数据/03.png" alt=" 枚举" tabindex="0" loading="lazy"><figcaption> 枚举</figcaption></figure>
<p>后续如果有新的字典 KEY，需要你自己进行添加。</p>
<h2><a class="header-anchor" href="#_3-dicttag-字典标签"><span></span></a><a href="https://doc.iocoder.cn/vue2/dict/#_3-dicttag-%E5%AD%97%E5%85%B8%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener noreferrer">#</a>3. DictTag 字典标签</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/DictTag/index.vue" target="_blank" rel="noopener noreferrer">`` (opens new window)</a>组件，翻译字段对应的字典展示文本，并根据 <code>colorType</code>、<code>cssClass</code> 进行高亮。使用示例如下：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!--</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    type: 字典 KEY</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    value: 字典值</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dict-tag</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"DICT_TYPE.SYSTEM_LOGIN_TYPE"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"row.logType"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/字典数据/04.png" alt="DictTag" tabindex="0" loading="lazy"><figcaption>DictTag</figcaption></figure>
<h2><a class="header-anchor" href="#_4-字典工具类"><span></span></a><a href="https://doc.iocoder.cn/vue2/dict/#_4-%E5%AD%97%E5%85%B8%E5%B7%A5%E5%85%B7%E7%B1%BB" target="_blank" rel="noopener noreferrer">#</a>4. 字典工具类</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/utils/dict.js#L8-L58" target="_blank" rel="noopener noreferrer"><code>dict.js</code> (opens new window)</a>文件中，提供了字典工具类，方法如下：</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获取 dictType 对应的数据字典数组</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getDictDatas</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">dictType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略代码 */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获得 dictType + value 对应的字典展示文本</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getDictDataLabel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">dictType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略代码 */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span></code></pre>
</div><p>结合 Element UI 的表单组件，使用示例如下：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- radio 单选框 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-radio</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                      :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"parseInt(dict.value)"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;{{dict.label}}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-radio</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- select 下拉框 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-select</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"form.code"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> placeholder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"请选择渠道编码"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> clearable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-option</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict in this.getDictDatas(DICT_TYPE.SYSTEM_SMS_CHANNEL_CODE)"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">               :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.label"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>上次更新: 2023/03/01, 00:29:36</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue2/%E5%AD%97%E5%85%B8%E6%95%B0%E6%8D%AE/01.png" type="image/png"/>
    </item>
    <item>
      <title>系统组件</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/5.%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/5.%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6.html</guid>
      <source url="https://springg.us.kg/rss.xml">系统组件</source>
      <description>系统组件 #1. 引入三方组件 除了 Element UI 组件以及项目内置的系统组件，有时还需要引入其它三方组件 (opens new window)。 #1.1 如何安装 这里，以引入 vue-count-to (opens new window)为例。在终端输入下面的命令完成安装： #1.2 如何注册 Vue 注册组件有两种方式：全局注册、局部注...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#_1-引入三方组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_1-%E5%BC%95%E5%85%A5%E4%B8%89%E6%96%B9%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1. 引入三方组件</h2>
<p>除了 Element UI 组件以及项目内置的系统组件，有时还需要引入其它<a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">三方组件 (opens new window)</a>。</p>
<h3><a class="header-anchor" href="#_1-1-如何安装"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_1-1-%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">#</a>1.1 如何安装</h3>
<p>这里，以引入 <a href="https://www.npmjs.com/package/vue-count-to" target="_blank" rel="noopener noreferrer">vue-count-to (opens new window)</a>为例。在终端输入下面的命令完成安装：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## 加上 --save 参数，会自动添加依赖到 package.json 中去。</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">npm</span><span style="color:#98C379;--shiki-dark:#98C379"> install</span><span style="color:#98C379;--shiki-dark:#98C379"> vue-count-to</span><span style="color:#D19A66;--shiki-dark:#D19A66"> --save</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_1-2-如何注册"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_1-2-%E5%A6%82%E4%BD%95%E6%B3%A8%E5%86%8C" target="_blank" rel="noopener noreferrer">#</a>1.2 如何注册</h3>
<p>Vue 注册组件有两种方式：全局注册、局部注册。</p>
<h4><a class="header-anchor" href="#_1-2-1-局部注册"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_1-2-1-%E5%B1%80%E9%83%A8%E6%B3%A8%E5%86%8C" target="_blank" rel="noopener noreferrer">#</a>1.2.1 局部注册</h4>
<p>在对应的 Vue 页面中，使用 <code>components</code> 属性来注册组件。代码如下：</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">countTo</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :startVal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'startVal'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :endVal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'endVal'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :duration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'3000'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">countTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> countTo</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> 'vue-count-to'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  components</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">countTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }, </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// components 属性</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      startVal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      endVal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">2017</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4><a class="header-anchor" href="#_1-2-2-全局注册"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_1-2-2-%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C" target="_blank" rel="noopener noreferrer">#</a>1.2.2 全局注册</h4>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/main.js" target="_blank" rel="noopener noreferrer"><code>main.js</code> (opens new window)</a>中，全局注册组件。代码如下：</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> countTo</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> 'vue-count-to'</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">Vue</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'countTo'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">countTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><p>② 在对应的 Vue 页面中，直接使用组件，无需注册。代码如下：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">countTo</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :startVal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'startVal'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :endVal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'endVal'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :duration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'3000'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">countTo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_2-系统组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2. 系统组件</h2>
<p>项目使用到的相关组件。</p>
<h3><a class="header-anchor" href="#_2-1-基础框架组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-1-%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.1 基础框架组件</h3>
<p><a href="https://github.com/ElemeFE/element" target="_blank" rel="noopener noreferrer"><code>element-ui</code>(opens new window)</a></p>
<p><a href="https://github.com/PanJiaChen/vue-element-admin" target="_blank" rel="noopener noreferrer"><code>vue-element-admin</code>(opens new window)</a></p>
<h3><a class="header-anchor" href="#_2-2-树形选择组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-2-%E6%A0%91%E5%BD%A2%E9%80%89%E6%8B%A9%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.2 树形选择组件</h3>
<p><a href="https://github.com/riophae/vue-treeselect" target="_blank" rel="noopener noreferrer"><code>vue-treeselect</code>(opens new window)</a></p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/menu/index.vue#L68-L71" target="_blank" rel="noopener noreferrer"><code>menu/index.vue</code> (opens new window)</a>的使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"上级菜单"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">treeselect</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"form.parentId"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :options</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"menuOptions"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :normalizer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"normalizer"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :show-count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"true"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">              placeholder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"选择上级菜单"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/01.png" alt="树形选择组件" tabindex="0" loading="lazy"><figcaption>树形选择组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-3-表格分页组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-3-%E8%A1%A8%E6%A0%BC%E5%88%86%E9%A1%B5%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.3 表格分页组件</h3>
<p><a href="https://element.eleme.io/#/zh-CN/component/pagination" target="_blank" rel="noopener noreferrer"><code>el-pagination</code> (opens new window)</a>，二次封装成 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/Pagination/index.vue" target="_blank" rel="noopener noreferrer"><code>pagination</code> (opens new window)</a>组件。</p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/notice/index.vue#L57-L60" target="_blank" rel="noopener noreferrer"><code>notice/index.vue</code> (opens new window)</a>的使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">pagination</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-show</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"total&gt;0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"total"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :page.sync</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.pageNo"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :limit.sync</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.pageSize"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">            @pagination</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"getList"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/03.png" alt="表格分页组件" tabindex="0" loading="lazy"><figcaption>表格分页组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-4-工具栏右侧组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-4-%E5%B7%A5%E5%85%B7%E6%A0%8F%E5%8F%B3%E4%BE%A7%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.4 工具栏右侧组件</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/RightPanel/index.vue" target="_blank" rel="noopener noreferrer"><code>right-toolbar</code>(opens new window)</a></p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/notice/index.vue#L26" target="_blank" rel="noopener noreferrer"><code>notice/index.vue</code> (opens new window)</a>的使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">right-toolbar</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :showSearch.sync</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"showSearch"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @queryTable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"getList"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">right-toolbar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/04.png" alt="工具栏右侧组件" tabindex="0" loading="lazy"><figcaption>工具栏右侧组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-5-文件上传组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-5-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.5 文件上传组件</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/FileUpload/index.vue" target="_blank" rel="noopener noreferrer"><code>file-upload</code>(opens new window)</a></p>
<h3><a class="header-anchor" href="#_2-6-图片上传组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-6-%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.6 图片上传组件</h3>
<p>图片上传组件 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/ImageUpload/index.vue" target="_blank" rel="noopener noreferrer"><code>image-upload</code>(opens new window)</a></p>
<p>图片预览组件 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/ImagePreview/index.vue" target="_blank" rel="noopener noreferrer"><code>image-preview</code>(opens new window)</a></p>
<h3><a class="header-anchor" href="#_2-7-富文本编辑器"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-7-%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8" target="_blank" rel="noopener noreferrer">#</a>2.7 富文本编辑器</h3>
<p><a href="https://github.com/quilljs/quill" target="_blank" rel="noopener noreferrer"><code>quill</code> (opens new window)</a>，二次封装成 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/Editor/index.vue" target="_blank" rel="noopener noreferrer">Editor (opens new window)</a>组件。</p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/notice/index.vue#L94-L96" target="_blank" rel="noopener noreferrer"><code>notice/index.vue</code> (opens new window)</a>的使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"内容"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">editor</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"form.content"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :min-height</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"192"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/02.png" alt="富文本编辑器" tabindex="0" loading="lazy"><figcaption>富文本编辑器</figcaption></figure>
<h3><a class="header-anchor" href="#_2-8-表单设计组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-8-%E8%A1%A8%E5%8D%95%E8%AE%BE%E8%AE%A1%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.8 表单设计组件</h3>
<p>① 表单设计组件 <a href="https://github.com/JakHuang/form-generator" target="_blank" rel="noopener noreferrer"><code>form-generator</code>(opens new window)</a></p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/infra/build/index.vue" target="_blank" rel="noopener noreferrer"><code>build/index.vue</code> (opens new window)</a>中使用，效果如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/05.png" alt="表单设计组件" tabindex="0" loading="lazy"><figcaption>表单设计组件</figcaption></figure>
<p>② 表单展示组件 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/parser/Parser.vue" target="_blank" rel="noopener noreferrer"><code>parser</code> (opens new window)</a>，基于 <a href="https://github.com/JakHuang/form-generator" target="_blank" rel="noopener noreferrer"><code>form-generator</code> (opens new window)</a>封装。</p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/notice/index.vue#L94-L96" target="_blank" rel="noopener noreferrer"><code>processInstance/create.vue</code> (opens new window)</a>的使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">parser</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"new Date().getTime()"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :form-conf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"detailForm"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @submit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"submitForm"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/06.png" alt="表单展示组件" tabindex="0" loading="lazy"><figcaption>表单展示组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-9-工作流组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-9-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.9 工作流组件</h3>
<p><a href="https://gitee.com/MiyueSC/bpmn-process-designer" target="_blank" rel="noopener noreferrer"><code>bpmn-process-designer</code> (opens new window)</a>，二次封装成 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/bpmnProcessDesigner/" target="_blank" rel="noopener noreferrer"><code>bpmnProcessDesigner</code> (opens new window)</a>工作流设计组件</p>
<p>① 工作流设计组件 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/bpmnProcessDesigner/package/designer/ProcessDesigner.vue" target="_blank" rel="noopener noreferrer"><code>my-process-designer</code> (opens new window)</a>，在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/bpm/model/modelEditor.vue" target="_blank" rel="noopener noreferrer"><code>bpm/model/modelEditor.vue</code> (opens new window)</a>中使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 流程设计器，负责绘制流程等 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">my-process-designer</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"`designer-${reloadIndex}`"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"xmlString"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-bind</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"controlForm"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">  keyboard</span><span style="color:#D19A66;--shiki-dark:#D19A66"> ref</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"processDesigner"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @init-finished</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"initModeler"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">  @save</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"save"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 流程属性器，负责编辑每个流程节点的属性 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">my-properties-panel</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"`penal-${reloadIndex}`"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :bpmn-modeler</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"modeler"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :prefix</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"controlForm.prefix"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"process-panel"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">  :model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"model"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/07.png" alt="工作流设计组件" tabindex="0" loading="lazy"><figcaption>工作流设计组件</figcaption></figure>
<p>② 工作流展示组件 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/bpmnProcessDesigner/package/designer/ProcessViewer.vue" target="_blank" rel="noopener noreferrer"><code>my-process-viewer</code> (opens new window)</a>，在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/bpm/processInstance/detail.vue#L84-L85" target="_blank" rel="noopener noreferrer"><code>bpm/model/modelEditor.vue</code> (opens new window)</a>中使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">my-process-viewer</span><span style="color:#D19A66;--shiki-dark:#D19A66"> key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"designer"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"bpmnXML"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-bind</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"bpmnControlForm"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :activityData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"activityList"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">            :processInstanceData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"processInstance"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :taskData</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"tasks"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/08.png" alt="工作流展示组件" tabindex="0" loading="lazy"><figcaption>工作流展示组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-10-cron-表达式组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-10-cron-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.10 Cron 表达式组件</h3>
<p><a href="https://github.com/small-stone/vCrontab" target="_blank" rel="noopener noreferrer"><code>vue-crontab</code> (opens new window)</a>，二次封装成 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/components/Crontab/index.vue" target="_blank" rel="noopener noreferrer"><code>crontab</code> (opens new window)</a>组件。</p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/infra/job/index.vue#L122-L124" target="_blank" rel="noopener noreferrer"><code>job/index.vue</code> (opens new window)</a>的使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">crontab</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @hide</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"openCron=false"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @fill</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"crontabFill"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :expression</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"expression"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">crontab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/09.png" alt="Cron 表达式组件" tabindex="0" loading="lazy"><figcaption>Cron 表达式组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-11-内容复制组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_2-11-%E5%86%85%E5%AE%B9%E5%A4%8D%E5%88%B6%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.11 内容复制组件</h3>
<p><a href="https://github.com/zenorocha/clipboard.js" target="_blank" rel="noopener noreferrer"><code>clipboard</code> (opens new window)</a>，使用可见 <a href="https://panjiachen.github.io/vue-element-admin-site/zh/feature/component/clipboard.html" target="_blank" rel="noopener noreferrer">文档 (opens new window)</a>。</p>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/infra/codegen/index.vue#L70-L78" target="_blank" rel="noopener noreferrer"><code>codegen/index.vue</code> (opens new window)</a>的使用案例：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-link</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :underline</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"false"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-document-copy"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"float:right"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         v-clipboard:copy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"item.code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         v-clipboard:success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"clipboardSuccess"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    复制</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-link</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue2/系统组件/10.png" alt="复制" tabindex="0" loading="lazy"><figcaption>复制</figcaption></figure>
<h2><a class="header-anchor" href="#_3-其它推荐组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_3-%E5%85%B6%E5%AE%83%E6%8E%A8%E8%8D%90%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>3. 其它推荐组件</h2>
<p>推荐一些其它组件，可自己引入后使用。</p>
<ul>
<li>Tree Table 树形表格：<a href="https://panjiachen.github.io/vue-element-admin-site/zh/feature/component/tree-table.html" target="_blank" rel="noopener noreferrer">使用文档(opens new window)</a></li>
<li>Excel 前端直接导出：<a href="https://panjiachen.github.io/vue-element-admin-site/zh/feature/component/excel.html" target="_blank" rel="noopener noreferrer">使用文档(opens new window)</a></li>
<li>CodeMirror 代码编辑器：<a href="https://github.com/codemirror/CodeMirror" target="_blank" rel="noopener noreferrer">使用文档(opens new window)</a></li>
<li>wangEditor 文本编辑器：<a href="https://www.wangeditor.com/" target="_blank" rel="noopener noreferrer">使用文档(opens new window)</a></li>
<li>mavonEditor Markdown 编辑器：<a href="https://github.com/hinesboy/mavonEditor" target="_blank" rel="noopener noreferrer">使用文档(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_4-自定义组件"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_4-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>4. 自定义组件</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/components" target="_blank" rel="noopener noreferrer"><code>@/components</code> (opens new window)</a>目录下，创建 <code>.vue</code> 文件，在通过 <code>components</code> 进行注册即可。</p>
<h3><a class="header-anchor" href="#_4-1-创建使用"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_4-1-%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>4.1 创建使用</h3>
<p>新建一个简单的 <code>a</code> 组件来举例子。</p>
<p>① 在 <code>@/components/</code> 目录下，创建 <code>test</code> 文件，再创建 <code>a.vue</code> 文件。代码如下：</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;!--</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> 子组件 </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;这是a组件&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 在其它 Vue 页面，导入并注册后使用。代码如下：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 父组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#D19A66;--shiki-dark:#D19A66"> style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text-align: center; font-size: 20px"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    测试页面</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 3. 使用 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> "@/components/a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 1. 引入</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  components</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 2. 注册</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_4-2-组件通信"><span></span></a><a href="https://doc.iocoder.cn/vue2/components/#_4-2-%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1" target="_blank" rel="noopener noreferrer">#</a>4.2 组件通信</h3>
<p>基于上述的 <code>a</code> 示例组件，讲解父子组件如何通信。</p>
<p>① 子组件通过 <code>props</code> 属性，来接收父组件传递的值。代码如下：</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 子组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;这是a组件 name:{{ name }}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        props</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 1. props 的 name 进行接收</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">""</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    };</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 父组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#D19A66;--shiki-dark:#D19A66"> style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text-align: center; font-size: 20px"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    测试页面</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 2. :name 传入 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> "@/components/a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  components</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"芋道"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    };</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 子组件通过 <code>$emit</code> 方法，让父组件监听到自定义事件。代码如下：</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 子组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    这是a组件 name:{{ name }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"click"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;发送&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  props</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">""</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">      message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"我是来自子组件的消息"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    };</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  methods</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">$emit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ok"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">); </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 1. $emit 方法，通知 ok 事件，message 是参数</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 父组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#D19A66;--shiki-dark:#D19A66"> style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text-align: center; font-size: 20px"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        测试页面</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"name"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @ok</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"ok"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        子组件传来的值 : {{ message }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> a</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> "@/components/a"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    components</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: { </span><span style="color:#E06C75;--shiki-dark:#E06C75">testa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">a</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"芋道"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">""</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    methods</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        ok</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 2. 声明 ok 方法，监听 ok 自定义事件</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上次更新: 2023/04/04, 22:45:16</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue2/%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6/01.png" type="image/png"/>
    </item>
    <item>
      <title>通用方法</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/6.%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/6.%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95.html</guid>
      <source url="https://springg.us.kg/rss.xml">通用方法</source>
      <description>通用方法 本小节，分享前端项目的常用方法。 #1. $tab 对象 @tab 对象，由 plugins/tab.js (opens new window)实现，用于 Tab 标签相关的操作。它有如下方法： ① 打开页签 ② 修改页签 ③ 关闭页签 ④ 刷新页签 ⑤ 关闭所有页签 ⑥ 关闭左侧页签 ⑦ 关闭右侧页签 ⑧ 关闭其它页签 #2. $modal...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，分享前端项目的常用方法。</p>
<h2><a class="header-anchor" href="#_1-tab-对象"><span></span></a><a href="https://doc.iocoder.cn/vue2/util/#_1-tab-%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#</a>1. <code>$tab</code> 对象</h2>
<p><code>@tab</code> 对象，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/plugins/tab.js" target="_blank" rel="noopener noreferrer"><code>plugins/tab.js</code> (opens new window)</a>实现，用于 Tab 标签相关的操作。它有如下方法：</p>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">① 打开页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">② 修改页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">③ 关闭页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">④ 刷新页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">⑤ 关闭所有页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">⑥ 关闭左侧页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">⑦ 关闭右侧页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">⑧ 关闭其它页签</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h2><a class="header-anchor" href="#_2-modal-对象"><span></span></a><a href="https://doc.iocoder.cn/vue2/util/#_2-modal-%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#</a>2. <code>$modal</code> 对象</h2>
<p><code>@modal</code> 对象，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/plugins/modal.js" target="_blank" rel="noopener noreferrer"><code>plugins/modal.js</code> (opens new window)</a>实现，用于做消息提示、通知提示、对话框提醒、二次确认、遮罩等。它有如下方法：</p>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">① 提供成功、警告和错误等反馈信息</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">② 提供成功、警告和错误等提示信息</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">③ 提供成功、警告和错误等通知信息</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">④ 提供确认窗体信息</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">⑤ 提供遮罩层信息</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h2><a class="header-anchor" href="#_3-auth-对象"><span></span></a><a href="https://doc.iocoder.cn/vue2/util/#_3-auth-%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#</a>3. <code>$auth</code> 对象</h2>
<p><code>@auth</code> 对象，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/plugins/auth.js" target="_blank" rel="noopener noreferrer"><code>plugins/auth.js</code> (opens new window)</a>实现，用于验证用户是否拥有某（些）权限或角色。它有如下方法：</p>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">① 验证用户权限</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">② 验证用户角色</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h2><a class="header-anchor" href="#_4-cache-对象"><span></span></a><a href="https://doc.iocoder.cn/vue2/util/#_4-cache-%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#</a>4. <code>$cache</code> 对象</h2>
<p><code>@auth</code> 对象，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/plugins/cache.js" target="_blank" rel="noopener noreferrer"><code>plugins/cache.js</code> (opens new window)</a>实现，基于 session 或 local 实现不同级别的缓存。它有如下方法：</p>
<p>| 对象名称 | 缓存类型                                                     |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue2/%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95/01.png" type="image/png"/>
    </item>
    <item>
      <title>配置读取</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/7.%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/11.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%202/7.%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96.html</guid>
      <source url="https://springg.us.kg/rss.xml">配置读取</source>
      <description>配置读取 在 [基础设施 -&amp;gt; 配置管理] 菜单，可以动态修改配置，无需重启服务器即可生效。 配置管理配置管理 提示 对应 《后端手册 —— 配置中心》 文档。 #1. 读取配置 前端调用 /@api/infra/config (opens new window)的 #getConfigKey(configKey) 方法，获取指定 key 对应的配置的...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在 [基础设施 -&gt; 配置管理] 菜单，可以动态修改配置，无需重启服务器即可生效。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue2/配置读取/01.png" alt="配置管理" tabindex="0" loading="lazy"><figcaption>配置管理</figcaption></figure>
<p>提示</p>
<p>对应 <a href="https://doc.iocoder.cn/config-center/" target="_blank" rel="noopener noreferrer">《后端手册 —— 配置中心》</a> 文档。</p>
<h2><a class="header-anchor" href="#_1-读取配置"><span></span></a><a href="https://doc.iocoder.cn/vue2/config-center/#_1-%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1. 读取配置</h2>
<p>前端调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/api/infra/config.js#L20-L26" target="_blank" rel="noopener noreferrer"><code>/@api/infra/config</code> (opens new window)</a>的 <code>#getConfigKey(configKey)</code> 方法，获取指定 key 对应的配置的值。代码如下：</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getConfigKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">configKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'/infra/config/get-value-by-key?key='</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E06C75;--shiki-dark:#E06C75"> configKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'get'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/vue2/config-center/#_2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2. 实战案例</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/infra/server/index.vue" target="_blank" rel="noopener noreferrer"><code>src/views/infra/server/index.vue</code> (opens new window)</a>页面中，获取 key 为 <code>"url.skywalking"</code> 的配置的值。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/配置中心/07-vue2.png" alt="前端案例" tabindex="0" loading="lazy"><figcaption>前端案例</figcaption></figure>
<p>上次更新: 2023/04/08, 00:13:01</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue2/%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96/01.png" type="image/png"/>
    </item>
    <item>
      <title>开发规范</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/1.%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/1.%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83.html</guid>
      <source url="https://springg.us.kg/rss.xml">开发规范</source>
      <description>开发规范 #0. 实战案例 本小节，提供大家开发管理后台的功能时，最常用的普通列表、树形列表、新增与修改的表单弹窗、详情表单弹窗的实战案例。 #0.1 普通列表 可参考 [系统管理 -&amp;gt; 岗位管理] 菜单： API 接口：/src/api/system/post/index.ts(opens new window) 列表界面：/src/views/sy...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#_0-实战案例"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_0-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>0. 实战案例</h2>
<p>本小节，提供大家开发管理后台的功能时，最常用的普通列表、树形列表、新增与修改的表单弹窗、详情表单弹窗的实战案例。</p>
<h3><a class="header-anchor" href="#_0-1-普通列表"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_0-1-%E6%99%AE%E9%80%9A%E5%88%97%E8%A1%A8" target="_blank" rel="noopener noreferrer">#</a>0.1 普通列表</h3>
<p>可参考 [系统管理 -&gt; 岗位管理] 菜单：</p>
<ul>
<li>API 接口：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/api/system/post/index.ts" target="_blank" rel="noopener noreferrer"><code>/src/api/system/post/index.ts</code>(opens new window)</a></li>
<li>列表界面：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/post/index.vue" target="_blank" rel="noopener noreferrer"><code>/src/views/system/post/index.vue</code>(opens new window)</a></li>
<li>表单界面：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/post/PostForm.vue" target="_blank" rel="noopener noreferrer"><code>/src/views/system/post/PostForm.vue</code>(opens new window)</a></li>
</ul>
<p>为什么界面拆成列表和表单两个 Vue 文件？</p>
<p>每个 Vue 文件，只实现一个功能，更简洁，维护性更好，Git 代码冲突概率低。</p>
<h3><a class="header-anchor" href="#_0-2-树形列表"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_0-2-%E6%A0%91%E5%BD%A2%E5%88%97%E8%A1%A8" target="_blank" rel="noopener noreferrer">#</a>0.2 树形列表</h3>
<p>可参考 [系统管理 -&gt; 部门管理] 菜单：</p>
<ul>
<li>API 接口：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/api/system/dept/index.ts" target="_blank" rel="noopener noreferrer"><code>/src/api/system/dept/index.ts</code>(opens new window)</a></li>
<li>列表界面：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/dept/index.vue" target="_blank" rel="noopener noreferrer"><code>/src/views/system/dept/index.vue</code>(opens new window)</a></li>
<li>表单界面：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/dept/DeptForm.vue" target="_blank" rel="noopener noreferrer"><code>/src/views/system/dept/DeptForm.vue</code>(opens new window)</a></li>
</ul>
<h3><a class="header-anchor" href="#_0-3-高性能列表"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_0-3-%E9%AB%98%E6%80%A7%E8%83%BD%E5%88%97%E8%A1%A8" target="_blank" rel="noopener noreferrer">#</a>0.3 高性能列表</h3>
<p>可参考 [系统管理 -&gt; 地区管理] 菜单，对应 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/area/index.vue" target="_blank" rel="noopener noreferrer"><code>/src/views/system/area/index.vue</code> (opens new window)</a>列表界面</p>
<p>基于 <a href="https://element-plus.org/zh-CN/component/table-v2.html" target="_blank" rel="noopener noreferrer">Virtualized Table 虚拟化表格 (opens new window)</a>实现，解决一屏里超过 1000 条数据记录时，就会出现卡顿等性能问题。</p>
<h3><a class="header-anchor" href="#_0-4-详情弹窗"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_0-4-%E8%AF%A6%E6%83%85%E5%BC%B9%E7%AA%97" target="_blank" rel="noopener noreferrer">#</a>0.4 详情弹窗</h3>
<p>可参考 [基础设施 -&gt; API 日志 -&gt; 访问日志] 菜单，对应 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/infra/apiAccessLog/ApiAccessLogDetail.vue" target="_blank" rel="noopener noreferrer"><code>/src/views/infra/apiAccessLog/ApiAccessLogDetail.vue</code> (opens new window)</a>详情弹窗</p>
<h2><a class="header-anchor" href="#_1-view-页面"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_1-view-%E9%A1%B5%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>1. view 页面</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/" target="_blank" rel="noopener noreferrer"><code>@views</code> (opens new window)</a>目录下，每个模块对应一个目录，它的所有功能的 <code>.vue</code> 都放在该目录里。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/01.png" alt=" 目录" tabindex="0" loading="lazy"><figcaption> 目录</figcaption></figure>
<p>一般来说，一个路由对应一个 <code>index.vue</code> 文件。</p>
<h2><a class="header-anchor" href="#_2-api-请求"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_2-api-%E8%AF%B7%E6%B1%82" target="_blank" rel="noopener noreferrer">#</a>2. api 请求</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/tree/master/src/api" target="_blank" rel="noopener noreferrer"><code>@/api</code> (opens new window)</a>目录下，每个模块对应一个 <code>index.ts</code> API 文件。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/02.png" alt=" 目录" tabindex="0" loading="lazy"><figcaption> 目录</figcaption></figure>
<ul>
<li>API 方法：会调用 <code>request</code> 方法，发起对后端 RESTful API 的调用。</li>
<li><code>interface</code> 类型：定义了 API 的请求参数和返回结果的类型，对应后端的 VO 类型。</li>
</ul>
<h3><a class="header-anchor" href="#_2-1-请求封装"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_2-1-%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85" target="_blank" rel="noopener noreferrer">#</a>2.1 请求封装</h3>
<p><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/config/axios/service.ts" target="_blank" rel="noopener noreferrer"><code>/src/config/axios/index.ts</code> (opens new window)</a>基于 <a href="http://axios-js.com/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer">axios (opens new window)</a>封装，统一处理 GET、POST 方法的请求参数、请求头，以及错误提示信息等。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/03-01.png" alt="axios/index.ts" tabindex="0" loading="lazy"><figcaption>axios/index.ts</figcaption></figure>
<h4><a class="header-anchor" href="#_2-1-1-创建-axios-实例"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_2-1-1-%E5%88%9B%E5%BB%BA-axios-%E5%AE%9E%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2.1.1 创建 axios 实例</h4>
<ul>
<li><code>baseURL</code> 基础路径</li>
<li><code>timeout</code> 超时时间，默认为 30000 毫秒</li>
</ul>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">实现代码 /src/config/axios/service.ts</summary><div class="language-TypeScript extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-typescript codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h4><a class="header-anchor" href="#_2-1-2-request-拦截器"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_2-1-2-request-%E6%8B%A6%E6%88%AA%E5%99%A8" target="_blank" rel="noopener noreferrer">#</a>2.1.2 Request 拦截器</h4>
<ul>
<li>【重点】<code>Authorization</code>、<code>tenant-id</code> 请求头</li>
<li>GET 请求参数的拼接</li>
</ul>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">实现代码 /src/config/axios/service.ts</summary><div class="language-TypeScript extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-typescript codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token template-string" style="margin: 0px; padding: 0px;"><span class="token template-punctuation string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token interpolation" style="margin: 0px; padding: 0px;"><span class="token interpolation-punctuation punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token interpolation-punctuation punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token interpolation" style="margin: 0px; padding: 0px;"><span class="token interpolation-punctuation punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token interpolation-punctuation punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token template-punctuation string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h4><a class="header-anchor" href="#_2-1-3-response-拦截器"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_2-1-3-response-%E6%8B%A6%E6%88%AA%E5%99%A8" target="_blank" rel="noopener noreferrer">#</a>2.1.3 Response 拦截器</h4>
<ul>
<li>访问令牌 AccessToken 过期时，使用刷新令牌 RefreshToken 刷新，获得新的访问令牌</li>
<li>刷新令牌失败（过期）时，跳回首页进行登录</li>
<li>请求失败，Message 错误提示</li>
</ul>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">实现代码 /src/config/axios/service.ts</summary><div class="language-TypeScript extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-typescript codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token class-name" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token class-name" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token class-name" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token class-name" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token number" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function-variable function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function-variable function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token boolean" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token builtin" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h3><a class="header-anchor" href="#_2-2-交互流程"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_2-2-%E4%BA%A4%E4%BA%92%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>2.2 交互流程</h3>
<p>一个完整的前端 UI 交互到服务端处理流程，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/03-02.png" alt="交互流程" tabindex="0" loading="lazy"><figcaption>交互流程</figcaption></figure>
<p>继续以 [系统管理 -&gt; 岗位管理] 菜单为例，查看它是如何读取岗位列表的。代码如下：</p>
<div class="language-typescript line-numbers-mode" data-ext="typescript" data-title="typescript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// ① api/system/post/index.ts</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> request</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> '@/config/axios'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 查询岗位列表</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getPostPage</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> async</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PageParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'/system/post/page'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// ② views/system/post/index.vue</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#E06C75;--shiki-dark:#E06C75"> setup</span><span style="color:#E06C75;--shiki-dark:#E06C75"> lang</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">"tsx"</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> loading</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ref</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 列表的加载中</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> total</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ref</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 列表的总页数</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ref</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">([]) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 列表的数据</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> queryParams</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> reactive</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    pageNo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    pageSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">undefined</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 查询岗位列表 */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> async</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    loading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    try</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PostApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPostPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">queryParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">total</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    } </span><span style="color:#C678DD;--shiki-dark:#C678DD">finally</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        loading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2><a class="header-anchor" href="#_3-component-组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_3-component-%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>3. component 组件</h2>
<h3><a class="header-anchor" href="#_3-1-全局组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_3-1-%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>3.1 全局组件</h3>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/" target="_blank" rel="noopener noreferrer"><code>@/components</code> (opens new window)</a>目录下，实现<strong>全局</strong>组件，被所有模块所公用。</p>
<p>例如说，富文本编辑器、各种各搜索组件、封装的分页组件等等。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/04.png" alt="全局组件" tabindex="0" loading="lazy"><figcaption>全局组件</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-模块内组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_3-2-%E6%A8%A1%E5%9D%97%E5%86%85%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>3.2 模块内组件</h3>
<p>每个模块的业务组件，可实现在 <code>views</code> 目录下，自己模块的目录的 <code>components</code> 目录下，避免单个 <code>.vue</code> 文件过大，降低维护成功。</p>
<p>例如说，<code>@/views/pay/app/components/xxx.vue</code>：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/05.png" alt="业务组件" tabindex="0" loading="lazy"><figcaption>业务组件</figcaption></figure>
<h2><a class="header-anchor" href="#_4-style-样式"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_4-style-%E6%A0%B7%E5%BC%8F" target="_blank" rel="noopener noreferrer">#</a>4. style 样式</h2>
<p>① 在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/tree/master/src/styles" target="_blank" rel="noopener noreferrer"><code>@/styles</code> (opens new window)</a>目录下，实现<strong>全局</strong>样式，被所有页面所公用。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/06.png" alt="全局样式" tabindex="0" loading="lazy"><figcaption>全局样式</figcaption></figure>
<p>② 每个 <code>.vue</code> 页面，可在 <code>&lt;style /&gt;</code> 标签中添加样式，注意需要添加 <code>scoped</code> 表示只作用在当前页面里，避免造成全局的样式污染。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/开发规范/07.png" alt="业务样式" tabindex="0" loading="lazy"><figcaption>业务样式</figcaption></figure>
<p>更多也可以看看如下两篇文档：</p>
<ul>
<li><a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/guide/settings.html#%E6%A0%B7%E5%BC%8F%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">《vue-element-plus-admin —— 项目配置「样式配置」》(opens new window)</a></li>
<li><a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/guide/design.html" target="_blank" rel="noopener noreferrer">《vue-element-plus-admin —— 样式》(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_5-项目规范"><span></span></a><a href="https://doc.iocoder.cn/vue3/dev-spec/#_5-%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83" target="_blank" rel="noopener noreferrer">#</a>5. 项目规范</h2>
<p>可参考 <a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/dep/lint.html" target="_blank" rel="noopener noreferrer">《vue-element-plus-admin —— 项目规范》 (opens new window)</a>文档。</p>
<p>上次更新: 2023/04/04, 22:45:16</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/01.png" type="image/png"/>
    </item>
    <item>
      <title>IDE 调试</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/10.IDE%20%E8%B0%83%E8%AF%95.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/10.IDE%20%E8%B0%83%E8%AF%95.html</guid>
      <source url="https://springg.us.kg/rss.xml">IDE 调试</source>
      <description>IDE 调试 除了使用 Chrome 调试 JS 代码外，我们也可以使用 IDEA / WebStorm 或 VS Code 进行代码的调试。 #1. IDEA 调试 友情提示：WebStorm 也支持。 ① 使用 npm 命令将前端项目运行起来，例如说 npm run dev。耐心等待项目启动成功~ ② 点击链接，Windows 需按住 Ctrl +...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>除了使用 Chrome 调试 JS 代码外，我们也可以使用 IDEA / WebStorm 或 VS Code 进行代码的调试。</p>
<h2><a class="header-anchor" href="#_1-idea-调试"><span></span></a><a href="https://doc.iocoder.cn/vue3/debugger/#_1-idea-%E8%B0%83%E8%AF%95" target="_blank" rel="noopener noreferrer">#</a>1. IDEA 调试</h2>
<p>友情提示：WebStorm 也支持。</p>
<p>① 使用 npm 命令将前端项目运行起来，例如说 <code>npm run dev</code>。耐心等待项目启动成功~</p>
<p>② 点击链接，Windows 需按住 Ctrl + Shift + 鼠标左键，MacOS 需要按住 Shift + Command + 鼠标左键。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/IDE调试/idea-01.png" alt="点击链接" tabindex="0" loading="lazy"><figcaption>点击链接</figcaption></figure>
<p>③ 点击后，会跳出一个独立的 Chrome 窗口。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/IDE调试/idea-02.png" alt="独立的 Chrome 窗口" tabindex="0" loading="lazy"><figcaption>独立的 Chrome 窗口</figcaption></figure>
<p>④ 打个断点，例如说 <code>/src/api/login/index.ts</code> 的登录接口。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/IDE调试/idea-03.png" alt="打个断点" tabindex="0" loading="lazy"><figcaption>打个断点</figcaption></figure>
<p>⑤ 使用管理后台进行登录，可以看到成功进入断点。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/IDE调试/idea-04.png" alt="进入断点" tabindex="0" loading="lazy"><figcaption>进入断点</figcaption></figure>
<h2><a class="header-anchor" href="#_2-vs-code-调试"><span></span></a><a href="https://doc.iocoder.cn/vue3/debugger/#_2-vs-code-%E8%B0%83%E8%AF%95" target="_blank" rel="noopener noreferrer">#</a>2. VS Code 调试</h2>
<p>① 使用 npm 命令将前端项目运行起来，例如说 <code>npm run dev</code>。耐心等待项目启动成功~</p>
<p>② 点击 VS Code 左侧的运行和调试，然后启动 Launch，之后会跳出一个独立的 Edge 窗口。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/IDE调试/vscode-01.png" alt="独立的 Edge 窗口" tabindex="0" loading="lazy"><figcaption>独立的 Edge 窗口</figcaption></figure>
<p>③ 打个断点，例如说 <code>/src/api/login/index.ts</code> 的登录接口。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/IDE调试/vscode-02.png" alt="打个断点" tabindex="0" loading="lazy"><figcaption>打个断点</figcaption></figure>
<p>④ 使用管理后台进行登录，可以看到成功进入断点。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/IDE调试/vscode-03.png" alt="进入断点" tabindex="0" loading="lazy"><figcaption>进入断点</figcaption></figure>
<p>上次更新: 2023/04/13, 23:26:46</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/IDE%E8%B0%83%E8%AF%95/idea-01.png" type="image/png"/>
    </item>
    <item>
      <title>菜单路由</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/2.%E8%8F%9C%E5%8D%95%E8%B7%AF%E7%94%B1.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/2.%E8%8F%9C%E5%8D%95%E8%B7%AF%E7%94%B1.html</guid>
      <source url="https://springg.us.kg/rss.xml">菜单路由</source>
      <description>菜单路由 前端项目基于 vue-element-plus-admin 实现，它的 路由和侧边栏 (opens new window)是组织起一个后台应用的关键骨架。 侧边栏和路由是绑定在一起的，所以你只有在 @/router/index.js (opens new window)下面配置对应的路由，侧边栏就能动态的生成了，大大减轻了手动重复编辑侧边栏的...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>前端项目基于 vue-element-plus-admin 实现，它的 路由和侧边栏 (opens new window)是组织起一个后台应用的关键骨架。</p>
<p>侧边栏和路由是绑定在一起的，所以你只有在 @/router/index.js (opens new window)下面配置对应的路由，侧边栏就能动态的生成了，大大减轻了手动重复编辑侧边栏的工作量。</p>
<p>当然，这样就需要在配置路由的时候，遵循一些约定的规则。</p>
<h2>路由配置</h2>
<p>首先，我们了解一下本项目配置路由时，提供了哪些配置项：</p>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span>* redirect: noredirect        当设置 noredirect 的时候该路由在面包屑导航中不可被点击</span></span>
<span class="line"><span>* name:'router-name'          设定路由的名字，一定要填写不然使用&lt;keep-alive&gt;时会出现各种问题</span></span>
<span class="line"><span>* meta : {</span></span>
<span class="line"><span>    hidden: true              当设置 true 的时候该路由不会再侧边栏出现 如404，login等页面(默认 false)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    alwaysShow: true          当你一个路由下面的 children 声明的路由大于1个时，自动会变成嵌套的模式，</span></span>
<span class="line"><span>                              只有一个时，会将那个子路由当做根路由显示在侧边栏，</span></span>
<span class="line"><span>                              若你想不管路由下面的 children 声明的个数都显示你的根路由，</span></span>
<span class="line"><span>                              你可以设置 alwaysShow: true，这样它就会忽略之前定义的规则，</span></span>
<span class="line"><span>                              一直显示根路由(默认 false)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    title: 'title'            设置该路由在侧边栏和面包屑中展示的名字</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    icon: 'svg-name'          设置该路由的图标</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    noCache: true             如果设置为true，则不会被 &lt;keep-alive&gt; 缓存(默认 false)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    breadcrumb: false         如果设置为false，则不会在breadcrumb面包屑中显示(默认 true)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    affix: true               如果设置为true，则会一直固定在tag项中(默认 false)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    noTagsView: true          如果设置为true，则不会出现在tag中(默认 false)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    activeMenu: '/dashboard'  显示高亮的路由路径</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    followAuth: '/dashboard'  跟随哪个路由进行权限过滤</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    canTo: true               设置为true即使hidden为true，也依然可以进行路由跳转(默认 false)</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>**/</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>1.1 普通示例</h3>
<blockquote>
<p>注意事项：</p>
<ul>
<li>整个项目所有路由 name 不能重复</li>
<li>所有的多级路由最终都会转成二级路由，所以不能内嵌子路由</li>
<li>除了 <strong>layout</strong> 对应的 <strong>path</strong> 前面需要加 <strong>/</strong>，其余子路由都不要以 <strong>/</strong> 开头</li>
</ul>
</blockquote>
<div class="language- line-numbers-mode" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  path: '/level',</span></span>
<span class="line"><span>  component: Layout,</span></span>
<span class="line"><span>  redirect: '/level/menu1/menu1-1/menu1-1-1',</span></span>
<span class="line"><span>  name: 'Level',</span></span>
<span class="line"><span>  meta: {</span></span>
<span class="line"><span>    title: t('router.level'),</span></span>
<span class="line"><span>    icon: 'carbon:skill-level-advanced'</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  children: [</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      path: 'menu1',</span></span>
<span class="line"><span>      name: 'Menu1',</span></span>
<span class="line"><span>      component: getParentLayout(),</span></span>
<span class="line"><span>      redirect: '/level/menu1/menu1-1/menu1-1-1',</span></span>
<span class="line"><span>      meta: {</span></span>
<span class="line"><span>        title: t('router.menu1')</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      children: [</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          path: 'menu1-1',</span></span>
<span class="line"><span>          name: 'Menu11',</span></span>
<span class="line"><span>          component: getParentLayout(),</span></span>
<span class="line"><span>          redirect: '/level/menu1/menu1-1/menu1-1-1',</span></span>
<span class="line"><span>          meta: {</span></span>
<span class="line"><span>            title: t('router.menu11'),</span></span>
<span class="line"><span>            alwaysShow: true</span></span>
<span class="line"><span>          },</span></span>
<span class="line"><span>          children: [</span></span>
<span class="line"><span>            {</span></span>
<span class="line"><span>              path: 'menu1-1-1',</span></span>
<span class="line"><span>              name: 'Menu111',</span></span>
<span class="line"><span>              component: () =&gt; import('@/views/Level/Menu111.vue'),</span></span>
<span class="line"><span>              meta: {</span></span>
<span class="line"><span>                title: t('router.menu111')</span></span>
<span class="line"><span>              }</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>          ]</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          path: 'menu1-2',</span></span>
<span class="line"><span>          name: 'Menu12',</span></span>
<span class="line"><span>          component: () =&gt; import('@/views/Level/Menu12.vue'),</span></span>
<span class="line"><span>          meta: {</span></span>
<span class="line"><span>            title: t('router.menu12')</span></span>
<span class="line"><span>          }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      ]</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      path: 'menu2',</span></span>
<span class="line"><span>      name: 'Menu2Demo',</span></span>
<span class="line"><span>      component: () =&gt; import('@/views/Level/Menu2.vue'),</span></span>
<span class="line"><span>      meta: {</span></span>
<span class="line"><span>        title: t('router.menu2')</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  ]</span></span>
<span class="line"><span>}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3>1.2 外链示例</h3>
<p>只需要将 path 设置为需要跳转的 HTTP 地址即可。</p>
<div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>  path: '/external-link',</span></span>
<span class="line"><span>  component: Layout,</span></span>
<span class="line"><span>  meta: {</span></span>
<span class="line"><span>    name: 'ExternalLink'</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  children: [</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      path: 'https://www.iocoder.cn',</span></span>
<span class="line"><span>      meta: { name: 'Link', title: '芋道源码' }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  ]</span></span>
<span class="line"><span>}</span></span></code></pre>
</div><p><a href="https://doc.iocoder.cn/vue3/route/" target="_blank" rel="noopener noreferrer">路由模块在线文档</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>Icon 图标</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/3.Icon%20%E5%9B%BE%E6%A0%87.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/3.Icon%20%E5%9B%BE%E6%A0%87.html</guid>
      <source url="https://springg.us.kg/rss.xml">Icon 图标</source>
      <description>Icon 图标 Element Plus 内置多种 Icon 图标，可参考 Element Plus —— Icon 图标 (opens new window)的文档。 在项目的 /src/assets/svgs (opens new window)目录下，自定义了 Icon 图标，默认注册到全局中，可以在项目中任意地方使用。如下图所示： 目录 目录 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>Element Plus 内置多种 Icon 图标，可参考 <a href="https://element-plus.gitee.io/zh-CN/component/icon.html" target="_blank" rel="noopener noreferrer">Element Plus —— Icon 图标 (opens new window)</a>的文档。</p>
<p>在项目的 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/assets/svgs/" target="_blank" rel="noopener noreferrer"><code>/src/assets/svgs</code> (opens new window)</a>目录下，自定义了 Icon 图标，默认注册到全局中，可以在项目中任意地方使用。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/Icon图标/01.png" alt=" 目录" tabindex="0" loading="lazy"><figcaption> 目录</figcaption></figure>
<h2><a class="header-anchor" href="#_1-icon-图标组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/icon/#_1-icon-%E5%9B%BE%E6%A0%87%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1. Icon 图标组件</h2>
<p>友情提示：</p>
<p>该小节，基于 <a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/icon.html" target="_blank" rel="noopener noreferrer">《vue element plus admin —— Icon 图标组件 》 (opens new window)</a>的内容修改。</p>
<p>Icon 组件位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/tree/master/src/components/Icon" target="_blank" rel="noopener noreferrer">src/components/Icon (opens new window)</a>内，用于项目内组件的展示，基本支持所有图标库（支持按需加载，只打包所用到的图标），支持使用本地 svg 和 <a href="https://iconify.design/" target="_blank" rel="noopener noreferrer">Iconify (opens new window)</a>图标。</p>
<p>提示</p>
<p>在 <a href="https://iconify.design/" target="_blank" rel="noopener noreferrer">Iconify (opens new window)</a>上，你可以查询到你想要的所有图标并使用，不管是不是 <code>element-plus</code> 的图标库。</p>
<h3><a class="header-anchor" href="#_1-1-基本用法"><span></span></a><a href="https://doc.iocoder.cn/vue3/icon/#_1-1-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95" target="_blank" rel="noopener noreferrer">#</a>1.1 基本用法</h3>
<p>如果以 <code>svg-icon:</code> 开头，则会在本地中找到该 <code>svg</code> 图标，否则，会加载 <code>Iconify</code> 图标。代码如下：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  &lt;!-- 加载本地 svg --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">Icon</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"svg-icon:peoples"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  &lt;!-- 加载 Iconify --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">Icon</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"ep:aim"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_1-2-useicon"><span></span></a><a href="https://doc.iocoder.cn/vue3/icon/#_1-2-useicon" target="_blank" rel="noopener noreferrer">#</a>1.2 useIcon</h3>
<p>如果需要在其他组件中如 ElButton 传入 <code>icon</code> 属性，可以使用 <code>useIcon</code>。代码如下：</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#D19A66;font-style:italic;--shiki-dark:#D19A66;--shiki-dark-font-style:italic"> setup</span><span style="color:#D19A66;font-style:italic;--shiki-dark:#D19A66;--shiki-dark-font-style:italic"> lang</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">"ts"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">import </span><span style="color:#C678DD;--shiki-dark:#C678DD">{</span><span style="color:#E06C75;--shiki-dark:#E06C75"> useIcon</span><span style="color:#C678DD;--shiki-dark:#C678DD"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> from '@/hooks/web/useIcon'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">import </span><span style="color:#C678DD;--shiki-dark:#C678DD">{</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ElButton</span><span style="color:#C678DD;--shiki-dark:#C678DD"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> from 'element-plus'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">const icon = useIcon(</span><span style="color:#C678DD;--shiki-dark:#C678DD">{</span><span style="color:#E06C75;--shiki-dark:#E06C75"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'svg-icon:save'</span><span style="color:#C678DD;--shiki-dark:#C678DD"> }</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ElButton</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> :icon="icon"&gt;</span><span style="color:#D19A66;font-style:italic;--shiki-dark:#D19A66;--shiki-dark-font-style:italic"> button</span><span style="color:#FFFFFF;--shiki-dark:#FFFFFF"> &lt;/ElButton&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">&lt;/template&gt;</span></span></code></pre>
</div><p><code>useIcon</code> 的 <strong>props</strong> 属性如下：</p>
<p>| 属性  | 说明     | 类型     | 可选值 | 默认值 |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/Icon%E5%9B%BE%E6%A0%87/01.png" type="image/png"/>
    </item>
    <item>
      <title>字典数据</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/4.%E5%AD%97%E5%85%B8%E6%95%B0%E6%8D%AE.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/4.%E5%AD%97%E5%85%B8%E6%95%B0%E6%8D%AE.html</guid>
      <source url="https://springg.us.kg/rss.xml">字典数据</source>
      <description>字典数据 本小节，讲解前端如何使用 [系统管理 -&amp;gt; 字典管理] 菜单的字典数据，例如说字典数据的下拉框、单选 / 多选按钮、高亮展示等等。 字典管理字典管理 #1. 全局缓存 用户登录成功后，前端会从后端获取到全量的字典数据，缓存在 store 中。如下图所示： 字典 store字典 store 这样，前端在使用到字典数据时，无需重复请求后端，提升用...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，讲解前端如何使用 [系统管理 -&gt; 字典管理] 菜单的字典数据，例如说字典数据的下拉框、单选 / 多选按钮、高亮展示等等。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/字典数据/01.png" alt="字典管理" tabindex="0" loading="lazy"><figcaption>字典管理</figcaption></figure>
<h2><a class="header-anchor" href="#_1-全局缓存"><span></span></a><a href="https://doc.iocoder.cn/vue3/dict/#_1-%E5%85%A8%E5%B1%80%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">#</a>1. 全局缓存</h2>
<p>用户登录成功后，前端会从后端获取到全量的字典数据，缓存在 store 中。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/字典数据/02.png" alt="字典 store" tabindex="0" loading="lazy"><figcaption>字典 store</figcaption></figure>
<p>这样，前端在使用到字典数据时，无需重复请求后端，提升用户体验。</p>
<p>不过，缓存暂时未提供刷新，所以在字典数据发生变化时，需要用户刷新浏览器，进行重新加载。</p>
<h2><a class="header-anchor" href="#_2-dict-type"><span></span></a><a href="https://doc.iocoder.cn/vue3/dict/#_2-dict-type" target="_blank" rel="noopener noreferrer">#</a>2. DICT_TYPE</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/utils/dict.ts#L73-L125" target="_blank" rel="noopener noreferrer"><code>dict.ts</code> (opens new window)</a>文件中，使用 <code>DICT_TYPE</code> 枚举了字典的 KEY。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/字典数据/03.png" alt=" 枚举" tabindex="0" loading="lazy"><figcaption> 枚举</figcaption></figure>
<p>后续如果有新的字典 KEY，需要你自己进行添加。</p>
<h2><a class="header-anchor" href="#_3-dicttag-字典标签"><span></span></a><a href="https://doc.iocoder.cn/vue3/dict/#_3-dicttag-%E5%AD%97%E5%85%B8%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener noreferrer">#</a>3. DictTag 字典标签</h2>
<p><a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/DictTag/index.ts" target="_blank" rel="noopener noreferrer">`` (opens new window)</a>组件，翻译字段对应的字典展示文本，并根据 <code>colorType</code>、<code>cssClass</code> 进行高亮。使用示例如下：</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!--</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    type: 字典 KEY</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    value: 字典值</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dict-tag</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"DICT_TYPE.SYSTEM_LOGIN_TYPE"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"row.logType"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/Vue3/字典数据/04.png" alt="DictTag" tabindex="0" loading="lazy"><figcaption>DictTag</figcaption></figure>
<p>【推荐】注意，一般情况下使用 CRUD schemas 方式，不需要直接使用 <code>&lt;dict-tag /&gt;</code>，而是通过 <code>columns</code> 的 <code>dictType</code> 和 <code>dictClass</code> 属性即可。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/字典数据/04-a.png" alt=" 的  和  属性" tabindex="0" loading="lazy"><figcaption> 的  和  属性</figcaption></figure>
<h2><a class="header-anchor" href="#_4-字典工具类"><span></span></a><a href="https://doc.iocoder.cn/vue3/dict/#_4-%E5%AD%97%E5%85%B8%E5%B7%A5%E5%85%B7%E7%B1%BB" target="_blank" rel="noopener noreferrer">#</a>4. 字典工具类</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/utils/dict.ts#L23-L71" target="_blank" rel="noopener noreferrer"><code>dict.ts</code> (opens new window)</a>文件中，提供了字典工具类，方法如下：</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获取 dictType 对应的数据字典数组【object】</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getDictOptions</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">dictType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">string</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {{ </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略代码 */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获取 dictType 对应的数据字典数组【int】</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getIntDictOptions</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">dictType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">string</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略代码 */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获取 dictType 对应的数据字典数组【string】</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getStrDictOptions</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">dictType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">string</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略代码 */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获取 dictType 对应的数据字典数组【boolean】</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getBoolDictOptions</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">dictType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">string</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略代码 */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获取 dictType 对应的数据字典数组【object】</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getDictObj</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">dictType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">string</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">any</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略代码 */</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> }</span></span></code></pre>
</div><p>结合 Element Plus 的表单组件，使用示例如下：</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  &lt;!-- radio 单选框 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-radio</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    v-for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict in getIntDictOptions(DICT_TYPE.COMMON_STATUS)"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    :label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"parseInt(dict.value)"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    {{dict.label}}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-radio</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  &lt;!-- select 下拉框 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-select</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"form.code"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> placeholder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"请选择渠道编码"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> clearable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-option</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">      v-for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict in getStrDictOptions(DICT_TYPE.SYSTEM_SMS_CHANNEL_CODE)"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">      :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">      :label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.label"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">      :value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#D19A66;--shiki-dark:#D19A66"> setup</span><span style="color:#D19A66;--shiki-dark:#D19A66"> lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"tsx"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">DICT_TYPE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">getIntDictOptions</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">getStrDictOptions</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> '@/utils/dict'</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上次更新: 2023/04/04, 22:45:16</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/%E5%AD%97%E5%85%B8%E6%95%B0%E6%8D%AE/01.png" type="image/png"/>
    </item>
    <item>
      <title>系统组件</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/5.%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/5.%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6.html</guid>
      <source url="https://springg.us.kg/rss.xml">系统组件</source>
      <description>系统组件 #1. 常用组件 #1.1 Editor 富文本组件 基于 wangEditor (opens new window)封装 Editor 组件：位于 src/components/Editor (opens new window)内 详细文档：vue-element-plus-admin-doc/components/editor.html(...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#_1-常用组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_1-%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1. 常用组件</h2>
<h3><a class="header-anchor" href="#_1-1-editor-富文本组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_1-1-editor-%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.1 Editor 富文本组件</h3>
<p>基于 <a href="https://www.wangeditor.com/" target="_blank" rel="noopener noreferrer">wangEditor (opens new window)</a>封装</p>
<ul>
<li>Editor 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Editor/index.ts" target="_blank" rel="noopener noreferrer">src/components/Editor (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/editor.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/editor.html(opens new window)</a></li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/notice/form.vue#L14" target="_blank" rel="noopener noreferrer">src/views/system/notice/form.vue (opens new window)</a>TODO</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/Editor.png" alt="Editor 富文本组件" tabindex="0" loading="lazy"><figcaption>Editor 富文本组件</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-dialog-弹窗组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_1-2-dialog-%E5%BC%B9%E7%AA%97%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.2 Dialog 弹窗组件</h3>
<p>对 Element Plus 的 Dialog 组件进行封装，支持最大化、最大高度等特性</p>
<ul>
<li>Dialog 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Dialog/index.ts" target="_blank" rel="noopener noreferrer">src/components/Dialog (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/dialog.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/dialog.html(opens new window)</a></li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/dept/DeptForm.vue#L2" target="_blank" rel="noopener noreferrer">src/views/system/dept/DeptForm.vue(opens new window)</a></li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/Dialog.png" alt="Dialog 弹窗组件" tabindex="0" loading="lazy"><figcaption>Dialog 弹窗组件</figcaption></figure>
<h3><a class="header-anchor" href="#_1-3-contentwrap-包裹组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_1-3-contentwrap-%E5%8C%85%E8%A3%B9%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.3 ContentWrap 包裹组件</h3>
<p>对 Element Plus 的 ElCard 组件进行封装，自带标题、边距</p>
<ul>
<li>ContentWrap 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/ContentWrap/index.ts" target="_blank" rel="noopener noreferrer">src/components/ContentWrap (opens new window)</a>内</li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/post/index.vue#L2" target="_blank" rel="noopener noreferrer">src/views/system/post/index.vue(opens new window)</a></li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/ContentWrap.png" alt="ContentWrap 包裹组件" tabindex="0" loading="lazy"><figcaption>ContentWrap 包裹组件</figcaption></figure>
<h3><a class="header-anchor" href="#_1-4-pagination-分页组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_1-4-pagination-%E5%88%86%E9%A1%B5%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.4 Pagination 分页组件</h3>
<p>对 Element Plus 的 <a href="https://element-plus.org/zh-CN/component/pagination.html" target="_blank" rel="noopener noreferrer">Pagination (opens new window)</a>组件进行封装</p>
<ul>
<li>Pagination 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Pagination/index.vue" target="_blank" rel="noopener noreferrer">src/components/Pagination (opens new window)</a>内</li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/post/index.vue#L101-L107" target="_blank" rel="noopener noreferrer">src/views/system/post/index.vue(opens new window)</a></li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/Pagination.png" alt="Pagination 分页组件" tabindex="0" loading="lazy"><figcaption>Pagination 分页组件</figcaption></figure>
<h3><a class="header-anchor" href="#_1-5-uploadfile-上传文件组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_1-5-uploadfile-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.5 UploadFile 上传文件组件</h3>
<p>对 Element Plus 的 <a href="https://element-plus.org/zh-CN/component/upload.html" target="_blank" rel="noopener noreferrer">Upload (opens new window)</a>组件进行封装，上传文件到文件服务</p>
<ul>
<li>UploadFile 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/UploadFile/src/UploadFile.vue" target="_blank" rel="noopener noreferrer">src/components/UploadFile/src/UploadFile.vue (opens new window)</a>内</li>
<li>实战案例：暂无</li>
</ul>
<h3><a class="header-anchor" href="#_1-6-uploadimg-上传图片组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_1-6-uploadimg-%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.6 UploadImg 上传图片组件</h3>
<p>对 Element Plus 的 <a href="https://element-plus.org/zh-CN/component/upload.html" target="_blank" rel="noopener noreferrer">Upload (opens new window)</a>组件进行封装，上传图片到文件服务</p>
<ul>
<li>UploadImg 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/UploadFile/src/UploadImg.vue" target="_blank" rel="noopener noreferrer">src/components/UploadFile/src/UploadImg.vue (opens new window)</a>内</li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/system/oauth2/client/ClientForm.vue#L20" target="_blank" rel="noopener noreferrer">src/views/system/oauth2/client/ClientForm.vue(opens new window)</a></li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/UploadImg.png" alt="UploadImg 上传图片组件" tabindex="0" loading="lazy"><figcaption>UploadImg 上传图片组件</figcaption></figure>
<h2><a class="header-anchor" href="#_2-不常用组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-%E4%B8%8D%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2. 不常用组件</h2>
<h3><a class="header-anchor" href="#_2-1-echart-图表组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-1-echart-%E5%9B%BE%E8%A1%A8%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.1 EChart 图表组件</h3>
<p>基于 <a href="https://echarts.apache.org/zh/index.html" target="_blank" rel="noopener noreferrer">Apache ECharts (opens new window)</a>封装，自适应窗口大小</p>
<ul>
<li>EChart 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Echart/index.ts" target="_blank" rel="noopener noreferrer">src/components/EChart (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/echart.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/echart.html(opens new window)</a></li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/mp/statistics/index.vue#L49" target="_blank" rel="noopener noreferrer">src/views/mp/statistics/index.vue(opens new window)</a></li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/EChart.png" alt="EChart 图表组件" tabindex="0" loading="lazy"><figcaption>EChart 图表组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-inputpassword-密码输入框"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-2-inputpassword-%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5%E6%A1%86" target="_blank" rel="noopener noreferrer">#</a>2.2 InputPassword 密码输入框</h3>
<p>对 Element Plus 的 Input 组件进行封装</p>
<ul>
<li>InputPassword 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/InputPassword/index.ts" target="_blank" rel="noopener noreferrer">src/components/InputPassword (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/input-password.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/input-password.html(opens new window)</a></li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/Profile/components/ResetPwd.vue" target="_blank" rel="noopener noreferrer">src/views/Profile/components/ResetPwd.vue(opens new window)</a></li>
</ul>
<h3><a class="header-anchor" href="#_2-3-contentdetailwrap-详情包裹组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-3-contentdetailwrap-%E8%AF%A6%E6%83%85%E5%8C%85%E8%A3%B9%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.3 ContentDetailWrap 详情包裹组件</h3>
<p>用于展示详情，自带返回按钮。</p>
<ul>
<li>ContentDetailWrap 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/ContentDetailWrap/index.ts" target="_blank" rel="noopener noreferrer">src/components/ContentDetailWrap (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/content-detail-wrap.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/content-detail-wrap.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<h3><a class="header-anchor" href="#_2-4-imageviewer-图片预览组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-4-imageviewer-%E5%9B%BE%E7%89%87%E9%A2%84%E8%A7%88%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.4 ImageViewer 图片预览组件</h3>
<p>将 Element Plus 的 <a href="https://element-plus.org/zh-CN/component/image.html#image-viewer-attributes" target="_blank" rel="noopener noreferrer">ImageViewer (opens new window)</a>组件函数化，通过函数方便创建组件</p>
<ul>
<li>ImageViewer 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/ImageViewer/index.ts" target="_blank" rel="noopener noreferrer">src/components/ImageViewer (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/image-viewer.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/image-viewer.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<h3><a class="header-anchor" href="#_2-5-qrcode-二维码组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-5-qrcode-%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.5 Qrcode 二维码组件</h3>
<p>基于 <a href="https://www.npmjs.com/package/qrcode" target="_blank" rel="noopener noreferrer">qrcode (opens new window)</a>封装</p>
<ul>
<li>Qrcode 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Qrcode/index.ts" target="_blank" rel="noopener noreferrer">src/components/Qrcode (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/qrcode.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/qrcode.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/Qrcode.png" alt="Qrcode 二维码组件" tabindex="0" loading="lazy"><figcaption>Qrcode 二维码组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-6-highlight-高亮组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-6-highlight-%E9%AB%98%E4%BA%AE%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.6 Highlight 高亮组件</h3>
<ul>
<li>Highlight 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Highlight/index.ts" target="_blank" rel="noopener noreferrer">src/components/Highlight (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/highlight.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/highlight.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/Highlight.png" alt="Highlight 高亮组件" tabindex="0" loading="lazy"><figcaption>Highlight 高亮组件</figcaption></figure>
<h4><a class="header-anchor" href="#_2-6-1-infotip-信息提示组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-6-1-infotip-%E4%BF%A1%E6%81%AF%E6%8F%90%E7%A4%BA%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.6.1 Infotip 信息提示组件</h4>
<p>基于 Highlight 组件封装</p>
<ul>
<li>Infotip 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Infotip/index.ts" target="_blank" rel="noopener noreferrer">src/components/Infotip (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/infotip.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/infotip.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/Infotip.png" alt="Infotip 信息提示组件" tabindex="0" loading="lazy"><figcaption>Infotip 信息提示组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-7-error-缺省组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-7-error-%E7%BC%BA%E7%9C%81%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.7 Error 缺省组件</h3>
<p>用于各种占位图组件，如 404、403、500 等错误页面。</p>
<ul>
<li>Error 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Error/index.ts" target="_blank" rel="noopener noreferrer">src/components/Error (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/error.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/error.html(opens new window)</a></li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/Error/403.vue" target="_blank" rel="noopener noreferrer">403.vue (opens new window)</a>、<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/Error/404.vue" target="_blank" rel="noopener noreferrer">404.vue (opens new window)</a>、<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/Error/500.vue" target="_blank" rel="noopener noreferrer">500.vue(opens new window)</a></li>
</ul>
<h3><a class="header-anchor" href="#_2-8-sticky-黏性组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-8-sticky-%E9%BB%8F%E6%80%A7%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.8 Sticky 黏性组件</h3>
<ul>
<li>Sticky 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/Sticky/index.ts" target="_blank" rel="noopener noreferrer">src/components/Sticky (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/sticky.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/sticky.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/Sticky.png" alt="Sticky 信息提示组件" tabindex="0" loading="lazy"><figcaption>Sticky 信息提示组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-9-countto-数字动画组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-9-countto-%E6%95%B0%E5%AD%97%E5%8A%A8%E7%94%BB%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.9 CountTo 数字动画组件</h3>
<ul>
<li>CountTo 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/CountTo/index.ts" target="_blank" rel="noopener noreferrer">src/components/CountTo (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/components/count-to.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/components/count-to.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<h3><a class="header-anchor" href="#_2-10-usewatermark-水印组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-10-usewatermark-%E6%B0%B4%E5%8D%B0%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.10 useWatermark 水印组件</h3>
<p>为元素设置水印</p>
<ul>
<li>useWatermark 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/hooks/web/useWatermark.ts" target="_blank" rel="noopener noreferrer">src/hooks/web/useWatermark.ts (opens new window)</a>内</li>
<li>详细文档：<a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/hooks/useWatermark.html" target="_blank" rel="noopener noreferrer">vue-element-plus-admin-doc/hooks/useWatermark.html(opens new window)</a></li>
<li>实战案例：暂无</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/useWatermark.png" alt="useWatermark 水印组件" tabindex="0" loading="lazy"><figcaption>useWatermark 水印组件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-11-form-create-动态表单生成器"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-11-form-create-%E5%8A%A8%E6%80%81%E8%A1%A8%E5%8D%95%E7%94%9F%E6%88%90%E5%99%A8" target="_blank" rel="noopener noreferrer">#</a>2.11 form-create 动态表单生成器</h3>
<p>详细文档：<a href="http://www.form-create.com/" target="_blank" rel="noopener noreferrer">http://www.form-create.com/(opens new window)</a></p>
<p>① 实战案例 - 表单设计：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/infra/build/index.vue" target="_blank" rel="noopener noreferrer">src/views/infra/build/index.vue(opens new window)</a></p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/form-create-01.png" alt="表单设计" tabindex="0" loading="lazy"><figcaption>表单设计</figcaption></figure>
<p>② 实战案例 - 表单展示：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/bpm/processInstance/detail/index.vue#L62-L67" target="_blank" rel="noopener noreferrer">src/views/bpm/processInstance/detail/index.vue(opens new window)</a></p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/form-create-02.png" alt="表单展示" tabindex="0" loading="lazy"><figcaption>表单展示</figcaption></figure>
<h3><a class="header-anchor" href="#_2-12-bpmn-js-工作流组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-12-bpmn-js-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.12 bpmn-js 工作流组件</h3>
<p>核心是基于 <a href="https://bpmn.io/toolkit/bpmn-js/" target="_blank" rel="noopener noreferrer">bpmn-js (opens new window)</a>封装</p>
<h4><a class="header-anchor" href="#_2-12-1-myprocessdesigner-流程设计组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-12-1-myprocessdesigner-%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.12.1 MyProcessDesigner 流程设计组件</h4>
<ul>
<li>MyProcessDesigner 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/bpmnProcessDesigner/package/designer/index.ts" target="_blank" rel="noopener noreferrer">src/components/bpmnProcessDesigner/package/designer/index.ts (opens new window)</a>内，基于 <a href="https://gitee.com/MiyueSC/bpmn-process-designer" target="_blank" rel="noopener noreferrer">https://gitee.com/MiyueSC/bpmn-process-designer (opens new window)</a>项目适配</li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/bpm/model/editor/index.vue#L3-L15" target="_blank" rel="noopener noreferrer">src/views/bpm/model/editor/index.vue(opens new window)</a></li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/MyProcessDesigner.png" alt="MyProcessDesigner 流程设计组件" tabindex="0" loading="lazy"><figcaption>MyProcessDesigner 流程设计组件</figcaption></figure>
<h4><a class="header-anchor" href="#_2-12-2-myprocessviewer-流程展示组件"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_2-12-2-myprocessviewer-%E6%B5%81%E7%A8%8B%E5%B1%95%E7%A4%BA%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>2.12.2 MyProcessViewer 流程展示组件</h4>
<ul>
<li>MyProcessViewer 组件：位于 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/bpmnProcessDesigner/package/designer/index2.ts" target="_blank" rel="noopener noreferrer">src/components/bpmnProcessDesigner/package/designer/index2.ts (opens new window)</a>内</li>
<li>实战案例：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/bpm/processInstance/detail/ProcessInstanceBpmnViewer.vue#L6-L14" target="_blank" rel="noopener noreferrer">src/views/bpm/processInstance/detail/ProcessInstanceBpmnViewer.vue(opens new window)</a></li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/Vue3/系统组件/MyProcessViewer.png" alt="MyProcessViewer 流程展示组件" tabindex="0" loading="lazy"><figcaption>MyProcessViewer 流程展示组件</figcaption></figure>
<h2><a class="header-anchor" href="#_3-组件注册"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_3-%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C" target="_blank" rel="noopener noreferrer">#</a>3. 组件注册</h2>
<p>友情提示：</p>
<p>该小节，基于 <a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/guide/component.html" target="_blank" rel="noopener noreferrer">《vue element plus admin —— 组件注册 》 (opens new window)</a>的内容修改。</p>
<p>组件注册可以分成两种类型：按需引入、全局注册。</p>
<h3><a class="header-anchor" href="#_3-1-按需引入"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_3-1-%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5" target="_blank" rel="noopener noreferrer">#</a>3.1 按需引入</h3>
<p>项目目前的组件注册机制是按需注册，是在需要用到的页面才引入。</p>
<div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#D19A66;--shiki-dark:#D19A66"> setup</span><span style="color:#D19A66;--shiki-dark:#D19A66"> lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"ts"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">ElBacktop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> 'element-plus'</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">useDesign</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> '@/hooks/web/useDesign'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">getPrefixCls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">variables</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> useDesign</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> prefixCls</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getPrefixCls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'backtop'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">ElBacktop</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    :class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"`${prefixCls}-backtop`"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">    :target</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"`.${variables.namespace}-layout-content-scrollbar .${variables.elNamespace}-scrollbar__wrap`"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：<strong>tsx 文件内不能使用全局注册组件</strong>，需要手动引入组件使用。</p>
<h3><a class="header-anchor" href="#_3-2-全局注册"><span></span></a><a href="https://doc.iocoder.cn/vue3/components/#_3-2-%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C" target="_blank" rel="noopener noreferrer">#</a>3.2 全局注册</h3>
<p>如果觉得按需引入太麻烦，可以进行全局注册，在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/components/index.ts" target="_blank" rel="noopener noreferrer">src/components/index.ts (opens new window)</a>，添加需要注册的组件。</p>
<p>以 <code>Icon</code> 组件进行了全局注册，举个例子：</p>
<div class="language-typescript" data-ext="typescript" data-title="typescript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#C678DD;--shiki-dark:#C678DD"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">App</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> 'vue'</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">Icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> './Icon'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setupGlobCom</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">app</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">App</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Element</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;): </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">void</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  app</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'Icon'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">Icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>如果 Element Plus 的组件需要全局注册，在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/plugins/elementPlus/index.ts" target="_blank" rel="noopener noreferrer">src/plugins/elementPlus/index.ts (opens new window)</a>添加需要注册的组件。</p>
<p>以 Element Plus 中只有 <code>ElLoading</code> 与 <code>ElScrollbar</code> 进行全局注册，举个例子：</p>
<div class="language-typescript line-numbers-mode" data-ext="typescript" data-title="typescript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#C678DD;--shiki-dark:#C678DD"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">App</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> 'vue'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 需要全局引入一些组件，如 ElScrollbar，不然一些下拉项样式有问题</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">ElLoading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">ElScrollbar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> 'element-plus'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> plugins</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#E06C75;--shiki-dark:#E06C75">ElLoading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> components</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#E06C75;--shiki-dark:#E06C75">ElScrollbar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> setupElementPlus</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">app</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">App</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  plugins</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">plugin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    app</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">use</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">plugin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  components</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">forEach</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    app</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">component</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上次更新: 2023/04/04, 22:45:16</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6/Editor.png" type="image/png"/>
    </item>
    <item>
      <title>通用方法</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/6.%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/6.%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95.html</guid>
      <source url="https://springg.us.kg/rss.xml">通用方法</source>
      <description>通用方法 本小节，分享前端项目的常用方法。 #1. 缓存配置 友情提示： 该小节，基于 《vue element plus admin —— 项目配置「缓存配置 」》 (opens new window)的内容修改。 #1.1 说明 在项目中，你可以看到很多地方都使用了 wsCache.set 或者 wsCache.get，这是基于 web-stora...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，分享前端项目的常用方法。</p>
<h2><a class="header-anchor" href="#_1-缓存配置"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_1-%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1. 缓存配置</h2>
<p>友情提示：</p>
<p>该小节，基于 <a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/guide/settings.html#%E7%BC%93%E5%AD%98%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">《vue element plus admin —— 项目配置「缓存配置 」》 (opens new window)</a>的内容修改。</p>
<h3><a class="header-anchor" href="#_1-1-说明"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_1-1-%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">#</a>1.1 说明</h3>
<p>在项目中，你可以看到很多地方都使用了 <code>wsCache.set</code> 或者 <code>wsCache.get</code>，这是基于 <a href="https://github.com/wuchangming/web-storage-cache" target="_blank" rel="noopener noreferrer">web-storage-cache (opens new window)</a>进行封装，采用 <code>hook</code> 的形式。</p>
<p>该插件对HTML5 <code>localStorage</code> 和 <code>sessionStorage</code> 进行了扩展，添加了超时时间，序列化方法。可以直接存储 <code>json</code> 对象，同时可以非常简单的进行超时时间的设置。</p>
<p>本项目默认是采用 <code>sessionStorage</code> 的存储方式，如果更改，可以直接在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/hooks/web/useCache.ts" target="_blank" rel="noopener noreferrer">useCache.ts (opens new window)</a>中把 <code>type: CacheType = 'sessionStorage'</code> 改为 <code>type: CacheType = 'localStorage'</code>，这样项目中的所有用到的地方，都会变成该方式进行数据存储。</p>
<p>如果只想单个更改，可以传入存储类型 <code>const { wsCache } = useCache('localStorage')</code>，既可只适用当前存储对象。</p>
<p>注意：</p>
<p>更改完默认存储方式后，需要清除浏览器缓存并重新登录，以免造成不可描述的问题。</p>
<h3><a class="header-anchor" href="#_1-2-示例"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_1-2-%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>1.2 示例</h3>
<figure><img src="https://doc.iocoder.cn/img/Vue3/通用方法/10.png" alt="wsCache 示例" tabindex="0" loading="lazy"><figcaption>wsCache 示例</figcaption></figure>
<h2><a class="header-anchor" href="#_2-message-对象"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_2-message-%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#</a>2. <code>message</code> 对象</h2>
<h3><a class="header-anchor" href="#_2-1-说明"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_2-1-%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">#</a>2.1 说明</h3>
<p><code>message</code> 对象，由 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/hooks/web/useMessage.ts" target="_blank" rel="noopener noreferrer">src/hooks/web/useMessage.ts (opens new window)</a>实现，基于 ElMessage、ElMessageBox、ElNotification 封装，用于做消息提示、通知提示、对话框提醒、二次确认等。</p>
<h3><a class="header-anchor" href="#_2-2-示例"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_2-2-%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2.2 示例</h3>
<figure><img src="https://doc.iocoder.cn/img/Vue3/通用方法/11.png" alt="message 示例" tabindex="0" loading="lazy"><figcaption>message 示例</figcaption></figure>
<h2><a class="header-anchor" href="#_3-download-对象"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_3-download-%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#</a>3. <code>download</code> 对象</h2>
<h3><a class="header-anchor" href="#_3-1-说明"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_3-1-%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">#</a>3.1 说明</h3>
<p><code>$download</code> 对象，由 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/utils/download.ts" target="_blank" rel="noopener noreferrer"><code>util/download.ts</code> (opens new window)</a>实现，用于 Excel、Word、Zip、HTML 等类型的文件下载。</p>
<h3><a class="header-anchor" href="#_3-2-示例"><span></span></a><a href="https://doc.iocoder.cn/vue3/util/#_3-2-%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>3.2 示例</h3>
<figure><img src="https://doc.iocoder.cn/img/Vue3/通用方法/12.png" alt="download 示例" tabindex="0" loading="lazy"><figcaption>download 示例</figcaption></figure>
<p>上次更新: 2023/04/09, 21:23:40</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95/10.png" type="image/png"/>
    </item>
    <item>
      <title>配置读取</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/7.%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/7.%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96.html</guid>
      <source url="https://springg.us.kg/rss.xml">配置读取</source>
      <description>配置读取 在 [基础设施 -&amp;gt; 配置管理] 菜单，可以动态修改配置，无需重启服务器即可生效。 配置管理配置管理 提示 对应 《后端手册 —— 配置中心》 文档。 #1. 读取配置 前端调用 /@api/infra/config/index.ts (opens new window)的 #getConfigKey(configKey) 方法，获取指定 k...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在 [基础设施 -&gt; 配置管理] 菜单，可以动态修改配置，无需重启服务器即可生效。</p>
<figure><img src="https://doc.iocoder.cn/img/Vue3/配置读取/01.png" alt="配置管理" tabindex="0" loading="lazy"><figcaption>配置管理</figcaption></figure>
<p>提示</p>
<p>对应 <a href="https://doc.iocoder.cn/config-center/" target="_blank" rel="noopener noreferrer">《后端手册 —— 配置中心》</a> 文档。</p>
<h2><a class="header-anchor" href="#_1-读取配置"><span></span></a><a href="https://doc.iocoder.cn/vue3/config-center/#_1-%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1. 读取配置</h2>
<p>前端调用 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/api/infra/config/index.ts#L25-L28" target="_blank" rel="noopener noreferrer"><code>/@api/infra/config/index.ts</code> (opens new window)</a>的 <code>#getConfigKey(configKey)</code> 方法，获取指定 key 对应的配置的值。代码如下：</p>
<div class="language-typescript" data-ext="typescript" data-title="typescript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 根据参数键名查询参数值</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getConfigKey</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">configKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">string</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({ </span><span style="color:#E06C75;--shiki-dark:#E06C75">url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'/infra/config/get-value-by-key?key='</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E06C75;--shiki-dark:#E06C75"> configKey</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/vue3/config-center/#_2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2. 实战案例</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/views/infra/server/index.vue" target="_blank" rel="noopener noreferrer"><code>src/views/infra/server/index.vue</code> (opens new window)</a>页面中，获取 key 为 <code>"url.skywalking"</code> 的配置的值。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/配置中心/07-vue3.png" alt="前端案例" tabindex="0" loading="lazy"><figcaption>前端案例</figcaption></figure>
<p>上次更新: 2023/04/08, 00:13:01</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96/01.png" type="image/png"/>
    </item>
    <item>
      <title>CRUD 组件</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/8.CRUD%20%E7%BB%84%E4%BB%B6.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/8.CRUD%20%E7%BB%84%E4%BB%B6.html</guid>
      <source url="https://springg.us.kg/rss.xml">CRUD 组件</source>
      <description>CRUD 组件 管理后台的功能，一般就是 CRUD 增删改查，可以拆分 3 个部分：“列表”、“新增/修改”、“详情”，如下图所示： #1. 基础组件 涉及到 4 个前端基础组件，如下所示： #2. CRUD 组件 由于以上 4 个组件都需要 Schema 或者 columns 的字段，如果每个组件都写一遍的话，会造成大量重复代码，所以提供 useCr...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>管理后台的功能，一般就是 CRUD 增删改查，可以拆分 3 个部分：“列表”、“新增/修改”、“详情”，如下图所示：</p>
<p>| 部分        | 组件           | 示例                                                         |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Vue3/CRUD%E7%BB%84%E4%BB%B6/CRUD-%E5%88%97%E8%A1%A8.png" type="image/png"/>
    </item>
    <item>
      <title>国际化</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/9.%E5%9B%BD%E9%99%85%E5%8C%96.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/12.%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C%20Vue%203/9.%E5%9B%BD%E9%99%85%E5%8C%96.html</guid>
      <source url="https://springg.us.kg/rss.xml">国际化</source>
      <description>国际化 友情提示： 该章节，基于 《vue element plus admin —— 国际化》 (opens new window)的内容修改。 如果你使用的 vscode 开发工具，则推荐安装 I18n-ally (opens new window)这个插件 #1. I18n-ally 插件 安装了该插件后，你的代码内可以实时看到对应的语言内容 i...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>友情提示：</p>
<p>该章节，基于 <a href="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/dep/i18n.html" target="_blank" rel="noopener noreferrer">《vue element plus admin —— 国际化》 (opens new window)</a>的内容修改。</p>
<p>如果你使用的 vscode 开发工具，则推荐安装 <a href="https://marketplace.visualstudio.com/items?itemName=Lokalise.i18n-ally" target="_blank" rel="noopener noreferrer">I18n-ally (opens new window)</a>这个插件</p>
<h2><a class="header-anchor" href="#_1-i18n-ally-插件"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_1-i18n-ally-%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1. I18n-ally 插件</h2>
<p>安装了该插件后，你的代码内可以实时看到对应的语言内容</p>
<figure><img src="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/images/i18n.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2><a class="header-anchor" href="#_2-配置默认语言"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_2-%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E8%AF%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">#</a>2. 配置默认语言</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/store/modules/locale.ts" target="_blank" rel="noopener noreferrer">src/store/modules/locale.ts (opens new window)</a>内配置 <code>currentLocale</code> 为其他语言。</p>
<details class="custom-block details" style="margin: 1em 0px; padding: 1.6em; display: block; position: relative; border-radius: 2px; background-color: var(--customBlockBg);"><summary style="margin: 0px; padding: 0px; outline: none; cursor: pointer;">查看代码</summary><div class="language-JS extra-class" style="margin: 0px; padding: 0px; position: relative; background-color: var(--codeBg); border-radius: 6px;"><pre class="language-js codecopy-enabled" style="margin: 0.85rem 0px; padding: 1.25rem 1.5rem; position: relative !important; user-select: text; line-height: 1.4; background: transparent; border-radius: 6px; overflow: auto; z-index: 1; color: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 1px; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; font-size: 1em; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none;"><code style="margin: 0px; padding: 0px; font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; color: var(--codeColor); font-size: 0.9em; background-color: transparent; border-radius: 0px;"><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token class-name" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token parameter" style="margin: 0px; padding: 0px;"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token string" style="margin: 0px; padding: 0px; color: rgb(102, 153, 0);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token parameter" style="margin: 0px; padding: 0px;"><span class="token literal-property property" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token comment" style="margin: 0px; padding: 0px; color: rgb(112, 128, 144);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token constant" style="margin: 0px; padding: 0px; color: rgb(153, 0, 85);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function-variable function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token operator" style="margin: 0px; padding: 0px; color: rgb(154, 110, 58); background: rgba(255, 255, 255, 0.5);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token keyword" style="margin: 0px; padding: 0px; color: rgb(0, 119, 170);"></span><span class="token function" style="margin: 0px; padding: 0px; color: rgb(221, 74, 104);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span><span class="token punctuation" style="margin: 0px; padding: 0px; color: rgb(153, 153, 153);"></span></code><i class="code-copy" title="Copy to clipboard" style="margin: 0px; padding: 0px; color: rgb(170, 170, 170); fill: rgb(170, 170, 170); font-size: 16px; display: inline-block; cursor: pointer; position: absolute; z-index: 1000; top: 7px; right: 35px; opacity: 0;"><svg style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg></i></pre></div></details>
<h2><a class="header-anchor" href="#_3-语言文件"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_3-%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>3. 语言文件</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/locales/" target="_blank" rel="noopener noreferrer">src/locales (opens new window)</a>可以配置具体的语言。</p>
<p>目前项目中的语言都是没有拆分的，全部放一起，后续会考虑拆分出来，比较好维护。</p>
<h2><a class="header-anchor" href="#_4-语言导入逻辑说明"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_4-%E8%AF%AD%E8%A8%80%E5%AF%BC%E5%85%A5%E9%80%BB%E8%BE%91%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">#</a>4. 语言导入逻辑说明</h2>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/plugins/vueI18n/index.ts#L13" target="_blank" rel="noopener noreferrer">src/plugins/vueI18n/index.ts (opens new window)</a>内可以看到</p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> defaultLocal</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">`../../locales/</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">lang</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">.ts`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><p>这会导入 <code>src/locales</code> 文件语言包。</p>
<h2><a class="header-anchor" href="#_5-使用"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_5-%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>5. 使用</h2>
<p>引入项目自带的 <code>useI18n</code></p>
<p><strong>注意不要引入 vue-i18n 的 useI18n</strong></p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">useI18n</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> '/@/hooks/web/useI18n'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">t</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> useI18n</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> title</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> t</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'common.menu'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_6-切换语言"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_6-%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">#</a>6. 切换语言</h2>
<p>切换语言需要使用 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/hooks/web/useLocale.ts#L19-L35" target="_blank" rel="noopener noreferrer">src/hooks/web/useLocale.ts(opens new window)</a></p>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">useLocale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> '@/hooks/web/useLocale'</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">changeLocale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> useLocale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">changeLocale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'en'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_7-新增新语言"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_7-%E6%96%B0%E5%A2%9E%E6%96%B0%E8%AF%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">#</a>7. 新增新语言</h2>
<h3><a class="header-anchor" href="#_7-1-语言文件"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_7-1-%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>7.1 语言文件</h3>
<p>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/locales/" target="_blank" rel="noopener noreferrer">src/locales (opens new window)</a>增加对应语言的文件即可</p>
<h3><a class="header-anchor" href="#_7-2-新增语言"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_7-2-%E6%96%B0%E5%A2%9E%E8%AF%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">#</a>7.2 新增语言</h3>
<p>目前项目自带的语言只有 <code>zh_CN</code> 和 <code>en</code> 两种</p>
<p>如果需要新增，按以下操作即可</p>
<ol>
<li>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/locales/" target="_blank" rel="noopener noreferrer">src/locales (opens new window)</a>下语言文件</li>
<li>在 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/types/global.d.ts#L15" target="_blank" rel="noopener noreferrer">types/global.d.ts (opens new window)</a>给 <code>LocaleType</code> 添加对应的类型</li>
<li>在 <a href="hhttps://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/store/modules/locale.ts#L26-L38" target="_blank" rel="noopener noreferrer">src/store/modules/locale.ts</a> <code>localeMap</code> 中添加对应语言</li>
</ol>
<h2><a class="header-anchor" href="#_8-远程读取语言数据"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_8-%E8%BF%9C%E7%A8%8B%E8%AF%BB%E5%8F%96%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE" target="_blank" rel="noopener noreferrer">#</a>8. 远程读取语言数据</h2>
<p>目前项目会在 <code>src/main.ts</code> 内等待 <code>setupI18n</code> 这个函数执行完之后才会渲染界面，所以只需在 setupI18n 内的 <code>createI18nOptions</code> 发送 ajax 请求，将对应的数据设置到 i18n 实例上即可。</p>
<div class="language-js line-numbers-mode" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> createI18nOptions</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> async</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (): </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Promise</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">I18nOptions</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> localeStore</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> useLocaleStoreWithOut</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> locale</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> localeStore</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">getCurrentLocale</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> localeMap</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> localeStore</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">getLocaleMap</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // 这里改为远程请求即可。</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> defaultLocal</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">`../../locales/</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">lang</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">.ts`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> defaultLocal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">default</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ??</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  setHtmlPageLang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">  localeStore</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setCurrentLocale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">lang</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // elLocale: elLocal</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    legacy</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    fallbackLocale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    messages</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      [</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">locale</span><span style="color:#E06C75;--shiki-dark:#E06C75">.lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]: </span><span style="color:#E06C75;--shiki-dark:#E06C75">message</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    availableLocales</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">localeMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">v</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> v</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">lang</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">),</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    sync</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    silentTranslationWarn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    missingWarn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    silentFallbackWarn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3><a class="header-anchor" href="#_8-1-uselocale"><span></span></a><a href="https://doc.iocoder.cn/vue3/i18n/#_8-1-uselocale" target="_blank" rel="noopener noreferrer">#</a>8.1 useLocale</h3>
<p>代码: <a href="https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/src/hooks/web/useLocale.ts#L19-L35" target="_blank" rel="noopener noreferrer">src/hooks/web/useLocale.ts(opens new window)</a></p>
<p>当手动切换语言的时候会触发 <code>useLocale</code> 函数，useLocale 也是异步函数，只需等待接口返回响应的数据后，再进行设置即可</p>
<div class="language-js line-numbers-mode" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> useLocale</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> () </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // Switching the language will change the locale of useI18n</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // And submit to configuration modification</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  const</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> changeLocale</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> async</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">LocaleType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">=&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> globalI18n</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> i18n</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">global</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 改为远程获取</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> langModule</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">`../../locales/</span><span style="color:#C678DD;--shiki-dark:#C678DD">${</span><span style="color:#E06C75;--shiki-dark:#E06C75">locale</span><span style="color:#C678DD;--shiki-dark:#C678DD">}</span><span style="color:#98C379;--shiki-dark:#98C379">.ts`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    globalI18n</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setLocaleMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">langModule</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    setI18nLanguage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">locale</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    changeLocale</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上次更新: 2023/04/05, 22:46:09</p>
]]></content:encoded>
      <enclosure url="https://kailong110120130.gitee.io/vue-element-plus-admin-doc/images/i18n.png" type="image/png"/>
    </item>
    <item>
      <title>新建模块</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/1.%E6%96%B0%E5%BB%BA%E6%A8%A1%E5%9D%97.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/1.%E6%96%B0%E5%BB%BA%E6%A8%A1%E5%9D%97.html</guid>
      <source url="https://springg.us.kg/rss.xml">新建模块</source>
      <description>新建模块 本章节，将介绍如何新建名字为 yudao-module-demo 的示例模块，并添加 RESTful API 接口。 虽然内容看起来比较长，是因为艿艿写的比较详细，大量截图，保姆级教程！其实只有五个步骤，保持耐心，跟着艿艿一点点来。🙂 完成之后，你会对整个 项目结构 有更充分的了解。 #👍 相关视频教程 从零开始 06：如何 5 分钟，创...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，将介绍如何新建名字为 <code>yudao-module-demo</code> 的示例模块，并添加 RESTful API 接口。</p>
<p>虽然内容看起来比较长，是因为艿艿写的比较详细，大量截图，保姆级教程！其实只有五个步骤，保持耐心，跟着艿艿一点点来。🙂 完成之后，你会对整个 <a href="https://doc.iocoder.cn/project-intro/" target="_blank" rel="noopener noreferrer">项目结构</a> 有更充分的了解。</p>
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/module-new/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07EUrZrNV" target="_blank" rel="noopener noreferrer">从零开始 06：如何 5 分钟，创建一个新模块？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_1-新建-demo-模块"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_1-%E6%96%B0%E5%BB%BA-demo-%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener noreferrer">#</a>1. 新建 demo 模块</h2>
<p>① 选择 File -&gt; New -&gt; Module 菜单，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/40.png" alt="打开 New Module" tabindex="0" loading="lazy"><figcaption>打开 New Module</figcaption></figure>
<p>② 选择 Maven 类型，并点击 Next 按钮，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/41.png" alt="选择 Maven 类型" tabindex="0" loading="lazy"><figcaption>选择 Maven 类型</figcaption></figure>
<p>③ 选择父模块为 <code>yudao</code>，输入名字为 <code>yudao-module-demo</code>，并点击 Finish 按钮，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/42.png" alt="填写 Module 信息" tabindex="0" loading="lazy"><figcaption>填写 Module 信息</figcaption></figure>
<p>④ 打开 <code>yudao-module-demo</code> 模块，删除 src 文件，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/43.png" alt="删除 src 文件" tabindex="0" loading="lazy"><figcaption>删除 src 文件</figcaption></figure>
<p>⑤ 打开 <code>yudao-module-demo</code> 模块的 <code>pom.xml</code> 文件，修改内容如下：</p>
<p>提示</p>
<p><code>&lt;!-- --&gt;</code> 部分，只是注释，不需要写到 XML 中。</p>
<div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"1.0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">project</span><span style="color:#D19A66;--shiki-dark:#D19A66"> xmlns</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://maven.apache.org/POM/4.0.0"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         xmlns:xsi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         xsi:schemaLocation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 1. 修改 version 为 ${revision} --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">modelVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;4.0.0&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">modelVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-demo&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">packaging</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;pom&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">packaging</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 2. 新增 packaging 为 pom --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${project.artifactId}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 3. 新增 name 为 ${project.artifactId} --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">description</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 4. 新增 description 为该模块的描述 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        demo 模块，主要实现 XXX、YYY、ZZZ 等功能。</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">description</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">project</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2><a class="header-anchor" href="#_2-新建-demo-api-子模块"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_2-%E6%96%B0%E5%BB%BA-demo-api-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener noreferrer">#</a>2. 新建 demo-api 子模块</h2>
<p>① 新建 <code>yudao-module-demo-api</code> 子模块，整个过程和“新建 demo 模块”是一致的，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/40.png" alt="打开 New Module" tabindex="0" loading="lazy"><figcaption>打开 New Module</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/新建模块/41.png" alt="选择 Maven 类型" tabindex="0" loading="lazy"><figcaption>选择 Maven 类型</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/新建模块/42-api.png" alt="填写 Module 信息" tabindex="0" loading="lazy"><figcaption>填写 Module 信息</figcaption></figure>
<p>② 打开 <code>yudao-module-demo-api</code> 模块的 <code>pom.xml</code> 文件，修改内容如下：</p>
<div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"1.0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">project</span><span style="color:#D19A66;--shiki-dark:#D19A66"> xmlns</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://maven.apache.org/POM/4.0.0"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         xmlns:xsi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         xsi:schemaLocation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-demo&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 1. 修改 version 为 ${revision} --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">modelVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;4.0.0&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">modelVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-demo-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">packaging</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;jar&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">packaging</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 2. 新增 packaging 为 jar --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${project.artifactId}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 3. 新增 name 为 ${project.artifactId} --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">description</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 4. 新增 description 为该模块的描述 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        demo 模块 API，暴露给其它模块调用</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">description</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependencies</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;  </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 5. 新增 yudao-common 依赖 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-common&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependencies</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">project</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ 【可选】新建 <code>cn.iocoder.yudao.module.demo</code> <strong>基础</strong>包，其中 <code>demo</code> 为模块名。之后，新建 <code>api</code> 和 <code>enums</code> 包。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/44.png" alt="新建基础包" tabindex="0" loading="lazy"><figcaption>新建基础包</figcaption></figure>
<h2><a class="header-anchor" href="#_3-新建-demo-biz-子模块"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_3-%E6%96%B0%E5%BB%BA-demo-biz-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener noreferrer">#</a>3. 新建 demo-biz 子模块</h2>
<p>① 新建 <code>yudao-module-demo-biz</code> 子模块，整个过程和“新建 demo 模块”也是一致的，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/40.png" alt="打开 New Module" tabindex="0" loading="lazy"><figcaption>打开 New Module</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/新建模块/41.png" alt="选择 Maven 类型" tabindex="0" loading="lazy"><figcaption>选择 Maven 类型</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/新建模块/42-biz.png" alt="填写 Module 信息" tabindex="0" loading="lazy"><figcaption>填写 Module 信息</figcaption></figure>
<p>② 打开 <code>yudao-module-demo-biz</code> 模块的 <code>pom.xml</code> 文件，修改成内容如下：</p>
<div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"1.0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">project</span><span style="color:#D19A66;--shiki-dark:#D19A66"> xmlns</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://maven.apache.org/POM/4.0.0"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         xmlns:xsi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">         xsi:schemaLocation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-demo&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 1. 修改 version 为 ${revision} --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">modelVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;4.0.0&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">modelVersion</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">packaging</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;jar&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">packaging</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 2. 新增 packaging 为 jar --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-demo-biz&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${project.artifactId}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 3. 新增 name 为 ${project.artifactId} --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">description</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 4. 新增 description 为该模块的描述 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        demo 模块，主要实现 XXX、YYY、ZZZ 等功能。</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">description</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependencies</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;  </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 5. 新增依赖，这里引入的都是比较常用的业务组件、技术组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-demo-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        &lt;!-- 业务组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-biz-operatelog&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        &lt;!-- Web 相关 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-web&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-security&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        &lt;!-- DB 相关 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-mybatis&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        &lt;!-- Test 测试相关 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-test&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependencies</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">project</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ 【必选】新建 <code>cn.iocoder.yudao.module.demo</code> <strong>基础</strong>包，其中 <code>demo</code> 为模块名。之后，新建 <code>controller.admin</code> 和 <code>controller.user</code> 等包。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/45.png" alt="新建基础包" tabindex="0" loading="lazy"><figcaption>新建基础包</figcaption></figure>
<p>④ 打开 Maven 菜单，点击刷新按钮，让引入的 Maven 依赖生效。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/46.png" alt="刷新 Maven 依赖" tabindex="0" loading="lazy"><figcaption>刷新 Maven 依赖</figcaption></figure>
<h2><a class="header-anchor" href="#_4-新建-restful-api-接口"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_4-%E6%96%B0%E5%BB%BA-restful-api-%E6%8E%A5%E5%8F%A3" target="_blank" rel="noopener noreferrer">#</a>4. 新建 RESTful API 接口</h2>
<p>① 在 <code>controller.admin</code> 包，新建一个 DemoTestController 类，并新建一个 <code>/demo/test/get</code> 接口。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> cn.iocoder.yudao.module.demo.controller.admin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.iocoder.yudao.framework.common.pojo.CommonResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> io.swagger.annotations.Api</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> io.swagger.annotations.ApiOperation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.validation.annotation.Validated</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.web.bind.annotation.GetMapping</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.web.bind.annotation.RequestMapping</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.web.bind.annotation.RestController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.iocoder.yudao.framework.common.pojo.CommonResult.success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Tag</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "管理后台 - Test"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RestController</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/demo/test"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Validated</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DemoTestController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/get"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "获取 test 信息"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"true"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong>，<code>/demo</code> 是该模块所有 RESTful API 的基础路径，<code>/test</code> 是 Test 功能的基础路径。</p>
<p>① 在 <code>controller.app</code> 包，新建一个 AppDemoTestController 类，并新建一个 <code>/demo/test/get</code> 接口。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">package</span><span style="color:#C678DD;--shiki-dark:#C678DD"> cn.iocoder.yudao.module.demo.controller.app</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.iocoder.yudao.framework.common.pojo.CommonResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> io.swagger.annotations.Api</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> io.swagger.annotations.ApiOperation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.validation.annotation.Validated</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.web.bind.annotation.GetMapping</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.web.bind.annotation.RequestMapping</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> org.springframework.web.bind.annotation.RestController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.iocoder.yudao.framework.common.pojo.CommonResult.success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Tag</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "用户 App - Test"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RestController</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/demo/test"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Validated</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AppDemoTestController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/get"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "获取 test 信息"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> get</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"true"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 Controller 的命名上，额外增加 <strong>App</strong> 作为前缀，一方面区分是管理后台还是用户 App 的 Controller，另一方面避免 Spring Bean 的名字冲突。</p>
<p>可能你会奇怪，这里我们定义了两个 <code>/demo/test/get</code> 接口，会不会存在重复导致冲突呢？答案，当然是并不会。原因是：</p>
<ul>
<li><code>controller.admin</code> 包下的接口，默认会增加 <code>/admin-api</code>，即最终的访问地址是 <code>/admin-api/demo/test/get</code></li>
<li><code>controller.app</code> 包下的接口，默认会增加 <code>/app-api</code>，即最终的访问地址是 <code>/app-api/demo/test/get</code></li>
</ul>
<h2><a class="header-anchor" href="#_5-引入-demo-模块"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_5-%E5%BC%95%E5%85%A5-demo-%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener noreferrer">#</a>5. 引入 demo 模块</h2>
<p>① 在 <code>yudao-server</code> 模块的 <code>pom.xml</code> 文件，引入 <code>yudao-module-demo-biz</code> 子模块，并点击 Maven 刷新。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/47.png" alt="刷新 Maven 依赖" tabindex="0" loading="lazy"><figcaption>刷新 Maven 依赖</figcaption></figure>
<p>② 运行 YudaoServerApplication 类，将后端项目进行启动。启动完成后，使用浏览器打开 <a href="http://127.0.0.1:48080/doc.html" target="_blank" rel="noopener noreferrer">http://127.0.0.1:48080/doc.html (opens new window)</a>地址，进入 Swagger 接口文档。</p>
<p>③ 打开“管理后台 - Test”接口，进行 <code>/admin-api/demo/test/get</code> 接口的调试，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/48.png" alt="测试  接口" tabindex="0" loading="lazy"><figcaption>测试  接口</figcaption></figure>
<p>④ 打开“用户 App - Test”接口，进行 <code>/app-api/demo/test/get</code> 接口的调试，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/49.png" alt="测试  接口" tabindex="0" loading="lazy"><figcaption>测试  接口</figcaption></figure>
<h2><a class="header-anchor" href="#_6-访问接口返回-404"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_6-%E8%AE%BF%E9%97%AE%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E-404" target="_blank" rel="noopener noreferrer">#</a>6. 访问接口返回 404？</h2>
<p>请检查，你新建的模块的 <code>package</code> 包名是不是在 <code>cn.iocoder.yudao.module</code> 下！</p>
<p>如果不是，修改 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/java/cn/iocoder/yudao/server/YudaoServerApplication.java" target="_blank" rel="noopener noreferrer">YudaoServerApplication (opens new window)</a>类，增加新建的模块的 <code>package</code> 包名。例如说：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SpringBootApplication</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">scanBasePackages</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span><span style="color:#98C379;--shiki-dark:#98C379">"${yudao.info.base-package}.server"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "${yudao.info.base-package}.module"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    "xxx.yyy.zzz"</span><span style="color:#E06C75;--shiki-dark:#E06C75">}) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// xxx.yyy.zzz 是你新建的模块的 `package` 包名</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_7-补充说明"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_7-%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">#</a>7. 补充说明</h2>
<h3><a class="header-anchor" href="#_7-1-接口分组"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_7-1-%E6%8E%A5%E5%8F%A3%E5%88%86%E7%BB%84" target="_blank" rel="noopener noreferrer">#</a>7.1 接口分组</h3>
<p>如果你想 Swagger 有该模块的接口分组，则需要新建 GroupedOpenApi Bean。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/接口分组.png" alt="接口分组" tabindex="0" loading="lazy"><figcaption>接口分组</figcaption></figure>
<h3><a class="header-anchor" href="#_7-2-mybatis-日志"><span></span></a><a href="https://doc.iocoder.cn/module-new/#_7-2-mybatis-%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">#</a>7.2 MyBatis 日志</h3>
<p>如果你希望新模块的 MyBatis 查询会打印 SQL 日志，需要在 <code>logging.level</code> 配置对应的 Logger。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/新建模块/MyBatis日志.png" alt="MyBatis 日志" tabindex="0" loading="lazy"><figcaption>MyBatis 日志</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%96%B0%E5%BB%BA%E6%A8%A1%E5%9D%97/40.png" type="image/png"/>
    </item>
    <item>
      <title>异常处理（错误码）</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/10.%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%EF%BC%88%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%89.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/10.%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%EF%BC%88%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%89.html</guid>
      <source url="https://springg.us.kg/rss.xml">异常处理（错误码）</source>
      <description>异常处理（错误码） 本章节，将讲解异常相关的统一响应、异常处理、业务异常、错误码这 4 块的内容。 #1. 统一响应 后端提供 RESTful API 给前端时，需要响应前端 API 调用是否成功： 如果成功，成功的数据是什么。后续，前端会将数据渲染到页面上 如果失败，失败的原因是什么。一般，前端会将原因弹出提示给用户 因此，需要有统一响应，而不能是每...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，将讲解异常相关的统一响应、异常处理、业务异常、错误码这 4 块的内容。</p>
<h2><a class="header-anchor" href="#_1-统一响应"><span></span></a><a href="https://doc.iocoder.cn/exception/#_1-%E7%BB%9F%E4%B8%80%E5%93%8D%E5%BA%94" target="_blank" rel="noopener noreferrer">#</a>1. 统一响应</h2>
<p>后端提供 RESTful API 给前端时，需要响应前端 API 调用是否成功：</p>
<ul>
<li>如果成功，成功的数据是什么。后续，前端会将数据渲染到页面上</li>
<li>如果失败，失败的原因是什么。一般，前端会将原因弹出提示给用户</li>
</ul>
<p>因此，需要有<strong>统一响应</strong>，而不能是每个接口定义自己的风格。一般来说，统一响应返回信息如下：</p>
<ul>
<li>成功时，返回成功的状态码 + 数据</li>
<li>失败时，返回失败的状态码 + 错误提示</li>
</ul>
<p>在标准的 RESTful API 的定义，是推荐使用 <a href="https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="noopener noreferrer">HTTP 响应状态码 (opens new window)</a>作为状态码。一般来说，我们实践很少这么去做，主要原因如下：</p>
<ul>
<li>业务返回的错误状态码很多，HTTP 响应状态码无法很好的映射。例如说，活动还未开始、订单已取消等等</li>
<li>学习成本高，开发者对 HTTP 响应状态码不是很了解。例如说，可能只知道 200、403、404、500 几种常见的</li>
</ul>
<h3><a class="header-anchor" href="#_1-1-commonresult"><span></span></a><a href="https://doc.iocoder.cn/exception/#_1-1-commonresult" target="_blank" rel="noopener noreferrer">#</a>1.1 CommonResult</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer"><code>ruoyi-vue-pro</code> (opens new window)</a>项目在实践时，将状态码放在 Response Body 响应内容中返回。一共有 3 个字段，通过 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/pojo/CommonResult.java" target="_blank" rel="noopener noreferrer">CommonResult (opens new window)</a>定义如下：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/01.png" alt="CommonResult" tabindex="0" loading="lazy"><figcaption>CommonResult</figcaption></figure>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 成功响应</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">        id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">        username</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"yudaoyuanma"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 失败响应</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    code</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">233666</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#FFFFFF;--shiki-dark:#FFFFFF">    message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"徐妈太丑了"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>可以增加 success 字段吗？</p>
<p>有些团队在实践时，会增加了 <code>success</code> 字段，通过 <code>true</code> 和 <code>false</code> 表示成功还是失败。<br>
这个看每个团队的习惯吧。艿艿的话，还是偏好基于约定，返回 <code>0</code> 时表示成功。</p>
<p>失败时的 <code>code</code> 字段，使用全局的错误码，稍后在 <a href="https://doc.iocoder.cn/exception/#_4-%E9%94%99%E8%AF%AF%E7%A0%81" target="_blank" rel="noopener noreferrer">「4. 错误码」</a> 小节来讲解。</p>
<p>① 在 RESTful API 成功时，定义 Controller 对应方法的返回类型为 CommonResult，并调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/pojo/CommonResult.java#L63-L69" target="_blank" rel="noopener noreferrer"><code>#success(T data)</code> (opens new window)</a>方法来返回。代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/02.png" alt="CommonResult" tabindex="0" loading="lazy"><figcaption>CommonResult</figcaption></figure>
<p>CommonResult 的 <code>data</code> 字段是<strong>泛型</strong>，建议定义对应的 VO 类，而不是使用 Map 类。</p>
<p>② 在 RESTful API 失败时，通过抛出 Exception 异常，具体在 <a href="https://doc.iocoder.cn/exception/#_2-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86" target="_blank" rel="noopener noreferrer">「2. 异常处理」</a> 小节。</p>
<h3><a class="header-anchor" href="#_1-2-使用-controlleradvice"><span></span></a><a href="https://doc.iocoder.cn/exception/#_1-2-%E4%BD%BF%E7%94%A8-controlleradvice" target="_blank" rel="noopener noreferrer">#</a>1.2 使用 <code>@ControllerAdvice</code> ？</h3>
<p>在 Spring MVC 中，可以使用 <code>@ControllerAdvice</code> 注解，通过 Spring AOP 拦截修改 Controller 方法的返回结果，从而实现全局的统一返回。</p>
<p>使用 @ControllerAdvice 注解的实战案例？</p>
<p>如果你感兴趣的话，可以阅读 <a href="https://www.iocoder.cn/Spring-Boot/SpringMVC/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot SpringMVC 入门 》 (opens new window)</a>文章的「4. 全局统一返回 」小节。</p>
<p>为什么项目不采用这种方式呢？主要原因是，这样的方式“破坏”了方法的定义，导致一些隐性的问题。例如说，Swagger 接口定义错误，展示的响应结果不是 CommonResult。</p>
<p>还有个原因，部分 RESTful API 不需要自动包装 CommonResult 结果。例如说，第三方支付回调只需要返回 <code>"success"</code> 字符串。</p>
<h2><a class="header-anchor" href="#_2-异常处理"><span></span></a><a href="https://doc.iocoder.cn/exception/#_2-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>2. 异常处理</h2>
<p>RESTful API 发生异常时，需要拦截 Exception 异常，转换成<strong>统一响应</strong>的格式，否则前端无法处理。</p>
<h3><a class="header-anchor" href="#_2-1-spring-mvc-的异常"><span></span></a><a href="https://doc.iocoder.cn/exception/#_2-1-spring-mvc-%E7%9A%84%E5%BC%82%E5%B8%B8" target="_blank" rel="noopener noreferrer">#</a>2.1 Spring MVC 的异常</h3>
<p>在 Spring MVC 中，通过 <code>@ControllerAdvice</code> + <code>@ExceptionHandler</code> 注解，声明将指定类型的异常，转换成对应的 CommonResult 响应。实现的代码，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/src/main/java/cn/iocoder/yudao/framework/web/core/handler/GlobalExceptionHandler.java" target="_blank" rel="noopener noreferrer">GlobalExceptionHandler (opens new window)</a>类，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/03.png" alt="GlobalExceptionHandler 异常处理" tabindex="0" loading="lazy"><figcaption>GlobalExceptionHandler 异常处理</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-filter-的异常"><span></span></a><a href="https://doc.iocoder.cn/exception/#_2-2-filter-%E7%9A%84%E5%BC%82%E5%B8%B8" target="_blank" rel="noopener noreferrer">#</a>2.2 Filter 的异常</h3>
<p>在请求被 Spring MVC 处理之前，是先经过 Filter 处理的，此时发生异常时，是无法通过 <code>@ExceptionHandler</code> 注解来处理的。只能通过 <code>try catch</code> 的方式来实现，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/04.png" alt="Filter 异常处理" tabindex="0" loading="lazy"><figcaption>Filter 异常处理</figcaption></figure>
<h2><a class="header-anchor" href="#_3-业务异常"><span></span></a><a href="https://doc.iocoder.cn/exception/#_3-%E4%B8%9A%E5%8A%A1%E5%BC%82%E5%B8%B8" target="_blank" rel="noopener noreferrer">#</a>3. 业务异常</h2>
<p>在 Service 发生业务异常时，如果进行返回呢？例如说，用户名已经存在，商品库存不足等。常用的方案选择，主要有两种：</p>
<ul>
<li>方案一，使用 CommonResult 统一响应结果，里面有错误码和错误提示，然后进行 <code>return</code> 返回</li>
<li>方案二，使用 ServiceException 统一业务异常，里面有错误码和错误提示，然后进行 <code>throw</code> 抛出</li>
</ul>
<p>选择方案一 CommonResult 会存在两个问题：</p>
<ul>
<li>因为 Spring <code>@Transactional</code> 声明式事务，是基于异常进行回滚的，如果使用 CommonResult 返回，则事务回滚会非常麻烦</li>
<li>当调用别的方法时，如果别人返回的是 CommonResult 对象，还需要不断的进行判断，写起来挺麻烦的</li>
</ul>
<p>因此，项目采用方案二 ServiceException 异常。</p>
<h3><a class="header-anchor" href="#_3-1-serviceexception"><span></span></a><a href="https://doc.iocoder.cn/exception/#_3-1-serviceexception" target="_blank" rel="noopener noreferrer">#</a>3.1 ServiceException</h3>
<p>定义 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/exception/ServiceException.java" target="_blank" rel="noopener noreferrer">ServiceException (opens new window)</a>异常类，继承 RuntimeException 异常类（非受检），用于定义业务异常。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/05.png" alt="ServiceException 业务异常" tabindex="0" loading="lazy"><figcaption>ServiceException 业务异常</figcaption></figure>
<p>为什么继承 RuntimeException 异常？</p>
<p>大多数业务场景下，我们无需处理 ServiceException 业务异常，而是通过 GlobalExceptionHandler 统一处理，转换成对应的 CommonResult 对象，进而提示给前端即可。<br>
如果真的需要处理 ServiceException 时，通过 <code>try catch</code> 的方式进行主动捕获。</p>
<h3><a class="header-anchor" href="#_3-2-serviceexceptionutil"><span></span></a><a href="https://doc.iocoder.cn/exception/#_3-2-serviceexceptionutil" target="_blank" rel="noopener noreferrer">#</a>3.2 ServiceExceptionUtil</h3>
<p>在 Service 需抛出业务异常时，通过调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/exception/util/ServiceExceptionUtil.java" target="_blank" rel="noopener noreferrer">ServiceExceptionUtil (opens new window)</a>的 <code>#exception(ErrorCode errorCode, Object... params)</code> 方法来构建 ServiceException 异常，然后使用 <code>throw</code> 进行抛出。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// ServiceExceptionUtil.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ServiceException</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> exception</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ErrorCode</span><span style="color:#E06C75;--shiki-dark:#E06C75"> errorCode) { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略参数 */</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ServiceException</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> exception</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ErrorCode</span><span style="color:#E06C75;--shiki-dark:#E06C75"> errorCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">...</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> params</span><span style="color:#E06C75;--shiki-dark:#E06C75">) { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略参数 */</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/异常处理/06.png" alt="ServiceException 业务异常" tabindex="0" loading="lazy"><figcaption>ServiceException 业务异常</figcaption></figure>
<p>为什么使用 ServiceExceptionUtil 来构建 ServiceException 异常？</p>
<p>错误提示的内容，支持使用管理后台进行动态配置，所以通过 ServiceExceptionUtil 获取内容的配置与格式化。</p>
<h2><a class="header-anchor" href="#_4-错误码"><span></span></a><a href="https://doc.iocoder.cn/exception/#_4-%E9%94%99%E8%AF%AF%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>4. 错误码</h2>
<p>错误码，对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/exception/ErrorCode.java" target="_blank" rel="noopener noreferrer">ErrorCode (opens new window)</a>类，枚举项目中的错误，<strong>全局唯一</strong>，方便定位是谁的错、错在哪。</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/07.png" alt="错误码" tabindex="0" loading="lazy"><figcaption>错误码</figcaption></figure>
<h3><a class="header-anchor" href="#_4-1-错误码分类"><span></span></a><a href="https://doc.iocoder.cn/exception/#_4-1-%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%86%E7%B1%BB" target="_blank" rel="noopener noreferrer">#</a>4.1 错误码分类</h3>
<p>错误码分成两类：全局的系统错误码、模块的业务错误码。</p>
<h4><a class="header-anchor" href="#_4-1-1-系统错误码"><span></span></a><a href="https://doc.iocoder.cn/exception/#_4-1-1-%E7%B3%BB%E7%BB%9F%E9%94%99%E8%AF%AF%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>4.1.1 系统错误码</h4>
<p>全局的系统错误码，使用 0-999 错误码段，和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">HTTP 响应状态码 (opens new window)</a>对应。虽然说，HTTP 响应状态码作为业务使用表达能力偏弱，但是使用在系统层面还是非常不错的。</p>
<p>系统错误码定义在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/exception/enums/GlobalErrorCodeConstants.java" target="_blank" rel="noopener noreferrer">GlobalErrorCodeConstants (opens new window)</a>类，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/08.png" alt="GlobalErrorCodeConstants 类" tabindex="0" loading="lazy"><figcaption>GlobalErrorCodeConstants 类</figcaption></figure>
<h4><a class="header-anchor" href="#_4-1-2-业务错误码"><span></span></a><a href="https://doc.iocoder.cn/exception/#_4-1-2-%E4%B8%9A%E5%8A%A1%E9%94%99%E8%AF%AF%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>4.1.2 业务错误码</h4>
<p>模块的业务错误码，按照模块分配错误码的<strong>区间</strong>，避免模块之间的错误码冲突。</p>
<p>① 业务错误码一共 10 位，分成 4 段，在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/exception/enums/ServiceErrorCodeRange.java" target="_blank" rel="noopener noreferrer">ServiceErrorCodeRange (opens new window)</a>分配，规则与代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/09.png" alt="ServiceErrorCodeRange 类" tabindex="0" loading="lazy"><figcaption>ServiceErrorCodeRange 类</figcaption></figure>
<p>② 每个业务模块，定义自己的 ErrorCodeConstants 错误码枚举类。以 <code>yudao-module-system</code> 模块举例子，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/10.png" alt="ErrorCodeConstants 类" tabindex="0" loading="lazy"><figcaption>ErrorCodeConstants 类</figcaption></figure>
<h3><a class="header-anchor" href="#_4-2-错误码管理"><span></span></a><a href="https://doc.iocoder.cn/exception/#_4-2-%E9%94%99%E8%AF%AF%E7%A0%81%E7%AE%A1%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>4.2 错误码管理</h3>
<p>在管理后台的 [系统管理 -&gt; 错误码管理] 菜单，可以进行错误码的管理。</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/11.png" alt="系统管理 -> 错误码管理" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 错误码管理</figcaption></figure>
<p>启动中的项目会每 60 秒，加载最新的错误码配置。所以，我们在修改完错误码的提示后，无需重启项目。</p>
<h4><a class="header-anchor" href="#_4-2-1-手动添加"><span></span></a><a href="https://doc.iocoder.cn/exception/#_4-2-1-%E6%89%8B%E5%8A%A8%E6%B7%BB%E5%8A%A0" target="_blank" rel="noopener noreferrer">#</a>4.2.1 手动添加</h4>
<p>点击 [新增] 按钮，进行错误码的手动添加。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/13.png" alt="系统管理 -> 错误码管理" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 错误码管理</figcaption></figure>
<h4><a class="header-anchor" href="#_4-2-2-自动添加"><span></span></a><a href="https://doc.iocoder.cn/exception/#_4-2-2-%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0" target="_blank" rel="noopener noreferrer">#</a>4.2.2 自动添加</h4>
<p>通过 <code>yudao.error-code.constants-class-list</code> 配置项，设置需要自动添加的 ErrorCodeConstants 错误码枚举类。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/异常处理/12.png" alt=" 配置项" tabindex="0" loading="lazy"><figcaption> 配置项</figcaption></figure>
<p>项目启动时，会自动扫描对应的 ErrorCodeConstants 中的错误码，自动添加或修改错误码的配置。</p>
<p><strong>注意</strong>，自动添加的错误码的类型为【自动生成】，一旦在管理后台手动 [编辑] 后，该错误码就不再支持自动修改。</p>
<p>自动添加是如何实现的？</p>
<p>参见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/framework/errorcode/" target="_blank" rel="noopener noreferrer"><code>system/framework/errorcode</code> (opens new window)</a>包的代码。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/01.png" type="image/png"/>
    </item>
    <item>
      <title>参数校验</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/11.%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/11.%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C.html</guid>
      <source url="https://springg.us.kg/rss.xml">参数校验</source>
      <description>参数校验 项目使用 Hibernate Validator (opens new window)框架，对 RESTful API 接口进行参数的校验，以保证最终数据入库的正确性。例如说，用户注册时，会校验手机格式的正确性，密码非弱密码。 如果参数校验不通过，会抛出 ConstraintViolationException 异常，被全局的异常处理捕获，返...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目使用 <a href="https://hibernate.org/validator/" target="_blank" rel="noopener noreferrer">Hibernate Validator (opens new window)</a>框架，对 RESTful API 接口进行参数的校验，以保证最终数据入库的正确性。例如说，用户注册时，会校验手机格式的正确性，密码非弱密码。</p>
<p>如果参数校验不通过，会抛出 ConstraintViolationException 异常，被全局的<a href="https://doc.iocoder.cn/exception" target="_blank" rel="noopener noreferrer">异常处理</a>捕获，返回“请求参数不正确”的响应。示例如下：</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">400</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "data"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "msg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"请求参数不正确:密码不能为空"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_1-参数校验注解"><span></span></a><a href="https://doc.iocoder.cn/validator/#_1-%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>1. 参数校验注解</h2>
<p>Validator 内置了 20+ 个参数校验注解，整理成常用与不常用的注解。</p>
<h3><a class="header-anchor" href="#_1-1-常用注解"><span></span></a><a href="https://doc.iocoder.cn/validator/#_1-1-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>1.1 常用注解</h3>
<p>| 注解                                         | 功能                                                         |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>分页实现</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/12.%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/12.%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0.html</guid>
      <source url="https://springg.us.kg/rss.xml">分页实现</source>
      <description>分页实现 前端：基于 Element UI 分页组件 Pagination(opens new window) 后端：基于 MyBatis Plus 分页功能，二次封装 以 [系统管理 -&amp;gt; 租户管理 -&amp;gt; 租户列表] 菜单为例子，讲解它的分页 + 搜索的实现。 #1. 前端分页实现 #1.1 Vue 界面 界面 tenant/index.vue (o...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<ul>
<li>前端：基于 Element UI 分页组件 <a href="https://element.eleme.io/#/zh-CN/component/pagination" target="_blank" rel="noopener noreferrer">Pagination(opens new window)</a></li>
<li>后端：基于 MyBatis Plus 分页功能，二次封装</li>
</ul>
<p>以 [系统管理 -&gt; 租户管理 -&gt; 租户列表] 菜单为例子，讲解它的分页 + 搜索的实现。</p>
<h2><a class="header-anchor" href="#_1-前端分页实现"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_1-%E5%89%8D%E7%AB%AF%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>1. 前端分页实现</h2>
<h3><a class="header-anchor" href="#_1-1-vue-界面"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_1-1-vue-%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>1.1 Vue 界面</h3>
<p>界面 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/tenant/index.vue" target="_blank" rel="noopener noreferrer"><code>tenant/index.vue</code> (opens new window)</a>相关的代码如下：</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    &lt;!-- 搜索工作栏 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> ref</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryForm"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"small"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :inline</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"true"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-show</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"showSearch"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label-width</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"68px"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"租户名"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-input</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.name"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> placeholder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"请输入租户名"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> clearable</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @keyup.enter.native</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"handleQuery"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"联系人"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"contactName"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-input</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.contactName"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> placeholder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"请输入联系人"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> clearable</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @keyup.enter.native</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"handleQuery"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"联系手机"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"contactMobile"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-input</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.contactMobile"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> placeholder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"请输入联系手机"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> clearable</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @keyup.enter.native</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"handleQuery"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#D19A66;--shiki-dark:#D19A66"> label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"租户状态"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"status"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-select</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.status"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> placeholder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"请选择租户状态"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> clearable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-option</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict in this.getDictDatas(DICT_TYPE.COMMON_STATUS)"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                       :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.label"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"dict.value"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"primary"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-search"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"handleQuery"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;搜索&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-refresh"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"resetQuery"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;重置&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form-item</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-form</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    &lt;!-- 列表 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-table</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-loading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"loading"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"list"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        &lt;!-- 省略每一列... --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    &lt;!-- 分页组件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">pagination</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-show</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"total &gt; 0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"total"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :page.sync</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.pageNo"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :limit.sync</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"queryParams.pageSize"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                @pagination</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"getList"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> { </span><span style="color:#E06C75;--shiki-dark:#E06C75">getTenantPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> } </span><span style="color:#C678DD;--shiki-dark:#C678DD">from</span><span style="color:#98C379;--shiki-dark:#98C379"> "@/api/system/tenant"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">	name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"Tenant"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">	components</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 遮罩层</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 遮罩层</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        loading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 显示搜索条件</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        showSearch</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 总条数</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 租户列表</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [],</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 查询参数</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        queryParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          pageNo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          pageSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">          // 搜索条件</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          contactName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          contactMobile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">          status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">undefined</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	},</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	created</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	  this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">	},</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">	methods</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  /** 查询列表 */</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	  getList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">	    this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">loading</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	    // 处理查询参数</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">	    let</span><span style="color:#E06C75;--shiki-dark:#E06C75"> params</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {...</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">queryParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">		// 执行查询</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">	    getTenantPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">response</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">		  this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">		  this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">total</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">		  this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">loading</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">		});</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      /** 搜索按钮操作 */</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      handleQuery</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">queryParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">pageNo</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      /** 重置按钮操作 */</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">      resetQuery</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">resetForm</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"queryForm"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">handleQuery</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">script</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3><a class="header-anchor" href="#_1-2-api-请求"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_1-2-api-%E8%AF%B7%E6%B1%82" target="_blank" rel="noopener noreferrer">#</a>1.2 API 请求</h3>
<p>请求 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/api/system/tenant.js" target="_blank" rel="noopener noreferrer"><code>system/tenant.js</code> (opens new window)</a>相关的代码如下：</p>
<div class="language-javascript" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E06C75;--shiki-dark:#E06C75"> request</span><span style="color:#C678DD;--shiki-dark:#C678DD"> from</span><span style="color:#98C379;--shiki-dark:#98C379"> '@/utils/request'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 获得租户分页</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> function</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getTenantPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">query</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    url</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'/system/tenant/page'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    method</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'get'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E06C75;--shiki-dark:#E06C75">query</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  })</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_2-后端分页实现"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_2-%E5%90%8E%E7%AB%AF%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>2. 后端分页实现</h2>
<h3><a class="header-anchor" href="#_2-1-controller-接口"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_2-1-controller-%E6%8E%A5%E5%8F%A3" target="_blank" rel="noopener noreferrer">#</a>2.1 Controller 接口</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/tenant/TenantController.java#L75-L81" target="_blank" rel="noopener noreferrer">TenantController (opens new window)</a>类中，定义 <code>/admin-api/system/tenant/page</code> 接口。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Tag</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "管理后台 - 租户"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RestController</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/system/tenant"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TenantController</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Resource</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TenantService</span><span style="color:#E06C75;--shiki-dark:#E06C75"> tenantService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/page"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "获得租户分页"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PreAuthorize</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"@ss.hasPermission('system:tenant:query')"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TenantRespVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getTenantPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TenantPageReqVO</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> pageVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TenantDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">pageResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tenantService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getTenantPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(pageVO);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TenantConvert</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">INSTANCE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">convertPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(pageResult));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>Request 分页请求，使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/tenant/vo/tenant/TenantPageReqVO.java" target="_blank" rel="noopener noreferrer">TenantPageReqVO (opens new window)</a>类，它继承 PageParam 类</li>
<li>Response 分页结果，使用 PageResult 类，每一项是 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/tenant/vo/tenant/TenantRespVO.java" target="_blank" rel="noopener noreferrer">TenantRespVO (opens new window)</a>类</li>
</ul>
<h4><a class="header-anchor" href="#_2-1-1-分页参数-pageparam"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_2-1-1-%E5%88%86%E9%A1%B5%E5%8F%82%E6%95%B0-pageparam" target="_blank" rel="noopener noreferrer">#</a>2.1.1 分页参数 PageParam</h4>
<p>分页请求，需要继承 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/pojo/PageParam.java" target="_blank" rel="noopener noreferrer">PageParam (opens new window)</a>类。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">"分页参数"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageParam</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> PAGE_NO </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> PAGE_SIZE </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "页码，从 1 开始"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> required</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">example</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NotNull</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "页码不能为空"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Min</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "页码最小值为 1"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pageNo </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> PAGE_NO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "每页条数，最大值为 100"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> required</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> example</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "10"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NotNull</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "每页条数不能为空"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Min</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "每页条数最小值为 1"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Max</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "每页条数最大值为 100"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> pageSize </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E06C75;--shiki-dark:#E06C75"> PAGE_SIZE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>分页条件，在子类中进行定义。以 TenantPageReqVO 举例子，代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "管理后台 - 租户分页 Request VO"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">EqualsAndHashCode</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">callSuper</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ToString</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">callSuper</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TenantPageReqVO</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageParam</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "租户名"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> example</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "芋道"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "联系人"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> example</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "芋艿"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> contactName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "联系手机"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> example</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "15601691300"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> contactMobile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "租户状态（0正常 1停用）"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> example</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "1"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DateTimeFormat</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">pattern</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "创建时间"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LocalDateTime</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] createTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4><a class="header-anchor" href="#_2-1-2-分页结果-pageresult"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_2-1-2-%E5%88%86%E9%A1%B5%E7%BB%93%E6%9E%9C-pageresult" target="_blank" rel="noopener noreferrer">#</a>2.1.2 分页结果 PageResult</h4>
<p>分页结果 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/pojo/PageResult.java" target="_blank" rel="noopener noreferrer">PageResult (opens new window)</a>类，代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "分页结果"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> final</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">T</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "数据"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> required</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">T</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Schema</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "总量"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> required</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>分页结果的数据 <code>list</code> 的每一项，通过自定义 VO 类，例如说 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/tenant/vo/tenant/TenantRespVO.java" target="_blank" rel="noopener noreferrer">TenantRespVO (opens new window)</a>类。</p>
<h3><a class="header-anchor" href="#_2-2-mapper-查询"><span></span></a><a href="https://doc.iocoder.cn/page-feature/#_2-2-mapper-%E6%9F%A5%E8%AF%A2" target="_blank" rel="noopener noreferrer">#</a>2.2 Mapper 查询</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/mysql/tenant/TenantMapper.java" target="_blank" rel="noopener noreferrer">TenantMapper (opens new window)</a>类中，定义 selectPage 查询方法。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Mapper</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TenantMapper</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BaseMapperX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TenantDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    default</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TenantDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TenantPageReqVO</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO, </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LambdaQueryWrapperX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TenantDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">likeIfPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TenantDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getName, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 如果 name 不为空，则进行 like 查询</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">likeIfPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TenantDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getContactName, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getContactName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">likeIfPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TenantDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getContactMobile, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getContactMobile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">eqIfPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TenantDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getStatus, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getStatus</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 如果 status 不为空，则进行 = 查询</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">betweenIfPresent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TenantDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getCreateTime, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getBeginCreateTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getEndCreateTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 如果 create 不为空，则进行 between 查询</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">orderByDesc</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(TenantDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getId)); </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 按照 id 倒序</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>针对 MyBatis Plus 分页查询的二次分装，在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/mapper/BaseMapperX.java" target="_blank" rel="noopener noreferrer">BaseMapperX (opens new window)</a>中实现，主要是将 MyBatis 的分页结果 IPage，转换成项目的分页结果 PageResult。代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/分页实现/01.png" alt="BaseMapperX 实现" tabindex="0" loading="lazy"><figcaption>BaseMapperX 实现</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0/01.png" type="image/png"/>
    </item>
    <item>
      <title>文件存储（上传下载）</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/13.%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%EF%BC%88%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%EF%BC%89.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/13.%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%EF%BC%88%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%EF%BC%89.html</guid>
      <source url="https://springg.us.kg/rss.xml">文件存储（上传下载）</source>
      <description>文件存储（上传下载） 项目支持将文件上传到三类存储器： 兼容 S3 协议的对象存储：支持 MinIO、腾讯云 COS、七牛云 Kodo、华为云 OBS、亚马逊 S3 等等。 磁盘存储：本地、FTP 服务器、SFTP 服务器。 数据库存储：MySQL、Oracle、PostgreSQL、SQL Server 等等。 技术选型？ 优先，✔ 推荐方案 1。如...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目支持将文件上传到三类存储器：</p>
<ol>
<li>兼容 S3 协议的对象存储：支持 MinIO、腾讯云 COS、七牛云 Kodo、华为云 OBS、亚马逊 S3 等等。</li>
<li>磁盘存储：本地、FTP 服务器、SFTP 服务器。</li>
<li>数据库存储：MySQL、Oracle、PostgreSQL、SQL Server 等等。</li>
</ol>
<p>技术选型？</p>
<ul>
<li>优先，✔ 推荐方案 1。如果无法使用云服务，可以自己搭建一个 MinIO 服务。参见 <a href="https://www.iocoder.cn/Spring-Boot/MinIO/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 对象存储 MinIO 入门 》 (opens new window)</a>文章。</li>
<li>其次，推荐方案 3。数据库的主从机制可以实现高可用，备份也方便，少量小文件问题不大。</li>
<li>最后，× 不推荐方案 2。主要是实现高可用比较困难，无法实现故障转移。</li>
</ul>
<h2><a class="header-anchor" href="#_1-快速入门"><span></span></a><a href="https://doc.iocoder.cn/file/#_1-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8" target="_blank" rel="noopener noreferrer">#</a>1. 快速入门</h2>
<p>本小节，我们来添加个文件配置，并使用它上传下载文件。</p>
<h3><a class="header-anchor" href="#_1-1-新增配置"><span></span></a><a href="https://doc.iocoder.cn/file/#_1-1-%E6%96%B0%E5%A2%9E%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1.1 新增配置</h3>
<p>① 打开 [基础设施 -&gt; 文件管理 -&gt; 文件配置] 菜单，进入文件配置的界面。</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/01.png" alt="文件配置" tabindex="0" loading="lazy"><figcaption>文件配置</figcaption></figure>
<p>② 点击 [新增] 按钮，选择存储器为【S3 对象存储器】，并填写七牛云的配置。如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/02.png" alt="S3 对象存储器" tabindex="0" loading="lazy"><figcaption>S3 对象存储器</figcaption></figure>
<ul>
<li>节点地址：<a href="http://s3-cn-south-1.qiniucs.com" target="_blank" rel="noopener noreferrer">s3-cn-south-1.qiniucs.com</a></li>
<li>存储 bucket：ruoyi-vue-pro</li>
<li>accessKey：b7yvuhBSAGjmtPhMFcn9iMOxUOY_I06cA_p0ZUx8</li>
<li>accessSecret：kXM1l5ia1RvSX3QaOEcwI3RLz3Y2rmNszWonKZtP</li>
<li>自定义域名：<a href="http://test.yudao.iocoder.cn" target="_blank" rel="noopener noreferrer">http://test.yudao.iocoder.cn</a></li>
</ul>
<p>友善的眼神！</p>
<p>上述七牛云的配置，是艿艿为了大家方便体验，请勿在测试或生产环境体验。</p>
<p>③ 添加完后，点击该配置所在行的 [测试] 按钮，测试配置是否正确。</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/03.png" alt="测试配置" tabindex="0" loading="lazy"><figcaption>测试配置</figcaption></figure>
<p>④ 测试通过后，点击该配置所在行的 [主配置] 按钮，设置它为<strong>默认</strong>的配置，后续使用它进行文件的上传。</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/07.png" alt="测试配置" tabindex="0" loading="lazy"><figcaption>测试配置</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-上传文件"><span></span></a><a href="https://doc.iocoder.cn/file/#_1-2-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.2 上传文件</h3>
<p>① 点击 [基础设施 -&gt; 文件管理 -&gt; 文件列表] 菜单，进入文件列表的界面。</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/04.png" alt="文件列表" tabindex="0" loading="lazy"><figcaption>文件列表</figcaption></figure>
<p>② 点击 [上传文件] 按钮，选择要上传的文件。</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/05.png" alt="文件列表" tabindex="0" loading="lazy"><figcaption>文件列表</figcaption></figure>
<p>③ 上传完成后，如果想要删除，可点击该文件所在行的 [删除] 按钮。</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/06.png" alt="文件列表" tabindex="0" loading="lazy"><figcaption>文件列表</figcaption></figure>
<h2><a class="header-anchor" href="#_2-文件上传"><span></span></a><a href="https://doc.iocoder.cn/file/#_2-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0" target="_blank" rel="noopener noreferrer">#</a>2. 文件上传</h2>
<p>项目提供了 2 种文件上传的方式，分别适合前端、后端使用。</p>
<h3><a class="header-anchor" href="#_2-1-方式一-前端上传"><span></span></a><a href="https://doc.iocoder.cn/file/#_2-1-%E6%96%B9%E5%BC%8F%E4%B8%80-%E5%89%8D%E7%AB%AF%E4%B8%8A%E4%BC%A0" target="_blank" rel="noopener noreferrer">#</a>2.1 方式一：前端上传</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/controller/admin/file/FileController.java" target="_blank" rel="noopener noreferrer">FileController (opens new window)</a>提供了 <code>/admin-api/infra/file/upload</code> RESTful API，用于前端直接上传文件。</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// FileController.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/upload"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "上传文件"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">logArgs</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 上传文件，没有记录操作日志的必要</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">String</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> uploadFile</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">FileUploadReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> uploadReqVO) throws Exception {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    MultipartFile</span><span style="color:#E06C75;--shiki-dark:#E06C75"> file </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> uploadReqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> uploadReqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">fileService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createFile</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getOriginalFilename</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), path,</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        IoUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">readBytes</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getInputStream</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()))</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>前端上传文件的代码如何实现，可见：</p>
<ul>
<li>文件列表，文件上传 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/infra/file/index.vue#L59-L76" target="_blank" rel="noopener noreferrer"><code>index.vue</code>(opens new window)</a></li>
<li>个人中心，头像修改 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/user/profile/userAvatar.vue#L122-L135" target="_blank" rel="noopener noreferrer"><code>userAvatar.vue</code>(opens new window)</a></li>
</ul>
<h3><a class="header-anchor" href="#_2-2-方式二-后端上传"><span></span></a><a href="https://doc.iocoder.cn/file/#_2-2-%E6%96%B9%E5%BC%8F%E4%BA%8C-%E5%90%8E%E7%AB%AF%E4%B8%8A%E4%BC%A0" target="_blank" rel="noopener noreferrer">#</a>2.2 方式二：后端上传</h3>
<p><code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-api/src/main/java/cn/iocoder/yudao/module/infra/api/file/FileApi.java" target="_blank" rel="noopener noreferrer">FileApi (opens new window)</a>提供了 <code>#createFile(...)</code> 方法，用于后端需要上传文件的逻辑。</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// FileApi.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 保存文件，并返回文件的访问路径</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> path</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 文件路径</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> content</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 文件内容</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 文件路径</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> createFile</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#C678DD;--shiki-dark:#C678DD"> byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] content)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>例如说，个人中心修改头像时，需要进行头像的上传。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/08.png" alt="后端上传" tabindex="0" loading="lazy"><figcaption>后端上传</figcaption></figure>
<p>注意，需要使用到后端上传的 Maven 模块，需要引入 <code>yudao-module-infra-api</code> 依赖。例如说 <code>yudao-module-system-biz</code> 模块的 <code>pom.xml</code> 文件，引用如下：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-infra-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_3-文件下载"><span></span></a><a href="https://doc.iocoder.cn/file/#_3-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD" target="_blank" rel="noopener noreferrer">#</a>3. 文件下载</h2>
<p>文件上传成功后，返回的是<strong>完整的 URL 访问路径</strong>，例如说 <a href="http://test.yudao.iocoder.cn/822aebded6e6414e912534c6091771a4.jpg" target="_blank" rel="noopener noreferrer">http://test.yudao.iocoder.cn/822aebded6e6414e912534c6091771a4.jpg (opens new window)</a>。</p>
<p>不同的文件存储器，返回的 URL 路径的规则是不同的：</p>
<p>① 当存储器是【S3 对象存储】时，支持 HTTP 访问，所以直接使用 S3 对象存储返回的 URL 路径即可。</p>
<p>② 当存储器是【数据库】【本地磁盘】等时，它们只支持存储，所以需要 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/controller/admin/file/FileController.java" target="_blank" rel="noopener noreferrer">FileController (opens new window)</a>提供的 <code>/admin-api/infra/file/{configId}/get/{path}</code> RESTful API，读取文件内容后返回。</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// FileController.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/{configId}/get/**"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PermitAll</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "下载文件"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Parameter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "configId"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "配置编号"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66">  required</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getFileContent</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">HttpServletRequest</span><span style="color:#E06C75;--shiki-dark:#E06C75"> request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                           HttpServletResponse</span><span style="color:#E06C75;--shiki-dark:#E06C75"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                           @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PathVariable</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"configId"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> configId) throws Exception {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 获取请求的路径</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> StrUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">subAfter</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">request</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getRequestURI</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#98C379;--shiki-dark:#98C379">"/get/"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">StrUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isEmpty</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(path)</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        throw</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> IllegalArgumentException</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"结尾的 path 路径必须传递"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 读取内容</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    byte</span><span style="color:#E06C75;--shiki-dark:#E06C75">[] content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> fileService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getFileContent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(configId, path);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    if</span><span style="color:#E06C75;--shiki-dark:#E06C75"> (content </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">==</span><span style="color:#D19A66;--shiki-dark:#D19A66"> null</span><span style="color:#E06C75;--shiki-dark:#E06C75">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">warn</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"[getFileContent][configId({}) path({}) 文件不存在]"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, configId, path);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setStatus</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">HttpStatus</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">NOT_FOUND</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">value</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    ServletUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">writeAttachment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(response, path, content);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2><a class="header-anchor" href="#_4-文件客户端"><span></span></a><a href="https://doc.iocoder.cn/file/#_4-%E6%96%87%E4%BB%B6%E5%AE%A2%E6%88%B7%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>4. 文件客户端</h2>
<p>技术组件 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-file/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-file</code> (opens new window)</a>，定义了 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-file/src/main/java/cn/iocoder/yudao/framework/file/core/client/FileClient.java" target="_blank" rel="noopener noreferrer">FileClient (opens new window)</a>接口，抽象了文件客户端的方法。</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FileClient</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 获得客户端编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 客户端编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Long</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 上传文件</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> content</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 文件流</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> path</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 相对路径</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 完整路径，即 HTTP 访问地址</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> upload</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">byte</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[] </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">content</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 删除文件</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> path</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 相对路径</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> delete</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 获得文件的内容</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> path</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 相对路径</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 文件的内容</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    byte</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">[] getContent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>FileClient 有 5 个实现类，使用不同存储器进行文件的上传与下载。UML 类图如所示：</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/09.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>文件上传的调用的 UML 时序图如下所示：</p>
<figure><img src="https://doc.iocoder.cn/img/上传下载/10.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<h2><a class="header-anchor" href="#_5-s3-对象存储的配置"><span></span></a><a href="https://doc.iocoder.cn/file/#_5-s3-%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E7%9A%84%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>5. S3 对象存储的配置</h2>
<p>做的不错的云存储服务，都是兼容 S3 协议的。如何获取对应的 S3 配置，艿艿整理到了 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-file/src/main/java/cn/iocoder/yudao/framework/file/core/client/s3/S3FileClientConfig.java" target="_blank" rel="noopener noreferrer">S3FileClientConfig (opens new window)</a>配置类。</p>
<p>有一点要注意，云存储服务的 Bucket 需要设置为<strong>公共读</strong>，不然 URL 无法访问到文件。</p>
<p>并且，最好使用自定义域名，方便迁移到不同的云存储服务。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/01.png" type="image/png"/>
    </item>
    <item>
      <title>Excel 导入导出</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/14.Excel%20%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/14.Excel%20%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA.html</guid>
      <source url="https://springg.us.kg/rss.xml">Excel 导入导出</source>
      <description>Excel 导入导出 项目的 yudao-spring-boot-starter-excel (opens new window)技术组件，基于 EasyExcel 实现 Excel 的读写操作，可用于实现最常见的 Excel 导入导出等功能。 EasyExcel 的介绍？ EasyExcel 是阿里开源的 Excel 工具库，具有简单易用、低内存、高...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-excel" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-excel</code> (opens new window)</a>技术组件，基于 EasyExcel 实现 Excel 的读写操作，可用于实现最常见的 Excel 导入导出等功能。</p>
<p>EasyExcel 的介绍？</p>
<p>EasyExcel 是阿里开源的 Excel 工具库，具有简单易用、低内存、高性能的特点。</p>
<p>在尽可用节约内存的情况下，支持百万行的 Excel 读写操作。例如说，仅使用 64M 内存，20 秒完成 75M（46 万行 25 列）Excel 的读取。并且，还有极速模式能更快，但是内存占用会在100M 多一点。</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/01.png" alt="EasyExcel" tabindex="0" loading="lazy"><figcaption>EasyExcel</figcaption></figure>
<h2><a class="header-anchor" href="#_1-excel-导出"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_1-excel-%E5%AF%BC%E5%87%BA" target="_blank" rel="noopener noreferrer">#</a>1. Excel 导出</h2>
<p>以 [系统管理 -&gt; 岗位管理] 菜单为例子，讲解它 Excel 导出的实现。</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/02.png" alt="系统管理 -> 岗位管理" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 岗位管理</figcaption></figure>
<h3><a class="header-anchor" href="#_1-1-后端导入实现"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_1-1-%E5%90%8E%E7%AB%AF%E5%AF%BC%E5%85%A5%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>1.1 后端导入实现</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/dept/PostController.java#L88-L97" target="_blank" rel="noopener noreferrer">PostController (opens new window)</a>类中，定义 <code>/admin-api/system/post/export</code> 导出接口。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/03.png" alt="导出 Excel 接口" tabindex="0" loading="lazy"><figcaption>导出 Excel 接口</figcaption></figure>
<ul>
<li>① 将从数据库中查询出来的列表，转换成对应的 PostExcelVO 列表。</li>
<li>② 将 PostExcelVO 列表，转换成 Excel 文件，返回给前端。</li>
</ul>
<h4><a class="header-anchor" href="#_1-1-1-postexcelvo-类"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_1-1-1-postexcelvo-%E7%B1%BB" target="_blank" rel="noopener noreferrer">#</a>1.1.1 PostExcelVO 类</h4>
<p>创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/dept/vo/post/PostExcelVO.java" target="_blank" rel="noopener noreferrer">PostExcelVO (opens new window)</a>类，岗位 Excel 导出的 VO 类。它有两个作用，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/04.png" alt="PostExcelVO 代码" tabindex="0" loading="lazy"><figcaption>PostExcelVO 代码</figcaption></figure>
<p>① 每个字段上的 <a href="https://github.com/alibaba/easyexcel/blob/master/src/main/java/com/alibaba/excel/annotation/ExcelProperty.java" target="_blank" rel="noopener noreferrer"><code>@ExcelProperty</code> (opens new window)</a>注解，声明 Excel Head 头部的名字。</p>
<p>② 每个字段的<strong>值</strong>，就是它对应的 Excel Row 行的数据值。</p>
<p>因此，最终 Excel 导出的效果如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/05.png" alt="PostExcelVO 效果" tabindex="0" loading="lazy"><figcaption>PostExcelVO 效果</figcaption></figure>
<p>另外，在上述代码的<strong>红线</strong>部分，<code>@ExcelProperty</code> 注解的 <code>converter</code> 属性是 DictConvert 转换器，通过它将 <code>status = 1</code> 转换成“开启”列，<code>status = 0</code> 转换成”禁用”列。稍后，我们会在 <a href="https://doc.iocoder.cn/excel-import-and-export/#_3-%E5%AD%97%E6%AE%B5%E8%BD%AC%E6%8D%A2%E5%99%A8" target="_blank" rel="noopener noreferrer">「3. 字段转换器」</a> 小节来详细讲讲。</p>
<h4><a class="header-anchor" href="#_1-1-2-excelutils-写入"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_1-1-2-excelutils-%E5%86%99%E5%85%A5" target="_blank" rel="noopener noreferrer">#</a>1.1.2 ExcelUtils 写入</h4>
<p>ExcelUtils 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-excel/src/main/java/cn/iocoder/yudao/framework/excel/core/util/ExcelUtils.java#L19-L40" target="_blank" rel="noopener noreferrer"><code>#write(...)</code> (opens new window)</a>方法，将列表以 Excel 响应给前端。代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/06.png" alt="write 方法" tabindex="0" loading="lazy"><figcaption>write 方法</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-前端导入实现"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_1-2-%E5%89%8D%E7%AB%AF%E5%AF%BC%E5%85%A5%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>1.2 前端导入实现</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/post/index.vue#L232-L243" target="_blank" rel="noopener noreferrer"><code>post/index.vue</code> (opens new window)</a>界面，定义 <code>#handleExport()</code> 操作，代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/07.png" alt="handleExport 方法" tabindex="0" loading="lazy"><figcaption>handleExport 方法</figcaption></figure>
<h2><a class="header-anchor" href="#_2-excel-导入"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_2-excel-%E5%AF%BC%E5%85%A5" target="_blank" rel="noopener noreferrer">#</a>2. Excel 导入</h2>
<p>以 [系统管理 -&gt; 用户管理] 菜单为例子，讲解它 Excel 导出的实现。</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/11.png" alt="系统管理 -> 用户管理" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 用户管理</figcaption></figure>
<h3><a class="header-anchor" href="#_2-1-后端导入实现"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_2-1-%E5%90%8E%E7%AB%AF%E5%AF%BC%E5%85%A5%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>2.1 后端导入实现</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/user/UserController.java#L176-L187" target="_blank" rel="noopener noreferrer">UserController (opens new window)</a>类中，定义 <code>/admin-api/system/user/import</code> 导入接口。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/12.png" alt="导入 Excel 接口" tabindex="0" loading="lazy"><figcaption>导入 Excel 接口</figcaption></figure>
<p>将前端上传的 Excel 文件，读取成 UserImportExcelVO 列表。</p>
<h4><a class="header-anchor" href="#_2-1-1-userimportexcelvo-类"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_2-1-1-userimportexcelvo-%E7%B1%BB" target="_blank" rel="noopener noreferrer">#</a>2.1.1 UserImportExcelVO 类</h4>
<p>创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/dept/vo/post/PostExcelVO.java" target="_blank" rel="noopener noreferrer">UserImportExcelVO (opens new window)</a>类，用户 Excel 导入的 VO 类。它的作用和 Excel 导入是一样的，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/13.png" alt="UserImportExcelVO 代码" tabindex="0" loading="lazy"><figcaption>UserImportExcelVO 代码</figcaption></figure>
<p>对应使用的 Excel 导入文件如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/14.png" alt="UserImportExcelVO 文件" tabindex="0" loading="lazy"><figcaption>UserImportExcelVO 文件</figcaption></figure>
<h4><a class="header-anchor" href="#_2-1-2-excelutils-读取"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_2-1-2-excelutils-%E8%AF%BB%E5%8F%96" target="_blank" rel="noopener noreferrer">#</a>2.1.2 ExcelUtils 读取</h4>
<p>ExcelUtils 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-excel/src/main/java/cn/iocoder/yudao/framework/excel/core/util/ExcelUtils.java#L42-L46" target="_blank" rel="noopener noreferrer"><code>#read(...)</code> (opens new window)</a>方法，读取 Excel 文件成列表。代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/16.png" alt="read 方法" tabindex="0" loading="lazy"><figcaption>read 方法</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-前端导入实现"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_2-2-%E5%89%8D%E7%AB%AF%E5%AF%BC%E5%85%A5%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>2.2 前端导入实现</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/user/index.vue#L174-L193" target="_blank" rel="noopener noreferrer"><code>user/index.vue</code> (opens new window)</a>界面，定义 Excel 导入的功能，代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/15.png" alt="Excel 导入的功能" tabindex="0" loading="lazy"><figcaption>Excel 导入的功能</figcaption></figure>
<h2><a class="header-anchor" href="#_3-字段转换器"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_3-%E5%AD%97%E6%AE%B5%E8%BD%AC%E6%8D%A2%E5%99%A8" target="_blank" rel="noopener noreferrer">#</a>3. 字段转换器</h2>
<p>EasyExcel 定义了 <a href="https://github.com/alibaba/easyexcel/blob/master/src/main/java/com/alibaba/excel/converters/Converter.java" target="_blank" rel="noopener noreferrer">Converter (opens new window)</a>接口，用于实现字段的转换。它有两个核心方法：</p>
<p>① <code>#convertToJavaData(...)</code> 方法：将 Excel Row 对应表格的值，转换成 Java 内存中的值。例如说，Excel 的“状态”列，将“状态”列转换成 <code>status = 1</code>，”禁用”列转换成 <code>status = 0</code>。</p>
<p>② <code>#convertToExcelData(...)</code> 方法：恰好相反，将 Java 内存中的值，转换成 Excel Row 对应表格的值。例如说，Excel 的“状态”列，将 <code>status = 1</code> 转换成“开启”列，<code>status = 0</code> 转换成”禁用”列。</p>
<h3><a class="header-anchor" href="#_3-1-dictconvert-实现"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_3-1-dictconvert-%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>3.1 DictConvert 实现</h3>
<p>以项目中提供的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-excel/src/main/java/cn/iocoder/yudao/framework/excel/core/convert/DictConvert.java" target="_blank" rel="noopener noreferrer">DictConvert (opens new window)</a>举例子，它实现 Converter 接口，提供字典数据的转换。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/21.png" alt="DictConvert 实现" tabindex="0" loading="lazy"><figcaption>DictConvert 实现</figcaption></figure>
<p>实现的代码比较简单，自己看看就可以明白。</p>
<h3><a class="header-anchor" href="#_3-1-dictconvert-使用示例"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_3-1-dictconvert-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>3.1 DictConvert 使用示例</h3>
<p>在需要转换的字段上，声明注解 <code>@ExcelProperty</code> 的 <code>converter</code> 属性是 DictConvert 转换器，注解 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-excel/src/main/java/cn/iocoder/yudao/framework/excel/core/annotations/DictFormat.java" target="_blank" rel="noopener noreferrer"><code>@DictFormat</code> (opens new window)</a>为对应的字典数据的类型。示例如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Excel导入导出/22.png" alt="DictConvert 使用示例" tabindex="0" loading="lazy"><figcaption>DictConvert 使用示例</figcaption></figure>
<h2><a class="header-anchor" href="#_4-更多-easyexcel-注解"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_4-%E6%9B%B4%E5%A4%9A-easyexcel-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>4. 更多 EasyExcel 注解</h2>
<p>基于 <a href="https://juejin.cn/post/6844904177974542343" target="_blank" rel="noopener noreferrer">《EasyExcel 中的注解 》 (opens new window)</a>文章，整理相关注解。</p>
<h3><a class="header-anchor" href="#_4-1-excelproperty"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_4-1-excelproperty" target="_blank" rel="noopener noreferrer">#</a>4.1 <code>@ExcelProperty</code></h3>
<p>这是最常用的一个注解，注解中有三个参数 <code>value</code>、<code>index</code>、<code>converter</code> 分别代表列明、列序号、数据转换方式。<code>value</code> 和 <code>index</code> 只能二选一，通常不用设置 <code>converter</code>。</p>
<p><strong>最佳实践</strong></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ImeiEncrypt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ExcelProperty</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "imei"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> imei</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_4-2-columnwith"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_4-2-columnwith" target="_blank" rel="noopener noreferrer">#</a>4.2 <code>@ColumnWith</code></h3>
<p>用于设置列宽度的注解，注解中只有一个参数 <code>value</code>。<code>value</code> 的单位是字符长度，最大可以设置 255 个字符，因为一个 Excel 单元格最大可以写入的字符个数，就是 255 个字符。</p>
<p><strong>最佳实践</strong></p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> ImeiEncrypt</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ColumnWidth</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 18</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> imei</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_4-3-contentfontstyle"><span></span></a><a href="https://doc.iocoder.cn/excel-import-and-export/#_4-3-contentfontstyle" target="_blank" rel="noopener noreferrer">#</a>4.3 <code>@ContentFontStyle</code></h3>
<p>用于设置单元格内容字体格式的注解。参数如下：</p>
<p>| 参数                 | 含义               |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Excel%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/01.png" type="image/png"/>
    </item>
    <item>
      <title>系统日志</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/15.%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/15.%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97.html</guid>
      <source url="https://springg.us.kg/rss.xml">系统日志</source>
      <description>系统日志 项目提供 2 类 4 种系统日志： 审计日志：用户的操作日志、登录日志 API 日志：RESTful API 的访问日志、错误日志 #1. 操作日志 操作日志，记录「谁」在「什么时间」对「什么对象」做了「什么事情」。 打开 [系统管理 -&amp;gt; 审计日志 -&amp;gt; 操作日志] 菜单，可以看到对应的列表，如下图所示： 系统管理 -&amp;gt; 操作日志系统管理 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目提供 2 类 4 种系统日志：</p>
<ul>
<li>审计日志：用户的操作日志、登录日志</li>
<li>API 日志：RESTful API 的访问日志、错误日志</li>
</ul>
<h2><a class="header-anchor" href="#_1-操作日志"><span></span></a><a href="https://doc.iocoder.cn/system-log/#_1-%E6%93%8D%E4%BD%9C%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">#</a>1. 操作日志</h2>
<p>操作日志，记录「谁」在「什么时间」对「什么对象」做了「什么事情」。</p>
<p>打开 [系统管理 -&gt; 审计日志 -&gt; 操作日志] 菜单，可以看到对应的列表，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/01.png" alt="系统管理 -> 操作日志" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 操作日志</figcaption></figure>
<p>操作日志的记录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-operatelog/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-biz-operatelog</code> (opens new window)</a>技术组件实现，<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-operatelog/src/main/java/cn/iocoder/yudao/framework/operatelog/core/aop/OperateLogAspect.java" target="_blank" rel="noopener noreferrer">OperateLogAspect (opens new window)</a>通过 Spring AOP 拦声明了 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-operatelog/src/main/java/cn/iocoder/yudao/framework/operatelog/core/annotations/OperateLog.java" target="_blank" rel="noopener noreferrer"><code>@OperateLog</code> (opens new window)</a>注解的方法，<strong>异步</strong>记录日志。使用示例如下：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/02.png" alt=" 使用示例" tabindex="0" loading="lazy"><figcaption> 使用示例</figcaption></figure>
<p>操作日志的存储，由 <code>yudao-module-system</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/logger/OperateLogServiceImpl.java" target="_blank" rel="noopener noreferrer">OperateLog (opens new window)</a>模块实现，记录到数据库的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/logger/OperateLogDO.java" target="_blank" rel="noopener noreferrer"><code>system_operate_log</code> (opens new window)</a>表。</p>
<h3><a class="header-anchor" href="#_1-1-operatelog-注解"><span></span></a><a href="https://doc.iocoder.cn/system-log/#_1-1-operatelog-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>1.1 <code>@OperateLog</code> 注解</h3>
<p><code>@OperateLog</code> 注解，一共有 6 个属性，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/03.png" alt=" 属性" tabindex="0" loading="lazy"><figcaption> 属性</figcaption></figure>
<ul>
<li><code>module</code> 属性：操作模块，例如说：用户、岗位、部门等等。为空时，默认会读取类上的 Swagger <code>@Tag</code> 注解的 <code>name</code> 属性。</li>
<li><code>name</code> 属性：操作名，例如说：新增用户、修改用户等等。为空时，默认会读取方法的 Swagger <code>@Operation</code> 注解的 <code>summary</code> 属性。</li>
<li><code>type</code> 属性：操作类型，在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-operatelog/src/main/java/cn/iocoder/yudao/framework/operatelog/core/enums/OperateTypeEnum.java" target="_blank" rel="noopener noreferrer">OperateTypeEnum (opens new window)</a>枚举。目前有 <code>GET</code> 查询、<code>CREATE</code> 新增、<code>UPDATE</code> 修改、<code>DELETE</code> 删除、<code>EXPORT</code> 导出、<code>IMPORT</code> 导入、<code>OTHER</code> 其它，可进行自定义。</li>
</ul>
<h3><a class="header-anchor" href="#_1-2-自动记录"><span></span></a><a href="https://doc.iocoder.cn/system-log/#_1-2-%E8%87%AA%E5%8A%A8%E8%AE%B0%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>1.2 自动记录</h3>
<p>操作日志往往记录的是针对某个对象的<strong>写</strong>操作，所以针对 POST、PUT、DELETE 等写请求，<code>yudao-spring-boot-starter-biz-operatelog</code> 组件会自动记录操作日志。</p>
<ul>
<li>基于请求方法，转换出对应的 <code>type</code> 操作方法：POST 对应 <code>CREATE</code> 类型，PUT 对应 <code>UPDATE</code> 类型，DELETE 对应 <code>DELETE</code> 类型，其它对应 <code>OTHER</code> 类型。</li>
<li>基于 Swagger 注解，转换出对应的 <code>module</code> 操作模块、<code>name</code> 操作名。</li>
</ul>
<p>因此，绝大多数 RESTful API 对应的方法，无需添加 <code>@OperateLog</code> 注解。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/05.png" alt=" 属性" tabindex="0" loading="lazy"><figcaption> 属性</figcaption></figure>
<p>一般来说，只有两种场景需要添加 <code>@OperateLog</code> 注解。</p>
<p>① 场景一：需要自定义 <code>@OperateLog</code> 注解的属性。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/06.png" alt=" 自定义属性" tabindex="0" loading="lazy"><figcaption> 自定义属性</figcaption></figure>
<p>② 场景二：不想自动记录操作日志。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/07.png" alt=" 自定义属性" tabindex="0" loading="lazy"><figcaption> 自定义属性</figcaption></figure>
<h3><a class="header-anchor" href="#_1-3-后续优化"><span></span></a><a href="https://doc.iocoder.cn/system-log/#_1-3-%E5%90%8E%E7%BB%AD%E4%BC%98%E5%8C%96" target="_blank" rel="noopener noreferrer">#</a>1.3 后续优化</h3>
<p><code>yudao-spring-boot-starter-biz-operatelog</code> 组件目前提供的是<strong>轻量级</strong>的操作日志的解决方案，暂时未提供很好的记录操作对应、操作明细、拓展字段的能力。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/08.png" alt="牛皮的操作日志示例" tabindex="0" loading="lazy"><figcaption>牛皮的操作日志示例</figcaption></figure>
<ul>
<li>【新增】2021-09-16 10:00 订单创建，订单号：NO.11089999，其中涉及变量订单号 “NO.11089999”</li>
<li>【修改】2021-09-16 10:00 用户小明修改了订单的配送地址：从 “金灿灿小区” 修改到 “银盏盏小区”</li>
</ul>
<p>未来，艿艿会引入老友开源的 <a href="https://github.com/mouzt/mzt-biz-log" target="_blank" rel="noopener noreferrer">https://github.com/mouzt/mzt-biz-log (opens new window)</a>操作日志组件，优化项目的操作日志功能。大家记得给个 Star 哟！</p>
<p>目前，如果要记录具体的操作明细、拓展字段，可以调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-operatelog/src/main/java/cn/iocoder/yudao/framework/operatelog/core/util/OperateLogUtils.java" target="_blank" rel="noopener noreferrer">OperateLogUtils (opens new window)</a>的静态方法，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/04.png" alt="OperateLogUtils" tabindex="0" loading="lazy"><figcaption>OperateLogUtils</figcaption></figure>
<h2><a class="header-anchor" href="#_2-登录日志"><span></span></a><a href="https://doc.iocoder.cn/system-log/#_2-%E7%99%BB%E5%BD%95%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">#</a>2. 登录日志</h2>
<p>登录日志，记录用户的登录、登出行为，包括成功的、失败的。</p>
<p>打开 [系统管理 -&gt; 审计日志 -&gt; 登录日志] 菜单，可以看对应的列表，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/11.png" alt="系统管理 -> 登录日志" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 登录日志</figcaption></figure>
<p>登录日志的存储，由 <code>yudao-module-system</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/logger/LoginLogServiceImpl.java" target="_blank" rel="noopener noreferrer">LoginLog (opens new window)</a>模块实现，记录到数据库的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/logger/LoginLogDO.java" target="_blank" rel="noopener noreferrer"><code>system_login_log</code> (opens new window)</a>表。</p>
<p>登录类型通过 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/enums/logger/LoginLogTypeEnum.java" target="_blank" rel="noopener noreferrer">LoginLogTypeEnum (opens new window)</a>枚举，登录结果通过 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/enums/logger/LoginResultEnum.java" target="_blank" rel="noopener noreferrer">LoginResultEnum (opens new window)</a>枚举，都可以自定义。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/12.png" alt="系统管理 -> 登录日志" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 登录日志</figcaption></figure>
<h2><a class="header-anchor" href="#_3-api-访问日志"><span></span></a><a href="https://doc.iocoder.cn/system-log/#_3-api-%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">#</a>3. API 访问日志</h2>
<p>API 访问日志，记录 API 的每次调用，包括 HTTP 请求、用户、开始时间、时长等等信息。</p>
<p>打开 [基础设施 -&gt; API 日志 -&gt; 访问日志] 菜单，可以看对应的列表，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/21.png" alt="系统管理 -> 访问日志" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 访问日志</figcaption></figure>
<p>访问日志的记录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-web</code> (opens new window)</a>技术组件实现，通过 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/src/main/java/cn/iocoder/yudao/framework/apilog/core/filter/ApiAccessLogFilter.java" target="_blank" rel="noopener noreferrer">ApiAccessLogFilter (opens new window)</a>过滤 RESTful API 请求，<strong>异步</strong>记录日志。</p>
<p>访问日志的存储，由 <code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/logger/ApiAccessLogServiceImpl.java" target="_blank" rel="noopener noreferrer">AccessLog (opens new window)</a>模块实现，记录到数据库的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/dal/dataobject/logger/ApiAccessLogDO.java" target="_blank" rel="noopener noreferrer"><code>infra_api_access_log</code> (opens new window)</a>表。</p>
<h2><a class="header-anchor" href="#_4-api-错误日志"><span></span></a><a href="https://doc.iocoder.cn/system-log/#_4-api-%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">#</a>4. API 错误日志</h2>
<p>API 错误日志，记录每次 API 的异常调用，包括 HTTP 请求、用户、异常的堆栈等等信息。</p>
<p>打开 [基础设施 -&gt; API 日志 -&gt; 错误日志] 菜单，可以看对应的列表，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/31.png" alt="系统管理 -> 错误日志" tabindex="0" loading="lazy"><figcaption>系统管理 -&gt; 错误日志</figcaption></figure>
<p>错误日志的记录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-web</code> (opens new window)</a>技术组件实现，通过 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/src/main/java/cn/iocoder/yudao/framework/web/core/handler/GlobalExceptionHandler.java" target="_blank" rel="noopener noreferrer">GlobalExceptionHandler (opens new window)</a>拦截每次 RESTful API 的系统异常，<strong>异步</strong>记录日志。</p>
<figure><img src="https://doc.iocoder.cn/img/系统日志/32.png" alt="GlobalExceptionHandler" tabindex="0" loading="lazy"><figcaption>GlobalExceptionHandler</figcaption></figure>
<p>错误日志的存储，由 <code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/logger/ApiErrorLogServiceImpl.java" target="_blank" rel="noopener noreferrer">ErrorLog (opens new window)</a>模块实现，记录到数据库的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/dal/dataobject/logger/ApiErrorLogDO.java" target="_blank" rel="noopener noreferrer"><code>infra_api_error_log</code> (opens new window)</a>表。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97/01.png" type="image/png"/>
    </item>
    <item>
      <title>数据库 MyBatis</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/16.%E6%95%B0%E6%8D%AE%E5%BA%93%20MyBatis.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/16.%E6%95%B0%E6%8D%AE%E5%BA%93%20MyBatis.html</guid>
      <source url="https://springg.us.kg/rss.xml">数据库 MyBatis</source>
      <description>数据库 MyBatis yudao-spring-boot-starter-mybatis (opens new window)技术组件，基于 MyBatis Plus 实现数据库的操作。如果你没有学习过 MyBatis Plus，建议先阅读 《芋道 Spring Boot MyBatis 入门 》 (opens new window)文章。 友情提示...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-mybatis</code> (opens new window)</a>技术组件，基于 MyBatis Plus 实现数据库的操作。如果你没有学习过 MyBatis Plus，建议先阅读 <a href="https://www.iocoder.cn/Spring-Boot/MyBatis/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot MyBatis 入门 》 (opens new window)</a>文章。</p>
<p>友情提示</p>
<p>MyBatis 是最容易读懂的 Java 框架之一，感兴趣的话，可以看看艿艿写的 <a href="https://www.iocoder.cn/MyBatis/good-collection/?yudao" target="_blank" rel="noopener noreferrer">《芋道 MyBatis 源码解析》 (opens new window)</a>系列，已经有 18000 人学习过！</p>
<h2><a class="header-anchor" href="#_1-实体类"><span></span></a><a href="https://doc.iocoder.cn/mybatis/#_1-%E5%AE%9E%E4%BD%93%E7%B1%BB" target="_blank" rel="noopener noreferrer">#</a>1. 实体类</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/dataobject/BaseDO.java" target="_blank" rel="noopener noreferrer">BaseDO (opens new window)</a>是所有数据库实体的<strong>父类</strong>，代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> abstract</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BaseDO</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Serializable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 创建时间</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TableField</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">fill</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FieldFill</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">INSERT</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> createTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 最后更新时间</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TableField</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">fill</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FieldFill</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">INSERT_UPDATE</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Date</span><span style="color:#E06C75;--shiki-dark:#E06C75"> updateTime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 创建者，目前使用 AdminUserDO / MemberUserDO 的 id 编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 使用 String 类型的原因是，未来可能会存在非数值的情况，留好拓展性。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TableField</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">fill</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FieldFill</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">INSERT</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> creator</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 更新者，目前使用 AdminUserDO / MemberUserDO 的 id 编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 使用 String 类型的原因是，未来可能会存在非数值的情况，留好拓展性。</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TableField</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">fill</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> FieldFill</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">INSERT_UPDATE</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> updater</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 是否删除</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">TableLogic</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Boolean</span><span style="color:#E06C75;--shiki-dark:#E06C75"> deleted</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><code>createTime</code> + <code>creator</code> 字段，创建人相关信息。</li>
<li><code>updater</code> + <code>updateTime</code> 字段，创建人相关信息。</li>
<li><code>deleted</code> 字段，逻辑删除。</li>
</ul>
<p>对应的 SQL 字段如下：</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#98C379;--shiki-dark:#98C379">`creator`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'创建者'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">`create_time`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'创建时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">`updater`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'更新者'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">`update_time`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#C678DD;--shiki-dark:#C678DD"> UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'更新时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">`deleted`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> bit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> b</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'是否删除'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_1-1-主键编号"><span></span></a><a href="https://doc.iocoder.cn/mybatis/#_1-1-%E4%B8%BB%E9%94%AE%E7%BC%96%E5%8F%B7" target="_blank" rel="noopener noreferrer">#</a>1.1 主键编号</h3>
<p><code>id</code> 主键编号，推荐使用 Long 型自增，原因是：</p>
<ul>
<li>自增，保证数据库是按顺序写入，性能更加优秀。</li>
<li>Long 型，避免未来业务增长，超过 Int 范围。</li>
</ul>
<p>对应的 SQL 字段如下：</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#98C379;--shiki-dark:#98C379">`id`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> bigint</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> AUTO_INCREMENT COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'编号'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span></code></pre>
</div><p>项目的 <code>id</code> <strong>默认</strong>采用数据库自增的策略，如果希望使用 Snowflake 雪花算法，可以修改 <code>application.yaml</code> 配置文件，将配置项 <code>mybatis-plus.global-config.db-config.id-type</code> 修改为 <code>ASSIGN_ID</code>。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/01.png" alt="配置 Snowflake 雪花算法" tabindex="0" loading="lazy"><figcaption>配置 Snowflake 雪花算法</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-逻辑删除"><span></span></a><a href="https://doc.iocoder.cn/mybatis/#_1-2-%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4" target="_blank" rel="noopener noreferrer">#</a>1.2 逻辑删除</h3>
<p>所有表通过 <code>deleted</code> 字段来实现逻辑删除，值为 0 表示未删除，值为 1 表示已删除，可见 <code>application.yaml</code> 配置文件的 <code>logic-delete-value</code> 和 <code>logic-not-delete-value</code> 配置项。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/03.png" alt="逻辑删除的配置" tabindex="0" loading="lazy"><figcaption>逻辑删除的配置</figcaption></figure>
<p>① 所有 SELECT 查询，都会自动拼接 <code>WHERE deleted = 0</code> 查询条件，过滤已经删除的记录。如果被删除的记录，只能通过在 XML 或者 <code>@SELECT</code> 来手写 SQL 语句。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/04.png" alt="不自动过滤逻辑删除" tabindex="0" loading="lazy"><figcaption>不自动过滤逻辑删除</figcaption></figure>
<p>② 建立唯一索引时，需要额外增加 <code>delete_time</code> 字段，添加到唯一索引字段中，避免唯一索引冲突。例如说，<code>system_users</code> 使用 <code>username</code> 作为唯一索引：</p>
<ul>
<li>未添加前：先逻辑删除了一条 <code>username = yudao</code> 的记录，然后又插入了一条 <code>username = yudao</code> 的记录时，会报索引冲突的异常。</li>
<li>已添加后：先逻辑删除了一条 <code>username = yudao</code> 的记录并更新 <code>delete_time</code> 为当前时间，然后又插入一条 <code>username = yudao</code> 并且 <code>delete_time</code> 为 0 的记录，不会导致唯一索引冲突。</li>
</ul>
<h3><a class="header-anchor" href="#_1-3-自动填充"><span></span></a><a href="https://doc.iocoder.cn/mybatis/#_1-3-%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85" target="_blank" rel="noopener noreferrer">#</a>1.3 自动填充</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/handler/DefaultDBFieldHandler.java" target="_blank" rel="noopener noreferrer">DefaultDBFieldHandler (opens new window)</a>基于 MyBatis 自动填充机制，实现 BaseDO 通用字段的自动设置。代码如下如：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/02.png" alt="DefaultDBFieldHandler 自动填充" tabindex="0" loading="lazy"><figcaption>DefaultDBFieldHandler 自动填充</figcaption></figure>
<h3><a class="header-anchor" href="#_1-4-复杂-字段类型"><span></span></a><a href="https://doc.iocoder.cn/mybatis/#_1-4-%E5%A4%8D%E6%9D%82-%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer">#</a>1.4 “复杂”字段类型</h3>
<p>MyBatis Plus 提供 TypeHandler 字段类型处理器，用于 JavaType 与 JdbcType 之间的转换。示例如下：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/13.png" alt="字段处理器的示例" tabindex="0" loading="lazy"><figcaption>字段处理器的示例</figcaption></figure>
<p>常用的字段类型处理器有：</p>
<ul>
<li><a href="https://github.com/baomidou/mybatis-plus/blob/a3e121c27cd26cb7c546dfb88190f3b1f574dc38/mybatis-plus-extension/src/main/java/com/baomidou/mybatisplus/extension/handlers/JacksonTypeHandler.java" target="_blank" rel="noopener noreferrer">JacksonTypeHandler (opens new window)</a>：通用的 Jackson 实现 JSON 字段类型处理器。</li>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/type/JsonLongSetTypeHandler.java" target="_blank" rel="noopener noreferrer">JsonLongSetTypeHandler (opens new window)</a>：针对 <code>Set&lt;Long&gt;</code> 的 Jackson 实现 JSON 字段类型处理器。</li>
</ul>
<p>另外，如果你后续要拓展自定义的 TypeHandler 实现，可以添加到 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/src/main/java/cn/iocoder/yudao/framework/mybatis/core/type/JsonLongSetTypeHandler.java" target="_blank" rel="noopener noreferrer"><code>cn.iocoder.yudao.framework.mybatis.core.type</code> (opens new window)</a>包下。</p>
<p>注意事项：</p>
<p>使用 TypeHandler 时，需要设置实体的 <code>@TableName</code> 注解的 <code>@autoResultMap = true</code>。</p>
<h2><a class="header-anchor" href="#_2-编码规范"><span></span></a><a href="https://doc.iocoder.cn/mybatis/#_2-%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83" target="_blank" rel="noopener noreferrer">#</a>2. 编码规范</h2>
<p>① 数据库实体类放在 <code>dal.dataobject</code> 包下，以 DO 结尾；数据库访问类放在 <code>dal.mysql</code> 包下，以 Mapper 结尾。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/17.png" alt="包规范" tabindex="0" loading="lazy"><figcaption>包规范</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%95%B0%E6%8D%AE%E5%BA%93MyBatis/01.png" type="image/png"/>
    </item>
    <item>
      <title>MyBatis 联表&amp;分页查询</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/17.MyBatis%20%E8%81%94%E8%A1%A8_%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/17.MyBatis%20%E8%81%94%E8%A1%A8_%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2.html</guid>
      <source url="https://springg.us.kg/rss.xml">MyBatis 联表&amp;分页查询</source>
      <description>imgMyBatis 联表&amp;分页查询 本文，分享 MyBatis 各种常用操作，不限于链表查询、分页查询等等。 #1. 分页查询 在 《MyBatis 数据库》 的「3.4 selectPage」小节，我们使用 MyBatis Plus 实现了分页查询。除了这种方式，我们也可以使用 XML 实现分页查询。 这里，以查询 system_users 表为例...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本文，分享 MyBatis 各种常用操作，不限于链表查询、分页查询等等。</p>
<h2><a class="header-anchor" href="#_1-分页查询"><span></span></a><a href="https://doc.iocoder.cn/mybatis-pro/#_1-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2" target="_blank" rel="noopener noreferrer">#</a>1. 分页查询</h2>
<p>在 <a href="https://doc.iocoder.cn/mybatis/" target="_blank" rel="noopener noreferrer">《MyBatis 数据库》</a> 的「3.4 selectPage」小节，我们使用 MyBatis Plus 实现了分页查询。除了这种方式，我们也可以使用 XML 实现分页查询。</p>
<p>这里，以查询 <code>system_users</code> 表为例，讲解如何使用 XML 实现分页查询。</p>
<h3><a class="header-anchor" href="#_1-1-方案一-mybatis-xml"><span></span></a><a href="https://doc.iocoder.cn/mybatis-pro/#_1-1-%E6%96%B9%E6%A1%88%E4%B8%80-mybatis-xml" target="_blank" rel="noopener noreferrer">#</a>1.1 方案一：MyBatis XML</h3>
<p>这个是 MyBatis 内置的使用方式，步骤如下：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/分页案例01/01.png" alt="分页案例 01" tabindex="0" loading="lazy"><figcaption>分页案例 01</figcaption></figure>
<p>① 创建 <code>AdminUserMapper.xml</code> 文件，编写两个 SQL 查询语句：</p>
<div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"1.0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;!</span><span style="color:#C678DD;--shiki-dark:#C678DD">DOCTYPE</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> mapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">mapper</span><span style="color:#D19A66;--shiki-dark:#D19A66"> namespace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"cn.iocoder.yudao.module.system.dal.mysql.user.AdminUserMapper"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">select</span><span style="color:#D19A66;--shiki-dark:#D19A66"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"selectPage01List"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">            resultType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"cn.iocoder.yudao.module.system.dal.dataobject.user.AdminUserDO"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        SELECT * FROM system_users</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.username != null and reqVO.username !=''"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND username LIKE CONCAT('%',#{reqVO.username},'%')</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.createTime != null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND create_time BETWEEN #{reqVO.createTime[0]}, #{reqVO.createTime[1]},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.status != null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND status = #{reqVO.status}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        ORDER BY id DESC</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        LIMIT #{reqVO.pageNo}, #{reqVO.pageSize}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">select</span><span style="color:#D19A66;--shiki-dark:#D19A66"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"selectPage01Count"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> resultType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"Long"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        SELECT COUNT(1) FROM system_users</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.username != null and reqVO.username !=''"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND username LIKE CONCAT('%',#{reqVO.username},'%')</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.createTime != null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND create_time BETWEEN #{reqVO.createTime[0]}, #{reqVO.createTime[1]},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.status != null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND status = #{reqVO.status}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">mapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 在 AdminUserMapper 创建这两 SQL 对应的方法：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Mapper</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserMapper</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BaseMapperX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 查询分页的列表</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectPage01List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Param</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UserPageReqVO</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 查询分页的条数</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Long</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectPage01Count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Param</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UserPageReqVO</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>其中 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/user/vo/user/UserPageReqVO.java" target="_blank" rel="noopener noreferrer">UserPageReqVO.java (opens new window)</a>是分页查询的请求 VO。</p>
<p>③ 在 AdminUserServiceImplService 层，调用这两个方法，实现分页查询：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Slf4j</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getUserPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UserPageReqVO</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;(</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                userMapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectPage01List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO),</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                userMapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectPage01Count</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        );</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>④ 简单调用下，可以在 IDEA 控制台看到 2 条 SQL：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/分页案例01/02.png" alt="分页案例 01 的效果" tabindex="0" loading="lazy"><figcaption>分页案例 01 的效果</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-方案二-mybatis-plus-xml"><span></span></a><a href="https://doc.iocoder.cn/mybatis-pro/#_1-2-%E6%96%B9%E6%A1%88%E4%BA%8C-mybatis-plus-xml" target="_blank" rel="noopener noreferrer">#</a>1.2 方案二：MyBatis Plus XML</h3>
<p>这个是 MyBatis Plus 拓展的使用方式，可以简化只需要写一条 SQL，步骤如下：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/分页案例02/01.png" alt="分页案例 02" tabindex="0" loading="lazy"><figcaption>分页案例 02</figcaption></figure>
<p>① 创建 <code>AdminUserMapper.xml</code> 文件，只编写一个 SQL 查询语句：</p>
<div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"1.0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;!</span><span style="color:#C678DD;--shiki-dark:#C678DD">DOCTYPE</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> mapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">mapper</span><span style="color:#D19A66;--shiki-dark:#D19A66"> namespace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"cn.iocoder.yudao.module.system.dal.mysql.user.AdminUserMapper"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">select</span><span style="color:#D19A66;--shiki-dark:#D19A66"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"selectPage02"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">            resultType</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"cn.iocoder.yudao.module.system.dal.dataobject.user.AdminUserDO"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        SELECT * FROM system_users</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.username != null and reqVO.username !=''"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND username LIKE CONCAT('%',#{reqVO.username},'%')</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.createTime != null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND create_time BETWEEN #{reqVO.createTime[0]}, #{reqVO.createTime[1]},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#D19A66;--shiki-dark:#D19A66"> test</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO.status != null"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                AND status = #{reqVO.status}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">where</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        ORDER BY id DESC</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">select</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">mapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，不需要写 <code>LIMIT</code> 分页语句噢。</p>
<p>② 在 AdminUserMapper 创建这一 SQL 对应的方法：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Mapper</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserMapper</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BaseMapperX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    IPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectPage02</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">IPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">page</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Param</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"reqVO"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UserPageReqVO</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>第一个参数、返回结果必须都是 IPage 类型，第二个参数可以放查询条件。</p>
<p>③ 在 AdminUserServiceImplService 层，调用这一个方法，实现分页查询：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Slf4j</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getUserPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">UserPageReqVO</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 必须使用 MyBatis Plus 的分页对象</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        IPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">page</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Page</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPageNo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">reqVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getPageSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        userMapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectPage02</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(page, reqVO);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> PageResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">page</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getRecords</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">page</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getTotal</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>因为项目使用 PageParam 和 PageResult 作为分页对象，所以需要和 IPage 做下转换。</p>
<p>④ 简单调用下，可以在 IDEA 控制台看到 2 条 SQL：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库MyBatis/分页案例02/02.png" alt="分页案例 02 的效果" tabindex="0" loading="lazy"><figcaption>分页案例 02 的效果</figcaption></figure>
<p>本质上，MyBatis Plus 是基于我们在 XML 编写的这条 SQL，计算出获得分页数量的 SQL。</p>
<p>一般情况下，建议采用方案二：MyBatis Plus XML，因为它开发效率更高，并且在分页数量为 0 时，就不多余查询分页的列表，一定程度上可以提升性能。</p>
<h2><a class="header-anchor" href="#_2-联表查询"><span></span></a><a href="https://doc.iocoder.cn/mybatis-pro/#_2-%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2" target="_blank" rel="noopener noreferrer">#</a>2. 联表查询</h2>
<p>对于需要链表查询的场景，建议也是写 MyBatis XML，使用方法比较简单，可以看下 <a href="https://www.cnblogs.com/best/p/9723085.html" target="_blank" rel="noopener noreferrer">《MyBatis学习总结（三）—— 多表关联查询与动态 SQL》 (opens new window)</a>文章。</p>
<p>除了 XML 这种方式外，项目也集成了 <a href="https://mybatisplusjoin.com/" target="_blank" rel="noopener noreferrer">MyBatis Plus Join (opens new window)</a>框架，通过 Java 代码实现联表查询。</p>
<p>这里，以查询 <code>system_users</code> 和 <code>system_dept</code> 联表，查询部门名为 <code>芋道源码</code>、用户状态为开启的用户列表。</p>
<h3><a class="header-anchor" href="#_2-1-案例一-字段平铺"><span></span></a><a href="https://doc.iocoder.cn/mybatis-pro/#_2-1-%E6%A1%88%E4%BE%8B%E4%B8%80-%E5%AD%97%E6%AE%B5%E5%B9%B3%E9%93%BA" target="_blank" rel="noopener noreferrer">#</a>2.1 案例一：字段平铺</h3>
<p>① 创建 AdminUserDetailDO 类，继承 AdminUserDO 类，并添加 <code>deptName</code> 平铺。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserDetailDO</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> deptName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>② 在 AdminUserMapper 创建 selectListByStatusAndDeptName 方法，代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Mapper</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserMapper</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BaseMapperX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    default</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDetailDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectList2ByStatusAndDeptName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> deptName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectJoinList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDetailDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MPJLambdaWrapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;() </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 查询 List</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectAll</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 查询 system_users 表的 all 所有字段</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectAs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(DeptDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getName, AdminUserDetailDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getDeptName) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 查询 system_dept 表的 name 字段，使用 deptName 字段“部分”返回</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">eq</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(AdminUserDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getStatus, status) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// WHERE system_users.status = ? 【部门名为 `芋道源码`】</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">leftJoin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DeptDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, DeptDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getId, AdminUserDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getDeptId) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 联表 WHERE system_users.dept_id = system_dept.id </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">eq</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(DeptDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getName, deptName) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// WHERE system_dept.name = ? 【用户状态为开启】</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        );</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_2-2-案例二-字段内嵌"><span></span></a><a href="https://doc.iocoder.cn/mybatis-pro/#_2-2-%E6%A1%88%E4%BE%8B%E4%BA%8C-%E5%AD%97%E6%AE%B5%E5%86%85%E5%B5%8C" target="_blank" rel="noopener noreferrer">#</a>2.2 案例二：字段内嵌</h3>
<p>① 创建 AdminUserDetailDO 类，继承 AdminUserDO 类，并添加 <code>dept</code> 部门。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserDetail2DO</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DeptDO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> dept</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>② 在 AdminUserMapper 创建 selectListByStatusAndDeptName 方法，代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Mapper</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AdminUserMapper</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> BaseMapperX</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    default</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDetail2DO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectListByStatusAndDeptName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> status</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> deptName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> selectJoinList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDetail2DO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MPJLambdaWrapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectAll</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AdminUserDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectAssociation</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DeptDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, AdminUserDetail2DO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getDept) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 重点差异点：查询 system_dept 表的 name 字段，使用 dept 字段“整个”返回</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">eq</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(AdminUserDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getStatus, status)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">leftJoin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">DeptDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, DeptDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getId, AdminUserDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getDeptId)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">eq</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(DeptDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getName, deptName)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        );</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_2-3-总结"><span></span></a><a href="https://doc.iocoder.cn/mybatis-pro/#_2-3-%E6%80%BB%E7%BB%93" target="_blank" rel="noopener noreferrer">#</a>2.3 总结</h3>
<p>MyBatis Plus Join 相比 MyBatis XML 来说，一开始肯定是需要多看看它的<a href="https://mybatisplusjoin.com/pages/core/lambda/select/select.html" target="_blank" rel="noopener noreferrer">文档 (opens new window)</a>。</p>
<p>但是熟悉后，我还是更喜欢使用 MyBatis Plus Join 哈~</p>
]]></content:encoded>
      <enclosure url="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==" type="image/"/>
    </item>
    <item>
      <title>多数据源（读写分离）</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/18.%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%88%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%EF%BC%89.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/18.%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%88%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%EF%BC%89.html</guid>
      <source url="https://springg.us.kg/rss.xml">多数据源（读写分离）</source>
      <description>多数据源（读写分离） yudao-spring-boot-starter-mybatis (opens new window)技术组件，除了提供 MyBatis 数据库操作，还提供了如下 2 种功能： 数据连接池：基于 Alibaba Druid (opens new window)实现，额外提供监控的能力。 多数据源（读写分离）：基于 Dynamic...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mybatis/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-mybatis</code> (opens new window)</a>技术组件，除了提供 MyBatis 数据库操作，还提供了如下 2 种功能：</p>
<ul>
<li>数据连接池：基于 <a href="https://github.com/alibaba/druid" target="_blank" rel="noopener noreferrer">Alibaba Druid (opens new window)</a>实现，额外提供监控的能力。</li>
<li>多数据源（读写分离）：基于 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter" target="_blank" rel="noopener noreferrer">Dynamic Datasource (opens new window)</a>实现，支持 Druid 连接池，可集成 <a href="https://www.iocoder.cn/Seata/install/?yudao" target="_blank" rel="noopener noreferrer">Seata (opens new window)</a>实现分布式事务。</li>
</ul>
<h2><a class="header-anchor" href="#_1-数据连接池"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_1-%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E6%B1%A0" target="_blank" rel="noopener noreferrer">#</a>1. 数据连接池</h2>
<p>友情提示：</p>
<p>如果你未学习过 Druid 数据库连接池，可以后续阅读 <a href="http://www.iocoder.cn/Spring-Boot/datasource-pool/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 数据库连接池入门》 (opens new window)</a>文章。</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;com.alibaba&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;druid-spring-boot-starter&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_1-1-druid-监控配置"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_1-1-druid-%E7%9B%91%E6%8E%A7%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1.1 Druid 监控配置</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.datasource.druid</code> 配置项，仅仅设置了 Druid <strong>监控</strong>相关的配置项目，具体数据库的设置需要使用 Dynamic Datasource 的配置项。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/多数据源/01.png" alt=" 配置项" tabindex="0" loading="lazy"><figcaption> 配置项</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-druid-监控界面"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_1-2-druid-%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>1.2 Druid 监控界面</h3>
<p>① 访问后端的 <code>/druid/index.html</code> 路径，例如说本地的 <code>http://127.0.0.1:48080/druid/index.html</code> 地址，可以查看到 Druid 监控界面。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/多数据源/02.png" alt="Druid 监控界面" tabindex="0" loading="lazy"><figcaption>Druid 监控界面</figcaption></figure>
<p>② 访问前端的 [基础设施 -&gt; MySQL 监控] 菜单，也可以查看到 Druid 监控界面。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/多数据源/03.png" alt="Druid 监控界面" tabindex="0" loading="lazy"><figcaption>Druid 监控界面</figcaption></figure>
<p>补充说明：</p>
<p>前端 [基础设施 -&gt; MySQL 监控] 菜单，通过 iframe 内嵌后端的 <code>/druid/index.html</code> 路径。</p>
<p>如果你想自定义地址，可以前往 [基础设置 -&gt; 配置管理] 菜单，设置 key 为 <code>url.druid</code> 配置项。</p>
<h2><a class="header-anchor" href="#_2-多数据源"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_2-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90" target="_blank" rel="noopener noreferrer">#</a>2. 多数据源</h2>
<p>友情提示：</p>
<p>如果你未学习过多数据源，可以后续阅读 <a href="http://www.iocoder.cn/Spring-Boot/dynamic-datasource/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 多数据源（读写分离）入门》 (opens new window)</a>文章。</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;com.baomidou&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;dynamic-datasource-spring-boot-starter&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_2-1-多数据源配置"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_2-1-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>2.1 多数据源配置</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L30-L58" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.datasource.dynamic</code> 配置项，配置了 Master-Slave 主从两个数据源。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/多数据源/04.png" alt=" 配置项" tabindex="0" loading="lazy"><figcaption> 配置项</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-数据源切换"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_2-2-%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2" target="_blank" rel="noopener noreferrer">#</a>2.2 数据源切换</h3>
<h4><a class="header-anchor" href="#_2-2-1-master-注解"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_2-2-1-master-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2.1 @Master 注解</h4>
<p>在方法上添加 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter/blob/master/src/main/java/com/baomidou/dynamic/datasource/annotation/Master.java" target="_blank" rel="noopener noreferrer"><code>@Master</code> (opens new window)</a>注解，使用名字为 <code>master</code> 的数据源，即使用【主】库，一般适合【写】场景。示例如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/多数据源/05.png" alt="@Master 注解" tabindex="0" loading="lazy"><figcaption>@Master 注解</figcaption></figure>
<p>由于项目的 <code>spring.datasource.dynamic.primary</code> 为 <code>master</code>，默认使用【主】库，所以无需手动添加 <code>@Master</code> 注解。</p>
<h4><a class="header-anchor" href="#_2-2-2-slave-注解"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_2-2-2-slave-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2.2 @Slave 注解</h4>
<p>在方法上添加 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter/blob/master/src/main/java/com/baomidou/dynamic/datasource/annotation/Slave.java" target="_blank" rel="noopener noreferrer"><code>@Slave</code> (opens new window)</a>注解，使用名字为 <code>slave</code> 的数据源，即使用【从】库，一般适合【读】场景。示例如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/多数据源/06.png" alt="@Slave 注解" tabindex="0" loading="lazy"><figcaption>@Slave 注解</figcaption></figure>
<h4><a class="header-anchor" href="#_2-2-3-ds-注解"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_2-2-3-ds-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2.3 @DS 注解</h4>
<p>在方法上添加 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter/blob/master/src/main/java/com/baomidou/dynamic/datasource/annotation/DS.java" target="_blank" rel="noopener noreferrer"><code>@DS</code> (opens new window)</a>注解，使用指定名字的数据源，适合多数据源的情况。示例如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/多数据源/07.png" alt="@DS 注解" tabindex="0" loading="lazy"><figcaption>@DS 注解</figcaption></figure>
<h3><a class="header-anchor" href="#_2-3-分布式事务"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_2-3-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1" target="_blank" rel="noopener noreferrer">#</a>2.3 分布式事务</h3>
<p>在使用 Spring <code>@Transactional</code> 声明的事务中，无法进行数据源的切换，此时有 3 种解决方案：</p>
<p>① 拆分成多个 Spring 事务，每个事务对应一个数据源。如果是【写】场景，可能会存在多数据源的事务不一致的问题。</p>
<p>② 引入 Seata 框架，提供完整的分布式事务的解决方案，可学习 <a href="https://www.iocoder.cn/Seata/install/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Seata 极简入门 》 (opens new window)</a>文章。</p>
<p>③ 使用 Dynamic Datasource 提供的 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter/blob/master/src/main/java/com/baomidou/dynamic/datasource/annotation/DSTransactional.java" target="_blank" rel="noopener noreferrer"><code>@DSTransactional</code> (opens new window)</a>注解，支持多数据源的切换，不提供绝对可靠的多数据源的事务一致性（强于 ① 弱于 ②），可学习 <a href="https://www.yinxiang.com/everhub/note/ac0175c8-35f5-4d66-8cd3-c662d7a16441" target="_blank" rel="noopener noreferrer">《DSTransactional 实现源码分析 》 (opens new window)</a>文章。</p>
<h2><a class="header-anchor" href="#_3-分库分表"><span></span></a><a href="https://doc.iocoder.cn/dynamic-datasource/#_3-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8" target="_blank" rel="noopener noreferrer">#</a>3. 分库分表</h2>
<p>建议采用 ShardingSphere 的子项目 Sharding-JDBC 完成分库分表的功能，可阅读 <a href="https://www.iocoder.cn/Spring-Boot/sharding-datasource/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 分库分表入门 》 (opens new window)</a>文章，学习如何整合进项目。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/01.png" type="image/png"/>
    </item>
    <item>
      <title>Redis 缓存</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/19.Redis%20%E7%BC%93%E5%AD%98.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/19.Redis%20%E7%BC%93%E5%AD%98.html</guid>
      <source url="https://springg.us.kg/rss.xml">Redis 缓存</source>
      <description>Redis 缓存 yudao-spring-boot-starter-redis (opens new window)技术组件，使用 Redis 实现缓存的功能，它有 2 种使用方式： 编程式缓存：基于 Spring Data Redis 框架的 RedisTemplate 操作模板 声明式缓存：基于 Spring Cache 框架的 @Cacheab...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-redis/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-redis</code> (opens new window)</a>技术组件，使用 Redis 实现缓存的功能，它有 2 种使用方式：</p>
<ul>
<li>编程式缓存：基于 Spring Data Redis 框架的 RedisTemplate 操作模板</li>
<li>声明式缓存：基于 Spring Cache 框架的 <code>@Cacheable</code> 等等注解</li>
</ul>
<h2><a class="header-anchor" href="#_1-编程式缓存"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-%E7%BC%96%E7%A8%8B%E5%BC%8F%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">#</a>1. 编程式缓存</h2>
<p>友情提示：</p>
<p>如果你未学习过 Spring Data Redis 框架，可以后续阅读 <a href="http://www.iocoder.cn/Spring-Boot/Redis/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot Redis 入门》 (opens new window)</a>文章。</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;org.redisson&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;redisson-spring-boot-starter&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>由于 Redisson 提供了分布式锁、队列、限流等特性，所以使用它作为 Spring Data Redis 的客户端。</p>
<h3><a class="header-anchor" href="#_1-1-spring-data-redis-配置"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-1-spring-data-redis-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1.1 Spring Data Redis 配置</h3>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L60-L64" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.redis</code> 配置项，设置 Redis 的配置。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/01.png" alt="Spring Data Redis 配置" tabindex="0" loading="lazy"><figcaption>Spring Data Redis 配置</figcaption></figure>
<p>② 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-redis/src/main/java/cn/iocoder/yudao/framework/redis/config/YudaoRedisAutoConfiguration.java" target="_blank" rel="noopener noreferrer">YudaoRedisAutoConfiguration (opens new window)</a>配置类，设置使用 JSON 序列化 value 值。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/02.png" alt="YudaoRedisAutoConfiguration 配置类" tabindex="0" loading="lazy"><figcaption>YudaoRedisAutoConfiguration 配置类</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>1.2 实战案例</h3>
<p>以访问令牌 Access Token 的缓存来举例子，讲解项目中是如何使用 Spring Data Redis 框架的。</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/07.png" alt="Access Token 示例" tabindex="0" loading="lazy"><figcaption>Access Token 示例</figcaption></figure>
<h4><a class="header-anchor" href="#_1-2-1-引入依赖"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-2-1-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96" target="_blank" rel="noopener noreferrer">#</a>1.2.1 引入依赖</h4>
<p>在 <code>yudao-module-system-biz</code> 模块中，引入 <code>yudao-spring-boot-starter-redis</code> 技术组件。如下所示：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-redis&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h4><a class="header-anchor" href="#_1-2-2-oauth2accesstokendo"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-2-2-oauth2accesstokendo" target="_blank" rel="noopener noreferrer">#</a>1.2.2 OAuth2AccessTokenDO</h4>
<p>新建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/oauth2/OAuth2AccessTokenDO.java" target="_blank" rel="noopener noreferrer">OAuth2AccessTokenDO (opens new window)</a>类，访问令牌 Access Token 类。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/03.png" alt="OAuth2AccessTokenDO 类" tabindex="0" loading="lazy"><figcaption>OAuth2AccessTokenDO 类</figcaption></figure>
<p>友情提示：</p>
<ul>
<li>① 如果值是【简单】的 String 或者 Integer 等类型，无需创建数据实体。</li>
<li>② 如果值是【复杂对象】时，建议在 <code>dal/dataobject</code> 包下，创建对应的数据实体。</li>
</ul>
<h4><a class="header-anchor" href="#_1-2-3-rediskeyconstants"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-2-3-rediskeyconstants" target="_blank" rel="noopener noreferrer">#</a>1.2.3 RedisKeyConstants</h4>
<p>为什么要定义 Redis Key 常量？</p>
<p>每个 <code>yudao-module-xxx</code> 模块，都有一个 RedisKeyConstants 类，定义该模块的 Redis Key 的信息。目的是，避免 Redis Key 散落在 Service 业务代码中，像对待数据库的表一样，对待每个 Redis Key。通过这样的方式，如果我们想要了解一个模块的 Redis 的使用情况，只需要查看 RedisKeyConstants 类即可。</p>
<p>在 <code>yudao-module-system</code> 模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/redis/RedisKeyConstants.java" target="_blank" rel="noopener noreferrer">RedisKeyConstants (opens new window)</a>类中，新建 OAuth2AccessTokenDO 对应的 Redis Key 定义 <code>OAUTH2_ACCESS_TOKEN</code>。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/04.png" alt="RedisKeyConstants 类" tabindex="0" loading="lazy"><figcaption>RedisKeyConstants 类</figcaption></figure>
<h4><a class="header-anchor" href="#_1-2-4-oauth2accesstokenredisdao"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-2-4-oauth2accesstokenredisdao" target="_blank" rel="noopener noreferrer">#</a>1.2.4 OAuth2AccessTokenRedisDAO</h4>
<p>新建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/redis/oauth2/OAuth2AccessTokenRedisDAO.java" target="_blank" rel="noopener noreferrer">OAuth2AccessTokenRedisDAO (opens new window)</a>类，是 OAuth2AccessTokenDO 的 RedisDAO 实现。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/05.png" alt="OAuth2AccessTokenRedisDAO 类" tabindex="0" loading="lazy"><figcaption>OAuth2AccessTokenRedisDAO 类</figcaption></figure>
<h4><a class="header-anchor" href="#_1-2-5-oauth2tokenserviceimpl"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_1-2-5-oauth2tokenserviceimpl" target="_blank" rel="noopener noreferrer">#</a>1.2.5 OAuth2TokenServiceImpl</h4>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/oauth2/OAuth2TokenServiceImpl.java" target="_blank" rel="noopener noreferrer">OAuth2TokenServiceImpl (opens new window)</a>中，只要注入 OAuth2AccessTokenRedisDAO Bean，非常简洁干净的进行 OAuth2AccessTokenDO 的缓存操作，无需关心具体的实现。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/06.png" alt="OAuth2TokenServiceImpl 类" tabindex="0" loading="lazy"><figcaption>OAuth2TokenServiceImpl 类</figcaption></figure>
<h2><a class="header-anchor" href="#_2-声明式缓存"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">#</a>2. 声明式缓存</h2>
<p>友情提示：</p>
<p>如果你未学习过 Spring Cache 框架，可以后续阅读 <a href="http://www.iocoder.cn/Spring-Boot/Cache/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot Cache 入门》 (opens new window)</a>文章。</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;org.springframework.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;spring-boot-starter-cache&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>相比来说 Spring Data Redis 编程式缓存，Spring Cache 声明式缓存的使用更加便利，一个 <code>@Cacheable</code> 注解即可实现缓存的功能。示例如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Cacheable</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">value</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "users"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> key</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "#id"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">UserDO</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getUserById</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> id)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_2-1-spring-cache-配置"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-1-spring-cache-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>2.1 Spring Cache 配置</h3>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application.yaml#L60-L64" target="_blank" rel="noopener noreferrer"><code>application.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.redis</code> 配置项，设置 Redis 的配置。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/10.png" alt="Spring Cache 配置" tabindex="0" loading="lazy"><figcaption>Spring Cache 配置</figcaption></figure>
<p>② 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-redis/src/main/java/cn/iocoder/yudao/framework/redis/config/YudaoCacheAutoConfiguration.java" target="_blank" rel="noopener noreferrer">YudaoCacheAutoConfiguration (opens new window)</a>配置类，设置使用 JSON 序列化 value 值。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/11.png" alt="YudaoCacheAutoConfiguration 配置类" tabindex="0" loading="lazy"><figcaption>YudaoCacheAutoConfiguration 配置类</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-常见注解"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-2-%E5%B8%B8%E8%A7%81%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2 常见注解</h3>
<h4><a class="header-anchor" href="#_2-2-1-cacheable-注解"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-2-1-cacheable-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2.1 @Cacheable 注解</h4>
<p><a href="https://github.com/spring-projects/spring-framework/blob/main/spring-context/src/main/java/org/springframework/cache/annotation/Cacheable.java" target="_blank" rel="noopener noreferrer"><code>@Cacheable</code> (opens new window)</a>注解：添加在方法上，缓存方法的执行结果。执行过程如下：</p>
<ul>
<li>1）首先，判断方法执行结果的缓存。如果有，则直接返回该缓存结果。</li>
<li>2）然后，执行方法，获得方法结果。</li>
<li>3）之后，根据是否满足缓存的条件。如果满足，则缓存方法结果到缓存。</li>
<li>4）最后，返回方法结果。</li>
</ul>
<h4><a class="header-anchor" href="#_2-2-2-cacheput-注解"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-2-2-cacheput-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2.2 @CachePut 注解</h4>
<p><a href="https://github.com/spring-projects/spring-framework/blob/main/spring-context/src/main/java/org/springframework/cache/annotation/CachePut.java" target="_blank" rel="noopener noreferrer"><code>@CachePut</code> (opens new window)</a>注解，添加在方法上，缓存方法的执行结果。不同于 <code>@Cacheable</code> 注解，它的执行过程如下：</p>
<ul>
<li>1）首先，执行方法，获得方法结果。也就是说，无论是否有缓存，都会执行方法。</li>
<li>2）然后，根据是否满足缓存的条件。如果满足，则缓存方法结果到缓存。</li>
<li>3）最后，返回方法结果。</li>
</ul>
<h4><a class="header-anchor" href="#_2-2-3-cacheevict-注解"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-2-3-cacheevict-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2.3 @CacheEvict 注解</h4>
<p><a href="https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/java/org/springframework/cache/annotation/CacheEvict.java" target="_blank" rel="noopener noreferrer"><code>@CacheEvict</code> (opens new window)</a>注解，添加在方法上，删除缓存。</p>
<h3><a class="header-anchor" href="#_2-3-实战案例"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-3-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2.3 实战案例</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/RoleServiceImpl.java" target="_blank" rel="noopener noreferrer">RoleServiceImpl (opens new window)</a>中，使用 Spring Cache 实现了 Role 角色缓存，采用【被动读】的方案。原因是：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/12.png" alt="RoleServiceImpl" tabindex="0" loading="lazy"><figcaption>RoleServiceImpl</figcaption></figure>
<ul>
<li>【被动读】相对能够保证 Redis 与 MySQL 的一致性</li>
<li>绝大数数据不需要放到 Redis 缓存中，采用【主动写】会将非必要的数据进行缓存</li>
</ul>
<p>友情提示：</p>
<p>如果你未学习过 MySQL 与 Redis 一致性的问题，可以后续阅读 <a href="https://www.iocoder.cn/Fight/How-Redis-and-MySQL-double-write-consistency-guarantee/?yudao" target="_blank" rel="noopener noreferrer">《Redis 与 MySQL 双写一致性如何保证？ 》 (opens new window)</a>文章。</p>
<p>① 执行 <code>#getRoleFromCache(...)</code> 方法，从 MySQL 读取数据后，向 Redis 写入缓存。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/13.png" alt="getTestDemo 方法" tabindex="0" loading="lazy"><figcaption>getTestDemo 方法</figcaption></figure>
<p>② 执行 <code>#updateRole(...)</code> 或 <code>#deleteRole(...)</code> 方法，在更新或者删除 MySQL 数据后，从 Redis 删除缓存。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/14.png" alt="getTestDemo 方法" tabindex="0" loading="lazy"><figcaption>getTestDemo 方法</figcaption></figure>
<h3><a class="header-anchor" href="#_2-4-过期时间"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_2-4-%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4" target="_blank" rel="noopener noreferrer">#</a>2.4 过期时间</h3>
<p>Spring Cache 默认使用 <code>spring.cache.redis.time-to-live</code> 配置项，设置缓存的过期时间，项目默认为 1 小时。</p>
<p>如果你想自定义过期时间，可以在 <code>@Cacheable</code> 注解中的 <code>cacheNames</code> 属性中，添加 <code>#{过期时间}</code> 后缀，单位是秒。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/过期时间.png" alt="过期时间" tabindex="0" loading="lazy"><figcaption>过期时间</figcaption></figure>
<p>实现的原来，参考 <a href="https://juejin.cn/post/7102222578026020871" target="_blank" rel="noopener noreferrer">《Spring @Cacheable 扩展支持自定义过期时间 》 (opens new window)</a>文章。</p>
<h2><a class="header-anchor" href="#_3-redis-监控"><span></span></a><a href="https://doc.iocoder.cn/redis-cache/#_3-redis-%E7%9B%91%E6%8E%A7" target="_blank" rel="noopener noreferrer">#</a>3. Redis 监控</h2>
<p><code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/controller/admin/redis/RedisController.java" target="_blank" rel="noopener noreferrer"><code>redis</code> (opens new window)</a>模块，提供了 Redis 监控的功能。</p>
<p>点击 [基础设施 -&gt; Redis 监控] 菜单，可以查看到 Redis 的基础信息、命令统计、内存信息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Redis缓存/21.png" alt="Redis 监控" tabindex="0" loading="lazy"><figcaption>Redis 监控</figcaption></figure>
<p>上次更新: 2023/04/07, 23:30:07</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Redis%E7%BC%93%E5%AD%98/01.png" type="image/png"/>
    </item>
    <item>
      <title>代码生成（新增功能）</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/2.%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD%EF%BC%89.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/2.%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%88%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD%EF%BC%89.html</guid>
      <source url="https://springg.us.kg/rss.xml">代码生成（新增功能）</source>
      <description>代码生成（新增功能） 大部分项目里，其实有很多代码是重复的，几乎每个模块都有 CRUD 增删改查的功能，而这些功能的实现代码往往是大同小异的。如果这些功能都要自己去手写，非常无聊枯燥，浪费时间且效率很低，还可能会写错。 所以这种重复性的代码，项目提供了 codegen (opens new window)代码生成器，只需要在数据库中设计好表结构，就可以...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>大部分项目里，其实有很多代码是重复的，几乎每个模块都有 CRUD 增删改查的功能，而这些功能的实现代码往往是大同小异的。如果这些功能都要自己去手写，非常无聊枯燥，浪费时间且效率很低，还可能会写错。</p>
<p>所以这种重复性的代码，项目提供了 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen" target="_blank" rel="noopener noreferrer">codegen (opens new window)</a>代码生成器，只需要在数据库中设计好表结构，就可以一键生成前后端代码 + 单元测试 + Swagger 接口文档 + Validator 参数校验。</p>
<p>下面，我们使用代码生成器，在 <code>yudao-module-system</code> 模块中，开发一个【<strong>用户组</strong>】的功能。</p>
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/new-feature/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07Jm2vrzJ" target="_blank" rel="noopener noreferrer">从零开始 05：如何 5 分钟，开发一个新功能？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_1-数据库表结构设计"><span></span></a><a href="https://doc.iocoder.cn/new-feature/#_1-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener noreferrer">#</a>1. 数据库表结构设计</h2>
<p>设计用户组的数据库表名为 <code>system_group</code>，其建表语句如下：</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">system_group</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `id`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> bigint</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> AUTO_INCREMENT COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'编号'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `name`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">255</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'名字'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `description`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">512</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'描述'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `status`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> tinyint</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'状态'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `creator`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'创建者'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `create_time`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'创建时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `updater`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'更新者'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `update_time`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#C678DD;--shiki-dark:#C678DD"> UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'更新时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `deleted`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> bit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> b</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'是否删除'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">    `tenant_id`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> bigint</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> '0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'租户编号'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#98C379;--shiki-dark:#98C379">`id`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">USING</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> BTREE</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) ENGINE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">InnoDB </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CHARSET</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">utf8mb4_unicode_ci COMMENT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'用户组'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><figure><img src="https://doc.iocoder.cn/img/代码生成/01.png" alt="建表语句" tabindex="0" loading="lazy"><figcaption>建表语句</figcaption></figure>
<p>① 表名的前缀，要和 Maven Module 的模块名保持一致。例如说，用户组在 <code>yudao-module-system</code> 模块，所以表名的前缀是 <code>system_</code>。</p>
<p>疑问：为什么要保持一致？</p>
<p>代码生成器会自动解析表名的前缀，获得其所属的 Maven Module 模块，简化配置过程。</p>
<p>② 设置 ID 主键，一般推荐使用 <code>bigint</code> 长整形，并设置自增长。</p>
<p>③ 正确设置每个字段是否允许空，代码生成器会根据它生成参数是否允许空的校验规则。</p>
<p>④ 正确设置注释，代码生成器会根据它生成字段名与提示等信息。</p>
<p>⑤ 添加 <code>creator</code>、<code>create_time</code>、<code>updater</code>、<code>update_time</code>、<code>deleted</code> 是必须设置的系统字段；如果开启多租户的功能，并且该表需要多租户的隔离，则需要添加 <code>tenant_id</code> 字段。</p>
<h2><a class="header-anchor" href="#_2-代码生成"><span></span></a><a href="https://doc.iocoder.cn/new-feature/#_2-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90" target="_blank" rel="noopener noreferrer">#</a>2. 代码生成</h2>
<p>① 点击 [基础设施 -&gt; 代码生成] 菜单，点击 [基于 DB 导入] 按钮，选择 <code>system_group</code> 表，后点击 [确认] 按钮。</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/02.png" alt="基于 DB 导入" tabindex="0" loading="lazy"><figcaption>基于 DB 导入</figcaption></figure>
<p>代码实现？</p>
<p>可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen/inner/CodegenBuilder.java" target="_blank" rel="noopener noreferrer">CodegenBuilder (opens new window)</a>类，自动解析数据库的表结构，生成默认的配置。</p>
<p>② 点击 <code>system_group</code> 所在行的 [编辑] 按钮，修改生成配置。后操作如下：</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/03.png" alt="基本信息" tabindex="0" loading="lazy"><figcaption>基本信息</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/代码生成/04.png" alt="字段信息" tabindex="0" loading="lazy"><figcaption>字段信息</figcaption></figure>
<ul>
<li>将 <code>status</code> 字段的显示类型为【下拉框】，字典类型为【系统状态】。</li>
<li>将 <code>description</code> 字段的【查询】取消。</li>
<li>将 <code>id</code>、<code>name</code>、<code>description</code>、<code>status</code> 字段的【示例】填写上。</li>
</ul>
<p>字段信息</p>
<ul>
<li>插入：新增时，是否传递该字段。</li>
<li>编辑：修改时，是否传递该字段。</li>
<li>列表：Table 表格，是否展示该字段。</li>
<li>查询：搜索框，是否支持该字段查询，查询的条件是什么。</li>
<li>允许空：新增或修改时，是否必须传递该字段，用于 Validator 参数校验。</li>
<li>字典类型：在显示类型是下拉框、单选框、复选框时，选择使用的字典。</li>
<li>示例：参数示例，用于 Swagger 接口文档的 <code>example</code> 示例。</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/代码生成/05.png" alt="生成信息" tabindex="0" loading="lazy"><figcaption>生成信息</figcaption></figure>
<ul>
<li>将【上级菜单】设置为【系统管理】。</li>
<li>将【前端类型】设置为【Vue2 Element UI 标准模版】或【Vue3 Element Plus 标准模版】，具体根据你使用哪种管理后台。</li>
</ul>
<p>生成信息</p>
<ul>
<li>生成场景：分成管理后台、用户 App 两种，用于生成 Controller 放在 <code>admin</code> 还是 <code>app</code> 包。</li>
<li>上级菜单：生成场景是管理后台时，需要设置其所属的上级菜单。</li>
<li>前端类型： 提供多种 UI 模版。
<ul>
<li>【Vue3 Element Plus Schema 模版】，对应 <a href="https://doc.iocoder.cn/vue3/crud-schema" target="_blank" rel="noopener noreferrer">《前端手册 Vue 3.X —— CRUD 组件》</a> 说明。</li>
<li>后端的 <code>application.yaml</code> 配置文件中的 <code>yudao.codegen.front-type</code> 配置项，设置默认的 UI 模版，避免每次都需要设置。</li>
</ul>
</li>
</ul>
<p>完成后，点击 [提交] 按钮，保存生成配置。</p>
<p>③ 点击 <code>system_group</code> 所在行的 [预览] 按钮，在线预览生成的代码，检查是否符合预期。</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/06.png" alt="生成信息" tabindex="0" loading="lazy"><figcaption>生成信息</figcaption></figure>
<p>④ 点击 <code>system_group</code> 所在行的 [生成代码] 按钮，下载生成代码的压缩包，双击进行解压。</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/07.png" alt="生成代码" tabindex="0" loading="lazy"><figcaption>生成代码</figcaption></figure>
<p>代码实现？</p>
<p>可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen/inner/CodegenEngine.java" target="_blank" rel="noopener noreferrer">CodegenEngine (opens new window)</a>类，基于 Velocity 模板引擎，生成具体代码。模板文件，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-infra/yudao-module-infra-biz/src/main/resources/codegen" target="_blank" rel="noopener noreferrer"><code>resources/codegen</code> (opens new window)</a>目录。</p>
<h2><a class="header-anchor" href="#_3-代码运行"><span></span></a><a href="https://doc.iocoder.cn/new-feature/#_3-%E4%BB%A3%E7%A0%81%E8%BF%90%E8%A1%8C" target="_blank" rel="noopener noreferrer">#</a>3. 代码运行</h2>
<p>本小节，我们将生成的代码，复制到项目中，并进行运行。</p>
<h3><a class="header-anchor" href="#_3-1-后端运行"><span></span></a><a href="https://doc.iocoder.cn/new-feature/#_3-1-%E5%90%8E%E7%AB%AF%E8%BF%90%E8%A1%8C" target="_blank" rel="noopener noreferrer">#</a>3.1 后端运行</h3>
<p>① 将生成的后端代码，复制到项目中。操作如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/10.png" alt="复制后端" tabindex="0" loading="lazy"><figcaption>复制后端</figcaption></figure>
<p>② 将 <code>ErrorCodeConstants.java_手动操作</code> 文件的错误码，复制到该模块 ErrorCodeConstants 类中，并设置对应的错误码编号，之后进行删除。操作如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/11.png" alt="添加错误码" tabindex="0" loading="lazy"><figcaption>添加错误码</figcaption></figure>
<p>③ 将 <code>h2.sql</code> 的 CREATE 语句复制到该模块的 <code>create_tables.sql</code> 文件，DELETE 语句复制到该模块的 <code>clean.sql</code>。操作如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/12.png" alt="复制 h2 SQL" tabindex="0" loading="lazy"><figcaption>复制 h2 SQL</figcaption></figure>
<p>疑问：<code>create_tables.sql</code> 和 <code>clean.sql</code> 文件的作用是什么？</p>
<p>项目的单元测试，需要使用到 H2 内存数据库，<code>create_tables.sql</code> 用于创建所有的表结构，<code>clean.sql</code> 用于每个单元测试的方法跑完后清理数据。</p>
<p>然后，运行 GroupServiceImplTest 单元测试，执行通过。</p>
<p>④ 打开数据库工具，运行代码生成的 <code>sql/sql.sql</code> 文件，用于菜单的初始化。</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/13.png" alt="初始化菜单" tabindex="0" loading="lazy"><figcaption>初始化菜单</figcaption></figure>
<p>⑤ Debug 运行 YudaoServerApplication 类，启动后端项目。通过 IDEA 的 [Actuator -&gt; Mappings] 菜单，可以看到代码生成的 GroupController 的 RESTful API 接口已经生效。</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/14.png" alt="RESTful API 接口" tabindex="0" loading="lazy"><figcaption>RESTful API 接口</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-前端运行"><span></span></a><a href="https://doc.iocoder.cn/new-feature/#_3-2-%E5%89%8D%E7%AB%AF%E8%BF%90%E8%A1%8C" target="_blank" rel="noopener noreferrer">#</a>3.2 前端运行</h3>
<p>① 将生成的前端代码，复制到项目中。操作如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/15.png" alt="复制前端" tabindex="0" loading="lazy"><figcaption>复制前端</figcaption></figure>
<p>② <strong>重新</strong>执行 <code>npm run dev</code> 命令，启动前端项目。点击 [系统管理 -&gt; 用户组管理] 菜单，就可以看到用户组的 UI 界面。</p>
<figure><img src="https://doc.iocoder.cn/img/代码生成/16.png" alt="前端界面" tabindex="0" loading="lazy"><figcaption>前端界面</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/01.png" type="image/png"/>
    </item>
    <item>
      <title>本地缓存</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/20.%E6%9C%AC%E5%9C%B0%E7%BC%93%E5%AD%98.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/20.%E6%9C%AC%E5%9C%B0%E7%BC%93%E5%AD%98.html</guid>
      <source url="https://springg.us.kg/rss.xml">本地缓存</source>
      <description>本地缓存 重要说明： ① 由于大家普遍反馈，“本地缓存”学习成本太高，一般 Redis 缓存足够满足大多数场景的性能要求，所以基本使用 Spring Cache + Redis 所替代。 也因此，本章节更多的，是讲解如何在项目中使用本地缓存。如果你不需要本地缓存，可以忽略本章节。 ② 项目中还保留了部分地方使用本地缓存，例如说：短信客户端、文件客户端、...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>重要说明：</p>
<p>① 由于大家普遍反馈，“本地缓存”学习成本太高，一般 Redis 缓存足够满足大多数场景的性能要求，所以基本使用 <a href="https://doc.iocoder.cn/redis-cache" target="_blank" rel="noopener noreferrer">Spring Cache</a> + Redis 所替代。</p>
<p>也因此，本章节更多的，是讲解如何在项目中使用本地缓存。如果你不需要本地缓存，可以忽略本章节。</p>
<p>② 项目中还保留了部分地方使用本地缓存，例如说：短信客户端、文件客户端、敏感词等。主要原因是，它们是“有状态”的 Java 对象，无法缓存到 Redis 中。</p>
<p>系统使用本地缓存，提升公用逻辑的执行性能。 例如说：</p>
<ul>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/tenant/TenantServiceImpl.java" target="_blank" rel="noopener noreferrer">租户模块 (opens new window)</a>缓存租户信息，每次 RESTful API 校验租户是否禁用、过期时，无需读库。</li>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/dept/DeptServiceImpl.java" target="_blank" rel="noopener noreferrer">部门模块 (opens new window)</a>缓存部门信息，每次数据权限校验时，无需读库。</li>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/PermissionServiceImpl.java" target="_blank" rel="noopener noreferrer">权限模块 (opens new window)</a>缓存权限信息，每次功能权限校验时，无需读库。</li>
</ul>
<h2><a class="header-anchor" href="#_1-实现原理"><span></span></a><a href="https://doc.iocoder.cn/local-cache/#_1-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>1. 实现原理</h2>
<p>本地缓存的实现，一共有两步，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/本地缓存/04.png" alt="整体流程" tabindex="0" loading="lazy"><figcaption>整体流程</figcaption></figure>
<ul>
<li>项目启动时，初始化缓存：从数据库中读取数据，写入到本地缓存（例如说一个 Map 对象）</li>
<li>数据变化时，实时刷新缓存：（例如说通过管理后台修改数据）重新从数据库中读取数据，重新写入到本地缓存</li>
</ul>
<h2><a class="header-anchor" href="#_2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/local-cache/#_2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2. 实战案例</h2>
<p>以 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/RoleServiceImpl.java" target="_blank" rel="noopener noreferrer">角色模块 (opens new window)</a>为例，讲解如何实现角色信息的本地缓存。</p>
<h3><a class="header-anchor" href="#_2-1-初始化缓存"><span></span></a><a href="https://doc.iocoder.cn/local-cache/#_2-1-%E5%88%9D%E5%A7%8B%E5%8C%96%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">#</a>2.1 初始化缓存</h3>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/RoleService.java" target="_blank" rel="noopener noreferrer">RoleService (opens new window)</a>接口中，定义 <code>#initLocalCache()</code> 方法。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// RoleService.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 初始化角色的本地缓存</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> initLocalCache</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
</div><p>为什么要定义接口方法？</p>
<p>稍后实时刷新缓存时，会调用 RoleService 接口的该方法。</p>
<p>② 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/RoleServiceImpl.java" target="_blank" rel="noopener noreferrer">RoleServiceImpl (opens new window)</a>类中，实现 <code>#initLocalCache()</code> 方法，通过 <code>@PostConstruct</code> 注解，在项目启动时进行本地缓存的初始化。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// RoleServiceImpl.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 角色缓存</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * key：角色编号 {</span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@link</span><span style="color:#E5C07B;font-style:italic;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic"> RoleDO</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">getId()</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 这里声明 volatile 修饰的原因是，每次刷新时，直接修改指向</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Getter</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">private</span><span style="color:#C678DD;--shiki-dark:#C678DD"> volatile</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Long</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RoleDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> roleCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 初始化 {@link #roleCache} 缓存</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostConstruct</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> initLocalCache</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 注意：忽略自动多租户，因为要全局初始化缓存</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    TenantUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">executeIgnore</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(() </span><span style="color:#C678DD;--shiki-dark:#C678DD">-&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 第一步：查询数据</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RoleDO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">roleList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> roleMapper</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">selectList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"[initLocalCache][缓存角色，数量为:{}]"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">roleList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 第二步：构建缓存</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        roleCache </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CollectionUtils</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">convertMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(roleList, RoleDO</span><span style="color:#C678DD;--shiki-dark:#C678DD">::</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">getId);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    });</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>疑问：为什么使用 TenantUtils 的 executeIgnore 方法来执行逻辑？</p>
<p>由于 RoleDO 是多租户隔离，如果使用 TenantUtils 方法，会导致缓存刷新时，只加载某个租户的角色数据，导致本地缓存的错误。</p>
<p>所以，如果缓存的数据不存在多租户隔离的情况，可以不使用 TenantUtils 方法！！！！</p>
<h3><a class="header-anchor" href="#_2-2-实时刷新缓存"><span></span></a><a href="https://doc.iocoder.cn/local-cache/#_2-2-%E5%AE%9E%E6%97%B6%E5%88%B7%E6%96%B0%E7%BC%93%E5%AD%98" target="_blank" rel="noopener noreferrer">#</a>2.2 实时刷新缓存</h3>
<p>为什么需要使用 Redis Pub/Sub 来实时刷新缓存？考虑到高可用，线上会部署多个 JVM 实例，需要通过 Redis 广播到所有实例，实现本地缓存的刷新。</p>
<figure><img src="https://doc.iocoder.cn/img/本地缓存/02.png" alt="实时刷新缓存" tabindex="0" loading="lazy"><figcaption>实时刷新缓存</figcaption></figure>
<p>友情提示：</p>
<p>Redis Pub/Sub 的使用与讲解，可见 <a href="https://doc.iocoder.cn/message-queue" target="_blank" rel="noopener noreferrer">《开发指南 —— 消息队列》</a> 文档。</p>
<h4><a class="header-anchor" href="#_2-2-1-rolerefreshmessage"><span></span></a><a href="https://doc.iocoder.cn/local-cache/#_2-2-1-rolerefreshmessage" target="_blank" rel="noopener noreferrer">#</a>2.2.1 RoleRefreshMessage</h4>
<p>新建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/a426384d41/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/message/permission/RoleRefreshMessage.java" target="_blank" rel="noopener noreferrer">RoleRefreshMessage (opens new window)</a>类，角色数据刷新 Message。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Data</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">EqualsAndHashCode</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">callSuper</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RoleRefreshMessage</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AbstractChannelMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getChannel</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#98C379;--shiki-dark:#98C379"> "system.role.refresh"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><h4><a class="header-anchor" href="#_2-2-2-roleproducer"><span></span></a><a href="https://doc.iocoder.cn/local-cache/#_2-2-2-roleproducer" target="_blank" rel="noopener noreferrer">#</a>2.2.2 RoleProducer</h4>
<p>① 新建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/a426384d41/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/producer/permission/RoleProducer.java" target="_blank" rel="noopener noreferrer">RoleProducer (opens new window)</a>类，RoleRefreshMessage 的 Producer 生产者。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Component</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RoleProducer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Resource</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RedisMQTemplate</span><span style="color:#E06C75;--shiki-dark:#E06C75"> redisMQTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 发送 {@link RoleRefreshMessage} 消息</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> sendRoleRefreshMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        RoleRefreshMessage</span><span style="color:#E06C75;--shiki-dark:#E06C75"> message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> RoleRefreshMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        redisMQTemplate</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(message);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 在数据的新增 / 修改 / 删除等写入操作时，需要使用 RoleProducer 发送消息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/本地缓存/03.png" alt="调用 RoleProducer 示例" tabindex="0" loading="lazy"><figcaption>调用 RoleProducer 示例</figcaption></figure>
<h4><a class="header-anchor" href="#_2-2-3-rolerefreshconsumer"><span></span></a><a href="https://doc.iocoder.cn/local-cache/#_2-2-3-rolerefreshconsumer" target="_blank" rel="noopener noreferrer">#</a>2.2.3 RoleRefreshConsumer</h4>
<p>新建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/a426384d41/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/consumer/permission/RoleRefreshConsumer.java" target="_blank" rel="noopener noreferrer">RoleRefreshConsumer (opens new window)</a>类，RoleRefreshMessage 的 Consumer 消费者，刷新本地缓存。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Component</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Slf4j</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RoleRefreshConsumer</span><span style="color:#C678DD;--shiki-dark:#C678DD"> extends</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AbstractChannelMessageListener</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RoleRefreshMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Resource</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> RoleService</span><span style="color:#E06C75;--shiki-dark:#E06C75"> roleService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> onMessage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RoleRefreshMessage</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> message</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        log</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">info</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"[onMessage][收到 Role 刷新消息]"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        roleService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">initLocalCache</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>上次更新: 2023/03/03, 22:14:22</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%9C%AC%E5%9C%B0%E7%BC%93%E5%AD%98/04.png" type="image/png"/>
    </item>
    <item>
      <title>异步任务</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/21.%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/21.%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1.html</guid>
      <source url="https://springg.us.kg/rss.xml">异步任务</source>
      <description>异步任务 yudao-spring-boot-starter-job (opens new window)技术组件，除了提供定时任务的功能，还提供了 Async 异步任务的能力。系统使用异步任务，提升执行效率。例如说： 操作日志模块 (opens new window)，异步记录【操作日志】 访问日志模块 (opens new window)，异步记录...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-job</code> (opens new window)</a>技术组件，除了提供定时任务的功能，还提供了 Async 异步任务的能力。系统使用异步任务，提升执行效率。例如说：</p>
<ul>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/logger/OperateLogServiceImpl.java#L42-L56" target="_blank" rel="noopener noreferrer">操作日志模块 (opens new window)</a>，异步记录【操作日志】</li>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/logger/ApiAccessLogServiceImpl.java#L39-L44" target="_blank" rel="noopener noreferrer">访问日志模块 (opens new window)</a>，异步记录【访问日志】</li>
</ul>
<p>友情提示：</p>
<p>如果你未学习过 Spring 异步任务，可以后续阅读 <a href="https://www.iocoder.cn/Spring-Boot/Async-Job/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 异步任务入门 》 (opens new window)</a>文章。</p>
<h2><a class="header-anchor" href="#_1-async-配置"><span></span></a><a href="https://doc.iocoder.cn/async-task/#_1-async-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1. Async 配置</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/src/main/java/cn/iocoder/yudao/framework/quartz/config/YudaoAsyncAutoConfiguration.java" target="_blank" rel="noopener noreferrer">YudaoAsyncAutoConfiguration (opens new window)</a>配置类，设置使用 <a href="https://github.com/alibaba/transmittable-thread-local" target="_blank" rel="noopener noreferrer">TransmittableThreadLocal (opens new window)</a>，解决异步执行时上下文传递的问题。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/异步任务/01.png" alt="YudaoAsyncAutoConfiguration 配置" tabindex="0" loading="lazy"><figcaption>YudaoAsyncAutoConfiguration 配置</figcaption></figure>
<p>友情提示：</p>
<p>项目使用到 ThreadLocal 的地方，建议都使用 TransmittableThreadLocal 进行替换。</p>
<h2><a class="header-anchor" href="#_2-引入依赖"><span></span></a><a href="https://doc.iocoder.cn/async-task/#_2-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96" target="_blank" rel="noopener noreferrer">#</a>2. 引入依赖</h2>
<p>以访问日志模块为例，讲解它如何使用异步任务，实现异步记录【访问日志】的功能。</p>
<h3><a class="header-anchor" href="#_2-1-引入依赖"><span></span></a><a href="https://doc.iocoder.cn/async-task/#_2-1-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96" target="_blank" rel="noopener noreferrer">#</a>2.1 引入依赖</h3>
<p>在 <code>yudao-module-system-infra</code> 模块中，引入 <code>yudao-spring-boot-starter-job</code> 技术组件。如下所示：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-job&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_2-2-添加-async-注解"><span></span></a><a href="https://doc.iocoder.cn/async-task/#_2-2-%E6%B7%BB%E5%8A%A0-async-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2.2 添加 @Async 注解</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/logger/ApiAccessLogServiceImpl.java#L39-L44" target="_blank" rel="noopener noreferrer">ApiAccessLogServiceImpl (opens new window)</a>的 <code>#createApiAccessLogAsync(...)</code> 方法上，添加 <code>@Async</code> 注解，声明它要异步执行。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/异步任务/02.png" alt="ApiAccessLogServiceImpl 类" tabindex="0" loading="lazy"><figcaption>ApiAccessLogServiceImpl 类</figcaption></figure>
<h3><a class="header-anchor" href="#_2-3-测试调用"><span></span></a><a href="https://doc.iocoder.cn/async-task/#_2-3-%E6%B5%8B%E8%AF%95%E8%B0%83%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>2.3 测试调用</h3>
<p>随便请求一个 RESTful API 接口，可以看到在异步任务的线程池中，进行了访问日志的记录。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/异步任务/03.png" alt="IDEA 控制台" tabindex="0" loading="lazy"><figcaption>IDEA 控制台</figcaption></figure>
<p>上次更新: 2022/04/22, 00:36:05</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1/01.png" type="image/png"/>
    </item>
    <item>
      <title>配置管理</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/22.%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/22.%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86.html</guid>
      <source url="https://springg.us.kg/rss.xml">配置管理</source>
      <description>配置管理 在 [基础设施 -&amp;gt; 配置管理] 菜单，可以查看和管理配置，适合业务上需要动态的管理某个配置。 例如说：创建用户时，需要配置用户的默认密码，这个密码是不会变的，但是有时候需要修改这个默认密码，这个时候就可以通过配置管理来修改。 配置中心配置中心 对应的后端代码是 yudao-module-infra 的 config (opens new w...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>在 [基础设施 -&gt; 配置管理] 菜单，可以查看和管理配置，适合业务上需要动态的管理某个配置。</p>
<p>例如说：创建用户时，需要配置用户的默认密码，这个密码是不会变的，但是有时候需要修改这个默认密码，这个时候就可以通过配置管理来修改。</p>
<figure><img src="https://doc.iocoder.cn/img/配置中心/01.png" alt="配置中心" tabindex="0" loading="lazy"><figcaption>配置中心</figcaption></figure>
<p>对应的后端代码是 <code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/config/" target="_blank" rel="noopener noreferrer"><code>config</code> (opens new window)</a>业务模块。</p>
<h2><a class="header-anchor" href="#_1-配置的表结构"><span></span></a><a href="https://doc.iocoder.cn/config-center/#_1-%E9%85%8D%E7%BD%AE%E7%9A%84%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 配置的表结构</h2>
<p><code>infra_config</code> 的表结构如下：</p>
<div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">CREATE</span><span style="color:#C678DD;--shiki-dark:#C678DD"> TABLE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> `</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">infra_config</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">` (</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `id`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> int</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> AUTO_INCREMENT COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'参数主键'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `group`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">50</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'参数分组'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `type`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> tinyint</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'参数类型'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `name`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'参数名称'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `key`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'参数键名'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `value`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'参数键值'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `sensitive`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> bit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'是否敏感'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `remark`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">500</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NULL</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'备注'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `creator`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'创建者'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `create_time`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'创建时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `updater`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> varchar</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">64</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">CHARACTER</span><span style="color:#C678DD;--shiki-dark:#C678DD"> SET</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> utf8mb4_unicode_ci </span><span style="color:#C678DD;--shiki-dark:#C678DD">DEFAULT</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'更新者'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `update_time`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> datetime</span><span style="color:#C678DD;--shiki-dark:#C678DD"> NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP </span><span style="color:#C678DD;--shiki-dark:#C678DD">ON</span><span style="color:#C678DD;--shiki-dark:#C678DD"> UPDATE</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'更新时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379">  `deleted`</span><span style="color:#C678DD;--shiki-dark:#C678DD"> bit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">NOT NULL</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> b</span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> COMMENT </span><span style="color:#98C379;--shiki-dark:#98C379">'是否删除'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">  PRIMARY KEY</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#98C379;--shiki-dark:#98C379">`id`</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#C678DD;--shiki-dark:#C678DD">USING</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> BTREE</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) ENGINE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">InnoDB AUTO_INCREMENT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#D19A66;--shiki-dark:#D19A66">8</span><span style="color:#C678DD;--shiki-dark:#C678DD"> DEFAULT</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> CHARSET</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">utf8mb4 </span><span style="color:#C678DD;--shiki-dark:#C678DD">COLLATE</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">utf8mb4_unicode_ci COMMENT</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#98C379;--shiki-dark:#98C379">'参数配置表'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li><code>key</code> 字段，对应到 Spring Boot 配置文件的配置项，例如说 <code>yudao.captcha.enable</code>、<code>sys.user.init-password</code> 等等。</li>
</ul>
<h2><a class="header-anchor" href="#_3-后端案例"><span></span></a><a href="https://doc.iocoder.cn/config-center/#_3-%E5%90%8E%E7%AB%AF%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>3. 后端案例</h2>
<p>TODO 芋艿：待补充</p>
<h2><a class="header-anchor" href="#_4-前端案例"><span></span></a><a href="https://doc.iocoder.cn/config-center/#_4-%E5%89%8D%E7%AB%AF%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>4. 前端案例</h2>
<p>后端提供了 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/controller/admin/config/ConfigController.java#L70-L82" target="_blank" rel="noopener noreferrer"><code>/admin-api/infra/config/get-value-by-key</code> (opens new window)</a>RESTful API 接口，返回指定配置项的值。前端的使用示例如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/配置中心/07-vue2.png" alt="前端案例" tabindex="0" loading="lazy"><figcaption>前端案例</figcaption></figure>
<p>上次更新: 2023/04/08, 00:13:01</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/01.png" type="image/png"/>
    </item>
    <item>
      <title>工具类 Util</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/23.%E5%B7%A5%E5%85%B7%E7%B1%BB%20Util.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/23.%E5%B7%A5%E5%85%B7%E7%B1%BB%20Util.html</guid>
      <source url="https://springg.us.kg/rss.xml">工具类 Util</source>
      <description>工具类 Util 本小节，介绍项目中使用到的工具类，避免大家重复造轮子。 #1. Hutool 项目使用 Hutool (opens new window)作为主工具库。Hutool 是国产的一个 Java 工具包，它可以帮助我们简化每一行代码，减少每一个方法，让 Java 语言也可以“甜甜的”。 yudao-common (opens new win...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本小节，介绍项目中使用到的工具类，避免大家重复造轮子。</p>
<h2><a class="header-anchor" href="#_1-hutool"><span></span></a><a href="https://doc.iocoder.cn/util/#_1-hutool" target="_blank" rel="noopener noreferrer">#</a>1. Hutool</h2>
<p>项目使用 <a href="https://www.bookstack.cn/read/hutool/a6819f05207359bb.md" target="_blank" rel="noopener noreferrer">Hutool (opens new window)</a>作为主工具库。Hutool 是国产的一个 Java 工具包，它可以帮助我们简化每一行代码，减少每一个方法，让 Java 语言也可以“甜甜的”。</p>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/" target="_blank" rel="noopener noreferrer"><code>yudao-common</code> (opens new window)</a>模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/util/" target="_blank" rel="noopener noreferrer"><code>util</code> (opens new window)</a>包作为辅工具库，以 Utils 结尾，补充 Hutool 缺少的工具能力。</p>
<p>友情提示：常用的工具类，使用 ⭐ 标记，需要的时候可以找找有没对应的工具方法。</p>
<p>| 作用          | Hutool                                                       | 芋道 Utils                                                   |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%B7%A5%E5%85%B7%E7%B1%BBUtil/01.png" type="image/png"/>
    </item>
    <item>
      <title>单元测试</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/24.%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/24.%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html</guid>
      <source url="https://springg.us.kg/rss.xml">单元测试</source>
      <description>单元测试 项目使用 Junit5 + Mockito 实现单元测试，提升代码质量、重复测试效率、部署可靠性等。 截止目前，项目已经有 500+ 测试用例。 内容推荐 如果你想系统学习单元测试，可以阅读《有效的单元测试》 (opens new window)这本书，非常适合 Java 工程师。 如果只是想学习 Spring Boot Test 的话，可以...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目使用 Junit5 + Mockito 实现单元测试，提升代码质量、重复测试效率、部署可靠性等。</p>
<p>截止目前，项目已经有 500+ 测试用例。</p>
<p>内容推荐</p>
<p>如果你想系统学习单元测试，可以阅读<a href="https://www.iocoder.cn/Architecture/books-recommended/?yudao" target="_blank" rel="noopener noreferrer">《有效的单元测试》 (opens new window)</a>这本书，非常适合 Java 工程师。</p>
<p>如果只是想学习 Spring Boot Test 的话，可以阅读 <a href="https://www.iocoder.cn/Spring-Boot/Unit-Test/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 单元测试 Test 入门 》 (opens new window)</a>文章。</p>
<h2><a class="header-anchor" href="#_1-测试组件"><span></span></a><a href="https://doc.iocoder.cn/unit-test/#_1-%E6%B5%8B%E8%AF%95%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>1.测试组件</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-test/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-test</code> (opens new window)</a>是项目提供的测试组件，用于单元测试、集成测试等等。</p>
<h3><a class="header-anchor" href="#_1-1-快速测试的基类"><span></span></a><a href="https://doc.iocoder.cn/unit-test/#_1-1-%E5%BF%AB%E9%80%9F%E6%B5%8B%E8%AF%95%E7%9A%84%E5%9F%BA%E7%B1%BB" target="_blank" rel="noopener noreferrer">#</a>1.1 快速测试的基类</h3>
<p>测试组件提供了 4 种单元测试的基类，通过继承它们，可以快速的构建单元测试的环境。</p>
<p>| 基类                                                         | 作用                                        |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/02.png" type="image/png"/>
    </item>
    <item>
      <title>分布式锁</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/25.%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/25.%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html</guid>
      <source url="https://springg.us.kg/rss.xml">分布式锁</source>
      <description>分布式锁 yudao-spring-boot-starter-protection (opens new window)技术组件，使用 Redis 实现分布式锁的功能，它有 2 种使用方式： 编程式锁：基于 Redisson (opens new window)框架提供的各种 (opens new window)分布式锁 声明式锁：基于 Lock4j ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-protection</code> (opens new window)</a>技术组件，使用 Redis 实现分布式锁的功能，它有 2 种使用方式：</p>
<ul>
<li>编程式锁：基于 <a href="https://github.com/redisson/redisson" target="_blank" rel="noopener noreferrer">Redisson (opens new window)</a>框架提供的<a href="https://github.com/redisson/redisson/wiki/8.-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8C%E5%90%8C%E6%AD%A5%E5%99%A8" target="_blank" rel="noopener noreferrer">各种 (opens new window)</a>分布式锁</li>
<li>声明式锁：基于 <a href="https://github.com/baomidou/lock4j" target="_blank" rel="noopener noreferrer">Lock4j (opens new window)</a>框架的 <code>@Lock4j</code> 注解</li>
</ul>
<p>Redis 分布式锁的实现原理？</p>
<p>参见 <a href="https://www.iocoder.cn/Redis/good-collection/?yudao" target="_blank" rel="noopener noreferrer">《Redis 实现原理与源码解析系列》 (opens new window)</a>文章。</p>
<h2><a class="header-anchor" href="#_1-编程式锁"><span></span></a><a href="https://doc.iocoder.cn/distributed-lock/#_1-%E7%BC%96%E7%A8%8B%E5%BC%8F%E9%94%81" target="_blank" rel="noopener noreferrer">#</a>1. 编程式锁</h2>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;org.redisson&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;redisson-spring-boot-starter&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_1-1-redisson-配置"><span></span></a><a href="https://doc.iocoder.cn/distributed-lock/#_1-1-redisson-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1.1 Redisson 配置</h3>
<p>无需配置。因为在 <a href="https://doc.iocoder.cn/redis-cache" target="_blank" rel="noopener noreferrer">Redis 缓存</a> 中，进行了 Spring Data Redis + Redisson 的配置。</p>
<h3><a class="header-anchor" href="#_1-2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/distributed-lock/#_1-2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>1.2 实战案例</h3>
<p><code>yudao-module-pay</code> 模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/service/notify/PayNotifyServiceImpl.java#L155-L174" target="_blank" rel="noopener noreferrer"><code>notify</code> (opens new window)</a>功能，使用到分布式锁，确保<strong>每个</strong>支付通知任务有且仅有一个在执行。下面，来看看这个案例是如何实现的。</p>
<p>友情提示：</p>
<p>建议你已经阅读过 <a href="https://doc.iocoder.cn/redis-cache" target="_blank" rel="noopener noreferrer">《开发指南 —— Redis 缓存》</a> 文档。</p>
<p>① 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/dal/redis/RedisKeyConstants.java" target="_blank" rel="noopener noreferrer">RedisKeyConstants (opens new window)</a>类中，定义通知任务使用的分布式锁的 Redis Key。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/分布式锁/01.png" alt="PAY_NOTIFY_LOCK" tabindex="0" loading="lazy"><figcaption>PAY_NOTIFY_LOCK</figcaption></figure>
<p>② 创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/dal/redis/notify/PayNotifyLockRedisDAO.java" target="_blank" rel="noopener noreferrer">PayNotifyLockRedisDAO (opens new window)</a>类，使用 RedisClient 实现分布式锁的加锁与解锁。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/分布式锁/02.png" alt="PayNotifyLockRedisDAO" tabindex="0" loading="lazy"><figcaption>PayNotifyLockRedisDAO</figcaption></figure>
<p>③ 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/service/notify/PayNotifyServiceImpl.java#L155-L174" target="_blank" rel="noopener noreferrer">PayNotifyServiceImpl (opens new window)</a>执行指定的支付通知任务时，通过 PayNotifyLockRedisDAO 获得分布式锁。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/分布式锁/03.png" alt="PayNotifyLockRedisDAO" tabindex="0" loading="lazy"><figcaption>PayNotifyLockRedisDAO</figcaption></figure>
<p>技术选型：为什么不使用 Lock4j 提供的 LockTemplate 实现编程式锁？</p>
<p>两者各有优势，选择 Redisson 主要考虑它支持的 Redis 分布式锁的类型较多：可靠性较高的红锁、性能较好的读写锁等等。</p>
<p>Lock4j 的 LockTemplate 也是不错的选择，一方面不强依赖 Redisson 框架，一方面支持 ZooKeeper 等等。</p>
<h2><a class="header-anchor" href="#_2-声明式锁"><span></span></a><a href="https://doc.iocoder.cn/distributed-lock/#_2-%E5%A3%B0%E6%98%8E%E5%BC%8F%E9%94%81" target="_blank" rel="noopener noreferrer">#</a>2. 声明式锁</h2>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;com.baomidou&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;lock4j-redisson-spring-boot-starter&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_2-1-lock4j-配置"><span></span></a><a href="https://doc.iocoder.cn/distributed-lock/#_2-1-lock4j-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>2.1 Lock4j 配置</h3>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L111-L114" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>lock4j</code> 配置项，添加 Lock4j 全局默认的分布式锁配置。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/分布式锁/04.png" alt="配置文件" tabindex="0" loading="lazy"><figcaption>配置文件</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-使用案例"><span></span></a><a href="https://doc.iocoder.cn/distributed-lock/#_2-2-%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2.2 使用案例</h3>
<p>在需要使用到分布式锁的方法上，添加 <code>@Lock4j</code> 注解，非常方便。示例代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 默认使用 lock4j 配置项</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Lock4j</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> simple</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        //do something</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 完全配置，支持 Spring EL 表达式</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Lock4j</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">keys</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> {</span><span style="color:#98C379;--shiki-dark:#98C379">"#user.id"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#98C379;--shiki-dark:#98C379"> "#user.name"</span><span style="color:#E06C75;--shiki-dark:#E06C75">}</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> expire</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 60000</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> acquireTimeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1000</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> User</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> customMethod</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> user</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> user;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上次更新: 2022/04/22, 22:48:53</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/01.png" type="image/png"/>
    </item>
    <item>
      <title>幂等性（防重复提交）</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/26.%E5%B9%82%E7%AD%89%E6%80%A7%EF%BC%88%E9%98%B2%E9%87%8D%E5%A4%8D%E6%8F%90%E4%BA%A4%EF%BC%89.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/26.%E5%B9%82%E7%AD%89%E6%80%A7%EF%BC%88%E9%98%B2%E9%87%8D%E5%A4%8D%E6%8F%90%E4%BA%A4%EF%BC%89.html</guid>
      <source url="https://springg.us.kg/rss.xml">幂等性（防重复提交）</source>
      <description>幂等性（防重复提交） yudao-spring-boot-starter-protection (opens new window)技术组件，由它的 idempotent (opens new window)包，提供声明式的幂等特性，可防止重复请求。例如说，用户快速的双击了某个按钮，前端没有禁用该按钮，导致发送了两次重复的请求。 #1. 实现原理 它的...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-protection</code> (opens new window)</a>技术组件，由它的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/src/main/java/cn/iocoder/yudao/framework/idempotent/" target="_blank" rel="noopener noreferrer"><code>idempotent</code> (opens new window)</a>包，提供声明式的幂等特性，可防止重复请求。例如说，用户快速的双击了某个按钮，前端没有禁用该按钮，导致发送了两次重复的请求。</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// UserController.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Idempotent</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> timeUnit</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TimeUnit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">SECONDS</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "正在添加用户中，请勿重复提交"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/user/create"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> createUser</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">User</span><span style="color:#E06C75;--shiki-dark:#E06C75"> user){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    userService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createUser</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(user);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#98C379;--shiki-dark:#98C379"> "添加成功"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_1-实现原理"><span></span></a><a href="https://doc.iocoder.cn/idempotent/#_1-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>1. 实现原理</h2>
<p>它的实现原理非常简单，针对相同参数的方法，一段时间内，有且仅能执行一次。执行流程如下：</p>
<p>① 在方法执行前，根据参数对应的 Key 查询是否存在。</p>
<ul>
<li>如果<strong>存在</strong>，说明正在执行中，则进行报错。</li>
<li>如果<strong>不在</strong>，则计算参数对应的 Key，存储到 Redis 中，并设置过期时间，即标记正在执行中。</li>
</ul>
<p>默认参数的 Redis Key 的计算规则由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/src/main/java/cn/iocoder/yudao/framework/idempotent/core/keyresolver/impl/DefaultIdempotentKeyResolver.java" target="_blank" rel="noopener noreferrer">DefaultIdempotentKeyResolver (opens new window)</a>实现，使用 MD5(方法名 + 方法参数)，避免 Redis Key 过长。</p>
<p>② 方法执行完成，<strong>不会</strong>主动删除参数对应的 Key。</p>
<p>如果希望会<strong>主动</strong>删除 Key，可以使用 <a href="https://doc.iocoder.cn/distributed-lock" target="_blank" rel="noopener noreferrer">《开发指南 —— 分布式锁》</a> 提供的 <code>@Lock</code> 来实现幂等性。</p>
<p>🙂 从本质上来说，<code>idempotent</code> 包提供的幂等特性，本质上也是基于 Redis 实现的分布式锁。</p>
<p>③ 如果方法执行时间较长，超过 Key 的过期时间，则 Redis 会自动删除对应的 Key。因此，需要大概评估下，避免方法的执行时间超过过期时间。</p>
<h2><a class="header-anchor" href="#_2-idempotent-注解"><span></span></a><a href="https://doc.iocoder.cn/idempotent/#_2-idempotent-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>2. <code>@Idempotent</code> 注解</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/src/main/java/cn/iocoder/yudao/framework/idempotent/core/annotation/Idempotent.java" target="_blank" rel="noopener noreferrer"><code>@Idempotent</code> (opens new window)</a>注解，声明在方法上，表示该方法需要开启幂等性。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/幂等性/01.png" alt=" 注解" tabindex="0" loading="lazy"><figcaption> 注解</figcaption></figure>
<p>① 对应的 AOP 切面是 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/src/main/java/cn/iocoder/yudao/framework/idempotent/core/aop/IdempotentAspect.java" target="_blank" rel="noopener noreferrer">IdempotentAspect (opens new window)</a>类，核心就 10 行左右的代码，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/幂等性/02.png" alt="IdempotentAspect 切面" tabindex="0" loading="lazy"><figcaption>IdempotentAspect 切面</figcaption></figure>
<p>② 对应的 Redis Key 的前缀是 <code>idempotent:%s</code>，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/src/main/java/cn/iocoder/yudao/framework/idempotent/core/redis/IdempotentRedisDAO.java" target="_blank" rel="noopener noreferrer">IdempotentRedisDAO (opens new window)</a>类，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/幂等性/03.png" alt="IdempotentRedisDAO 存储" tabindex="0" loading="lazy"><figcaption>IdempotentRedisDAO 存储</figcaption></figure>
<h2><a class="header-anchor" href="#_3-使用示例"><span></span></a><a href="https://doc.iocoder.cn/idempotent/#_3-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>3. 使用示例</h2>
<p>本小节，我们实现 <code>/admin-api/infra/test-demo/get</code> RESTful API 接口的幂等性。</p>
<p>① 在 <code>pom.xml</code> 文件中，引入 <code>yudao-spring-boot-starter-protection</code> 依赖。</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-protection&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 在 <code>/admin-api/infra/test-demo/get</code> RESTful API 接口的对应方法上，添加 <code>@Idempotent</code> 注解。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// TestDemoController.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/get"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Idempotent</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">timeout</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> message</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "重复请求，请稍后重试"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">TestDemoRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getTestDemo</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestParam</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"id"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> id) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // ... 省略代码</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>③ 调用 <code>/admin-api/infra/test-demo/get</code> RESTful API 接口，执行成功。</p>
<figure><img src="https://doc.iocoder.cn/img/幂等性/04.png" alt="调用成功" tabindex="0" loading="lazy"><figcaption>调用成功</figcaption></figure>
<p>④ 再次调用 <code>/admin-api/infra/test-demo/get</code> RESTful API 接口，被幂等性拦截，执行失败。</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">900</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "data"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">null</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "msg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">"重复请求，请稍后重试"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>上次更新: 2022/04/16, 01:42:17</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%B9%82%E7%AD%89%E6%80%A7/01.png" type="image/png"/>
    </item>
    <item>
      <title>数据库文档</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/27.%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E6%A1%A3.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/27.%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E6%A1%A3.html</guid>
      <source url="https://springg.us.kg/rss.xml">数据库文档</source>
      <description>数据库文档 yudao-module-infra 的 DatabaseDocController (opens new window)类，基于 Screw (opens new window)工具，生成数据库表结构的文档。 访问 [基础设施 -&amp;gt; 数据库文档] 菜单，可以查看项目的数据库文档。如下图所示： 基础设施 -&amp;gt; 数据库文档基础设施 -&amp;gt; 数据...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/controller/admin/db/DatabaseDocController.java" target="_blank" rel="noopener noreferrer">DatabaseDocController (opens new window)</a>类，基于 <a href="https://github.com/pingfangushi/screw" target="_blank" rel="noopener noreferrer">Screw (opens new window)</a>工具，生成数据库表结构的文档。</p>
<p>访问 [基础设施 -&gt; 数据库文档] 菜单，可以查看项目的数据库文档。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/数据库文档/01.png" alt="基础设施 -> 数据库文档" tabindex="0" loading="lazy"><figcaption>基础设施 -&gt; 数据库文档</figcaption></figure>
<p>关于 Screw 的使用讲解，可见 <a href="https://www.iocoder.cn/Spring-Boot/DB-Doc-screw/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 数据表结构文档 》 (opens new window)</a>文章。</p>
<p>上次更新: 2022/04/30, 23:33:19</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E6%A1%A3/01.png" type="image/png"/>
    </item>
    <item>
      <title>验证码</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/28.%E9%AA%8C%E8%AF%81%E7%A0%81.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/28.%E9%AA%8C%E8%AF%81%E7%A0%81.html</guid>
      <source url="https://springg.us.kg/rss.xml">验证码</source>
      <description>验证码 项目基于 AJ-Captcha (opens new window)实现行为验证码，包含滑动拼图、文字点选两种方式，UI 支持弹出和嵌入两种方式。如下图所示： 疑问：为什么采用行为验证码？ 相比传统的「传统字符型验证码」的“展示验证码-填写字符-比对答案”的流程来说，「行为验证码」的“展示验证码-操作-比对答案”的流程，用户只需要使用鼠标产生指...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目基于 <a href="https://gitee.com/anji-plus/captcha" target="_blank" rel="noopener noreferrer">AJ-Captcha (opens new window)</a>实现行为验证码，包含滑动拼图、文字点选两种方式，UI 支持弹出和嵌入两种方式。如下图所示：</p>
<p>| 滑动拼图                                                     | 文字点选                                                     |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E9%AA%8C%E8%AF%81%E7%A0%81/%E6%BB%91%E5%8A%A8%E6%8B%BC%E5%9B%BE.gif" type="image/gif"/>
    </item>
    <item>
      <title>功能权限</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/3.%E5%8A%9F%E8%83%BD%E6%9D%83%E9%99%90.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/3.%E5%8A%9F%E8%83%BD%E6%9D%83%E9%99%90.html</guid>
      <source url="https://springg.us.kg/rss.xml">功能权限</source>
      <description>功能权限 #👍 相关视频教程 功能权限 01：如何设计一套权限系统？(opens new window) 功能权限 02：如何实现菜单的创建？(opens new window) 功能权限 03：如何实现角色的创建？(opens new window) 功能权限 04：如何给用户分配权限 —— 将菜单赋予角色？(opens new window) 功...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#👍-相关视频教程"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#%F0%9F%91%8D-%E7%9B%B8%E5%85%B3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>👍 相关视频教程</h2>
<ul>
<li><a href="https://t.zsxq.com/07nYzrfyz" target="_blank" rel="noopener noreferrer">功能权限 01：如何设计一套权限系统？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07IuNBmAq" target="_blank" rel="noopener noreferrer">功能权限 02：如何实现菜单的创建？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07f6AuJuZ" target="_blank" rel="noopener noreferrer">功能权限 03：如何实现角色的创建？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07uJqV7Y3" target="_blank" rel="noopener noreferrer">功能权限 04：如何给用户分配权限 —— 将菜单赋予角色？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07YBe6QjA" target="_blank" rel="noopener noreferrer">功能权限 05：如何给用户分配权限 —— 将角色赋予用户？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/072ZVJurz" target="_blank" rel="noopener noreferrer">功能权限 06：后端如何实现 URL 权限的校验？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/07rnMRRn2" target="_blank" rel="noopener noreferrer">功能权限 07：前端如何实现菜单的动态加载？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/072JeIUfY" target="_blank" rel="noopener noreferrer">功能权限 08：前端如何实现按钮的权限校验？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_1-rbac-权限模型"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_1-rbac-%E6%9D%83%E9%99%90%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener noreferrer">#</a>1. RBAC 权限模型</h2>
<p>系统采用 RBAC 权限模型，全称是 Role-Based Access Control 基于角色的访问控制。</p>
<figure><img src="https://doc.iocoder.cn/img/功能权限/01.png" alt="权限模型" tabindex="0" loading="lazy"><figcaption>权限模型</figcaption></figure>
<p>简单来说，每个用户拥有若干角色，每个角色拥有若干个菜单，菜单中存在菜单权限、按钮权限。这样，就形成了 <strong>“用户&lt;-&gt;角色&lt;-&gt;菜单”</strong> 的授权模型。 在这种模型中，用户与角色、角色与菜单之间构成了多对多的关系，如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/功能权限/02.png" alt="权限模型" tabindex="0" loading="lazy"><figcaption>权限模型</figcaption></figure>
<h2><a class="header-anchor" href="#_2-token-认证机制"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_2-token-%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6" target="_blank" rel="noopener noreferrer">#</a>2. Token 认证机制</h2>
<p>安全框架使用的是 <a href="https://www.iocoder.cn/Spring-Boot/Spring-Security/?yudao" target="_blank" rel="noopener noreferrer">Spring Security (opens new window)</a>+ Token 方案，整体流程如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/功能权限/03.png" alt="Token 认证机制" tabindex="0" loading="lazy"><figcaption>Token 认证机制</figcaption></figure>
<p>① 前端调用登录接口，使用账号密码获得到认证 Token。响应示例如下：</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "code"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "msg"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">""</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  "data"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    "token"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">"d2a3cdbc6c53470db67a582bd115103f"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><ul>
<li>管理后台的登录实现，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L56-L63" target="_blank" rel="noopener noreferrer">代码(opens new window)</a></li>
<li>用户 App 的登录实现，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/controller/app/auth/AppAuthController.java#L34-L41" target="_blank" rel="noopener noreferrer">代码(opens new window)</a></li>
</ul>
<p>疑问：为什么不使用 Spring Security 内置的表单登录？</p>
<p>Spring Security 的登录拓展起来不方便，例如说验证码、三方登录等等。</p>
<p>Token 存储在数据库中，对应 <code>system_oauth2_access_token</code> 访问令牌表的 <code>id</code> 字段。考虑到访问的性能，缓存在 Redis 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/redis/RedisKeyConstants.java#L21" target="_blank" rel="noopener noreferrer"><code>oauth2_access_token:%s</code> (opens new window)</a>键中。</p>
<p>疑问：为什么不使用 JWT(JSON Web Token)？</p>
<p>JWT 是无状态的，无法实现 Token 的作废，例如说用户登出系统、修改密码等等场景。</p>
<p>推荐阅读 <a href="https://www.iocoder.cn/Fight/Confused-about-cookies-sessions,-Tokens-JWT/?yudao" target="_blank" rel="noopener noreferrer">《还分不清 Cookie、Session、Token、JWT？》 (opens new window)</a>文章。</p>
<p>默认配置下，Token 有效期为 30 天，可通过 <code>system_oauth2_client</code> 表中 <code>client_id = default</code> 的记录进行自定义：</p>
<figure><img src="https://doc.iocoder.cn/img/功能权限/04.png" alt=" 表" tabindex="0" loading="lazy"><figcaption> 表</figcaption></figure>
<ul>
<li>修改 <code>access_token_validity_seconds</code> 字段，设置访问令牌的过期时间，默认 1800 秒 = 30 分钟</li>
<li>修改 <code>refresh_token_validity_seconds</code> 字段，设置刷新令牌的过期时间，默认 43200 秒 = 30 天</li>
</ul>
<p>② 前端调用其它接口，需要在请求头带上 Token 进行访问。请求头格式如下：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### Authorization: Bearer 登录时返回的 Token</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Authorization:</span><span style="color:#98C379;--shiki-dark:#98C379"> Bearer</span><span style="color:#98C379;--shiki-dark:#98C379"> d2a3cdbc6c53470db67a582bd115103f</span></span></code></pre>
</div><ul>
<li>具体的代码实现，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-security/src/main/java/cn/iocoder/yudao/framework/security/core/filter/TokenAuthenticationFilter.java" target="_blank" rel="noopener noreferrer">TokenAuthenticationFilter (opens new window)</a>过滤器</li>
</ul>
<p>考虑到使用 Postman、Swagger 调试接口方便，提供了 <strong>Token 的模拟机制</strong>。请求头格式如下：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### Authorization: Bearer test用户编号</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">Authorization:</span><span style="color:#98C379;--shiki-dark:#98C379"> Bearer</span><span style="color:#98C379;--shiki-dark:#98C379"> test1</span></span></code></pre>
</div><p>其中 <code>"test"</code> 可自定义，配置项如下：</p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">### application-local.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">yudao</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  security</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    mock-enable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # 是否开启 Token 的模拟机制</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    mock-secret</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">test</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # Token 模拟机制的 Token 前缀</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_3-权限注解"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_3-%E6%9D%83%E9%99%90%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>3. 权限注解</h2>
<h3><a class="header-anchor" href="#_3-1-preauthorize-注解"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_3-1-preauthorize-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>3.1 @PreAuthorize 注解</h3>
<p><a href="https://github.com/spring-projects/spring-security/blob/main/core/src/main/java/org/springframework/security/access/prepost/PreAuthorize.java" target="_blank" rel="noopener noreferrer"><code>@PreAuthorize</code> (opens new window)</a>是 Spring Security 内置的<strong>前置</strong>权限注解，添加在<strong>接口方法</strong>上，声明需要的权限，实现访问权限的控制。</p>
<p>① 基于【权限标识】的权限控制</p>
<p>权限标识，对应 <code>system_menu</code> 表的 <code>permission</code> 字段，推荐格式为 <code>${系统}:${模块}:${操作}</code>，例如说 <code>system:admin:add</code> 标识 system 服务的添加管理员。</p>
<p>使用示例如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 符合 system:user:list 权限要求</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PreAuthorize</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"@ss.hasPermission('system:user:list')"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 符合 system:user:add 或 system:user:edit 权限要求即可</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PreAuthorize</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"@ss.hasAnyPermissions('system:user:add,system:user:edit')"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span></code></pre>
</div><p>② 基于【角色标识】的权限控制</p>
<p>权限标识，对应 <code>system_role</code> 表的 <code>code</code> 字段， 例如说 <code>super_admin</code> 超级管理员、<code>tenant_admin</code> 租户管理员。</p>
<p>使用示例如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 属于 user 角色</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PreAuthorize</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"@ss.hasRole('user')"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 属于 user 或者 admin 之一</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PreAuthorize</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"@ss.hasAnyRoles('user,admin')"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span></code></pre>
</div><p>实现原理是什么？</p>
<p>当 <code>@PreAuthorize</code> 注解里的 Spring EL 表达式返回 <code>false</code> 时，表示没有权限。</p>
<p>而 <code>@PreAuthorize("@ss.hasPermission('system:user:list')")</code> 表示调用 Bean 名字为 <code>ss</code> 的 <code>#hasPermission(...)</code> 方法，方法参数为 <code>"system:user:list"</code> 字符串。<code>ss</code> 对应的 Bean 是 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/PermissionServiceImpl.java#L43" target="_blank" rel="noopener noreferrer">PermissionServiceImpl (opens new window)</a>类，所以你只需要去看该方法的<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/permission/PermissionServiceImpl.java#L293-L326" target="_blank" rel="noopener noreferrer">实现代码 (opens new window)</a>。</p>
<h3><a class="header-anchor" href="#_3-2-preauthenticated-注解"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_3-2-preauthenticated-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>3.2 @PreAuthenticated 注解</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-security/src/main/java/cn/iocoder/yudao/framework/security/core/annotations/PreAuthenticated.java" target="_blank" rel="noopener noreferrer"><code>@PreAuthenticated</code> (opens new window)</a>是项目自定义的<strong>认证</strong>注解，添加在<strong>接口方法</strong>上，声明登录的用户才允许访问。</p>
<p>主要使用场景是，针对用户 App 的 <code>/app-app/**</code> 的 RESTful API 接口，默认是无需登录的，通过 <code>@PreAuthenticated</code> 声明它需要进行登录。使用示例如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// AppAuthController.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/update-password"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "修改用户密码"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "用户修改密码时使用"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PreAuthenticated</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">Boolean</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> updatePassword</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AppAuthUpdatePasswordReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // ... 省略代码</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>具体的代码实现，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-security/src/main/java/cn/iocoder/yudao/framework/security/core/aop/PreAuthenticatedAspect.java" target="_blank" rel="noopener noreferrer">PreAuthenticatedAspect (opens new window)</a>类。</p>
<h2><a class="header-anchor" href="#_4-自定义权限配置"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_4-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>4. 自定义权限配置</h2>
<p>默认配置下，管理后台的 <code>/admin-api/**</code> 所有 API 接口都<strong>必须</strong>登录后才允许访问，用户 App 的 <code>/app-api/**</code> 所有 API 接口<strong>无需</strong>登录就可以访问。</p>
<p>如下想要自定义权限配置，设置定义 API 接口可以匿名（不登录）进行访问，可以通过下面三种方式：</p>
<h3><a class="header-anchor" href="#_4-1-方式一-自定义-authorizerequestscustomizer-实现"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_4-1-%E6%96%B9%E5%BC%8F%E4%B8%80-%E8%87%AA%E5%AE%9A%E4%B9%89-authorizerequestscustomizer-%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>4.1 方式一：自定义 AuthorizeRequestsCustomizer 实现</h3>
<p>每个 Maven Module 可以实现自定义的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-security/src/main/java/cn/iocoder/yudao/framework/security/config/YudaoWebSecurityConfigurerAdapter.java" target="_blank" rel="noopener noreferrer">AuthorizeRequestsCustomizer (opens new window)</a>Bean，额外定义每个 Module 的 API 接口的访问规则。例如说 <code>yudao-module-infra</code> 模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/framework/security/config/SecurityConfiguration.java" target="_blank" rel="noopener noreferrer">SecurityConfiguration (opens new window)</a>类，代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Configuration</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"infraSecurityConfiguration"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SecurityConfiguration</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Value</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"${spring.boot.admin.context-path:''}"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> adminSeverContextPath</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Bean</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"infraAuthorizeRequestsCustomizer"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AuthorizeRequestsCustomizer</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> authorizeRequestsCustomizer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        return</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> AuthorizeRequestsCustomizer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Override</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> customize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ExpressionUrlAuthorizationConfigurer</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">HttpSecurity</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">ExpressionInterceptUrlRegistry</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> registry</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">                // Swagger 接口文档</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                registry</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/swagger-ui.html"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/swagger-resources/**"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/webjars/**"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/*/api-docs"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">                // Spring Boot Actuator 的安全配置</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                registry</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/actuator"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/actuator/**"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">                // Druid 监控</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                registry</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/druid/**"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">                // Spring Boot Admin Server 的安全配置</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">                registry</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(adminSeverContextPath).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                        .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">antMatchers</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(adminSeverContextPath </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">+</span><span style="color:#98C379;--shiki-dark:#98C379"> "/**"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">anonymous</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        };</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>友情提示</p>
<ul>
<li><code>permitAll()</code> 方法：所有用户可以任意访问，包括带上 Token 访问</li>
<li><code>anonymous()</code> 方法：匿名用户可以任意访问，带上 Token 访问会报错</li>
</ul>
<p>如果你对 Spring Security 了解不多，可以阅读艿艿写的 <a href="https://www.iocoder.cn/Spring-Boot/Spring-Security/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 安全框架 Spring Security 入门 》 (opens new window)</a>文章。</p>
<h3><a class="header-anchor" href="#_4-2-方式二-permitall-注解"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_4-2-%E6%96%B9%E5%BC%8F%E4%BA%8C-permitall-%E6%B3%A8%E8%A7%A3" target="_blank" rel="noopener noreferrer">#</a>4.2 方式二：<code>@PermitAll</code> 注解</h3>
<p>在 API 接口上添加 <a href="https://javaee.github.io/javaee-spec/javadocs/javax/annotation/security/PermitAll.html" target="_blank" rel="noopener noreferrer"><code>@PermitAll</code> (opens new window)</a>注解，示例如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// FileController.java</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/{configId}/get/{path}"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PermitAll</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getFileContent</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">HttpServletResponse</span><span style="color:#E06C75;--shiki-dark:#E06C75"> response</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                           @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PathVariable</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"configId"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> configId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                           @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PathVariable</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"path"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> path) throws Exception {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // ...</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_4-3-方式三-yudao-security-permit-all-urls-配置项"><span></span></a><a href="https://doc.iocoder.cn/resource-permission/#_4-3-%E6%96%B9%E5%BC%8F%E4%B8%89-yudao-security-permit-all-urls-%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noopener noreferrer">#</a>4.3 方式三：<code>yudao.security.permit-all-urls</code> 配置项</h3>
<p>在 <code>application.yaml</code> 配置文件，通过 <code>yudao.security.permit-all-urls</code> 配置项设置，示例如下：</p>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">yudao</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  security</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    permit-all-urls</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      - </span><span style="color:#98C379;--shiki-dark:#98C379">/admin-ui/**</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # /resources/admin-ui 目录下的静态资源</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      - </span><span style="color:#98C379;--shiki-dark:#98C379">/admin-api/xxx/yyy</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%8A%9F%E8%83%BD%E6%9D%83%E9%99%90/01.png" type="image/png"/>
    </item>
    <item>
      <title>数据权限</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/4.%E6%95%B0%E6%8D%AE%E6%9D%83%E9%99%90.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/4.%E6%95%B0%E6%8D%AE%E6%9D%83%E9%99%90.html</guid>
      <source url="https://springg.us.kg/rss.xml">数据权限</source>
      <description>数据权限 数据权限，实现指定用户可以操作指定范围的数据。例如说，针对员工信息的数据权限： 上述的这个示例，使用硬编码是可以实现的，并且也非常简单。但是，在业务快速迭代的过程中，类似这种数据需求会越来越多，如果全部采用硬编码的方式，无疑会给我们带来非常大的开发与维护成本。 因此，项目提供 yudao-spring-boot-starter-biz-dat...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>数据权限，实现指定用户可以操作<strong>指定范围</strong>的数据。例如说，针对员工信息的数据权限：</p>
<p>| 用户      | 数据范围           |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%95%B0%E6%8D%AE%E6%9D%83%E9%99%90/01.png" type="image/png"/>
    </item>
    <item>
      <title>用户体系</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/5.%E7%94%A8%E6%88%B7%E4%BD%93%E7%B3%BB.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/5.%E7%94%A8%E6%88%B7%E4%BD%93%E7%B3%BB.html</guid>
      <source url="https://springg.us.kg/rss.xml">用户体系</source>
      <description>用户体系 系统提供了 2 种类型的用户，分别满足对应的管理后台、用户 App 场景。 用户体系用户体系 AdminUser 管理员用户，前端访问 yudao-ui-admin (opens new window)管理后台，后端访问 /admin-api/** RESTful API 接口。 MemberUser 会员用户，前端访问 yudao-ui-u...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>系统提供了 2 种类型的用户，分别满足对应的管理后台、用户 App 场景。</p>
<figure><img src="https://doc.iocoder.cn/img/用户体系/01.png" alt="用户体系" tabindex="0" loading="lazy"><figcaption>用户体系</figcaption></figure>
<ul>
<li>AdminUser 管理员用户，前端访问 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/" target="_blank" rel="noopener noreferrer"><code>yudao-ui-admin</code> (opens new window)</a>管理后台，后端访问 <code>/admin-api/**</code> RESTful API 接口。</li>
<li>MemberUser 会员用户，前端访问 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-user/" target="_blank" rel="noopener noreferrer"><code>yudao-ui-user</code> (opens new window)</a>用户 App，后端访问 <code>/app-api/**</code> RESTful API 接口。</li>
</ul>
<p>虽然是不同类型的用户，他们访问 RESTful API 接口时，都通过 Token 认证机制，具体可见 <a href="https://doc.iocoder.cn/resource-permission/#_2-token-%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6" target="_blank" rel="noopener noreferrer">《开发指南 —— 功能权限》</a>。</p>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>2 种类型的时候，采用不同数据库的表进行存储，管理员用户对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/user/AdminUserDO.java" target="_blank" rel="noopener noreferrer"><code>system_users</code> (opens new window)</a>表，会员用户对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/dal/dataobject/user/MemberUserDO.java" target="_blank" rel="noopener noreferrer"><code>member_user</code> (opens new window)</a>表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/用户体系/02.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<p>为什么不使用统一的用户表？</p>
<p>确实可以采用这样的方案，新增 <code>type</code> 字段区分用户类型。不同用户类型的信息字段，例如说上图的 <code>dept_id</code>、<code>post_ids</code> 等等，可以增加拓展表，或者就干脆“冗余”在用户表中。</p>
<p>不过实际项目中，不同类型的用户往往是不同的团队维护，并且这也是绝大多团队的实践，所以我们采用了多个用户表的方案。</p>
<p>如果表需要关联多种类型的用户，例如说上述的 <code>system_oauth2_access_token</code> 访问令牌表，可以通过 <code>user_type</code> 字段进行区分。并且 <code>user_type</code> 对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-common/src/main/java/cn/iocoder/yudao/framework/common/enums/UserTypeEnum.java" target="_blank" rel="noopener noreferrer">UserTypeEnum (opens new window)</a>全局枚举，代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/用户体系/03.png" alt="UserTypeEnum 枚举" tabindex="0" loading="lazy"><figcaption>UserTypeEnum 枚举</figcaption></figure>
<h2><a class="header-anchor" href="#_2-如何获取当前登录的用户"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_2-%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%99%BB%E5%BD%95%E7%9A%84%E7%94%A8%E6%88%B7" target="_blank" rel="noopener noreferrer">#</a>2. 如何获取当前登录的用户？</h2>
<p>使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-security/src/main/java/cn/iocoder/yudao/framework/security/core/util/SecurityFrameworkUtils.java" target="_blank" rel="noopener noreferrer">SecurityFrameworkUtils (opens new window)</a>提供的如下方法，可以获得当前登录用户的信息：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 【最常用】获得当前用户的编号，从上下文中</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 用户编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Nullable</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Long</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getLoginUserId</span><span style="color:#E06C75;--shiki-dark:#E06C75">() { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略实现 */</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 获取当前用户</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 当前用户</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Nullable</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> LoginUser</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getLoginUser</span><span style="color:#E06C75;--shiki-dark:#E06C75">() { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略实现 */</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 获得当前用户的角色编号数组</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 角色编号数组</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Nullable</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Set</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">Long</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getLoginUserRoleIds</span><span style="color:#E06C75;--shiki-dark:#E06C75">() { </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/** 省略实现 */</span><span style="color:#E06C75;--shiki-dark:#E06C75"> }</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2><a class="header-anchor" href="#_3-账号密码登录"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_3-%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>3. 账号密码登录</h2>
<h3><a class="header-anchor" href="#_3-1-管理后台的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_3-1-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>3.1 管理后台的实现</h3>
<p>使用 <code>username</code> 账号 + <code>password</code> 密码进行登录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L55-L62" target="_blank" rel="noopener noreferrer">AuthController (opens new window)</a>提供 <code>/admin-api/system/auth/login</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/login"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "使用账号密码登录"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">AuthLoginRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> login</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AuthLoginReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> token </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">login</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO, </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClientIP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUserAgent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 返回结果</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AuthLoginRespVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">builder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">token</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(token).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">build</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>如何关闭验证码？</p>
<p>参见 <a href="https://doc.iocoder.cn/captcha/" target="_blank" rel="noopener noreferrer">《后端手册 —— 验证码》</a> 文档。</p>
<h3><a class="header-anchor" href="#_3-2-用户-app-的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_3-2-%E7%94%A8%E6%88%B7-app-%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>3.2 用户 App 的实现</h3>
<p>使用 <code>mobile</code> 手机 + <code>password</code> 密码进行登录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/controller/app/auth/AppAuthController.java#L34-L41" target="_blank" rel="noopener noreferrer">AppAuthController (opens new window)</a>提供 <code>/app-api/member/auth/login</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/login"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "使用手机 + 密码登录"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">AppAuthLoginRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> login</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AppAuthLoginReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> token </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">login</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO, </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClientIP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUserAgent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 返回结果</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AppAuthLoginRespVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">builder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">token</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(token).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">build</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_4-手机验证码登录"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_4-%E6%89%8B%E6%9C%BA%E9%AA%8C%E8%AF%81%E7%A0%81%E7%99%BB%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>4. 手机验证码登录</h2>
<h3><a class="header-anchor" href="#_4-1-管理后台的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_4-1-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>4.1 管理后台的实现</h3>
<p>① 使用 <code>mobile</code> 手机号获得验证码，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L105-L111" target="_blank" rel="noopener noreferrer">AuthController (opens new window)</a>提供 <code>/admin-api/system/auth/send-sms-code</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/send-sms-code"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "发送手机验证码"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">Boolean</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> sendSmsCode</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AuthSendSmsReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sendSmsCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getLoginUserId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), reqVO);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>② 使用 <code>mobile</code> 手机 + <code>code</code> 验证码进行登录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L96-L103" target="_blank" rel="noopener noreferrer">AppAuthController (opens new window)</a>提供 <code>/admin-api/system/auth/sms-login</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/sms-login"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "使用短信验证码登录"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">AuthLoginRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> smsLogin</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AuthSmsLoginReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> token </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">smsLogin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO, </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClientIP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUserAgent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 返回结果</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AuthLoginRespVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">builder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">token</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(token).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">build</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_4-2-用户-app-的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_4-2-%E7%94%A8%E6%88%B7-app-%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>4.2 用户 App 的实现</h3>
<p>① 使用 <code>mobile</code> 手机号获得验证码，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/controller/app/auth/AppAuthController.java#L52-L58" target="_blank" rel="noopener noreferrer">AppAuthController (opens new window)</a>提供 <code>/app-api/member/auth/send-sms-code</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/send-sms-code"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "发送手机验证码"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">Boolean</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> sendSmsCode</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AppAuthSendSmsReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sendSmsCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getLoginUserId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), reqVO);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>② 使用 <code>mobile</code> 手机 + <code>code</code> 验证码进行登录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/controller/app/auth/AppAuthController.java#L43-L50" target="_blank" rel="noopener noreferrer">AppAuthController (opens new window)</a>提供 <code>/app-api/member/auth/sms-login</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/sms-login"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "使用手机 + 验证码登录"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">AppAuthLoginRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> smsLogin</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AppAuthSmsLoginReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> token </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">smsLogin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO, </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClientIP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUserAgent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 返回结果</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AppAuthLoginRespVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">builder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">token</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(token).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">build</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>如果用户未注册，会自动使用手机号进行注册会员用户。<strong>所以，<code>/app-api/member/user/sms-login</code> 接口也提供了用户注册的功能</strong>。</p>
<h2><a class="header-anchor" href="#_5-三方登录"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_5-%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>5. 三方登录</h2>
<p>详细参见 <a href="https://doc.iocoder.cn/social-user" target="_blank" rel="noopener noreferrer">《开发指南 —— 三方登录》</a> 文章。</p>
<h3><a class="header-anchor" href="#_5-1-管理后台的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_5-1-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>5.1 管理后台的实现</h3>
<p>① 跳转第三方平台，来获得三方授权码，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L97-L106" target="_blank" rel="noopener noreferrer">AuthController (opens new window)</a>提供 <code>/admin-api/system/auth/social-auth-redirect</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/social-auth-redirect"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "社交授权的跳转"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Parameters</span><span style="color:#E06C75;--shiki-dark:#E06C75">({</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Parameter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "社交类型"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> required</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Parameter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "redirectUri"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "回调路径"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">})</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">String</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> socialAuthRedirect</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestParam</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"type"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                                                @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestParam</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"redirectUri"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> redirectUri) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">socialUserService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAuthorizeUrl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(type, redirectUri));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>② 使用 <code>code</code> 三方授权码进行快登录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L149-L154" target="_blank" rel="noopener noreferrer">AuthController (opens new window)</a>提供 <code>/admin-api/system/auth/social-login</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/social-login"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "社交快捷登录，使用 code 授权码"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">AuthLoginRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> socialQuickLogin</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AuthSocialQuickLoginReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> token </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">socialLogin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO, </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClientIP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUserAgent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 返回结果</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AuthLoginRespVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">builder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">token</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(token).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">build</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>③ 使用 <code>socialCode</code> 三方授权码 + <code>username</code> + <code>password</code> 进行绑定登录，直接使用 <code>/admin-api/system/auth/login</code> 账号密码登录的接口，区别在于额外带上 <code>socialType</code> + <code>socialCode</code> + <code>socialState</code> 参数。</p>
<h3><a class="header-anchor" href="#_5-2-用户-app-的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_5-2-%E7%94%A8%E6%88%B7-app-%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>5.2 用户 App 的实现</h3>
<p>① 跳转第三方平台，来获得三方授权码，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/controller/app/auth/AppAuthController.java#L96-L105" target="_blank" rel="noopener noreferrer">AppAuthController (opens new window)</a>提供 <code>/app-api/member/auth/social-auth-redirect</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">GetMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/social-auth-redirect"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "社交授权的跳转"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Parameters</span><span style="color:#E06C75;--shiki-dark:#E06C75">({</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Parameter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "type"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "社交类型"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> required</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Parameter</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "redirectUri"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#D19A66;--shiki-dark:#D19A66"> description</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "回调路径"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">})</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">String</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> socialAuthRedirect</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestParam</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"type"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                                               @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestParam</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"redirectUri"</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> redirectUri) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">success</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">socialUserService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getAuthorizeUrl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(type, redirectUri));</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>② 使用 <code>code</code> 三方授权码进行快登录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/controller/app/auth/AppAuthController.java#L107-L111" target="_blank" rel="noopener noreferrer">AppAuthController (opens new window)</a>提供 <code>/app-api/member/auth/social-login</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/social-login"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "社交快捷登录，使用 code 授权码"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">OperateLog</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">enable</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#E06C75;--shiki-dark:#E06C75">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 避免 Post 请求被记录操作日志</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">AppAuthLoginRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> socialQuickLogin</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AuthSocialQuickLoginReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> token </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">socialLogin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO, </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getClientIP</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(), </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">getUserAgent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">());</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 返回结果</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">AuthLoginRespVO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">builder</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">().</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">token</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(token).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">build</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><p>③ 使用 <code>socialCode</code> 三方授权码 + <code>username</code> + <code>password</code> 进行绑定登录，直接使用 <code>/app-api/system/auth/login</code> 手机验证码登录的接口，区别在于额外带上 <code>socialType</code> + <code>socialCode</code> + <code>socialState</code> 参数。</p>
<p>④ 【微信小程序特有】使用 <code>phoneCode</code> + <code>loginCode</code> 实现获取手机号并一键登录，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-member/yudao-module-member-biz/src/main/java/cn/iocoder/yudao/module/member/controller/app/auth/AppAuthController.java#L113-L117" target="_blank" rel="noopener noreferrer">AppAuthController (opens new window)</a>提供 <code>/app-api/member/auth/weixin-mini-app-login</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/weixin-mini-app-login"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "微信小程序的一键登录"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">AppAuthLoginRespVO</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> weixinMiniAppLogin</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> AppAuthWeixinMiniAppLoginReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">authService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">weixinMiniAppLogin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO)</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h2><a class="header-anchor" href="#_6-注册"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_6-%E6%B3%A8%E5%86%8C" target="_blank" rel="noopener noreferrer">#</a>6. 注册</h2>
<h3><a class="header-anchor" href="#_6-1-管理后台的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_6-1-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>6.1 管理后台的实现</h3>
<p>管理后台暂不支持用户注册，而是通过在 [系统管理 -&gt; 用户管理] 菜单，进行添加用户，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/user/UserController.java#L48-L54" target="_blank" rel="noopener noreferrer">UserController (opens new window)</a>提供 <code>/admin-api/system/user/create</code> 接口。代码如下：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PostMapping</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"/create"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Operation</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">summary</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "新增用户"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">PreAuthorize</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#98C379;--shiki-dark:#98C379">"@ss.hasPermission('system:user:create')"</span><span style="color:#E06C75;--shiki-dark:#E06C75">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> CommonResult</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">Long</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> createUser</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Valid</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">RequestBody</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> UserCreateReqVO</span><span style="color:#E06C75;--shiki-dark:#E06C75"> reqVO) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> id </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> userService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">createUser</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(reqVO);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> success</span><span style="color:#E06C75;--shiki-dark:#E06C75">(id)</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_6-2-用户-app-的实现"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_6-2-%E7%94%A8%E6%88%B7-app-%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#</a>6.2 用户 App 的实现</h3>
<p>手机验证码登录时，如果用户未注册，会自动使用手机号进行注册会员用户。<strong>所以，<code>/app-api/system/user/sms-login</code> 接口也提供了用户注册的功能</strong>。</p>
<h2><a class="header-anchor" href="#_7-用户登出"><span></span></a><a href="https://doc.iocoder.cn/user-center/#_7-%E7%94%A8%E6%88%B7%E7%99%BB%E5%87%BA" target="_blank" rel="noopener noreferrer">#</a>7. 用户登出</h2>
<p>用户登出的功能，统一使用 Spring Security 框架，通过删除用户 Token 的方式来实现。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/用户体系/04.png" alt="用户登出" tabindex="0" loading="lazy"><figcaption>用户登出</figcaption></figure>
<p>差别在于使用的 API 接口不同，管理员用户使用 <code>/admin-api/system/logout</code>，会员用户使用 <code>/app-api/member/logout</code>。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E7%94%A8%E6%88%B7%E4%BD%93%E7%B3%BB/01.png" type="image/png"/>
    </item>
    <item>
      <title>三方登录</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/6.%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/6.%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95.html</guid>
      <source url="https://springg.us.kg/rss.xml">三方登录</source>
      <description>三方登录 系统对接国内多个第三方平台，实现三方登录的功能。例如说： 管理后台：企业微信、阿里钉钉 用户 App：微信公众号、微信小程序 管理后台管理后台 友情提示：为了表述方便，本文主要使用管理后台的三方登录作为示例。 用户 App 也是支持该功能，你可以自己去体验一下。 #1. 表结构 imgimg ① 三方登录完成时，系统会将三方用户存储到 sys...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>系统对接国内多个第三方平台，实现三方登录的功能。例如说：</p>
<ul>
<li>管理后台：企业微信、阿里钉钉</li>
<li>用户 App：微信公众号、微信小程序</li>
</ul>
<figure><img src="https://doc.iocoder.cn/img/三方登录/01.png" alt="管理后台" tabindex="0" loading="lazy"><figcaption>管理后台</figcaption></figure>
<p>友情提示：为了表述方便，本文主要使用管理后台的三方登录作为示例。</p>
<p>用户 App 也是支持该功能，你可以自己去体验一下。</p>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/social-user/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<figure><img src="https://doc.iocoder.cn/img/三方登录/02.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<p>① 三方登录完成时，系统会将三方用户存储到 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/social/SocialUserDO.java" target="_blank" rel="noopener noreferrer"><code>system_social_user</code> (opens new window)</a>表中，通过 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/enums/social/SocialTypeEnum.java" target="_blank" rel="noopener noreferrer"><code>type</code> (opens new window)</a>标记对应的第三方平台。</p>
<p>② 【未】关联本系统 User 的三方用户，需要在三方登录完成后，使用账号密码进行「<strong>绑定登录</strong>」，成功后记录到 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/social/SocialUserBindDO.java" target="_blank" rel="noopener noreferrer"><code>system_social_user_bind</code> (opens new window)</a>表中。</p>
<p>【已】关联本系统 User 的三方用户，在三方登录完成后，直接进入系统，即「<strong>快捷登录</strong>」。</p>
<h2><a class="header-anchor" href="#_2-绑定登录"><span></span></a><a href="https://doc.iocoder.cn/social-user/#_2-%E7%BB%91%E5%AE%9A%E7%99%BB%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>2. 绑定登录</h2>
<p>① 使用浏览器访问 <a href="http://127.0.0.1:1024/login" target="_blank" rel="noopener noreferrer">http://127.0.0.1:1024/login (opens new window)</a>地址，点击 [钉钉] 或者 [企业微信] 进行三方登录。此时，会调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L97-L106" target="_blank" rel="noopener noreferrer"><code>/admin-api/system/auth/social-auth-redirect</code> (opens new window)</a>接口，获得第三方平台的登录地址，并进行跳转。</p>
<figure><img src="https://doc.iocoder.cn/img/三方登录/12.png" alt="三方登录" tabindex="0" loading="lazy"><figcaption>三方登录</figcaption></figure>
<p>然后，使用 [钉钉] 或者 [企业微信] 进行扫码，完成三方登录。</p>
<p>② 三方登录成功后，跳转回 <a href="http://127.0.0.1:1024/social-login" target="_blank" rel="noopener noreferrer">http://127.0.0.1:1024/social-login (opens new window)</a>地址。此时，会调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L149-L154" target="_blank" rel="noopener noreferrer"><code>/admin-api/system/auth/social-login</code> (opens new window)</a>接口，尝试「快捷登录」。由于该三方用户【未】关联管理后台的 AdminUser 用户，所以会看到 “未绑定账号，需要进行绑定” 报错。</p>
<figure><img src="https://doc.iocoder.cn/img/三方登录/11.png" alt="三方登录页" tabindex="0" loading="lazy"><figcaption>三方登录页</figcaption></figure>
<p>③ 输入账号密码，点击 [提交] 按钮，进行「绑定登录」。此时，会调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L61-L66" target="_blank" rel="noopener noreferrer"><code>/admin-api/system/auth/login</code> (opens new window)</a>接口（在账号密码登录的基础上，额外带上 <code>socialType</code> + <code>socialCode</code> + <code>socialState</code> 参数）。成功后，即可进入系统的首页。</p>
<figure><img src="https://doc.iocoder.cn/img/三方登录/13.png" alt="三方登录页" tabindex="0" loading="lazy"><figcaption>三方登录页</figcaption></figure>
<h2><a class="header-anchor" href="#_3-快捷登录"><span></span></a><a href="https://doc.iocoder.cn/social-user/#_3-%E5%BF%AB%E6%8D%B7%E7%99%BB%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>3. 快捷登录</h2>
<p>退出系统，再进行一次三方登录的流程。</p>
<p>【相同】① 使用浏览器访问 <a href="http://127.0.0.1:1024/login" target="_blank" rel="noopener noreferrer">http://127.0.0.1:1024/login (opens new window)</a>地址，点击 [钉钉] 或者 [企业微信] 进行三方登录。此时，会调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L97-L106" target="_blank" rel="noopener noreferrer"><code>/admin-api/system/auth/social-auth-redirect</code> (opens new window)</a>接口，获得第三方平台的登录地址，并进行跳转。</p>
<figure><img src="https://doc.iocoder.cn/img/三方登录/12.png" alt="三方登录" tabindex="0" loading="lazy"><figcaption>三方登录</figcaption></figure>
<p>【不同】② 三方登录成功后，跳转回 <a href="http://127.0.0.1:1024/social-login" target="_blank" rel="noopener noreferrer">http://127.0.0.1:1024/social-login (opens new window)</a>地址。此时，会调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L149-L154" target="_blank" rel="noopener noreferrer"><code>/admin-api/system/auth/social-login</code> (opens new window)</a>接口，尝试「快捷登录」。由于该三方用户【已】关联管理后台的 AdminUser 用户，所以直接进入系统的首页。</p>
<figure><img src="https://doc.iocoder.cn/img/三方登录/13.png" alt="三方登录页" tabindex="0" loading="lazy"><figcaption>三方登录页</figcaption></figure>
<h2><a class="header-anchor" href="#_4-绑定与解绑"><span></span></a><a href="https://doc.iocoder.cn/social-user/#_4-%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%A7%A3%E7%BB%91" target="_blank" rel="noopener noreferrer">#</a>4. 绑定与解绑</h2>
<p>访问 <a href="http://127.0.0.1:1024/user/profile" target="_blank" rel="noopener noreferrer">http://127.0.0.1:1024/user/profile (opens new window)</a>地址，选择 [社交信息] 选项，可以三方用户的绑定与解绑。</p>
<figure><img src="https://doc.iocoder.cn/img/三方登录/21.png" alt="绑定与解绑" tabindex="0" loading="lazy"><figcaption>绑定与解绑</figcaption></figure>
<h2><a class="header-anchor" href="#_5-配置文件"><span></span></a><a href="https://doc.iocoder.cn/social-user/#_5-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" target="_blank" rel="noopener noreferrer">#</a>5. 配置文件</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L196-L211" target="_blank" rel="noopener noreferrer"><code>application-{env}.yaml</code> (opens new window)</a>配置文件中，对应 <code>justauth</code> 配置项，填写你的第三方平台的配置信息。</p>
<figure><img src="https://doc.iocoder.cn/img/三方登录/31.png" alt="配置文件" tabindex="0" loading="lazy"><figcaption>配置文件</figcaption></figure>
<p>系统使用 <a href="https://github.com/justauth/justauth-spring-boot-starter" target="_blank" rel="noopener noreferrer"><code>justauth-spring-boot-starter</code> (opens new window)</a><a href="https://github.com/justauth/justauth-spring-boot-starter" target="_blank" rel="noopener noreferrer">JustAuth (opens new window)</a>组件，想要对接其它第三方平台，只需要新增对应的配置信息即可。</p>
<p>疑问：yudao-spring-boot-starter-biz-social 技术组件的作用是什么？</p>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-social/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-biz-social</code> (opens new window)</a>对 JustAuth 进行二次封装，提供微信小程序的集成。</p>
<h2><a class="header-anchor" href="#_6-第三方平台的申请"><span></span></a><a href="https://doc.iocoder.cn/social-user/#_6-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B9%B3%E5%8F%B0%E7%9A%84%E7%94%B3%E8%AF%B7" target="_blank" rel="noopener noreferrer">#</a>6. 第三方平台的申请</h2>
<ul>
<li>阿里钉钉：<a href="https://justauth.wiki/guide/oauth/dingtalk/" target="_blank" rel="noopener noreferrer">https://justauth.wiki/guide/oauth/dingtalk/(opens new window)</a></li>
<li>企业微信：<a href="https://justauth.wiki/guide/oauth/wechat_enterprise_qrcode/" target="_blank" rel="noopener noreferrer">https://justauth.wiki/guide/oauth/wechat_enterprise_qrcode/(opens new window)</a></li>
<li>微信开放平台：<a href="https://justauth.wiki/guide/oauth/wechat_open/" target="_blank" rel="noopener noreferrer">https://justauth.wiki/guide/oauth/wechat_open/(opens new window)</a></li>
</ul>
<p>注意，如果第三方平台如果需要配置具体的授信地址，需要添加 <code>/social-login</code> 用于三方登录回调页、<code>/user/profile</code> 用于三方用户的绑定与解绑。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95/01.png" type="image/png"/>
    </item>
    <item>
      <title>OAuth 2.0（SSO 单点登录)</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/7.OAuth%202.0%EF%BC%88SSO%20%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95).html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/7.OAuth%202.0%EF%BC%88SSO%20%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95).html</guid>
      <source url="https://springg.us.kg/rss.xml">OAuth 2.0（SSO 单点登录)</source>
      <description>OAuth 2.0（SSO 单点登录) #OAuth 2.0 是什么？ OAuth 2.0 的概念讲解，可以阅读如下三篇文章： 《理解 OAuth 2.0》(opens new window) 《OAuth 2.0 的一个简单解释》(opens new window) 《OAuth 2.0 的四种方式》(opens new window) 重点是理解 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#oauth-2-0-是什么"><span></span></a><a href="https://doc.iocoder.cn/oauth2/#oauth-2-0-%E6%98%AF%E4%BB%80%E4%B9%88" target="_blank" rel="noopener noreferrer">#</a>OAuth 2.0 是什么？</h2>
<p>OAuth 2.0 的概念讲解，可以阅读如下三篇文章：</p>
<ul>
<li><a href="https://www.iocoder.cn/Fight/ruanyifeng-oauth_2_0/?self" target="_blank" rel="noopener noreferrer">《理解 OAuth 2.0》(opens new window)</a></li>
<li><a href="https://www.iocoder.cn/Fight/ruanyifeng-oauth_design/?self" target="_blank" rel="noopener noreferrer">《OAuth 2.0 的一个简单解释》(opens new window)</a></li>
<li><a href="https://www.iocoder.cn/Fight/ruanyifeng-oauth-grant-types/?self" target="_blank" rel="noopener noreferrer">《OAuth 2.0 的四种方式》(opens new window)</a></li>
</ul>
<p>重点是理解 <strong>授权码模式</strong> 和 <strong>密码模式</strong>，它们是最常用的两种授权模式。</p>
<p>本文，我们也会基于它们，分别实现 SSO 单点登录。</p>
<h2><a class="header-anchor" href="#oauth-2-0-授权模式的选择"><span></span></a><a href="https://doc.iocoder.cn/oauth2/#oauth-2-0-%E6%8E%88%E6%9D%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E9%80%89%E6%8B%A9" target="_blank" rel="noopener noreferrer">#</a>OAuth 2.0 授权模式的选择？</h2>
<p>授权模式的选择，其实非常简单，总结起来就是一张图：</p>
<figure><img src="https://doc.iocoder.cn/img/OAuth2/授权模式的选择.png" alt="授权模式的选择" tabindex="0" loading="lazy"><figcaption>授权模式的选择</figcaption></figure>
<p>问题一：什么场景下，使用客户端模式（Client Credentials）？</p>
<p>如果令牌拥有者是<strong>机器</strong>的情况下，那就使用客户端模式。 例如说：</p>
<ul>
<li>开发了一个开放平台，提供给其它外部服务调用</li>
<li>开发了一个 RPC 服务，提供给其它内部服务调用</li>
</ul>
<p>实际的案例，我们接入微信公众号时，会使用 <code>appid</code> 和 <code>secret</code> 参数，<a href="https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html" target="_blank" rel="noopener noreferrer">获取 Access token (opens new window)</a>访问令牌。</p>
<p>问题二：什么场景下，使用密码模式（Resource Owner Password Credentials）？</p>
<p>接入的 Client 客户端，是属于<strong>自己</strong>的情况下，可以使用密码模式。 例如说：</p>
<ul>
<li>客户端是你自己公司的 App 或网页，然后授权服务也是你公司的</li>
</ul>
<p>不过，如果客户端是<strong>第三方</strong>的情况下，使用密码模式的话，该客户端是可以拿到用户的账号、密码，存在安全的风险，此时可以考虑使用授权码或简化模式。</p>
<p>问题三：什么场景下，使用授权码模式（Authorization Code）？</p>
<p>接入的 Client 客户端，是属于<strong>第三方</strong>的情况下，可以使用授权码模式。例如说：</p>
<ul>
<li>客户端是你自己公司的 App 或网页，作为第三方，接入 <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html" target="_blank" rel="noopener noreferrer">微信 (opens new window)</a>、<a href="https://wiki.connect.qq.com/oauth2-0%E7%AE%80%E4%BB%8B" target="_blank" rel="noopener noreferrer">QQ (opens new window)</a>、<a href="https://open.dingtalk.com/document/mobile-app-guide/mobile-application-access" target="_blank" rel="noopener noreferrer">钉钉 (opens new window)</a>等等进行 OAuth 2.0 登录</li>
</ul>
<p>当然，如果客户端是<strong>自己</strong>的情况下，也可以采用授权码模式。例如说：</p>
<ul>
<li>客户端是腾讯旗下的各种游戏，可使用微信、QQ，接入 <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html" target="_blank" rel="noopener noreferrer">微信 (opens new window)</a>、<a href="https://wiki.connect.qq.com/oauth2-0%E7%AE%80%E4%BB%8B" target="_blank" rel="noopener noreferrer">QQ (opens new window)</a>等等进行 OAuth 2.0 登录</li>
<li>客户端是公司内的各种管理后台（ERP、OA、CRM 等），跳转到统一的 SSO 单点登录，使用授权码模式进行授权</li>
</ul>
<p>问题四：什么场景下，使用简化模式（Implicit）？</p>
<p>简化模式，<strong>简化</strong> 的是授权码模式的流程的 <strong>第二步</strong>，差异在于：</p>
<ul>
<li>授权码模式：授权完成后，获得的是 code 授权码，需要 Server Side 服务端使用该授权码，再向授权服务器获取 Access Token 访问令牌</li>
<li>简化模式：授权完成后，Client Side 客户端直接获得 Access Token 访问令牌</li>
</ul>
<p>暂时没有特别好的案例，感兴趣可以看看如下文档，也可以不看：</p>
<ul>
<li><a href="https://wiki.connect.qq.com/%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5_client-side" target="_blank" rel="noopener noreferrer">《QQ OAuth 2.0 开发指定 —— 开发攻略_Client-side》(opens new window)</a></li>
<li><a href="http://developer.baidu.com/wiki/index.php?title=docs/oauth/implicit" target="_blank" rel="noopener noreferrer">《百度 OAuth —— Implicit Grant 授权》(opens new window)</a></li>
</ul>
<p>问题五：该项目中，使用了哪些授权模式？</p>
<figure><img src="https://doc.iocoder.cn/img/OAuth2/项目使用的授权模式.png" alt="项目使用的授权模式" tabindex="0" loading="lazy"><figcaption>项目使用的授权模式</figcaption></figure>
<p>如上图所示，分成 <strong>外部授权</strong> 和 <strong>内部登录</strong> 两种方式。</p>
<p>① 红色的“外部授权”：基于【授权码模式】，实现 SSO 单点登录，将用户授权给接入的客户端。客户端可以是内部的其它管理系统，也可以是外部的第三方。</p>
<p>② 绿色的“内部登录”：管理后台的登录接口，还是采用传统的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/auth/AuthController.java#L61-L67" target="_blank" rel="noopener noreferrer"><code>/admin-api/system/auth/login</code> (opens new window)</a>账号密码登录，并没有使用【密码模式】，主要考虑降低大家的学习成本，如果没有将用户授权给其它系统的情况下，这样做已经可以很好的满足业务的需要。当然，这里也可以将管理后台作为一个客户端，使用【密码模式】进行授权。</p>
<p>另外，考虑到 OAuth 2.0 使用的访问令牌 + 刷新令牌可以提供更好的安全性，所以即使是传统的账号密码登录，也复用了它作为令牌的实现。</p>
<h2><a class="header-anchor" href="#oauth-2-0-技术选型"><span></span></a><a href="https://doc.iocoder.cn/oauth2/#oauth-2-0-%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B" target="_blank" rel="noopener noreferrer">#</a>OAuth 2.0 技术选型？</h2>
<p>实现 OAuth 2.0 的功能，一般采用 <a href="https://spring.io/projects/spring-security-oauth" target="_blank" rel="noopener noreferrer">Spring Security OAuth (opens new window)</a>或 <a href="https://spring.io/projects/spring-authorization-server" target="_blank" rel="noopener noreferrer">Spring Authorization Server (opens new window)</a>(SAS) 框架，前者已废弃，被后者所替代。但是使用它们，会面临三大问题：</p>
<ul>
<li>学习成本大：SAS 是新出的框架，入门容易精通难，引入项目中需要花费 1-2 周深入学习</li>
<li>排查问题难：使用碰到问题时，往往需要调试到源码层面，团队只有个别人具备这种能力</li>
<li>定制成本高：根据业务需要，想要在 SAS 上定制功能，对源码要有不错的掌控力，难度可能过大</li>
</ul>
<p>⚔ 因此，项目参考多个 OAuth 2.0 框架，<strong>自研</strong>实现 OAuth 2.0 的功能，具备学习成本小、排查问题容易、定制成本低的优点，支持多种授权模式，并内置 SSO 单点登录的功能。</p>
<p>友情提示：具备一定规模的互联网公司，基本不会直接采用 Spring Security OAuth 或 Spring Authorization Server 框架，也是采用自研的方式，更好的满足自身的业务需求与技术拓展。</p>
<p>🙂 另外，通过学习项目的 OAuth 2.0 实现，可以进一步加深对 OAuth 2.0 的理解，知其然而不知其所以然！</p>
<p>最终实现的整体架构，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/OAuth2/实现架构图.png" alt="整体架构" tabindex="0" loading="lazy"><figcaption>整体架构</figcaption></figure>
<p>详细的代码实现，我们在视频中进行讲解。</p>
<h2><a class="header-anchor" href="#如何实现-sso-单点登录"><span></span></a><a href="https://doc.iocoder.cn/oauth2/#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0-sso-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>如何实现 SSO 单点登录？</h2>
<h3><a class="header-anchor" href="#实战一-基于授权码模式-实现-sso-单点登录"><span></span></a><a href="https://doc.iocoder.cn/oauth2/#%E5%AE%9E%E6%88%98%E4%B8%80-%E5%9F%BA%E4%BA%8E%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8F-%E5%AE%9E%E7%8E%B0-sso-%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>实战一：基于授权码模式，实现 SSO 单点登录</h3>
<p>示例代码见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-example/yudao-sso-demo-by-code" target="_blank" rel="noopener noreferrer">https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-example/yudao-sso-demo-by-code (opens new window)</a>地址，整体流程如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/OAuth2/授权码模式的单点登录.png" alt="整体流程" tabindex="0" loading="lazy"><figcaption>整体流程</figcaption></figure>
<p>具体的使用流程如下：</p>
<p><strong>① 第一步</strong>，分别启动 <code>ruoyi-vue-pro</code> 项目的前端和后端。注意，前端需要使用 Vue2 版本，因为 Vue3 版本暂时没有实现 SSO 页面。</p>
<p><strong>② 第二步</strong>，访问 <a href="http://127.0.0.1:1024/system/oauth2/oauth2/application" target="_blank" rel="noopener noreferrer">系统管理 -&gt; OAuth 2.0 -&gt; 应用管理 (opens new window)</a>菜单，新增一个应用（客户端），信息如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/OAuth2/授权码模式的客户端信息.png" alt="授权码模式的客户端信息" tabindex="0" loading="lazy"><figcaption>授权码模式的客户端信息</figcaption></figure>
<ul>
<li>客户端编号：<code>yudao-sso-demo-by-code</code></li>
<li>客户端密钥：<code>test</code></li>
<li>应用名：<code>基于授权码模式，如何实现 SSO 单点登录？</code></li>
<li>授权类型：<code>authorization_code</code>、<code>refresh_token</code></li>
<li>授权范围：<code>user.read</code>、<code>user.write</code></li>
<li>可重定向的 URI 地址：<code>http://127.0.0.1:18080</code></li>
</ul>
<p>ps：如果已经有这个客户端，可以不用新增。</p>
<p><strong>③ 第三步</strong>，运行 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-example/yudao-sso-demo-by-code/src/main/java/cn/iocoder/yudao/ssodemo/SSODemoApplication.java" target="_blank" rel="noopener noreferrer">SSODemoApplication (opens new window)</a>类，启动接入方的项目，它已经包含前端和后端部分。启动成功的日志如下：</p>
<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">2022-10-01</span><span style="color:#98C379;--shiki-dark:#98C379"> 21:24:35.572</span><span style="color:#98C379;--shiki-dark:#98C379">  INFO</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 60265</span></span></code></pre>
</div>]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/OAuth2/%E6%8E%88%E6%9D%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E9%80%89%E6%8B%A9.png" type="image/png"/>
    </item>
    <item>
      <title>SaaS 多租户【字段隔离】</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/8.SaaS%20%E5%A4%9A%E7%A7%9F%E6%88%B7%E3%80%90%E5%AD%97%E6%AE%B5%E9%9A%94%E7%A6%BB%E3%80%91.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/8.SaaS%20%E5%A4%9A%E7%A7%9F%E6%88%B7%E3%80%90%E5%AD%97%E6%AE%B5%E9%9A%94%E7%A6%BB%E3%80%91.html</guid>
      <source url="https://springg.us.kg/rss.xml">SaaS 多租户【字段隔离】</source>
      <description>SaaS 多租户【字段隔离】 本章节，将介绍多租户的基础知识、以及怎样使用多租户的功能。 相关的视频教程： 01、如何实现多租户的 DB 封装？(opens new window) 02、如何实现多租户的 Redis 封装？(opens new window) 03、如何实现多租户的 Web 与 Security 封装？(opens new windo...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，将介绍多租户的基础知识、以及怎样使用多租户的功能。</p>
<p>相关的视频教程：</p>
<ul>
<li><a href="https://t.zsxq.com/06ufyFAeM" target="_blank" rel="noopener noreferrer">01、如何实现多租户的 DB 封装？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/067eQfAQN" target="_blank" rel="noopener noreferrer">02、如何实现多租户的 Redis 封装？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/06Nnm6QBE" target="_blank" rel="noopener noreferrer">03、如何实现多租户的 Web 与 Security 封装？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/06AYJUR3V" target="_blank" rel="noopener noreferrer">04、如何实现多租户的 Job 封装？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/06aq3nuNF" target="_blank" rel="noopener noreferrer">05、如何实现多租户的 MQ 与 Async 封装？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/06vFQVJIe" target="_blank" rel="noopener noreferrer">06、如何实现多租户的 AOP 与 Util 封装？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/063bqRrNZ" target="_blank" rel="noopener noreferrer">07、如何实现多租户的管理？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/06rBI66yV" target="_blank" rel="noopener noreferrer">08、如何实现多租户的套餐？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_1-多租户是什么"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/#_1-%E5%A4%9A%E7%A7%9F%E6%88%B7%E6%98%AF%E4%BB%80%E4%B9%88" target="_blank" rel="noopener noreferrer">#</a>1. 多租户是什么？</h2>
<p>多租户，简单来说是指<strong>一个</strong>业务系统，可以为<strong>多个</strong>组织服务，并且组织之间的数据是<strong>隔离</strong>的。</p>
<p>例如说，在服务上部署了一个 <a href="https://github.com/YunaiV/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer"><code>ruoyi-vue-pro</code> (opens new window)</a>系统，可以支持多个不同的公司使用。这里的<strong>一个公司就是一个租户</strong>，每个用户必然属于某个租户。因此，用户也只能看见自己租户下面的内容，其它租户的内容对他是不可见的。</p>
<h2><a class="header-anchor" href="#_2-数据隔离方案"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/#_2-%E6%95%B0%E6%8D%AE%E9%9A%94%E7%A6%BB%E6%96%B9%E6%A1%88" target="_blank" rel="noopener noreferrer">#</a>2. 数据隔离方案</h2>
<p>多租户的数据隔离方案，可以分成分成三种：</p>
<ol>
<li>DATASOURCE 模式：独立数据库</li>
<li>SCHEMA 模式：共享数据库，独立 Schema</li>
<li>COLUMN 模式：共享数据库，共享 Schema，共享数据表</li>
</ol>
<h3><a class="header-anchor" href="#_2-1-datasource-模式"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/#_2-1-datasource-%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">#</a>2.1 DATASOURCE 模式</h3>
<p>一个租户一个数据库，这种方案的用户数据隔离级别最高，安全性最好，但成本也高。</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/DATASOURCE模式.png" alt="DATASOURCE 模式" tabindex="0" loading="lazy"><figcaption>DATASOURCE 模式</figcaption></figure>
<ul>
<li>优点：为不同的租户提供独立的数据库，有助于简化数据模型的扩展设计，满足不同租户的独特需求；如果出现故障，恢复数据比较简单。</li>
<li>缺点：增大了数据库的安装数量，随之带来维护成本和购置成本的增加。</li>
</ul>
<h3><a class="header-anchor" href="#_2-2-schema-模式"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/#_2-2-schema-%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">#</a>2.2 SCHEMA 模式</h3>
<p>多个或所有租户共享数据库，但一个租户一个表。</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/SCHEMA模式.png" alt="SCHEMA 模式" tabindex="0" loading="lazy"><figcaption>SCHEMA 模式</figcaption></figure>
<ul>
<li>优点：为安全性要求较高的租户提供了一定程度的逻辑数据隔离，并不是完全隔离；每个数据库可以支持更多的租户数量。</li>
<li>缺点：如果出现故障，数据恢复比较困难，因为恢复数据库将牵扯到其他租户的数据； 如果需要跨租户统计数据，存在一定困难。</li>
</ul>
<h3><a class="header-anchor" href="#_2-3-column-模式"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/#_2-3-column-%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">#</a>2.3 COLUMN 模式</h3>
<p>共享数据库，共享数据架构。租户共享同一个数据库、同一个表，但在表中通过 <code>tenant_id</code> 字段区分租户的数据。这是共享程度最高、隔离级别最低的模式。</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/COLUMN模式.png" alt="COLUMN 模式" tabindex="0" loading="lazy"><figcaption>COLUMN 模式</figcaption></figure>
<ul>
<li>优点：维护和购置成本最低，允许每个数据库支持的租户数量最多。</li>
<li>缺点：隔离级别最低，安全性最低，需要在设计开发时加大对安全的开发量；数据备份和恢复最困难，需要逐表逐条备份和还原。</li>
</ul>
<h3><a class="header-anchor" href="#_2-4-方案选择"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/#_2-4-%E6%96%B9%E6%A1%88%E9%80%89%E6%8B%A9" target="_blank" rel="noopener noreferrer">#</a>2.4 方案选择</h3>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/模式选择.png" alt="模式选择" tabindex="0" loading="lazy"><figcaption>模式选择</figcaption></figure>
<ul>
<li>一般情况下，可以考虑采用 COLUMN 模式，开发、运维简单，以最少的服务器为最多的租户提供服务。</li>
<li>租户规模比较大，或者一些租户对安全性要求较高，可以考虑采用 DATASOURCE 模式，当然它也相对复杂的多。</li>
<li>不推荐采用 SCHEMA 模式，因为它的优点并不明显，而且它的缺点也很明显，同时对复杂 SQL 支持一般。</li>
</ul>
<p>提问：项目支持哪些模式？</p>
<p>目前支持最主流的 DATASOURCE 和 COLUMN 两种模式。而 SCHEMA 模式不推荐使用，所以暂时不考虑实现。</p>
<p>考虑到让大家更好的理解 DATASOURCE 和 COLUMN 模式，拆成了两篇文章：</p>
<ul>
<li><a href="https://doc.iocoder.cn/saas-tenant" target="_blank" rel="noopener noreferrer">《SaaS 多租户【字段隔离】》</a>：讲解 COLUMN 模式</li>
<li><a href="https://doc.iocoder.cn/saas-tenant/dynamic" target="_blank" rel="noopener noreferrer">《SaaS 多租户【数据库隔离】》</a>：讲解 DATASOURCE 模式</li>
</ul>
<h2><a class="header-anchor" href="#_3-多租户的开关"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/#_3-%E5%A4%9A%E7%A7%9F%E6%88%B7%E7%9A%84%E5%BC%80%E5%85%B3" target="_blank" rel="noopener noreferrer">#</a>3. 多租户的开关</h2>
<p>系统有两个配置项，设置为 <code>true</code> 时开启多租户，设置为 <code>false</code> 时关闭多租户。</p>
<p>注意，两者需要保持一致，否则会报错！</p>
<p>| 配置项                  | 说明     | 配置文件                                                     |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Saas%E5%A4%9A%E7%A7%9F%E6%88%B7/DATASOURCE%E6%A8%A1%E5%BC%8F.png" type="image/png"/>
    </item>
    <item>
      <title>SaaS 多租户【数据库隔离】</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/9.SaaS%20%E5%A4%9A%E7%A7%9F%E6%88%B7%E3%80%90%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9A%94%E7%A6%BB%E3%80%91.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/2.%E5%90%8E%E7%AB%AF%E6%89%8B%E5%86%8C/9.SaaS%20%E5%A4%9A%E7%A7%9F%E6%88%B7%E3%80%90%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9A%94%E7%A6%BB%E3%80%91.html</guid>
      <source url="https://springg.us.kg/rss.xml">SaaS 多租户【数据库隔离】</source>
      <description>SaaS 多租户【数据库隔离】 本章节，讲解 SaaS 租户的 DATASOURCE 模式，实现数据库级别的隔离。 注意，需要前置阅读 《SaaS 多租户【字段隔离】》 文档。 #0. 极速体验 ① 克隆 https://gitee.com/zhijiantianya/ruoyi-vue-pro (opens new window)仓库，并切换到 fe...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解 SaaS 租户的 DATASOURCE 模式，实现数据库级别的隔离。</p>
<p>注意，需要前置阅读 <a href="https://doc.iocoder.cn/saas-tenant" target="_blank" rel="noopener noreferrer">《SaaS 多租户【字段隔离】》</a> 文档。</p>
<h2><a class="header-anchor" href="#_0-极速体验"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_0-%E6%9E%81%E9%80%9F%E4%BD%93%E9%AA%8C" target="_blank" rel="noopener noreferrer">#</a>0. 极速体验</h2>
<p>① 克隆 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro" target="_blank" rel="noopener noreferrer">https://gitee.com/zhijiantianya/ruoyi-vue-pro (opens new window)</a>仓库，并切换到 <code>feature/dev-yunai</code> 分支。</p>
<p>② 创建 <code>ruoyi-vue-pro-master</code>、<code>ruoyi-vue-pro-tenant-a</code>、<code>ruoyi-vue-pro-tenant-b</code> 三个数据库。</p>
<p>③ 下载 <a href="https://doc.iocoder.cn/file/%E5%A4%9A%E7%A7%9F%E6%88%B7%E5%A4%9Adb.zip" target="_blank" rel="noopener noreferrer"><code>多租户多db.zip</code></a> 并解压，将 SQL 导入到对应的数据库中。</p>
<p>友情提示：</p>
<p>随着版本的迭代，SQL 脚本可能过期。如果碰到问题，可以在星球给我反馈下。</p>
<p>④ 启动前端和后端项目，即可愉快的体验了。</p>
<h2><a class="header-anchor" href="#_1-实现原理"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_1-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>1. 实现原理</h2>
<p>DATASOURCE 模式，基于 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter" target="_blank" rel="noopener noreferrer">dynamic-datasource (opens new window)</a>进行拓展实现。</p>
<p>核心：每次对数据库操作时，动态切换到该租户所在的数据源，然后执行 SQL 语句。</p>
<h2><a class="header-anchor" href="#_2-功能演示"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_2-%E5%8A%9F%E8%83%BD%E6%BC%94%E7%A4%BA" target="_blank" rel="noopener noreferrer">#</a>2. 功能演示</h2>
<p><strong>我们来新增一个租户，使用 DATASOURCE 模式。</strong></p>
<p>① 点击 [基础设施 -&gt; 数据源配置] 菜单，点击 [新增] 按钮，新增一个名字为 <code>tenant-a</code> 数据源。</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/新增数据源.png" alt="新增数据源" tabindex="0" loading="lazy"><figcaption>新增数据源</figcaption></figure>
<p>然后，手动将如下表拷贝到 <code>ruoyi-vue-pro</code> 主库中的如下表，拷贝到 <code>ruoyi-vue-pro-tenant-a</code> 库中。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/拷贝表结构.png" alt="拷贝表结构到数据源" tabindex="0" loading="lazy"><figcaption>拷贝表结构到数据源</figcaption></figure>
<div class="language-text" data-ext="text" data-title="text"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span>system_dept</span></span>
<span class="line"><span>system_login_log</span></span>
<span class="line"><span>system_notice</span></span>
<span class="line"><span>system_notify_message</span></span>
<span class="line"><span>system_operate_log</span></span>
<span class="line"><span>system_post</span></span>
<span class="line"><span>system_role</span></span>
<span class="line"><span>system_role_menu</span></span>
<span class="line"><span>system_social_user</span></span>
<span class="line"><span>system_social_user_bind</span></span>
<span class="line"><span>system_user_post</span></span>
<span class="line"><span>system_user_role</span></span>
<span class="line"><span>system_users</span></span></code></pre>
</div><p>友情提示：</p>
<p>随着版本的迭代，可能需要拷贝更多的表。如果碰到问题，可以在星球给我反馈下。</p>
<p>② 点击 [基础设施 -&gt; 租户管理] 菜单，点击 [新增] 按钮，新增一个名字为 <code>土豆租户</code> 的租户，并使用 <code>tenant-a</code> 数据源。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/新增租户.png" alt="新增租户" tabindex="0" loading="lazy"><figcaption>新增租户</figcaption></figure>
<p>此时，在 <code>ruoyi-vue-pro-tenant-a</code> 库中，可以查询到对应的租户管理员、角色等信息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/查询用户.png" alt="查询用户" tabindex="0" loading="lazy"><figcaption>查询用户</figcaption></figure>
<p>③ 退出系统，登录刚创建的租户。</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/登录界面.png" alt="登录界面" tabindex="0" loading="lazy"><figcaption>登录界面</figcaption></figure>
<p>至此，我们已经完成了租户的创建。</p>
<p>补充说明：</p>
<p>后续在使用时，建议把拷贝到其它租户数据库的表，从 <code>ruoyi-vue-pro</code> 主库中进行删除。</p>
<p>目的是，主库只保留所有租户共享的全局表。例如说，菜单表、定时任表等等。</p>
<h2><a class="header-anchor" href="#_3-创建表"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_3-%E5%88%9B%E5%BB%BA%E8%A1%A8" target="_blank" rel="noopener noreferrer">#</a>3. 创建表</h2>
<p>在使用 DATASOURCE 模式时，数据库可以分为两种：主库、租户库。</p>
<h3><a class="header-anchor" href="#_3-1-主库"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_3-1-%E4%B8%BB%E5%BA%93" target="_blank" rel="noopener noreferrer">#</a>3.1 主库</h3>
<p>① 存放所有租户共享的表。例如说：菜单表、定时任务表等等。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/主库.png" alt="主库" tabindex="0" loading="lazy"><figcaption>主库</figcaption></figure>
<p>② 对应 <code>master</code> 数据源，配置在 <code>application-{env}.yaml</code> 配置文件。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/master数据源.png" alt=" 数据源" tabindex="0" loading="lazy"><figcaption> 数据源</figcaption></figure>
<p>③ 每个主库对应的 Mapper，必须添加 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter/blob/master/core/src/main/java/com/baomidou/dynamic/datasource/annotation/Master.java" target="_blank" rel="noopener noreferrer"><code>@Master</code> (opens new window)</a>注解。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/Master注解.png" alt=" 注解" tabindex="0" loading="lazy"><figcaption> 注解</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-租户库"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_3-2-%E7%A7%9F%E6%88%B7%E5%BA%93" target="_blank" rel="noopener noreferrer">#</a>3.2 租户库</h3>
<p>① 存放每个租户的表。例如说：用户表、角色表等等。</p>
<p>② 在 [基础设施 -&gt; 数据源配置] 菜单中，配置数据源。</p>
<p>③ 每个主库对应的 Mapper，必须添加 <a href="https://doc.iocoder.cn/saas-tenant/dynamic/TODO" target="_blank" rel="noopener noreferrer"><code>@TenantDS</code></a> 注解。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/TenantDS注解.png" alt=" 注解" tabindex="0" loading="lazy"><figcaption> 注解</figcaption></figure>
<h3><a class="header-anchor" href="#_3-3-租户字段"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_3-3-%E7%A7%9F%E6%88%B7%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener noreferrer">#</a>3.3 租户字段</h3>
<p>① 考虑到拓展性，在使用 DATASOURCE 模式时，默认会叠加 COLUMN 模式，即还有 <code>tenant_id</code> 租户字段：</p>
<ul>
<li>在 <code>INSERT</code> 操作时，会自动记录租户编号到 <code>tenant_id</code> 字段。</li>
<li>在 <code>SELECT</code> 操作时，会自动添加 <code>WHERE tenant_id = ?</code> 查询条件。</li>
</ul>
<p>如果你不需要，可以直接删除 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/db/TenantDatabaseInterceptor.java" target="_blank" rel="noopener noreferrer">TenantDatabaseInterceptor (opens new window)</a>类，以及它的 Bean 自动配置。</p>
<p>拓展性，指的是部分【大】租户独立数据库，部分【小】租户共享数据。</p>
<p>② 也因为叠加了 COLUMN 模式，<strong>主库</strong>的表需要根据情况添加 <code>tenant_id</code> 字段。</p>
<ul>
<li>情况一：不需要添加 <code>tenant_id</code> 字段。例如说：菜单表、定时任务表等等。注意，需要把表名添加到 <code>yudao.tenant.ignore-tables</code> 配置项中。</li>
<li>情况二：需要 <code>tenant_id</code> 字段。例如说：访问日志表、异常日志表等等。目的，排查是哪个租户的系统级别的日志。</li>
</ul>
<h2><a class="header-anchor" href="#_4-多数据源事务"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_4-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E4%BA%8B%E5%8A%A1" target="_blank" rel="noopener noreferrer">#</a>4. 多数据源事务</h2>
<p>使用 DATASOURCE 模式后，可能一个操作涉及到多个数据源。例如说：创建租户时，即需要操作主库，也需要操作租户库。</p>
<p>考虑到多数据的数据一致性，我们会采用事务的方式，而使用 Spring 事务时，会存在多数据库无法切换的问题。不了解的胖友，可以阅读 <a href="https://zhuanlan.zhihu.com/p/410915221" target="_blank" rel="noopener noreferrer">《MyBatis Plus 的多数据源 <code>@DS</code> 切换不起作用了，谁的锅 》 (opens new window)</a>文章。</p>
<p>多数据源的事务方案，是一个老生常谈的问题。比较主流的，有如下两种，都是相对重量级的方案：</p>
<ol>
<li>使用 <a href="https://cloud.tencent.com/developer/article/1436662" target="_blank" rel="noopener noreferrer">Atomikos (opens new window)</a>实现 JTA 分布式事务，配置复杂，性能较差。</li>
<li>使用 <a href="https://www.iocoder.cn/Seata/install/" target="_blank" rel="noopener noreferrer">Seata (opens new window)</a>实现分布式事务，使用简单，性能不错，但是需要额外引入 Seata Server 服务。</li>
</ol>
<h3><a class="header-anchor" href="#_4-1-本地事务"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_4-1-%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1" target="_blank" rel="noopener noreferrer">#</a>4.1 本地事务</h3>
<p>考虑到项目是单体架构，不适合采用重量级的事务，因此采用 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter" target="_blank" rel="noopener noreferrer">dynamic-datasource (opens new window)</a>提供的 <strong>“本地事务”</strong> 轻量级方案。</p>
<p>它的实现原理是：自定义 <a href="https://github.com/baomidou/dynamic-datasource-spring-boot-starter/blob/master/core/src/main/java/com/baomidou/dynamic/datasource/annotation/DSTransactional.java" target="_blank" rel="noopener noreferrer"><code>@DSTransactional</code> (opens new window)</a>事务注解，替代 Spring <code>@Transactional</code> 事务注解。</p>
<ul>
<li>在逻辑执行成功时，循环提交每个数据源的事务。</li>
<li>在逻辑执行失败时，循环回滚每个数据源的事务。</li>
</ul>
<p>但是它存在一个风险点，如果数据库发生异常（例如说宕机），那么本地事务就可能会存在数据不一致的问题。例如说：</p>
<ul>
<li>① 主库的事务提交</li>
<li>② 租户库发生异常，租户的事务提交失败</li>
<li>结果：主库的数据已经提交，而租户库的数据没有提交，就会导致数据不一致。</li>
</ul>
<p><strong>因此，如果你的系统对数据一致性要求很高，那么请使用 Seata 方案。</strong></p>
<h3><a class="header-anchor" href="#_4-2-使用示例"><span></span></a><a href="https://doc.iocoder.cn/saas-tenant/dynamic/#_4-2-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>4.2 使用示例</h3>
<p>在最外层的 Service 方法上，添加 <code>@DSTransactional</code> 注解。例如说，创建租户的 Service 方法：</p>
<figure><img src="https://doc.iocoder.cn/img/Saas多租户/独立数据源/本地事务的使用示例.png" alt="使用示例" tabindex="0" loading="lazy"><figcaption>使用示例</figcaption></figure>
<p>注意，里面不能嵌套有 Spring 自带的事务，就是上图中【黄圈】的 Service 方法不能使用 Spring <code>@Transactional</code> 注解，否则会导致数据源无法切换。</p>
<p>如果【黄圈】的 Service 自身还需要事务，那么可以使用 <code>@DSTransactional</code> 注解。</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/Saas%E5%A4%9A%E7%A7%9F%E6%88%B7/%E7%8B%AC%E7%AB%8B%E6%95%B0%E6%8D%AE%E6%BA%90/%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE%E6%BA%90.png" type="image/png"/>
    </item>
    <item>
      <title>消息队列</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/1.%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/1.%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.html</guid>
      <source url="https://springg.us.kg/rss.xml">消息队列</source>
      <description>消息队列 yudao-spring-boot-starter-mq (opens new window)技术组件，基于 Redis 实现分布式消息队列： 使用 Stream (opens new window)特性，提供【集群】消费的能力。 使用 Pub/Sub (opens new window)特性，提供【广播】消费的能力。 友情提示： 考虑到有部...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-mq</code> (opens new window)</a>技术组件，基于 Redis 实现分布式消息队列：</p>
<ul>
<li>使用 <a href="http://www.redis.cn/topics/streams-intro.html" target="_blank" rel="noopener noreferrer">Stream (opens new window)</a>特性，提供【集群】消费的能力。</li>
<li>使用 <a href="http://www.redis.cn/topics/pubsub.html" target="_blank" rel="noopener noreferrer">Pub/Sub (opens new window)</a>特性，提供【广播】消费的能力。</li>
</ul>
<p>友情提示：</p>
<p>考虑到有部分同学对分布式消息队列了解的不多，所以在下文的广播消费、集群消费的描述，去除【消费者分组】的概念。如果你对这块感兴趣，可以看看艿艿写的系列文章：</p>
<ul>
<li><a href="http://www.iocoder.cn/Spring-Boot/RocketMQ/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 消息队列 RocketMQ 入门》 (opens new window)</a>对应 <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-31" target="_blank" rel="noopener noreferrer">lab-31(opens new window)</a></li>
<li><a href="http://www.iocoder.cn/Spring-Boot/Kafka/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 消息队列 Kafka 入门》 (opens new window)</a>对应 <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-03-kafka" target="_blank" rel="noopener noreferrer">lab-03-kafka(opens new window)</a></li>
<li><a href="http://www.iocoder.cn/Spring-Boot/RabbitMQ/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 消息队列 RabbitMQ 入门》 (opens new window)</a>对应 <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-04-rabbitmq" target="_blank" rel="noopener noreferrer">lab-04-rabbitmq(opens new window)</a></li>
<li><a href="http://www.iocoder.cn/Spring-Boot/ActiveMQ/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 消息队列 ActiveMQ 入门》 (opens new window)</a>对应 <a href="https://github.com/YunaiV/SpringBoot-Labs/tree/master/lab-32" target="_blank" rel="noopener noreferrer">lab-32(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_0-消息队列的开启"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_0-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E5%BC%80%E5%90%AF" target="_blank" rel="noopener noreferrer">#</a>0. 消息队列的开启</h2>
<p>消息队列默认是禁用状态，主要考虑一些团队可能不需要。如果你需要使用短信、邮箱等功能，需要进行开启。</p>
<p>通过修改 <code>application.yaml</code> 配置文件的 <code>yudao.mq.redis.pubsub.enable</code> 和 <code>yudao.mq.redis.pubsub.enable</code> 配置项目为 <code>true</code> 即可。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/消息队列的开启.png" alt="消息队列的开启" tabindex="0" loading="lazy"><figcaption>消息队列的开启</figcaption></figure>
<h2><a class="header-anchor" href="#_1-集群消费"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-%E9%9B%86%E7%BE%A4%E6%B6%88%E8%B4%B9" target="_blank" rel="noopener noreferrer">#</a>1. 集群消费</h2>
<p>集群消费，是指消息发送到 Redis 时，有且只会被一个消费者（应用 JVM 实例）收到，然后消费成功。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/01.png" alt="集群消费" tabindex="0" loading="lazy"><figcaption>集群消费</figcaption></figure>
<h3><a class="header-anchor" href="#_1-1-使用场景"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-1-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" target="_blank" rel="noopener noreferrer">#</a>1.1 使用场景</h3>
<p>集群消费在项目中的使用场景，主要是提供可靠的、可堆积的异步任务的能力。例如说：</p>
<ul>
<li>短信模块，使用它<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/consumer/sms/SmsSendConsumer.java" target="_blank" rel="noopener noreferrer">异步 (opens new window)</a>发送短信。</li>
<li>邮件模块，使用它<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/consumer/mail/MailSendConsumer.java" target="_blank" rel="noopener noreferrer">异步 (opens new window)</a>发送邮件。</li>
</ul>
<p>相比 <a href="https://doc.iocoder.cn/async-task" target="_blank" rel="noopener noreferrer">《开发指南 —— 异步任务》</a> 来说，Spring Async 在 JVM 实例重启时，会导致未执行完的任务丢失。而集群消费，因为消息是存储在 Redis 中，所以不会存在该问题。</p>
<h3><a class="header-anchor" href="#_1-2-实现源码"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-2-%E5%AE%9E%E7%8E%B0%E6%BA%90%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>1.2 实现源码</h3>
<p>集群消费基于 Redis Stream 实现：</p>
<ul>
<li>实现 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/stream/AbstractStreamMessage.java" target="_blank" rel="noopener noreferrer">AbstractStreamMessage (opens new window)</a>抽象类，定义【集群】消息。</li>
<li>使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/RedisMQTemplate.java" target="_blank" rel="noopener noreferrer">RedisMQTemplate (opens new window)</a>的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/RedisMQTemplate.java#L48-L64" target="_blank" rel="noopener noreferrer"><code>#send(message)</code> (opens new window)</a>方法，发送消息。</li>
<li>实现 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/stream/AbstractStreamMessageListener.java" target="_blank" rel="noopener noreferrer">AbstractStreamMessageListener (opens new window)</a>接口，消费消息。</li>
</ul>
<p>最终使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/config/YudaoMQAutoConfiguration.java" target="_blank" rel="noopener noreferrer">YudaoMQAutoConfiguration (opens new window)</a>配置类，扫描所有的 AbstractStreamMessageListener 监听器，初始化对应的消费者。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/02.png" alt="YudaoMQAutoConfiguration" tabindex="0" loading="lazy"><figcaption>YudaoMQAutoConfiguration</figcaption></figure>
<h3><a class="header-anchor" href="#_1-3-实战案例"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-3-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>1.3 实战案例</h3>
<p>以短信模块异步发送短息为例子，讲解集群消费的使用。</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/06.png" alt="实战案例" tabindex="0" loading="lazy"><figcaption>实战案例</figcaption></figure>
<h4><a class="header-anchor" href="#_1-3-1-引入依赖"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-3-1-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96" target="_blank" rel="noopener noreferrer">#</a>1.3.1 引入依赖</h4>
<p>在 <code>yudao-module-system-biz</code> 模块中，引入 <code>yudao-spring-boot-starter-mq</code> 技术组件。如下所示：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-mq&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h4><a class="header-anchor" href="#_1-3-2-smssendmessage"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-3-2-smssendmessage" target="_blank" rel="noopener noreferrer">#</a>1.3.2 SmsSendMessage</h4>
<p>在 <code>yudao-module-system-biz</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/message/sms/" target="_blank" rel="noopener noreferrer"><code>mq/message/sms</code> (opens new window)</a>包下，创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/message/sms/SmsSendMessage.java" target="_blank" rel="noopener noreferrer">SmsSendMessage (opens new window)</a>类，继承 AbstractStreamMessage 抽象类，短信发送消息。代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/03.png" alt="SmsSendMessage" tabindex="0" loading="lazy"><figcaption>SmsSendMessage</figcaption></figure>
<h4><a class="header-anchor" href="#_1-3-3-smsproducer"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-3-3-smsproducer" target="_blank" rel="noopener noreferrer">#</a>1.3.3 SmsProducer</h4>
<p>① 在 <code>yudao-module-system-biz</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/producer/sms/" target="_blank" rel="noopener noreferrer"><code>mq/producer/sms</code> (opens new window)</a>包下，创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/producer/sms" target="_blank" rel="noopener noreferrer">SmsProducer (opens new window)</a>类，SmsSendMessage 的 Producer 生产者，核心是使用 RedisMQTemplate 发送 SmsSendMessage 消息。代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/04.png" alt="SmsProducer" tabindex="0" loading="lazy"><figcaption>SmsProducer</figcaption></figure>
<p>② 发送短信时，需要使用 SmsProducer 发送消息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/05.png" alt="调用 SmsProducer 示例" tabindex="0" loading="lazy"><figcaption>调用 SmsProducer 示例</figcaption></figure>
<h4><a class="header-anchor" href="#_1-3-4-smssendconsumer"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_1-3-4-smssendconsumer" target="_blank" rel="noopener noreferrer">#</a>1.3.4 SmsSendConsumer</h4>
<p>在 <code>yudao-module-system-biz</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/consumer/sms/" target="_blank" rel="noopener noreferrer"><code>mq/consumer/sms</code> (opens new window)</a>包下，创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/mq/consumer/sms/SmsSendConsumer.java" target="_blank" rel="noopener noreferrer">SmsSendConsumer (opens new window)</a>类，SmsSendMessage 的 Consumer 消费者。代码如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/07.png" alt="SmsSendConsumer" tabindex="0" loading="lazy"><figcaption>SmsSendConsumer</figcaption></figure>
<h2><a class="header-anchor" href="#_2-广播消费"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_2-%E5%B9%BF%E6%92%AD%E6%B6%88%E8%B4%B9" target="_blank" rel="noopener noreferrer">#</a>2. 广播消费</h2>
<p>广播消费，是指消息发送到 Redis 时，所有消费者（应用 JVM 实例）收到，然后消费成功。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/11.png" alt="集群消费" tabindex="0" loading="lazy"><figcaption>集群消费</figcaption></figure>
<h3><a class="header-anchor" href="#_2-1-使用场景"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_2-1-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" target="_blank" rel="noopener noreferrer">#</a>2.1 使用场景</h3>
<p>例如说，在应用中，缓存了数据字典等配置表在内存中，可以通过 Redis 广播消费，实现每个应用节点都消费消息，刷新本地内存的缓存。</p>
<p>又例如说，我们基于 WebSocket 实现了 IM 聊天，在我们给用户主动发送消息时，因为我们不知道用户连接的是哪个提供 WebSocket 的应用，所以可以通过 Redis 广播消费。每个应用判断当前用户是否是和自己提供的 WebSocket 服务连接，如果是，则推送消息给用户。</p>
<h3><a class="header-anchor" href="#_2-2-实现源码"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_2-2-%E5%AE%9E%E7%8E%B0%E6%BA%90%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>2.2 实现源码</h3>
<p>广播消费基于 Redis Pub/Sub 实现：</p>
<ul>
<li>实现 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/pubsub/AbstractChannelMessage.java" target="_blank" rel="noopener noreferrer">AbstractChannelMessage (opens new window)</a>抽象类，定义【广播】消息。</li>
<li>使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/RedisMQTemplate.java" target="_blank" rel="noopener noreferrer">RedisMQTemplate (opens new window)</a>的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/RedisMQTemplate.java#L33-L46" target="_blank" rel="noopener noreferrer"><code>#send(message)</code> (opens new window)</a>方法，发送消息。</li>
<li>实现 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/core/pubsub/AbstractChannelMessageListener.java" target="_blank" rel="noopener noreferrer">AbstractChannelMessageListener (opens new window)</a>接口，消费消息。</li>
</ul>
<p>最终使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-mq/src/main/java/cn/iocoder/yudao/framework/mq/config/YudaoMQAutoConfiguration.java" target="_blank" rel="noopener noreferrer">YudaoMQAutoConfiguration (opens new window)</a>配置类，扫描所有的 AbstractChannelMessageListener 监听器，初始化对应的消费者。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/消息队列/12.png" alt="YudaoMQAutoConfiguration" tabindex="0" loading="lazy"><figcaption>YudaoMQAutoConfiguration</figcaption></figure>
<h3><a class="header-anchor" href="#_2-3-实战案例"><span></span></a><a href="https://doc.iocoder.cn/message-queue/#_2-3-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2.3 实战案例</h3>
<p>参见 <a href="https://doc.iocoder.cn/local-cache" target="_blank" rel="noopener noreferrer">《开发指南 —— 本地缓存》</a></p>
<p>上次更新: 2023/07/29, 15:56:49</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E5%BC%80%E5%90%AF.png" type="image/png"/>
    </item>
    <item>
      <title>定时任务</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/2.%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/2.%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html</guid>
      <source url="https://springg.us.kg/rss.xml">定时任务</source>
      <description>定时任务 定时任务的使用场景主要如下： 时间驱动处理场景：每分钟扫描超时支付的订单，活动状态刷新，整点发送优惠券。 批量处理数据：按月批量统计报表数据，批量更新短信状态，实时性要求不高。 年度最佳定时任务：每个月初的工资单的推送！！！ 如果你对定时任务了解不多，可以后续阅读 《芋道 Spring Boot 定时任务入门》 (opens new wind...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>定时任务的使用场景主要如下：</p>
<ul>
<li>时间驱动处理场景：每分钟扫描超时支付的订单，活动状态刷新，整点发送优惠券。</li>
<li>批量处理数据：按月批量统计报表数据，批量更新短信状态，实时性要求不高。</li>
</ul>
<p>年度最佳定时任务：每个月初的工资单的推送！！！</p>
<p>如果你对定时任务了解不多，可以后续阅读 <a href="http://www.iocoder.cn/Spring-Boot/Job/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 定时任务入门》 (opens new window)</a>文章。</p>
<p>项目基于 Quartz + MySQL 实现分布式定时任务，并提供 [基础设施 -&gt; 定时任务] 菜单，进行定时任务的统一管理，支持动态控制任务的添加、修改、开启、暂停、删除、执行一次等操作。</p>
<figure><img src="https://doc.iocoder.cn/img/定时任务/01.png" alt="定时任务" tabindex="0" loading="lazy"><figcaption>定时任务</figcaption></figure>
<ul>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-job</code> (opens new window)</a>技术组件：基于 Quartz 框架的封装，提供简便的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/src/main/java/cn/iocoder/yudao/framework/quartz/core/handler/JobHandler.java" target="_blank" rel="noopener noreferrer">JobHandler (opens new window)</a>接入，任务的执行、重试，执行日志的记录。</li>
<li><code>yudao-module-infra</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/job/" target="_blank" rel="noopener noreferrer"><code>job</code> (opens new window)</a>业务模块，提供任务的动态管理，执行日志的存储。</li>
</ul>
<h2><a class="header-anchor" href="#_1-quartz-配置"><span></span></a><a href="https://doc.iocoder.cn/job/#_1-quartz-%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>1. Quartz 配置</h2>
<p>在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L66-L93" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，通过 <code>spring.quartz</code> 配置项，设置 Quartz 使用 MySQL 实现集群。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/定时任务/02.png" alt="配置文件" tabindex="0" loading="lazy"><figcaption>配置文件</figcaption></figure>
<p>考虑到 <code>local</code> 本地和 <code>dev</code> 测试环境使用相同的数据库，所以【本地】配置 <code>spring.quartz.auto-startup</code> 为 <code>false</code>，禁用本地执行定时任务的功能，影响测试环境。</p>
<h2><a class="header-anchor" href="#_2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/job/#_2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>2. 实战案例</h2>
<p>以用户 Session 超时的定时任务举例子，讲解在项目中使用定时任务。</p>
<p>注意，需要修改 <code>application-local.yaml</code> 配置文件，将 <code>spring.quartz.auto-startup</code> 为 <code>true</code>，开启本地执行定任务的功能。</p>
<h3><a class="header-anchor" href="#_2-1-引入依赖"><span></span></a><a href="https://doc.iocoder.cn/job/#_2-1-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96" target="_blank" rel="noopener noreferrer">#</a>2.1 引入依赖</h3>
<p>在 <code>yudao-module-system-biz</code> 模块中，引入 <code>yudao-spring-boot-starter-job</code> 技术组件。如下所示：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-spring-boot-starter-job&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_2-2-usersessiontimeoutjob"><span></span></a><a href="https://doc.iocoder.cn/job/#_2-2-usersessiontimeoutjob" target="_blank" rel="noopener noreferrer">#</a>2.2 UserSessionTimeoutJob</h3>
<p>每个 <code>yudao-module-xxx-biz</code> 模块的 <code>job</code> 包，用于定义定时任务的 Job 类。</p>
<p>因此，在 <code>yudao-module-system-biz</code> 模块的 <code>job</code> 包下，创建 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/job/auth/UserSessionTimeoutJob.java" target="_blank" rel="noopener noreferrer">UserSessionTimeoutJob (opens new window)</a>类，实现 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-job/src/main/java/cn/iocoder/yudao/framework/quartz/core/handler/JobHandler.java#L8" target="_blank" rel="noopener noreferrer">JobHandler (opens new window)</a>接口，执行用户 Session 超时 Job。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/定时任务/03.png" alt="UserSessionTimeoutJob 类" tabindex="0" loading="lazy"><figcaption>UserSessionTimeoutJob 类</figcaption></figure>
<p>疑问：为什么添加 @TenantJob 注解？</p>
<p>声明 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-tenant/src/main/java/cn/iocoder/yudao/framework/tenant/core/job/TenantJob.java" target="_blank" rel="noopener noreferrer"><code>@TenantJob</code> (opens new window)</a>注解在 Job 类上，实现<strong>并行</strong>遍历每个租户，执行定时任务的逻辑。</p>
<p>更多多租户的内容，可见 <a href="https://doc.iocoder.cn/saas-tenant/" target="_blank" rel="noopener noreferrer">《开发指南 —— SaaS 多租户》 (opens new window)</a>文档。</p>
<h3><a class="header-anchor" href="#_2-3-配置任务"><span></span></a><a href="https://doc.iocoder.cn/job/#_2-3-%E9%85%8D%E7%BD%AE%E4%BB%BB%E5%8A%A1" target="_blank" rel="noopener noreferrer">#</a>2.3 配置任务</h3>
<p>① 点击 [新增] 按钮，填写定时任务 UserSessionTimeoutJob 的信息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/定时任务/04.png" alt="新建任务" tabindex="0" loading="lazy"><figcaption>新建任务</figcaption></figure>
<ul>
<li>处理器的名字：对应的 Spring Bean 名字。例如说 UserSessionTimeoutJob 对应 userSessionTimeoutJob</li>
<li>Cron 表达式：执行周期，可通过 [生成表达式] 功能，进行生成 <img src="https://doc.iocoder.cn/img/定时任务/08.png" alt="新建任务" loading="lazy"></li>
<li>重试次数、重试间隔：执行失败后，立即重试的次数以及重试的间隔时间</li>
<li>超时时间监控：执行超过该时间后，发送告警邮件给开发【暂不支持，未来实现】</li>
</ul>
<p>常用的 Cron 表达式如下：</p>
<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#98C379;--shiki-dark:#98C379"> 10,14,16</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 每天上午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#98C379;--shiki-dark:#98C379"> 点，下午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#98C379;--shiki-dark:#98C379"> 点、4</span><span style="color:#98C379;--shiki-dark:#98C379"> 点</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#98C379;--shiki-dark:#98C379"> 0/30</span><span style="color:#98C379;--shiki-dark:#98C379"> 9-17</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 朝九晚五工作时间内，每半小时</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 12</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> WED</span><span style="color:#98C379;--shiki-dark:#98C379"> 表示每个星期三中午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 12</span><span style="color:#98C379;--shiki-dark:#98C379"> 点</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 12</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 每天中午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 12</span><span style="color:#98C379;--shiki-dark:#98C379"> 点触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> 每天上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 每天上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> 每天上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2005</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2005</span><span style="color:#98C379;--shiki-dark:#98C379"> 年的每天上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 14</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#98C379;--shiki-dark:#98C379"> 点到下午</span><span style="color:#98C379;--shiki-dark:#98C379"> 2:59</span><span style="color:#98C379;--shiki-dark:#98C379"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#98C379;--shiki-dark:#98C379"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#98C379;--shiki-dark:#98C379"> 0/5</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 14</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#98C379;--shiki-dark:#98C379"> 点到下午</span><span style="color:#98C379;--shiki-dark:#98C379"> 2:55</span><span style="color:#98C379;--shiki-dark:#98C379"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#98C379;--shiki-dark:#98C379"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#98C379;--shiki-dark:#98C379"> 0/5</span><span style="color:#98C379;--shiki-dark:#98C379"> 14,18</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#98C379;--shiki-dark:#98C379"> 点到</span><span style="color:#98C379;--shiki-dark:#98C379"> 2:55</span><span style="color:#98C379;--shiki-dark:#98C379"> 期间和下午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 6</span><span style="color:#98C379;--shiki-dark:#98C379"> 点到</span><span style="color:#98C379;--shiki-dark:#98C379"> 6:55</span><span style="color:#98C379;--shiki-dark:#98C379"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 5</span><span style="color:#98C379;--shiki-dark:#98C379"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#98C379;--shiki-dark:#98C379"> 0-5</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 14</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 在每天下午</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2</span><span style="color:#98C379;--shiki-dark:#98C379"> 点到下午</span><span style="color:#98C379;--shiki-dark:#98C379"> 2:05</span><span style="color:#98C379;--shiki-dark:#98C379"> 期间，每</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#98C379;--shiki-dark:#98C379"> 分钟触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#98C379;--shiki-dark:#98C379"> 10,44</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 14</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 3</span><span style="color:#98C379;--shiki-dark:#98C379"> WED</span><span style="color:#98C379;--shiki-dark:#98C379"> 每年三月的星期三的下午</span><span style="color:#98C379;--shiki-dark:#98C379"> 2:10</span><span style="color:#98C379;--shiki-dark:#98C379"> 和</span><span style="color:#98C379;--shiki-dark:#98C379"> 2:44</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> MON-FRI</span><span style="color:#98C379;--shiki-dark:#98C379"> 周一至周五的上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 每月15日上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#98C379;--shiki-dark:#98C379"> L</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#98C379;--shiki-dark:#98C379"> 每月最后一日的上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> 6L</span><span style="color:#98C379;--shiki-dark:#98C379"> 每月的最后一个星期五上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#98C379;--shiki-dark:#98C379"> 6L</span><span style="color:#98C379;--shiki-dark:#98C379"> 2002-2005</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2002</span><span style="color:#98C379;--shiki-dark:#98C379"> 年至</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 2005</span><span style="color:#98C379;--shiki-dark:#98C379"> 年，每月的最后一个星期五上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">0</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 15</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 10</span><span style="color:#98C379;--shiki-dark:#98C379"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> *</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 6#3</span><span style="color:#98C379;--shiki-dark:#98C379"> 每月的第三个星期五上午</span><span style="color:#98C379;--shiki-dark:#98C379"> 10:15</span><span style="color:#98C379;--shiki-dark:#98C379"> 触发</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 点击 [更多 -&gt; 任务详情] 按钮，可以查看任务的基础信息、后续的执行时间。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/定时任务/05.png" alt="新建任务" tabindex="0" loading="lazy"><figcaption>新建任务</figcaption></figure>
<h3><a class="header-anchor" href="#_2-4-测试任务"><span></span></a><a href="https://doc.iocoder.cn/job/#_2-4-%E6%B5%8B%E8%AF%95%E4%BB%BB%E5%8A%A1" target="_blank" rel="noopener noreferrer">#</a>2.4 测试任务</h3>
<p>① 点击 [更多 -&gt; 执行一次] 按钮，立即执行一次 UserSessionTimeoutJob 定时任务。可以在 IDEA 控制台看到输出，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/定时任务/06.png" alt="执行一次" tabindex="0" loading="lazy"><figcaption>执行一次</figcaption></figure>
<p>② 点击 [更多 -&gt; 调度日志] 按钮，可以查看到 UserSessionTimeoutJob 的执行日志。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/定时任务/07.png" alt="调度日志" tabindex="0" loading="lazy"><figcaption>调度日志</figcaption></figure>
<p>上次更新: 2022/04/22, 00:36:05</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/01.png" type="image/png"/>
    </item>
    <item>
      <title>限流熔断</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/3.%E9%99%90%E6%B5%81%E7%86%94%E6%96%AD.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/3.%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%89%8B%E5%86%8C/3.%E9%99%90%E6%B5%81%E7%86%94%E6%96%AD.html</guid>
      <source url="https://springg.us.kg/rss.xml">限流熔断</source>
      <description>限流熔断 yudao-spring-boot-starter-protection (opens new window)技术组件，基于 Resilience4j (opens new window)轻量级的容错组件，实现熔断器、限流器、舱壁隔离、重试、限时器的功能。 使用的示例，参见 《芋道 Spring Boot 服务容错 Resilience4j ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-protection/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-protection</code> (opens new window)</a>技术组件，基于 <a href="https://resilience4j.readme.io/" target="_blank" rel="noopener noreferrer">Resilience4j (opens new window)</a>轻量级的容错组件，实现熔断器、限流器、舱壁隔离、重试、限时器的功能。</p>
<p>使用的示例，参见 <a href="https://www.iocoder.cn/Spring-Boot/Resilience4j/?yudao" target="_blank" rel="noopener noreferrer">《芋道 Spring Boot 服务容错 Resilience4j 入门 》 (opens new window)</a>文章。</p>
<p>上次更新: 2022/04/10, 01:05:31</p>
]]></content:encoded>
    </item>
    <item>
      <title>工作流（Flowable）会签、或签</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/4.%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%89%8B%E5%86%8C/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%88Flowable%EF%BC%89%E4%BC%9A%E7%AD%BE%E3%80%81%E6%88%96%E7%AD%BE.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/4.%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%89%8B%E5%86%8C/%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%88Flowable%EF%BC%89%E4%BC%9A%E7%AD%BE%E3%80%81%E6%88%96%E7%AD%BE.html</guid>
      <source url="https://springg.us.kg/rss.xml">工作流（Flowable）会签、或签</source>
      <description>工作流（Flowable）会签、或签 项目基于 Flowable 实现了工作流的功能。本章节，我们将介绍工作流的相关功能。 以请假流程为例，讲解系统支持的两种表单方式的工作流： 流程表单：在线配置动态表单，无需建表与开发 业务表单：业务需建立独立的数据库表，并开发对应的表单、详情界面 整个过程包括： 定义流程：【管理员】新建流程、设计流程模型、并设置用...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>项目基于 Flowable 实现了工作流的功能。本章节，我们将介绍工作流的相关功能。</p>
<p>以请假流程为例，讲解系统支持的两种表单方式的工作流：</p>
<ol>
<li>流程表单：在线配置动态表单，无需建表与开发</li>
<li>业务表单：业务需建立独立的数据库表，并开发对应的表单、详情界面</li>
</ol>
<p>整个过程包括：</p>
<ol>
<li>定义流程：【管理员】新建流程、设计流程模型、并设置用户任务的审批人，最终发布流程</li>
<li>发起流程：【员工】选择流程，并发起流程实例</li>
<li>审批流程：【审批人】接收到流程任务，审批结果为通过或不通过</li>
</ol>
<figure><img src="https://doc.iocoder.cn/img/工作流/54.png" alt="示例流程" tabindex="0" loading="lazy"><figcaption>示例流程</figcaption></figure>
<p>微信扫描下方二维码，加入后可观看视频！</p>
<figure><img src="https://doc.iocoder.cn/img/视频教程/zsxq_bpm.png" alt="示例流程" tabindex="0" loading="lazy"><figcaption>示例流程</figcaption></figure>
<ul>
<li><a href="https://t.zsxq.com/04aqfIiY3" target="_blank" rel="noopener noreferrer">01、如何集成 Flowable 框架？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04nun2RRz" target="_blank" rel="noopener noreferrer">02、如何实现动态的流程表单？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04uneeaUb" target="_blank" rel="noopener noreferrer">03、如何实现流程表单的保存？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04jiMrjAm" target="_blank" rel="noopener noreferrer">04、如何实现流程表单的展示？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04iynUF6e" target="_blank" rel="noopener noreferrer">05、如何实现流程模型的新建？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04rNVbEQB" target="_blank" rel="noopener noreferrer">06、如何实现流程模型的流程图的设计？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/042neybYz" target="_blank" rel="noopener noreferrer">07、如何实现流程模型的流程图的预览？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04uburRvZ" target="_blank" rel="noopener noreferrer">08、如何实现流程模型的分配规则？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04jUBMjyF" target="_blank" rel="noopener noreferrer">09、如何实现流程模型的发布？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04MF6URvz" target="_blank" rel="noopener noreferrer">10、如何实现流程定义的查询？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04jyvNfqj" target="_blank" rel="noopener noreferrer">11、如何实现流程的发起？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/046UFqRzz" target="_blank" rel="noopener noreferrer">12、如何实现我的流程列表？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04aM72rzv" target="_blank" rel="noopener noreferrer">13、如何实现流程的取消？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04rNvFI2f" target="_blank" rel="noopener noreferrer">14、如何实现流程的任务分配？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04yFUVZvF" target="_blank" rel="noopener noreferrer">15、如何实现会签、或签任务？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04QZzjAme" target="_blank" rel="noopener noreferrer">16、如何实现我的待办任务列表？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04uj6AQJE" target="_blank" rel="noopener noreferrer">17、如何实现我的已办任务列表？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04Q7UbqBM" target="_blank" rel="noopener noreferrer">18、如何实现任务的审批通过？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04BQvJM7y" target="_blank" rel="noopener noreferrer">19、如何实现任务的审批不通过？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04Ie2v7m2" target="_blank" rel="noopener noreferrer">20、如何实现流程的审批记录？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04R72rzzN" target="_blank" rel="noopener noreferrer">21、如何实现流程的流程图的高亮？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04eyRRJ2f" target="_blank" rel="noopener noreferrer">22、如何实现工作流的短信通知？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04rFUjIei" target="_blank" rel="noopener noreferrer">23、如何实现 OA 请假的发起？(opens new window)</a></li>
<li><a href="https://t.zsxq.com/04fMJiufQ" target="_blank" rel="noopener noreferrer">24、如何实现 OA 请假的审批？(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_0-如何开启-bpm-模块"><span></span></a><a href="https://doc.iocoder.cn/bpm/#_0-%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF-bpm-%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener noreferrer">#</a>0. 如何开启 bpm 模块？</h2>
<p><code>yudao-module-bpm</code> 模块默认未启用，需要手动开启。步骤如下：</p>
<p>① 第一步，修改根目录的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>文件，取消 <code>yudao-module-bpm</code> 模块的注释。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/-1.png" alt="引入  模块" tabindex="0" loading="lazy"><figcaption>引入  模块</figcaption></figure>
<p>② 第二步，修改 <code>yudao-server</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>文件，取消 <code>yudao-module-bpm-biz</code> 依赖的注释，并进行 IDEA 的 Maven 刷新。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/0.png" alt="引入  依赖" tabindex="0" loading="lazy"><figcaption>引入  依赖</figcaption></figure>
<p>③ 第三步，点击 <a href="https://doc.iocoder.cn/file/bpm.sql" target="_blank" rel="noopener noreferrer"><code>bpm.sql</code></a> 下载，然后导入到数据库中。</p>
<p>友情提示：↑↑↑ bpm.sql 是可以点击下载的！ ↑↑↑</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/功能开启/SQL导入.png" alt="导入 " tabindex="0" loading="lazy"><figcaption>导入 </figcaption></figure>
<p>④ 第四步，重启项目，看到 <code>Property Source flowable-liquibase-override refreshed</code> 说明开启成功。</p>
<p>另外，启动过程中，Flowable 会自动创建 <code>ACT_</code> 和 <code>FLW_</code> 开头的表。</p>
<p>如果启动中报 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/issues/I57FYM" target="_blank" rel="noopener noreferrer">MySQL “Specified key was too long; max key length is 1000 bytes” (opens new window)</a>错误，可以将 MySQL 的缺省存储引擎设置为 innodb，即 <code>default-storage-engine=innodb</code> 配置项。</p>
<h2><a class="header-anchor" href="#_1-请假流程【流程表单】"><span></span></a><a href="https://doc.iocoder.cn/bpm/#_1-%E8%AF%B7%E5%81%87%E6%B5%81%E7%A8%8B%E3%80%90%E6%B5%81%E7%A8%8B%E8%A1%A8%E5%8D%95%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>1. 请假流程【流程表单】</h2>
<h3><a class="header-anchor" href="#_1-1-第一步-定义流程"><span></span></a><a href="https://doc.iocoder.cn/bpm/#_1-1-%E7%AC%AC%E4%B8%80%E6%AD%A5-%E5%AE%9A%E4%B9%89%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>1.1 第一步：定义流程</h3>
<p>登录账号 admin、密码 admin123 的用户，扮演【管理员】的角色，进行流程的定义。</p>
<p>① 访问 [工作流程 -&gt; 流程管理 -&gt; 流程模型] 菜单，点击 [新建流程] 按钮，填写流程标识、流程名称。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/1.png" alt="新建流程" tabindex="0" loading="lazy"><figcaption>新建流程</figcaption></figure>
<ul>
<li>流程标识：对应 BPMN 流程文件 XML 的 <code>id</code> 属性，不能重复，新建后不可修改。</li>
<li>流程名称：对应 BPMN 流程文件 XML 的 <code>name</code> 属性。</li>
</ul>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 这是一个 BPMN XML 的示例，主要看 id 和 name 属性 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;?</span><span style="color:#E06C75;--shiki-dark:#E06C75">xml</span><span style="color:#D19A66;--shiki-dark:#D19A66"> version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"1.0"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> encoding</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"UTF-8"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">?&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">bpmn2:definitions</span><span style="color:#D19A66;--shiki-dark:#D19A66"> xmlns:xsi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://www.w3.org/2001/XMLSchema-instance"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> xmlns:bpmn2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://www.omg.org/spec/BPMN/20100524/MODEL"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> xmlns:bpmndi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://www.omg.org/spec/BPMN/20100524/DI"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"diagram_Process_1647305370393"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> targetNamespace</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"http://activiti.org/bpmn"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">bpmn2:process</span><span style="color:#D19A66;--shiki-dark:#D19A66"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"common-form"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"通用表单流程"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> isExecutable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"true"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">bpmndi:BPMNDiagram</span><span style="color:#D19A66;--shiki-dark:#D19A66"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"BPMNDiagram_1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">bpmndi:BPMNPlane</span><span style="color:#D19A66;--shiki-dark:#D19A66"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"common-form_di"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> bpmnElement</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"common-form"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">bpmndi:BPMNDiagram</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">bpmn2:definitions</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 访问 [工作流程 -&gt; 流程管理 -&gt; 流程表单] 菜单，点击 [新增] 按钮，新增一个名字为 leave-form 的表单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/3.png" alt="流程表单新增" tabindex="0" loading="lazy"><figcaption>流程表单新增</figcaption></figure>
<p>流程表单的实现？</p>
<p>基于 <a href="https://github.com/JakHuang/form-generator" target="_blank" rel="noopener noreferrer">https://github.com/JakHuang/form-generator (opens new window)</a>项目实现的动态表单。</p>
<p>回到 [工作流程 -&gt; 流程管理 -&gt; 流程模型] 菜单，点击 [修改流程] 按钮，配置表单类型为流程表单，选择名字为 leave-form 的流程表单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/4.png" alt="修改流程" tabindex="0" loading="lazy"><figcaption>修改流程</figcaption></figure>
<p>③ 点击 [设计流程] 按钮，在线设计请假流程模型，包含两个用户任务：领导审批、HR 审批。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/5.png" alt="设计流程" tabindex="0" loading="lazy"><figcaption>设计流程</figcaption></figure>
<p>设计流程的实现？</p>
<p>基于 <a href="https://github.com/miyuesc/bpmn-process-designer" target="_blank" rel="noopener noreferrer">https://github.com/miyuesc/bpmn-process-designer (opens new window)</a>项目实现，它的底层是 <a href="https://github.com/bpmn-io" target="_blank" rel="noopener noreferrer">bpmn-js (opens new window)</a>。</p>
<p>④ 点击 [分配规则] 按钮，设置用户任务的审批人。其中，规则类型用于分配用户任务的审批人，目前有 7 种规则：角色、部门成员、部门负责人、岗位、用户、用户组、自定义脚本，基本可以满足绝大多数场景，是不是非常良心。</p>
<ul>
<li>设置【领导审批】的规则类型为自定义脚本 + 流程发起人的一级领导，如下图所示： <img src="https://doc.iocoder.cn/img/工作流/6-a.png" alt="分配规则 - 领导审批" loading="lazy"></li>
<li>设置【HR 审批】的规则类型为岗位 + 人力资源，如下图所示： <img src="https://doc.iocoder.cn/img/工作流/6-b.png" alt="分配规则 - HR 审批" loading="lazy"></li>
</ul>
<p>规则类型的实现？</p>
<p>可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-bpm/yudao-module-bpm-biz/src/main/java/cn/iocoder/yudao/module/bpm/framework/flowable/core/behavior/BpmUserTaskActivityBehavior.java" target="_blank" rel="noopener noreferrer">BpmUserTaskActivityBehavior (opens new window)</a>代码，目前暂时支持分配一个审批人。</p>
<p>⑤ 点击 [发布流程] 按钮，把定义的流程模型部署出去。部署成功后，就可以发起该流程了。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/7.png" alt="发布路程" tabindex="0" loading="lazy"><figcaption>发布路程</figcaption></figure>
<p>修改流程后，需要重新发布流程吗？</p>
<p>需要，<strong>必须重新发布</strong>才能生效。每次流程发布后，会生成一个新的流程定义，版本号从 v1 开始递增。</p>
<p>发布成功后，会部署新版本的流程定义，旧版本的流程定义将被挂起。当然，已经发起的流程不会受到影响，还是走老的流程定义。</p>
<h3><a class="header-anchor" href="#_1-2-第二步-发起流程"><span></span></a><a href="https://doc.iocoder.cn/bpm/#_1-2-%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%8F%91%E8%B5%B7%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>1.2 第二步：发起流程</h3>
<p>登录账号 admin、密码 admin123 的用户，扮演【员工】的角色，进行流程的发起。</p>
<p>① 访问 [工作流程 -&gt; 任务管理 -&gt; 我的流程] 菜单，点击 [发起流程] 按钮，可以看到可以选择的流程定义的列表。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/33.png" alt="流程定义的列表" tabindex="0" loading="lazy"><figcaption>流程定义的列表</figcaption></figure>
<p>② 选择名字为通用表单的流程定义，发起请假流程。填写请假表单信息如下：</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/10.png" alt="发起流程" tabindex="0" loading="lazy"><figcaption>发起流程</figcaption></figure>
<p>③ 点击提交成功后，可在我的流程中，可看到该流程的状态、结果。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/11.png" alt="我的流程" tabindex="0" loading="lazy"><figcaption>我的流程</figcaption></figure>
<p>④ 点击 [详情] 按钮，可以查看申请的表单信息、审批记录、流程跟踪图。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/12.png" alt="详情" tabindex="0" loading="lazy"><figcaption>详情</figcaption></figure>
<h3><a class="header-anchor" href="#_1-2-第三步-审批流程-领导审批"><span></span></a><a href="https://doc.iocoder.cn/bpm/#_1-2-%E7%AC%AC%E4%B8%89%E6%AD%A5-%E5%AE%A1%E6%89%B9%E6%B5%81%E7%A8%8B-%E9%A2%86%E5%AF%BC%E5%AE%A1%E6%89%B9" target="_blank" rel="noopener noreferrer">#</a>1.2 第三步：审批流程（领导审批）</h3>
<p>登录账号 test、密码 test123 的用户，扮演【审批人】的角色，进行请假流程的【领导审批】任务。</p>
<p>① 访问 [工作流程 -&gt; 任务管理 -&gt; 待办任务] 菜单，可以查询到需要审批的任务。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/13.png" alt="待办任务" tabindex="0" loading="lazy"><figcaption>待办任务</figcaption></figure>
<p>② 点击 [审批] 按钮，填写审批建议，并点击 [通过] 按钮，这样任务的审批就完成了。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/14.png" alt="部门领导审批" tabindex="0" loading="lazy"><figcaption>部门领导审批</figcaption></figure>
<p>③ 访问 [工作流程 -&gt; 任务管理 -&gt; 已办任务] 菜单，可以查询到已经审批的任务。</p>
<figure><img src="https://doc.iocoder.cn/img/工作流/34.png" alt="已办任务" tabindex="0" loading="lazy"><figcaption>已办任务</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%B7%A5%E4%BD%9C%E6%B5%81/54.png" type="image/png"/>
    </item>
    <item>
      <title>商城演示</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/5.%E5%95%86%E5%9F%8E%E6%89%8B%E5%86%8C/1.%E5%95%86%E5%9F%8E%E6%BC%94%E7%A4%BA.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/5.%E5%95%86%E5%9F%8E%E6%89%8B%E5%86%8C/1.%E5%95%86%E5%9F%8E%E6%BC%94%E7%A4%BA.html</guid>
      <source url="https://springg.us.kg/rss.xml">商城演示</source>
      <description>img商城演示 #1. 演示地址 ① 商城移动端，访问 http://mall.yudao.iocoder.cn/ (opens new window)地址。 可使用账号 15601691300，密码 123456 进行登录 对应 https://github.com/yudaocode/yudao-mall-uniapp (opens new win...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#_1-演示地址"><span></span></a><a href="https://doc.iocoder.cn/mall-preview/#_1-%E6%BC%94%E7%A4%BA%E5%9C%B0%E5%9D%80" target="_blank" rel="noopener noreferrer">#</a>1. 演示地址</h2>
<p>① 商城移动端，访问 <a href="http://mall.yudao.iocoder.cn/" target="_blank" rel="noopener noreferrer">http://mall.yudao.iocoder.cn/ (opens new window)</a>地址。</p>
<ul>
<li>可使用账号 15601691300，密码 123456 进行登录</li>
<li>对应 <a href="https://github.com/yudaocode/yudao-mall-uniapp" target="_blank" rel="noopener noreferrer">https://github.com/yudaocode/yudao-mall-uniapp (opens new window)</a>仓库，目前是基于 Vue2 + uniapp 实现</li>
<li>近期会升级到 Vue3 + uniapp 实现，想参与的同学可添加 wangwenbin-server 微信号，非诚勿扰。</li>
</ul>
<p>② 商城后端，访问 <a href="http://dashboard-vue3.yudao.iocoder.cn/" target="_blank" rel="noopener noreferrer">http://dashboard-vue3.yudao.iocoder.cn/ (opens new window)</a>地址</p>
<ul>
<li>对应「会员中心」「商品中心」「订单中心」「营销中心」四个菜单</li>
<li>对应 <a href="https://github.com/yudaocode/yudao-ui-admin-vue3" target="_blank" rel="noopener noreferrer">https://github.com/yudaocode/yudao-ui-admin-vue3 (opens new window)</a>仓库，基于 Vue3 + Element Plus 实现</li>
<li>近期会增加统计报表，想参与的同学可添加 wangwenbin-server 微信号，非诚勿扰。</li>
</ul>
<h2><a class="header-anchor" href="#_2-商城启动"><span></span></a><a href="https://doc.iocoder.cn/mall-preview/#_2-%E5%95%86%E5%9F%8E%E5%90%AF%E5%8A%A8" target="_blank" rel="noopener noreferrer">#</a>2. 商城启动</h2>
<p>参见 <a href="https://doc.iocoder.cn/mall/build/" target="_blank" rel="noopener noreferrer">《商城手册 —— 功能开启》</a> 文档，一般 3 分钟就可以启动完成。</p>
<h2><a class="header-anchor" href="#_3-商城交流"><span></span></a><a href="https://doc.iocoder.cn/mall-preview/#_3-%E5%95%86%E5%9F%8E%E4%BA%A4%E6%B5%81" target="_blank" rel="noopener noreferrer">#</a>3. 商城交流</h2>
<p>专属交流社区，欢迎扫码加入。</p>
]]></content:encoded>
      <enclosure url="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==" type="image/"/>
    </item>
    <item>
      <title>功能开启</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/5.%E5%95%86%E5%9F%8E%E6%89%8B%E5%86%8C/2.%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/5.%E5%95%86%E5%9F%8E%E6%89%8B%E5%86%8C/2.%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF.html</guid>
      <source url="https://springg.us.kg/rss.xml">功能开启</source>
      <description>功能开启 商城目前处于【开发】阶段，功能还在不断完善中，敬请期待！ 完成时间不确定，主要前端的工作量比较大。如果你有兴趣一起开发，可以联系微信 wangwenbin-server 商城的功能，由 yudao-module-mall (opens new window)模块实现，对应管理后台的前端代码为 @/views/mall (opens new w...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>商城目前处于【开发】阶段，功能还在不断完善中，敬请期待！</p>
<p>完成时间不确定，主要前端的工作量比较大。如果你有兴趣一起开发，可以联系微信 <strong>wangwenbin-server</strong></p>
<p>商城的功能，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mall/" target="_blank" rel="noopener noreferrer"><code>yudao-module-mall</code> (opens new window)</a>模块实现，对应管理后台的前端代码为 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/views/mall" target="_blank" rel="noopener noreferrer"><code>@/views/mall</code> (opens new window)</a>目录，用户前台的前端代码为 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin" target="_blank" rel="noopener noreferrer"><code>yudao-ui-admin</code> (opens new window)</a>项目。</p>
<h2><a class="header-anchor" href="#_1-功能介绍"><span></span></a><a href="https://doc.iocoder.cn/mall/build/#_1-%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer">#</a>1. 功能介绍</h2>
<p>主要拆分四大模块：商品中心、交易中心、营销中心、会员中心（待建设）。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/商城手册/功能开启/第三步-01.png" alt="功能列表" tabindex="0" loading="lazy"><figcaption>功能列表</figcaption></figure>
<h2><a class="header-anchor" href="#_2-功能开启"><span></span></a><a href="https://doc.iocoder.cn/mall/build/#_2-%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF" target="_blank" rel="noopener noreferrer">#</a>2. 功能开启</h2>
<p>考虑到编译速度，默认 <code>yudao-module-mall</code> 模块是关闭的，需要手动开启。步骤如下：</p>
<ul>
<li>第一步，开启 <code>yudao-module-mall</code> 模块</li>
<li>第二步，导入商城的 SQL 数据库脚本</li>
<li>第三步，重启后端项目，确认功能是否生效</li>
</ul>
<h3><a class="header-anchor" href="#_2-1-开启模块"><span></span></a><a href="https://doc.iocoder.cn/mall/build/#_2-1-%E5%BC%80%E5%90%AF%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener noreferrer">#</a>2.1 开启模块</h3>
<p>① 修改根目录的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>文件，取消 <code>yudao-module-mall</code> 模块的注释。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/商城手册/功能开启/第一步-01.png" alt="取消  模块的注释" tabindex="0" loading="lazy"><figcaption>取消  模块的注释</figcaption></figure>
<p>② 修改 <code>yudao-server</code> 目录的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>文件，引入 <code>yudao-module-mall</code> 模块。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/商城手册/功能开启/第一步-02.png" alt="引入  模块" tabindex="0" loading="lazy"><figcaption>引入  模块</figcaption></figure>
<p>③ 点击 IDEA 右上角的【Reload All Maven Projects】，刷新 Maven 依赖。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/功能开启/第一步-03.png" alt="刷新 Maven 依赖" tabindex="0" loading="lazy"><figcaption>刷新 Maven 依赖</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-第二步-导入-sql"><span></span></a><a href="https://doc.iocoder.cn/mall/build/#_2-2-%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%AF%BC%E5%85%A5-sql" target="_blank" rel="noopener noreferrer">#</a>2.2 第二步，导入 SQL</h3>
<p>点击 <a href="https://doc.iocoder.cn/file/mall_2023_08_27.sql" target="_blank" rel="noopener noreferrer"><code>mall.sql</code></a> 下载，然后导入到数据库中。</p>
<p>友情提示：↑↑↑ mall.sql 是可以点击下载的！ ↑↑↑</p>
<ul>
<li>以 <code>product_</code> 作为前缀的表，对应商品模块（中心）。</li>
<li>以 <code>trade_</code> 作为前缀的表，对应交易模块（中心）。</li>
<li>以 <code>promotion_</code> 作为前缀的表，对应营销模块（中心）。</li>
<li>【待建设】以 <code>member_</code> 作为前缀的表，对应会员模块（中心）。</li>
</ul>
<h3><a class="header-anchor" href="#_2-3-第三步-重新项目"><span></span></a><a href="https://doc.iocoder.cn/mall/build/#_2-3-%E7%AC%AC%E4%B8%89%E6%AD%A5-%E9%87%8D%E6%96%B0%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener noreferrer">#</a>2.3 第三步，重新项目</h3>
<p>重启后端项目，然后访问前端的商城菜单，确认功能是否生效。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/商城手册/功能开启/第三步-01.png" alt="确认功能是否生效" tabindex="0" loading="lazy"><figcaption>确认功能是否生效</figcaption></figure>
<p>至此，我们就成功开启了商城的功能 🙂</p>
<h2><a class="header-anchor" href="#_3-项目进展"><span></span></a><a href="https://doc.iocoder.cn/mall/build/#_3-%E9%A1%B9%E7%9B%AE%E8%BF%9B%E5%B1%95" target="_blank" rel="noopener noreferrer">#</a>3. 项目进展</h2>
<p>| 功能         | 用户 App | 管理后台 |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%95%86%E5%9F%8E%E6%89%8B%E5%86%8C/%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF/%E7%AC%AC%E4%B8%89%E6%AD%A5-01.png" type="image/png"/>
    </item>
    <item>
      <title>报表设计器</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/6.%E5%A4%A7%E5%B1%8F%E6%89%8B%E5%86%8C/1.%E6%8A%A5%E8%A1%A8%E8%AE%BE%E8%AE%A1%E5%99%A8.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/6.%E5%A4%A7%E5%B1%8F%E6%89%8B%E5%86%8C/1.%E6%8A%A5%E8%A1%A8%E8%AE%BE%E8%AE%A1%E5%99%A8.html</guid>
      <source url="https://springg.us.kg/rss.xml">报表设计器</source>
      <description>报表设计器 数据可视化，一般可以通过报表设计器、或者大屏设计器来实现。本小节，我们来讲解报表设计器的功能开启。 报表设计器，指的是使用 Web 版设计器，通过类似于 Excel 操作风格，通过拖拽完成报表设计。如下图所示： 报表设计器报表设计器 在项目中，通过集成市面上的报表引擎，实现了报表设计器的能力。目前使用如下： 为什么不使用 UReport2 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>数据可视化，一般可以通过报表设计器、或者大屏设计器来实现。本小节，我们来讲解报表设计器的功能开启。</p>
<p>报表设计器，指的是使用 Web 版设计器，通过类似于 Excel 操作风格，通过拖拽完成报表设计。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/大屏手册/报表设计器/报表设计器.gif" alt="报表设计器" tabindex="0" loading="lazy"><figcaption>报表设计器</figcaption></figure>
<p>在项目中，通过集成市面上的报表引擎，实现了报表设计器的能力。目前使用如下：</p>
<p>|                                                              | 是否集成 | 是否开源 |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%A4%A7%E5%B1%8F%E6%89%8B%E5%86%8C/%E6%8A%A5%E8%A1%A8%E8%AE%BE%E8%AE%A1%E5%99%A8/%E6%8A%A5%E8%A1%A8%E8%AE%BE%E8%AE%A1%E5%99%A8.gif" type="image/gif"/>
    </item>
    <item>
      <title>大屏设计器</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/6.%E5%A4%A7%E5%B1%8F%E6%89%8B%E5%86%8C/2.%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/6.%E5%A4%A7%E5%B1%8F%E6%89%8B%E5%86%8C/2.%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8.html</guid>
      <source url="https://springg.us.kg/rss.xml">大屏设计器</source>
      <description>大屏设计器 数据可视化，一般可以通过报表设计器、或者大屏设计器来实现。本小节，我们来讲解大屏设计器的功能开启。 大屏设计器，指的是通过拖拽图表或页面元素，无需编写代码即可制作数据大屏。如下图所示： 大屏设计器大屏设计器 在项目中，通过集成市面上的报表引擎，实现了大屏设计器的能力。目前使用如下： 为什么不使用 JimuReport 报表引擎呢？ 因为 J...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>数据可视化，一般可以通过报表设计器、或者大屏设计器来实现。本小节，我们来讲解大屏设计器的功能开启。</p>
<p>大屏设计器，指的是通过拖拽图表或页面元素，无需编写代码即可制作数据大屏。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/大屏手册/大屏设计器/大屏设计器.gif" alt="大屏设计器" tabindex="0" loading="lazy"><figcaption>大屏设计器</figcaption></figure>
<p>在项目中，通过集成市面上的报表引擎，实现了大屏设计器的能力。目前使用如下：</p>
<p>|                                                              | 是否集成 | 是否开源 |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%A4%A7%E5%B1%8F%E6%89%8B%E5%86%8C/%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8/%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8.gif" type="image/gif"/>
    </item>
    <item>
      <title>功能开启</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/1.%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/1.%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF.html</guid>
      <source url="https://springg.us.kg/rss.xml">功能开启</source>
      <description>功能开启 支付中心最新代码 后端：已经在 master 分支 前端：暂时只能使用 Vue2 版本，也是在 该分支 (opens new window)，预计 8 月份会同步到 Vue3 版本 项目提供统一的支付中心，提供微信、支付宝等支付渠道的支付、退款等能力，方便业务模块进行快速接入，无需关注各种繁琐的支付 API。 统一接入统一接入 #1. 概述 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>支付中心最新代码</p>
<ul>
<li>后端：已经在 master 分支</li>
<li>前端：暂时只能使用 Vue2 版本，也是在 <a href="https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-ui-admin" target="_blank" rel="noopener noreferrer">该分支 (opens new window)</a>，预计 8 月份会同步到 Vue3 版本</li>
</ul>
<p>项目提供统一的支付中心，提供微信、支付宝等支付渠道的支付、退款等能力，方便业务模块进行快速接入，无需关注各种繁琐的支付 API。</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/统一接入.png" alt="统一接入" tabindex="0" loading="lazy"><figcaption>统一接入</figcaption></figure>
<h2><a class="header-anchor" href="#_1-概述"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_1-%E6%A6%82%E8%BF%B0" target="_blank" rel="noopener noreferrer">#</a>1. 概述</h2>
<p>它由如下 3 部分组成：</p>
<p>① <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-pay/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-biz-pay</code> (opens new window)</a>组件：对接微信、支付宝等支付，提供统一的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-pay/src/main/java/cn/iocoder/yudao/framework/pay/core/client/PayClient.java" target="_blank" rel="noopener noreferrer">PayClient 支付客户端 (opens new window)</a>。</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/PayClient类图.png" alt="PayClient 类图" tabindex="0" loading="lazy"><figcaption>PayClient 类图</figcaption></figure>
<p>② <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-pay" target="_blank" rel="noopener noreferrer"><code>yudao-module-pay</code> (opens new window)</a>后端模块：实现支付中心的后端功能，包括支付、退款等能力。</p>
<ul>
<li>基于 PayClient 支付客户端，对接微信、支付宝等支付渠道。</li>
<li>对内提供 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-api/src/main/java/cn/iocoder/yudao/module/pay/api/order/PayOrderApi.java" target="_blank" rel="noopener noreferrer">PayOrderApi (opens new window)</a>统一支付 API 能力、<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-api/src/main/java/cn/iocoder/yudao/module/pay/api/refund/PayRefundApi.java" target="_blank" rel="noopener noreferrer">PayRefundApi (opens new window)</a>统一退款 API 能力。</li>
</ul>
<p>③ 支付中心的前端，提供支付中心的管理后台，可进行支付渠道的配置、支付订单、退款单的查看等操作。</p>
<ul>
<li>Vue2 版本：<a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/views/pay" target="_blank" rel="noopener noreferrer"><code>@/views/pay</code> (opens new window)</a>目录</li>
<li>Vue3 版本：<a href="https://github.com/yudaocode/yudao-ui-admin-vue3/tree/master/src/views/pay" target="_blank" rel="noopener noreferrer"><code>@/views/pay</code> (opens new window)</a>目录</li>
</ul>
<h2><a class="header-anchor" href="#_2-功能开启"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_2-%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF" target="_blank" rel="noopener noreferrer">#</a>2. 功能开启</h2>
<p>考虑到编译速度，默认 <code>yudao-module-pay</code> 模块是关闭的，需要手动开启。步骤如下：</p>
<ul>
<li>第一步，开启 <code>yudao-module-pay</code> 模块</li>
<li>第二步，导入支付的 SQL 数据库脚本</li>
<li>第三步，重启后端项目，确认功能是否生效</li>
<li>第四步，开启支付相关的 Job 任务</li>
</ul>
<h3><a class="header-anchor" href="#_2-1-开启-yudao-module-pay-模块"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_2-1-%E5%BC%80%E5%90%AF-yudao-module-pay-%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener noreferrer">#</a>2.1 开启 yudao-module-pay 模块</h3>
<p>① 修改根目录的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>文件，取消 <code>yudao-module-pay</code> 模块的注释。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/第一步-01.png" alt="取消  模块的注释" tabindex="0" loading="lazy"><figcaption>取消  模块的注释</figcaption></figure>
<p>② 修改 <code>yudao-server</code> 目录的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>文件，引入 <code>yudao-module-pay</code> 模块。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/第一步-02.png" alt="引入  模块" tabindex="0" loading="lazy"><figcaption>引入  模块</figcaption></figure>
<p>③ 点击 IDEA 右上角的【Reload All Maven Projects】，刷新 Maven 依赖。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/功能开启/第一步-03.png" alt="刷新 Maven 依赖" tabindex="0" loading="lazy"><figcaption>刷新 Maven 依赖</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-第二步-导入-sql"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_2-2-%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%AF%BC%E5%85%A5-sql" target="_blank" rel="noopener noreferrer">#</a>2.2 第二步，导入 SQL</h3>
<p>点击 <a href="https://doc.iocoder.cn/file/pay.sql" target="_blank" rel="noopener noreferrer"><code>pay.sql</code></a> 下载，然后导入到数据库中。</p>
<p>友情提示：↑↑↑ pay.sql 是可以点击下载的！ ↑↑↑</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/第二步-表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<h3><a class="header-anchor" href="#_2-3-第三步-重新项目"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_2-3-%E7%AC%AC%E4%B8%89%E6%AD%A5-%E9%87%8D%E6%96%B0%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener noreferrer">#</a>2.3 第三步，重新项目</h3>
<p>重启后端项目，然后访问前端的支付菜单，确认功能是否生效。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/第三步-01.png" alt="确认功能是否生效" tabindex="0" loading="lazy"><figcaption>确认功能是否生效</figcaption></figure>
<p>至此，我们就成功开启了支付的功能 🙂</p>
<h3><a class="header-anchor" href="#_2-4-第四步-开启支付-job"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_2-4-%E7%AC%AC%E5%9B%9B%E6%AD%A5-%E5%BC%80%E5%90%AF%E6%94%AF%E4%BB%98-job" target="_blank" rel="noopener noreferrer">#</a>2.4 第四步，开启支付 Job</h3>
<p>① 参考 <a href="https://doc.iocoder.cn/job/" target="_blank" rel="noopener noreferrer">《定时任务》</a> 文档，将 Job 定时任务开启。</p>
<p>② 将 <code>pay</code> 开头的定时都进行开启，例如说：<code>payNotifyJob</code>、<code>payOrderSyncJob</code>、<code>payOrderExpireJob</code>、<code>payRefundSyncJob</code>。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/第四步-01.png" alt="开启 Job 任务" tabindex="0" loading="lazy"><figcaption>开启 Job 任务</figcaption></figure>
<h2><a class="header-anchor" href="#_3-功能介绍"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer">#</a>3. 功能介绍</h2>
<h3><a class="header-anchor" href="#_3-1-应用信息"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-1-%E5%BA%94%E7%94%A8%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">#</a>3.1 应用信息</h3>
<p>对应 [支付管理 -&gt; 应用信息] 菜单，进行支付渠道、支付应用的管理。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/菜单-应用信息.png" alt="支付管理 -> 应用信息" tabindex="0" loading="lazy"><figcaption>支付管理 -&gt; 应用信息</figcaption></figure>
<h4><a class="header-anchor" href="#_3-1-1-支付应用"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-1-1-%E6%94%AF%E4%BB%98%E5%BA%94%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>3.1.1 支付应用</h4>
<p>每个要接入支付中心的业务，对应一个支付应用。例如说：商城订单算一个应用，预约订单算一个应用。</p>
<p>点击【新增】按钮，可以进行支付应用的配置，保存在 <code>pay_app</code> 表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/支付应用.png" alt="支付应用" tabindex="0" loading="lazy"><figcaption>支付应用</figcaption></figure>
<ul>
<li>支付结果的回调地址：每个业务需要实现一个支付回调接口，在用户支付成功时，支付中心会进行回调。<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/demo/PayDemoOrderController.java#L50-L58" target="_blank" rel="noopener noreferrer">示例 1 (opens new window)</a>、<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mall/yudao-module-trade-biz/src/main/java/cn/iocoder/yudao/module/trade/controller/app/order/AppTradeOrderController.java#L64-L70" target="_blank" rel="noopener noreferrer">示例 2(opens new window)</a></li>
<li>退款结果的回调地址：每个业务需要实现一个退款回调接口，在用户退款成功时，支付中心会进行回调。<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/demo/PayDemoOrderController.java#L68-L76" target="_blank" rel="noopener noreferrer">示例 1(opens new window)</a></li>
</ul>
<p>为什么要有支付应用？直接配置支付渠道不行吗？</p>
<ol>
<li>一个系统中，可能有多个业务需要，每个业务的支付、退款回调地址不同。</li>
<li>同时，每个业务的订单编号可能重复，需要使用支付应用进行隔离，只要求在每个支付应用下保持唯一即可。</li>
<li>另外，每个业务可能想要配置不同的支付渠道。</li>
</ol>
<h4><a class="header-anchor" href="#_3-1-2-支付渠道"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-1-2-%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93" target="_blank" rel="noopener noreferrer">#</a>3.1.2 支付渠道</h4>
<p>每个支付应用下，可以配置多个支付渠道。例如说：这里“示例应用”就配置了支付宝 PC 网站支付、支付宝 Wap 网站支付等等。</p>
<p>点击【√】或者【×】图标，可以进行支付应用的配置，保存在 <code>pay_channel</code> 表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/支付渠道.png" alt="支付渠道" tabindex="0" loading="lazy"><figcaption>支付渠道</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-支付订单"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-2-%E6%94%AF%E4%BB%98%E8%AE%A2%E5%8D%95" target="_blank" rel="noopener noreferrer">#</a>3.2 支付订单</h3>
<p>对应 [支付管理 -&gt; 支付订单] 菜单，进行支付订单的查看。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/支付订单.png" alt="支付订单" tabindex="0" loading="lazy"><figcaption>支付订单</figcaption></figure>
<p>一般情况下，每个业务订单对应一条支付订单，保存在 <code>pay_order</code> 表，通过 <code>merchant_order_id</code> 字段关联。</p>
<h3><a class="header-anchor" href="#_3-3-退款订单"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-3-%E9%80%80%E6%AC%BE%E8%AE%A2%E5%8D%95" target="_blank" rel="noopener noreferrer">#</a>3.3 退款订单</h3>
<p>对应 [支付管理 -&gt; 退款订单] 菜单，进行退款订单的查看。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/退款订单.png" alt="退款订单" tabindex="0" loading="lazy"><figcaption>退款订单</figcaption></figure>
<p>一般情况下，每个业务退款对应一条退款订单，保存在 <code>pay_refund</code> 表，通过 <code>merchant_refund_no</code> 字段关联。</p>
<h3><a class="header-anchor" href="#_3-4-回调通知"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-4-%E5%9B%9E%E8%B0%83%E9%80%9A%E7%9F%A5" target="_blank" rel="noopener noreferrer">#</a>3.4 回调通知</h3>
<p>对应 [支付管理 -&gt; 回调通知] 菜单，查看支付、退款的回调业务的结果。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/回调通知.png" alt="回调通知" tabindex="0" loading="lazy"><figcaption>回调通知</figcaption></figure>
<h3><a class="header-anchor" href="#_3-5-支付回调【重要】"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-5-%E6%94%AF%E4%BB%98%E5%9B%9E%E8%B0%83%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>3.5 支付回调【重要】</h3>
<p>这里，我们要配置支付【<strong>中心</strong>】提供给支付【<strong>渠道</strong>】的回调地址，不同于上面支付【<strong>应用</strong>】的回调地址。整体的回调关系如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/回调流程.png" alt="回调流程" tabindex="0" loading="lazy"><figcaption>回调流程</figcaption></figure>
<p>① 由于支付回调需要外网，可参考 <a href="https://doc.iocoder.cn/natapp/" target="_blank" rel="noopener noreferrer">《内网穿透》</a> 文档，将本地的 48080 端口，转发到外网中。这里，我的域名是 <code>http://yunai.natapp1.cc</code>。</p>
<p>② 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-local.yaml#L196-L197" target="_blank" rel="noopener noreferrer"><code>application-local.yaml</code> (opens new window)</a>配置文件中，修改 <code>yudao.pay</code> 配置项，设置为支付【中心】的回调地址。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/配置回调地址.png" alt="配置回调地址" tabindex="0" loading="lazy"><figcaption>配置回调地址</figcaption></figure>
<ul>
<li><code>yudao.pay.order-notify-url</code> 配置项：对应 PayNotifyController 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/notify/PayNotifyController.java#L59-L98" target="_blank" rel="noopener noreferrer"><code>#notifyOrder(...)</code> (opens new window)</a>方法</li>
<li><code>yudao.pay.refund-notify-url</code> 配置项：对应 PayNotifyController 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/notify/PayNotifyController.java#L59-L98" target="_blank" rel="noopener noreferrer"><code>#notifyRefund(...)</code> (opens new window)</a>方法</li>
</ul>
<p>如果你想理解的更深入，可以后续 debug 断条调试。</p>
<h3><a class="header-anchor" href="#_3-6-接入示例"><span></span></a><a href="https://doc.iocoder.cn/pay/build/#_3-6-%E6%8E%A5%E5%85%A5%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>3.6 接入示例</h3>
<p>对应 [支付管理 -&gt; 接入示例] 菜单，提供一个支付、退款的接入示例。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/功能开启/接入示例.png" alt="接入示例" tabindex="0" loading="lazy"><figcaption>接入示例</figcaption></figure>
<p>详细说明，可见如下文档：</p>
<ul>
<li><a href="https://doc.iocoder.cn/pay/alipay-pay-demo" target="_blank" rel="noopener noreferrer">《支付宝支付接入》</a></li>
<li><a href="https://doc.iocoder.cn/pay/refund-demo" target="_blank" rel="noopener noreferrer">《支付宝、微信退款接入》</a></li>
</ul>
<p>上次更新: 2023/07/31, 01:33:57</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF/%E7%BB%9F%E4%B8%80%E6%8E%A5%E5%85%A5.png" type="image/png"/>
    </item>
    <item>
      <title>支付宝支付接入</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/2.%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/2.%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5.html</guid>
      <source url="https://springg.us.kg/rss.xml">支付宝支付接入</source>
      <description>支付宝支付接入 #0. 概述 在 yudao-module-pay-biz 模块的 demo (opens new window)模块，我们提供了一个 支付 接入的示例。 它支持如下支付渠道： 支付宝 电脑网站 (opens new window)支付 支付宝 手机网站 (opens new window)支付 支付宝 当面付 (opens new w...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#_0-概述"><span></span></a><a href="https://doc.iocoder.cn/pay/alipay-pay-demo/#_0-%E6%A6%82%E8%BF%B0" target="_blank" rel="noopener noreferrer">#</a>0. 概述</h2>
<p>在 <code>yudao-module-pay-biz</code> 模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/demo" target="_blank" rel="noopener noreferrer"><code>demo</code> (opens new window)</a>模块，我们提供了一个 <strong>支付</strong> 接入的示例。</p>
<p>它支持如下支付渠道：</p>
<ul>
<li>支付宝 <a href="https://opendocs.alipay.com/open/270/105898" target="_blank" rel="noopener noreferrer">电脑网站 (opens new window)</a>支付</li>
<li>支付宝 <a href="https://opendocs.alipay.com/open/203/105288" target="_blank" rel="noopener noreferrer">手机网站 (opens new window)</a>支付</li>
<li>支付宝 <a href="https://opendocs.alipay.com/open/194/105072" target="_blank" rel="noopener noreferrer">当面付 (opens new window)</a>（条码支付）</li>
<li>支付宝 <a href="https://opendocs.alipay.com/apis/02890k" target="_blank" rel="noopener noreferrer">扫码 (opens new window)</a>支付</li>
<li>微信 <a href="https://pay.weixin.qq.com/static/product/product_intro.shtml?name=qrcode" target="_blank" rel="noopener noreferrer">付款码 (opens new window)</a>支付</li>
<li>微信 <a href="https://pay.weixin.qq.com/static/product/product_intro.shtml?name=qrcode" target="_blank" rel="noopener noreferrer">Native (opens new window)</a>支付</li>
</ul>
<p>疑问：为什么不支持微信小程序、公众号支付？</p>
<p>因为这 2 种微信支付方式，只能在微信环境中进行，而我们的接入示例使用 PC 浏览器，所以无法进行。</p>
<p>你可以阅读 <a href="https://doc.iocoder.cn/pay/wx-lite-pay-demo/" target="_blank" rel="noopener noreferrer">微信小程序支付接入</a> 和 <a href="https://doc.iocoder.cn/pay/wx-pub-pay-demo/" target="_blank" rel="noopener noreferrer">微信公众号支付接入</a> 文档，进行相关的支付接入。</p>
<p>下面，我们以 <code>demo</code> 模块为例子，讲解如何接入支付宝的 <a href="https://opendocs.alipay.com/open/270/105898" target="_blank" rel="noopener noreferrer">电脑网站 (opens new window)</a>支付。</p>
<h2><a class="header-anchor" href="#_1-第一步-配置支付渠道"><span></span></a><a href="https://doc.iocoder.cn/pay/alipay-pay-demo/#_1-%E7%AC%AC%E4%B8%80%E6%AD%A5-%E9%85%8D%E7%BD%AE%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93" target="_blank" rel="noopener noreferrer">#</a>1. 第一步，配置支付渠道</h2>
<p>① 在 [支付管理 -&gt; 应用信息] 菜单，新建 <code>demo</code> 模块使用的支付应用。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/应用信息.png" alt="应用信息" tabindex="0" loading="lazy"><figcaption>应用信息</figcaption></figure>
<ul>
<li>支付结果的回调地址：对应「2.4 第四步，实现回调接口」实现的接口。这里因为我们在本地演示，所以使用了 <code>127.0.0.1</code> IP 地址，如果你部署到服务器上，要设置服务器可调用到的 IP 地址。</li>
</ul>
<p>因为 <code>demo</code> 模块的支付应用默认已经创建，所以你可以直接使用。注意，这里的应用编号 <strong>“7”</strong> 稍后会使用到。</p>
<p>② 点击“示例用户”对应的【支付宝 PC 网站支付】，进入支付渠道的配置。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/支付渠道.png" alt="支付渠道" tabindex="0" loading="lazy"><figcaption>支付渠道</figcaption></figure>
<p>如果你还没有支付宝开放平台的账号，可以先参考 <a href="https://opendocs.alipay.com/common/02kkv7" target="_blank" rel="noopener noreferrer">《沙箱环境》 (opens new window)</a>文档，申请一个测试账号，我目前就是这么测试的。只需要阅读该文档的如下小节即可：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/沙箱环境.png" alt="沙箱环境" tabindex="0" loading="lazy"><figcaption>沙箱环境</figcaption></figure>
<h2><a class="header-anchor" href="#_2-第二步-实现支付调用【重要】"><span></span></a><a href="https://doc.iocoder.cn/pay/alipay-pay-demo/#_2-%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%AE%9E%E7%8E%B0%E6%94%AF%E4%BB%98%E8%B0%83%E7%94%A8%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>2. 第二步，实现支付调用【重要】</h2>
<p>友情提示：由于 demo 模块的支付接入已经实现，这里你只要看懂什么意思即可，不用操作。</p>
<p>① 【后端】在 <code>demo</code> 模块所在的 <code>yudao-module-xx-biz</code> 模块的 <code>pom.xml</code> 文件，引入 <code>yudao-module-pay-api</code> 依赖，这样才可以调用到 PayOrderApi 接口。代码如下：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-pay-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 【后端】在 <code>demo</code> 模块的下单逻辑中，需要调用 PayOrderApi 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/service/demo/PayDemoOrderServiceImpl.java#L91-L96" target="_blank" rel="noopener noreferrer"><code>#createOrder(...)</code> (opens new window)</a>方法，创建支付单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/调用PayOrderApi.png" alt="调用 PayOrderApi" tabindex="0" loading="lazy"><figcaption>调用 PayOrderApi</figcaption></figure>
<p>疑问：为什么 demo 模块在下单逻辑中，需要调用 PayOrderApi 接口来创建支付单？</p>
<p>因为跳转<strong>公用的</strong>【收银台】，需要通过读取支付订单，展示支付信息。这样，才能和 demo 模块进行解耦。收银台如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/收银台-1.png" alt="收银台" tabindex="0" loading="lazy"><figcaption>收银台</figcaption></figure>
<p>③ 【前端】在 <code>demo</code> 模块下完单之后，前端需要跳转到【收银台】。前端接入代码在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/pay/demo/index.vue#L193-L201" target="_blank" rel="noopener noreferrer"><code>/views/pay/demo/index.vue</code> (opens new window)</a>，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/前端接入代码.png" alt="前端接入代码" tabindex="0" loading="lazy"><figcaption>前端接入代码</figcaption></figure>
<div class="language-js" data-ext="js" data-title="js"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">$router</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">push</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'PayCashier'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">  query</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:{</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">payOrderId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 支付单号</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    returnUrl</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#61AFEF;--shiki-dark:#61AFEF">encodeURIComponent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'/pay/demo-order?id='</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 支付成功后，跳转的 URL</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">})</span></span></code></pre>
</div><p>另外，收银台的前端代码，在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/pay/cashier/index.vue" target="_blank" rel="noopener noreferrer"><code>/views/pay/cashier/index.vue</code> (opens new window)</a>里，已经实现，感兴趣可以看看。</p>
<h2><a class="header-anchor" href="#_3-第三步-实现回调接口【重要】"><span></span></a><a href="https://doc.iocoder.cn/pay/alipay-pay-demo/#_3-%E7%AC%AC%E4%B8%89%E6%AD%A5-%E5%AE%9E%E7%8E%B0%E5%9B%9E%E8%B0%83%E6%8E%A5%E5%8F%A3%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>3. 第三步，实现回调接口【重要】</h2>
<p>友情提示：由于 demo 模块的支付接入已经实现，这里你只要看懂什么意思即可，不用操作。</p>
<p>在 <code>demo</code> 模块所在的 <code>yudao-module-xx-biz</code> 模块，实现一个支付回调的接口，提供给支付【中心】回调。对应的代码在 PayDemoOrderController 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/demo/PayDemoOrderController.java#L50-L58" target="_blank" rel="noopener noreferrer"><code>#updateDemoOrderPaid(...)</code> (opens new window)</a>方法中，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/实现回调接口.png" alt="实现回调接口" tabindex="0" loading="lazy"><figcaption>实现回调接口</figcaption></figure>
<h2><a class="header-anchor" href="#_4-第四步-支付功能测试"><span></span></a><a href="https://doc.iocoder.cn/pay/alipay-pay-demo/#_4-%E7%AC%AC%E5%9B%9B%E6%AD%A5-%E6%94%AF%E4%BB%98%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95" target="_blank" rel="noopener noreferrer">#</a>4. 第四步，支付功能测试</h2>
<p>至此，我们已经完成了支付接入的所有步骤，接下来，我们来测试一下支付功能。</p>
<p>① 打开 [支付管理 -&gt; 接入示例] 菜单，进入示例订单列表。点击【发起订单】按钮，选择一个商品，进行下单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/测试-下单.png" alt="下单" tabindex="0" loading="lazy"><figcaption>下单</figcaption></figure>
<p>此时，在 <code>pay_order</code> 表中，会新增一条支付订单记录。</p>
<p>② 下单完成后，点击该订单对应的【支付】按钮，跳转到【收银台】。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/测试-跳转支付.png" alt="跳转支付" tabindex="0" loading="lazy"><figcaption>跳转支付</figcaption></figure>
<p>③ 选择【支付宝 PC 网站支付】支付渠道，跳转支付宝支付。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/测试-收银台.png" alt="收银台" tabindex="0" loading="lazy"><figcaption>收银台</figcaption></figure>
<p>友情提示：</p>
<p>选择完支付【渠道】，会调用后端 PayOrderController 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/order/PayOrderController.java#L92-L97" target="_blank" rel="noopener noreferrer"><code>#submit(...)</code> (opens new window)</a>方法，内部调用对应支付【渠道】的 PayClient 实现类，发起支付。</p>
<p>④ 此时，我们会看到一个支付宝的二维码，使用 <a href="https://opendocs.alipay.com/common/02kkv7#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%B8%8B%E8%BD%BD%E6%94%AF%E4%BB%98%E5%AE%9D%E5%AE%A2%E6%88%B7%E7%AB%AF" target="_blank" rel="noopener noreferrer"><strong>“沙箱环境”</strong> 的支付宝客户端 (opens new window)</a>，扫码完成支付。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/测试-支付宝支付.png" alt="支付宝支付" tabindex="0" loading="lazy"><figcaption>支付宝支付</figcaption></figure>
<p>⑤ 支付完成后，先是支付【中心】的回调接口被回调，然后是 <code>demo</code> 模块的回调接口被回调。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/支付宝支付接入/测试-支付回调.png" alt="支付回调" tabindex="0" loading="lazy"><figcaption>支付回调</figcaption></figure>
<p>至此，我们已经完成支付接入的测试流程，可以试着多多 debug 调试整个流程，并不复杂噢。</p>
<p>上次更新: 2023/07/17, 18:07:06</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5/%E5%BA%94%E7%94%A8%E4%BF%A1%E6%81%AF.png" type="image/png"/>
    </item>
    <item>
      <title>微信公众号支付接入</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/3.%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/3.%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5.html</guid>
      <source url="https://springg.us.kg/rss.xml">微信公众号支付接入</source>
      <description>微信公众号支付接入 微信公众号支付已实现，可见 WxPubPayClient 客户端。 由于 demo 还在编写中，所以《微信公众号支付接入》预计在 8-9 月份编写。 目前可以先参考《支付宝支付接入》进行学习。差别主要是，微信公众号支付需要 JS-SDK 初始化下。</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>微信公众号支付已实现，可见 WxPubPayClient 客户端。</p>
<p>由于 demo 还在编写中，所以《微信公众号支付接入》预计在 8-9 月份编写。</p>
<p>目前可以先参考《支付宝支付接入》进行学习。差别主要是，微信公众号支付需要 JS-SDK 初始化下。</p>
]]></content:encoded>
    </item>
    <item>
      <title>微信小程序支付接入</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/4.%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/4.%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5.html</guid>
      <source url="https://springg.us.kg/rss.xml">微信小程序支付接入</source>
      <description>微信小程序支付接入 微信小程序支付已实现，可见 WxLitePayClient 客户端。 由于 demo 还在编写中，所以《微信小程序支付接入》预计在 8-9 月份编写。 目前可以先参考《支付宝支付接入》进行学习。差别主要是，微信小程序支付需要在微信开发者工具下测试。 上次更新: 2023/07/17, 18:07:06</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>微信小程序支付已实现，可见 WxLitePayClient 客户端。</p>
<p>由于 demo 还在编写中，所以《微信小程序支付接入》预计在 8-9 月份编写。</p>
<p>目前可以先参考《支付宝支付接入》进行学习。差别主要是，微信小程序支付需要在微信开发者工具下测试。</p>
<p>上次更新: 2023/07/17, 18:07:06</p>
]]></content:encoded>
    </item>
    <item>
      <title>支付宝、微信退款接入</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/5.%E6%94%AF%E4%BB%98%E5%AE%9D%E3%80%81%E5%BE%AE%E4%BF%A1%E9%80%80%E6%AC%BE%E6%8E%A5%E5%85%A5.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/7.%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/5.%E6%94%AF%E4%BB%98%E5%AE%9D%E3%80%81%E5%BE%AE%E4%BF%A1%E9%80%80%E6%AC%BE%E6%8E%A5%E5%85%A5.html</guid>
      <source url="https://springg.us.kg/rss.xml">支付宝、微信退款接入</source>
      <description>支付宝、微信退款接入 #0. 概述 在 yudao-module-pay-biz 模块的 demo (opens new window)模块，我们提供了一个 退款 接入的示例，它已支持支付宝、微信的所有退款方式。 下面，我们以 demo 模块为例子，讲解如何接入退款。 #1. 第一步，创建支付订单 ① 如果你是看支付宝退款接入，则需要先看完 《支付宝支...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<h2><a class="header-anchor" href="#_0-概述"><span></span></a><a href="https://doc.iocoder.cn/pay/refund-demo/#_0-%E6%A6%82%E8%BF%B0" target="_blank" rel="noopener noreferrer">#</a>0. 概述</h2>
<p>在 <code>yudao-module-pay-biz</code> 模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/demo" target="_blank" rel="noopener noreferrer"><code>demo</code> (opens new window)</a>模块，我们提供了一个 <strong>退款</strong> 接入的示例，它已支持支付宝、微信的所有退款方式。</p>
<p>下面，我们以 <code>demo</code> 模块为例子，讲解如何接入退款。</p>
<h2><a class="header-anchor" href="#_1-第一步-创建支付订单"><span></span></a><a href="https://doc.iocoder.cn/pay/refund-demo/#_1-%E7%AC%AC%E4%B8%80%E6%AD%A5-%E5%88%9B%E5%BB%BA%E6%94%AF%E4%BB%98%E8%AE%A2%E5%8D%95" target="_blank" rel="noopener noreferrer">#</a>1. 第一步，创建支付订单</h2>
<p>① 如果你是看支付宝退款接入，则需要先看完 <a href="https://doc.iocoder.cn/pay/alipay-pay-demo/" target="_blank" rel="noopener noreferrer">《支付宝支付接入》</a> 文档</p>
<p>② 如果你是看微信退款接入，则需要先看完 <a href="https://doc.iocoder.cn/pay/wx-pub-pay-demo/" target="_blank" rel="noopener noreferrer">《微信小程序支付接入》</a> 或 <a href="https://doc.iocoder.cn/pay/wx-pub-pay-demo/" target="_blank" rel="noopener noreferrer">《微信公众号支付接入》</a> 文档</p>
<p>③ 然后，我们在 [支付管理 -&gt; 接入示例] 菜单，可以看到一个可以“发起退款”的订单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/退款接入/发起退款.png" alt="“发起退款”" tabindex="0" loading="lazy"><figcaption>“发起退款”</figcaption></figure>
<h2><a class="header-anchor" href="#_2-第二步-实现退款调用【重要】"><span></span></a><a href="https://doc.iocoder.cn/pay/refund-demo/#_2-%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%AE%9E%E7%8E%B0%E9%80%80%E6%AC%BE%E8%B0%83%E7%94%A8%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>2. 第二步，实现退款调用【重要】</h2>
<p>友情提示：由于 demo 模块的退款接入已经实现，这里你只要看懂什么意思即可，不用操作。</p>
<p>① 【后端】在 <code>demo</code> 模块所在的 <code>yudao-module-xx-biz</code> 模块的 <code>pom.xml</code> 文件，引入 <code>yudao-module-pay-api</code> 依赖，这样才可以调用到 PayOrderApi 接口。代码如下：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-pay-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 【后端】在 <code>demo</code> 模块的下单逻辑中，需要调用 PayRefundApi 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/service/demo/PayDemoOrderServiceImpl.java#L190-L203" target="_blank" rel="noopener noreferrer"><code>#createRefund(...)</code> (opens new window)</a>方法，创建退款单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/退款接入/调用PayRefundApi.png" alt="调用 PayRefundApi" tabindex="0" loading="lazy"><figcaption>调用 PayRefundApi</figcaption></figure>
<h2><a class="header-anchor" href="#_3-第三步-实现回调接口【重要】"><span></span></a><a href="https://doc.iocoder.cn/pay/refund-demo/#_3-%E7%AC%AC%E4%B8%89%E6%AD%A5-%E5%AE%9E%E7%8E%B0%E5%9B%9E%E8%B0%83%E6%8E%A5%E5%8F%A3%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>3. 第三步，实现回调接口【重要】</h2>
<p>友情提示：由于 demo 模块的退款接入已经实现，这里你只要看懂什么意思即可，不用操作。</p>
<p>在 <code>demo</code> 模块所在的 <code>yudao-module-xx-biz</code> 模块，实现一个支付回调的接口，提供给支付【中心】回调。对应的代码在 PayDemoOrderController 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-pay/yudao-module-pay-biz/src/main/java/cn/iocoder/yudao/module/pay/controller/admin/demo/PayDemoOrderController.java#L68-L76" target="_blank" rel="noopener noreferrer"><code>#updateDemoOrderPaid(...)</code> (opens new window)</a>方法中，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/退款接入/实现回调接口.png" alt="实现回调接口" tabindex="0" loading="lazy"><figcaption>实现回调接口</figcaption></figure>
<h2><a class="header-anchor" href="#_4-第四步-退款功能测试"><span></span></a><a href="https://doc.iocoder.cn/pay/refund-demo/#_4-%E7%AC%AC%E5%9B%9B%E6%AD%A5-%E9%80%80%E6%AC%BE%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95" target="_blank" rel="noopener noreferrer">#</a>4. 第四步，退款功能测试</h2>
<p>至此，我们已经完成了退款接入的所有步骤，接下来，我们来测试一下退款功能。</p>
<p>① 点击“发起退款”按钮，发起刚支付订单的退款流程。</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/退款接入/测试-发起退款.png" alt="发起退款" tabindex="0" loading="lazy"><figcaption>发起退款</figcaption></figure>
<p>此时，在 <code>pay_refund</code> 表中，会新增一条退款订单记录。</p>
<p>② 退款成功后，先是支付【中心】的回调接口被回调，然后是 <code>demo</code> 模块的回调接口被回调。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/支付手册/退款接入/测试-退款回调.png" alt="退款回调" tabindex="0" loading="lazy"><figcaption>退款回调</figcaption></figure>
<p>注意</p>
<ul>
<li>支付宝发起退款时，它是直接返回退款成功，所以它没有支付【中心】 PayNotifyController 的异步回调，只有 <code>demo</code> 模块的回调接口被回调。</li>
<li>微信发起退款时，它是可能返回退款成功，也可能返回退款处理中。微信退款是有支付【中心】 PayNotifyController 的异步回调，也有 <code>demo</code> 模块的回调接口被回调。</li>
</ul>
<p>至此，我们已经完成退款接入的测试流程，可以试着多多 debug 调试整个流程，并不复杂噢。</p>
<p>上次更新: 2023/07/17, 18:07:06</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%94%AF%E4%BB%98%E6%89%8B%E5%86%8C/%E9%80%80%E6%AC%BE%E6%8E%A5%E5%85%A5/%E5%8F%91%E8%B5%B7%E9%80%80%E6%AC%BE.png" type="image/png"/>
    </item>
    <item>
      <title>功能开启</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/1.%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/1.%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF.html</guid>
      <source url="https://springg.us.kg/rss.xml">功能开启</source>
      <description>功能开启 微信公众号 (opens new window)的功能，由 yudao-module-mp (opens new window)模块实现，对应前端代码为 @/views/mp (opens new window)目录。 主要包括如下 10 个功能（菜单）： 功能列表功能列表 考虑到编译速度，默认 yudao-module-mp 模块是关闭的，...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Overview.html" target="_blank" rel="noopener noreferrer">微信公众号 (opens new window)</a>的功能，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/" target="_blank" rel="noopener noreferrer"><code>yudao-module-mp</code> (opens new window)</a>模块实现，对应前端代码为 <a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-ui-admin/src/views/mp" target="_blank" rel="noopener noreferrer"><code>@/views/mp</code> (opens new window)</a>目录。</p>
<p>主要包括如下 10 个功能（菜单）：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/功能开启/功能列表.png" alt="功能列表" tabindex="0" loading="lazy"><figcaption>功能列表</figcaption></figure>
<p>| 功能         | 描述                                                       |<br>
|</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%8A%9F%E8%83%BD%E5%BC%80%E5%90%AF/%E5%8A%9F%E8%83%BD%E5%88%97%E8%A1%A8.png" type="image/png"/>
    </item>
    <item>
      <title>公众号统计</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/10.%E5%85%AC%E4%BC%97%E5%8F%B7%E7%BB%9F%E8%AE%A1.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/10.%E5%85%AC%E4%BC%97%E5%8F%B7%E7%BB%9F%E8%AE%A1.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号统计</source>
      <description>公众号统计 本章节，讲解公众号统计的相关内容，包括用户、消息、接口分析。对应 [公众号管理 -&amp;gt; 数据统计] 菜单，如下图所示： 界面界面 #1. 表结构 暂无，全部基于微信公众号提供的 API 接口。 用户增减数据 + 累计用户数据：《微信公众号官方文档 —— 用户分析》(opens new window) 消息概况数据：《微信公众号官方文档 —— ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解公众号统计的相关内容，包括用户、消息、接口分析。对应 [公众号管理 -&gt; 数据统计] 菜单，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号统计/界面.png" alt="界面" tabindex="0" loading="lazy"><figcaption>界面</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/statistics/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>暂无，全部基于微信公众号提供的 API 接口。</p>
<ul>
<li>用户增减数据 + 累计用户数据：<a href="https://developers.weixin.qq.com/doc/offiaccount/Analytics/User_Analysis_Data_Interface.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 用户分析》(opens new window)</a></li>
<li>消息概况数据：<a href="https://developers.weixin.qq.com/doc/offiaccount/Analytics/Message_analysis_data_interface.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 消息分析》(opens new window)</a></li>
<li>接口分析数据：<a href="https://developers.weixin.qq.com/doc/offiaccount/Analytics/Analytics_API.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 接口分析》(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_2-数据统计界面"><span></span></a><a href="https://doc.iocoder.cn/mp/statistics/#_2-%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 数据统计界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/statistics/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/statistics(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/statistics/MpStatisticsController.java" target="_blank" rel="noopener noreferrer">MpStatisticsController(opens new window)</a></li>
</ul>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%BB%9F%E8%AE%A1/%E7%95%8C%E9%9D%A2.png" type="image/png"/>
    </item>
    <item>
      <title>公众号接入</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/2.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8E%A5%E5%85%A5.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/2.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8E%A5%E5%85%A5.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号接入</source>
      <description>公众号接入 本章节，讲解如果将你的公众号，接入到系统中。步骤如下： 第一步，申请公众号（可选） 第二步，在系统中，添加公众号账号 第三步，在公众号中，配置接入信息 #1. 配置步骤 本小节，手把手教你如何将公众号接入到系统中。 #第一步，申请公众号（可选） 友情提示：如果你已经有公众号，可以忽略这一步。 ① 如果你还没有公众号，可以申请一个测试帐号。 ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解如果将你的公众号，接入到系统中。步骤如下：</p>
<ul>
<li>第一步，申请公众号（可选）</li>
<li>第二步，在系统中，添加公众号账号</li>
<li>第三步，在公众号中，配置接入信息</li>
</ul>
<h2><a class="header-anchor" href="#_1-配置步骤"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#_1-%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4" target="_blank" rel="noopener noreferrer">#</a>1. 配置步骤</h2>
<p>本小节，手把手教你如何将公众号接入到系统中。</p>
<h3><a class="header-anchor" href="#第一步-申请公众号-可选"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#%E7%AC%AC%E4%B8%80%E6%AD%A5-%E7%94%B3%E8%AF%B7%E5%85%AC%E4%BC%97%E5%8F%B7-%E5%8F%AF%E9%80%89" target="_blank" rel="noopener noreferrer">#</a>第一步，申请公众号（可选）</h3>
<p>友情提示：如果你已经有公众号，可以忽略这一步。</p>
<p>① 如果你还没有公众号，可以申请一个测试帐号。</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/第一步-申请测试帐号.png" alt="申请测试账号" tabindex="0" loading="lazy"><figcaption>申请测试账号</figcaption></figure>
<p>申请地址：<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login" target="_blank" rel="noopener noreferrer">微信公众平台接口测试帐号申请(opens new window)</a></p>
<p>② 申请完成后，获得一个测试号。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/第一步-测试账号信息.png" alt="测试账号信息" tabindex="0" loading="lazy"><figcaption>测试账号信息</figcaption></figure>
<h3><a class="header-anchor" href="#第二步-添加公众号账号"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E6%B7%BB%E5%8A%A0%E5%85%AC%E4%BC%97%E5%8F%B7%E8%B4%A6%E5%8F%B7" target="_blank" rel="noopener noreferrer">#</a>第二步，添加公众号账号</h3>
<p>点击 [公众号管理 -&gt; 账号管理] 菜单，添加一个公众号账号。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/第二步-添加公众号账号.png" alt="添加公众号账号" tabindex="0" loading="lazy"><figcaption>添加公众号账号</figcaption></figure>
<h3><a class="header-anchor" href="#第三步-配置接入信息"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#%E7%AC%AC%E4%B8%89%E6%AD%A5-%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%85%A5%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">#</a>第三步，配置接入信息</h3>
<p>① 由于公众号通知需要外网地址，可参考 <a href="https://doc.iocoder.cn/natapp/" target="_blank" rel="noopener noreferrer">《内网穿透》</a> 文档，将本地的 48080 端口，转发到外网中。这里，我的域名是 <code>http://yunai.natapp1.cc</code>。</p>
<p>② 打开微信公众号界面，填写 URL 和 Token 信息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/第三步-填写URL和Token.png" alt="填写 URL 和 Token 信息" tabindex="0" loading="lazy"><figcaption>填写 URL 和 Token 信息</figcaption></figure>
<p>点击提交后，看到“配置成功”提示，说明配置成功。</p>
<h2><a class="header-anchor" href="#_2-实现代码"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#_2-%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>2. 实现代码</h2>
<p>本小节，将介绍如何实现公众号接入的代码。</p>
<h3><a class="header-anchor" href="#_2-1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#_2-1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>2.1 表结构</h3>
<p>公众号账号对应 <code>mp_account</code> 表，结构如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<h3><a class="header-anchor" href="#_2-2-账号管理界面"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#_2-2-%E8%B4%A6%E5%8F%B7%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2.2 账号管理界面</h3>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/account/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/account(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/account/MpAccountController.java" target="_blank" rel="noopener noreferrer">MpAccountController(opens new window)</a></li>
</ul>
<h3><a class="header-anchor" href="#_2-3-配置接入回调"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#_2-3-%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%85%A5%E5%9B%9E%E8%B0%83" target="_blank" rel="noopener noreferrer">#</a>2.3 配置接入回调</h3>
<p>在 <a href="https://doc.iocoder.cn/mp/account/#%E7%AC%AC%E4%B8%89%E6%AD%A5-%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%85%A5%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">第三步，配置接入信息</a> 时，微信公众号会回调系统的 <code>GET /admin-api/mp/open/{appID}</code> 接口，进行接入配置的验证。对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/open/MpOpenController.java#L39-L57" target="_blank" rel="noopener noreferrer">MpOpenController (opens new window)</a>类的 <code>checkSignature</code> 方法，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/配置接入回调.png" alt="checkSignature 方法" tabindex="0" loading="lazy"><figcaption>checkSignature 方法</figcaption></figure>
<p>对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Access_Overview.html#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E6%B6%88%E6%81%AF%E7%9A%84%E7%A1%AE%E6%9D%A5%E8%87%AA%E5%BE%AE%E4%BF%A1%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 接入指南》 (opens new window)</a>文档。</p>
<p>友情提示：</p>
<p>项目使用的微信工具开发包是 <a href="https://github.com/Wechat-Group/WxJava/tree/develop/weixin-java-mp" target="_blank" rel="noopener noreferrer"><code>weixin-java-mp</code> (opens new window)</a>，超级好用！</p>
<h3><a class="header-anchor" href="#_2-4-消息处理"><span></span></a><a href="https://doc.iocoder.cn/mp/account/#_2-4-%E6%B6%88%E6%81%AF%E5%A4%84%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>2.4 消息处理</h3>
<p>配置接入完成后，用户发给公众号的消息，公众号都会回调到 <code>POST /admin-api/mp/open/{appID}</code> 接口，进行消息的处理。对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/open/MpOpenController.java#L59-L114" target="_blank" rel="noopener noreferrer">MpOpenController (opens new window)</a>类的 <code>handleMessage</code> 方法，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/消息处理.png" alt="handleMessage 方法" tabindex="0" loading="lazy"><figcaption>handleMessage 方法</figcaption></figure>
<p>核心逻辑是第二步，再解析到消息后，交给 WxMpMessageRouter 进行消息的处理。WxMpMessageRouter 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/open/MpOpenController.java#L59-L114" target="_blank" rel="noopener noreferrer">DefaultMpServiceFactory (opens new window)</a>初始化，设置每种消息对应的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/" target="_blank" rel="noopener noreferrer"><code>handler</code> (opens new window)</a>处理器。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号接入/消息处理器.png" alt="消息处理器" tabindex="0" loading="lazy"><figcaption>消息处理器</figcaption></figure>
<p>具体每个处理器的实现，后续每个章节单独详细讲解。</p>
<p>上次更新: 2023/07/10, 12:50:06</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8E%A5%E5%85%A5/%E7%AC%AC%E4%B8%80%E6%AD%A5-%E7%94%B3%E8%AF%B7%E6%B5%8B%E8%AF%95%E5%B8%90%E5%8F%B7.png" type="image/png"/>
    </item>
    <item>
      <title>公众号粉丝</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/3.%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B2%89%E4%B8%9D.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/3.%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B2%89%E4%B8%9D.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号粉丝</source>
      <description>公众号粉丝 本章节，讲解公众号粉丝的相关内容，包括关注、取消关注等等，对应 《微信公众号官方文档 —— 获取用户列表》 (opens new window)文档。 粉丝管理粉丝管理 #1. 表结构 公众号粉丝对应 mp_user 表，结构如下图所示： 表结构表结构 注意，自 2021-12-27 开始，公众号接口不再返回头像和昵称，只能通过微信公众号的...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解公众号粉丝的相关内容，包括关注、取消关注等等，对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/User_Management/Getting_a_User_List.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 获取用户列表》 (opens new window)</a>文档。</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号粉丝/界面.png" alt="粉丝管理" tabindex="0" loading="lazy"><figcaption>粉丝管理</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/user/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>公众号粉丝对应 <code>mp_user</code> 表，结构如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号粉丝/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<p>注意，自 2021-12-27 开始，公众号接口不再返回头像和昵称，只能通过微信公众号的网页登录获取。因此，表中的 <code>avatar</code> 和 <code>nickname</code> 字段，往往是空的。</p>
<h2><a class="header-anchor" href="#_2-粉丝管理界面"><span></span></a><a href="https://doc.iocoder.cn/mp/user/#_2-%E7%B2%89%E4%B8%9D%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 粉丝管理界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/user/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/user(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/user/MpUserController.java" target="_blank" rel="noopener noreferrer">MpUserController(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-同步粉丝"><span></span></a><a href="https://doc.iocoder.cn/mp/user/#_3-%E5%90%8C%E6%AD%A5%E7%B2%89%E4%B8%9D" target="_blank" rel="noopener noreferrer">#</a>3. 同步粉丝</h2>
<p>点击粉丝管理界面的【同步】按钮，可以 <strong>异步</strong> 从公众号同步所有的粉丝信息，存储到 <code>mp_user</code> 表中。如果你的粉丝较多，可能需要等待一段时间。</p>
<p>对应后端的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/user/MpUserServiceImpl.java#L95-L161" target="_blank" rel="noopener noreferrer">MpUserServiceImpl (opens new window)</a>的 <code>syncUser</code> 方法。</p>
<h2><a class="header-anchor" href="#_4-关注-subscribehandler"><span></span></a><a href="https://doc.iocoder.cn/mp/user/#_4-%E5%85%B3%E6%B3%A8-subscribehandler" target="_blank" rel="noopener noreferrer">#</a>4. 关注 SubscribeHandler</h2>
<p>用户关注公众号时，会触发 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/user/SubscribeHandler.java" target="_blank" rel="noopener noreferrer">SubscribeHandler (opens new window)</a>处理器，新增或修改 <code>mp_user</code> 粉丝信息。</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号粉丝/SubscribeHandler.png" alt="SubscribeHandler" tabindex="0" loading="lazy"><figcaption>SubscribeHandler</figcaption></figure>
<h2><a class="header-anchor" href="#_5-取关-unsubscribehandler"><span></span></a><a href="https://doc.iocoder.cn/mp/user/#_5-%E5%8F%96%E5%85%B3-unsubscribehandler" target="_blank" rel="noopener noreferrer">#</a>5. 取关 UnsubscribeHandler</h2>
<p>用户取消关注公众号时，会触发 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/user/UnsubscribeHandler.java" target="_blank" rel="noopener noreferrer">UnsubscribeHandler (opens new window)</a>处理器，标记 <code>mp_user</code> 粉丝信息为取消关注，设置 <code>subscribe_status</code> 字段为 0。</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号粉丝/UnsubscribeHandler.png" alt="UnsubscribeHandler" tabindex="0" loading="lazy"><figcaption>UnsubscribeHandler</figcaption></figure>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B2%89%E4%B8%9D/%E7%95%8C%E9%9D%A2.png" type="image/png"/>
    </item>
    <item>
      <title>公众号标签</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/4.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%A0%87%E7%AD%BE.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/4.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%A0%87%E7%AD%BE.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号标签</source>
      <description>公众号标签 本章节，讲解公众号标签的相关内容，支持对标签进行创建、查询、修改、删除等操作，也可以对用户进行打标签、取消标签等操作，对应 《微信公众号官方文档 —— 用户标签管理》 (opens new window)文档。 标签管理标签管理 #1. 表结构 公众号粉丝对应 mp_tag 表，结构如下图所示： 表结构表结构 而给用户打上标签后，存储在 m...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解公众号标签的相关内容，支持对标签进行创建、查询、修改、删除等操作，也可以对用户进行打标签、取消标签等操作，对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/User_Management/User_Tag_Management.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 用户标签管理》 (opens new window)</a>文档。</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号标签/界面.png" alt="标签管理" tabindex="0" loading="lazy"><figcaption>标签管理</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/tag/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>公众号粉丝对应 <code>mp_tag</code> 表，结构如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号标签/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<p>而给用户打上标签后，存储在 <code>mp_user</code> 表的 <code>tag_ids</code> 字段中（多个标签之间用 <code>,</code> 分隔），不单独存储关联表。</p>
<h2><a class="header-anchor" href="#_2-标签管理界面"><span></span></a><a href="https://doc.iocoder.cn/mp/tag/#_2-%E6%A0%87%E7%AD%BE%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 标签管理界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/tag/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/tag(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/tag/MpTagController.java" target="_blank" rel="noopener noreferrer">MpTagController(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-同步标签"><span></span></a><a href="https://doc.iocoder.cn/mp/tag/#_3-%E5%90%8C%E6%AD%A5%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener noreferrer">#</a>3. 同步标签</h2>
<p>点击标签管理界面的【同步】按钮，可以从公众号同步所有的标签信息，存储到 <code>mp_tag</code> 表中。</p>
<p>对应后端的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/tag/MpTagServiceImpl.java#L124-L157" target="_blank" rel="noopener noreferrer">MpTagServiceImpl (opens new window)</a>的 <code>syncTag</code> 方法。</p>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%A0%87%E7%AD%BE/%E7%95%8C%E9%9D%A2.png" type="image/png"/>
    </item>
    <item>
      <title>公众号消息</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/5.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%B6%88%E6%81%AF.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/5.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%B6%88%E6%81%AF.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号消息</source>
      <description>公众号消息 本章节，讲解公众号消息的相关内容，对应 [公众号管理 -&amp;gt; 消息管理] 菜单。如下图所示： 消息管理消息管理 #1. 表结构 公众号消息对应 mp_message 表，结构如下图所示： 表结构表结构 ① type 字段：消息类型，包括文本、图片、语音、视频、小视频、图文、音乐、地理位置、链接、事件等类型，对应 mp_message_type...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解公众号消息的相关内容，对应 [公众号管理 -&gt; 消息管理] 菜单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号消息/界面.png" alt="消息管理" tabindex="0" loading="lazy"><figcaption>消息管理</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>公众号消息对应 <code>mp_message</code> 表，结构如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号消息/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<p>① <code>type</code> 字段：消息类型，包括文本、图片、语音、视频、小视频、图文、音乐、地理位置、链接、事件等类型，对应 <code>mp_message_type</code> 字典。</p>
<p>② <code>send_from</code> 字段：消息发送方，分成两类：</p>
<ul>
<li>【接收】用户发送给公众号：<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Receiving_standard_messages.html" target="_blank" rel="noopener noreferrer">接收普通消息 (opens new window)</a>、<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Receiving_event_pushes.html" target="_blank" rel="noopener noreferrer">接收事件推送(opens new window)</a></li>
<li>【发送】公众号发给用户：<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Passive_user_reply_message.html" target="_blank" rel="noopener noreferrer">被动回复用户消息 (opens new window)</a>、<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Service_Center_messages.html" target="_blank" rel="noopener noreferrer">客服消息(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_2-消息管理界面"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_2-%E6%B6%88%E6%81%AF%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 消息管理界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/message/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/message(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/message/MpMessageController.java" target="_blank" rel="noopener noreferrer">MpMessageController(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-【接收】"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_3-%E3%80%90%E6%8E%A5%E6%94%B6%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>3.【接收】</h2>
<h3><a class="header-anchor" href="#_3-1-接收普通消息"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_3-1-%E6%8E%A5%E6%94%B6%E6%99%AE%E9%80%9A%E6%B6%88%E6%81%AF" target="_blank" rel="noopener noreferrer">#</a>3.1 接收普通消息</h3>
<blockquote>
<p>对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Receiving_standard_messages.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 接收普通消息》 (opens new window)</a>文档。</p>
</blockquote>
<p>当用户向公众账号发消息时，会被 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/message/MessageReceiveHandler.java" target="_blank" rel="noopener noreferrer">MessageReceiveHandler (opens new window)</a>处理，记录到 <code>mp_message</code> 表，消息类型为文本、图片、语音、视频、小视频、地理位置、链接。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号消息/接收普通消息.png" alt="接收普通消息" tabindex="0" loading="lazy"><figcaption>接收普通消息</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-接收事件消息"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_3-2-%E6%8E%A5%E6%94%B6%E4%BA%8B%E4%BB%B6%E6%B6%88%E6%81%AF" target="_blank" rel="noopener noreferrer">#</a>3.2 接收事件消息</h3>
<blockquote>
<p>对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Receiving_event_pushes.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 接收事件推送》 (opens new window)</a>文档。</p>
</blockquote>
<p>在用户和公众号产交互的过程中，会被 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/message/MessageReceiveHandler.java" target="_blank" rel="noopener noreferrer">MessageReceiveHandler (opens new window)</a>处理，记录到 <code>mp_message</code> 表，消息类型仅为事件。</p>
<h2><a class="header-anchor" href="#_4-【发送】"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_4-%E3%80%90%E5%8F%91%E9%80%81%E3%80%91" target="_blank" rel="noopener noreferrer">#</a>4.【发送】</h2>
<h3><a class="header-anchor" href="#_4-1-被动回复用户消息"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_4-1-%E8%A2%AB%E5%8A%A8%E5%9B%9E%E5%A4%8D%E7%94%A8%E6%88%B7%E6%B6%88%E6%81%AF" target="_blank" rel="noopener noreferrer">#</a>4.1 被动回复用户消息</h3>
<blockquote>
<p>对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Passive_user_reply_message.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 被动回复用户消息》 (opens new window)</a>文档。</p>
</blockquote>
<p>在被动回复用户消息时，统一由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/message/MpMessageServiceImpl.java#L85-L104" target="_blank" rel="noopener noreferrer">MpMessageServiceImpl (opens new window)</a>的 <code>sendOutMessage</code> 方法来构建回复消息，也会记录到 <code>mp_message</code> 表，消息类型为文本、图片、语音、视频、音乐、图文。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号消息/被动回复用户消息.png" alt="被动回复用户消息" tabindex="0" loading="lazy"><figcaption>被动回复用户消息</figcaption></figure>
<h3><a class="header-anchor" href="#_4-2-主动发送客服消息"><span></span></a><a href="https://doc.iocoder.cn/mp/message/#_4-2-%E4%B8%BB%E5%8A%A8%E5%8F%91%E9%80%81%E5%AE%A2%E6%9C%8D%E6%B6%88%E6%81%AF" target="_blank" rel="noopener noreferrer">#</a>4.2 主动发送客服消息</h3>
<blockquote>
<p>对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Service_Center_messages.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 客服消息》 (opens new window)</a>文档。</p>
</blockquote>
<p>点击消息管理界面的【消息】按钮，可以主动发送客服消息给用户。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号消息/主动发送消息给用户.png" alt="主动发送消息给用户" tabindex="0" loading="lazy"><figcaption>主动发送消息给用户</figcaption></figure>
<p>主动发送客服消息，统一由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/message/MpMessageServiceImpl.java#L106-L130" target="_blank" rel="noopener noreferrer">MpMessageServiceImpl (opens new window)</a>的 <code>sendKefuMessage</code> 方法来构建客服消息，也会记录到 <code>mp_message</code> 表，消息类型为文本、图片、语音、视频、音乐、图文。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号消息/客服消息.png" alt="客服消息" tabindex="0" loading="lazy"><figcaption>客服消息</figcaption></figure>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%B6%88%E6%81%AF/%E7%95%8C%E9%9D%A2.png" type="image/png"/>
    </item>
    <item>
      <title>自动回复</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/6.%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/6.%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D.html</guid>
      <source url="https://springg.us.kg/rss.xml">自动回复</source>
      <description>自动回复 本章节，讲解自动回复的相关内容，对应 [公众号管理 -&amp;gt; 自动回复] 菜单。如下图所示： 自动回复自动回复 在用户关注、发送消息时，公众号可以自动回复消息给用户。 #1. 表结构 自动回复对应 mp_auto_reply 表，结构如下图所示： 自动回复表结构自动回复表结构 type 字段：回复类型， 1 - 关注回复：用户关注公众号时 3 -...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解自动回复的相关内容，对应 [公众号管理 -&gt; 自动回复] 菜单。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/自动回复/界面.png" alt="自动回复" tabindex="0" loading="lazy"><figcaption>自动回复</figcaption></figure>
<p>在用户关注、发送消息时，公众号可以自动回复消息给用户。</p>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/auto-reply/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>自动回复对应 <code>mp_auto_reply</code> 表，结构如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/自动回复/表结构.png" alt="自动回复表结构" tabindex="0" loading="lazy"><figcaption>自动回复表结构</figcaption></figure>
<p><code>type</code> 字段：回复类型，</p>
<ul>
<li>1 - 关注回复：用户关注公众号时</li>
<li>3 - 关键字回复：消息类型为文本时，匹配到关键字</li>
<li>2 - 消息回复：没有匹配到关键字时，根据消息类型</li>
</ul>
<h2><a class="header-anchor" href="#_2-自动回复界面"><span></span></a><a href="https://doc.iocoder.cn/mp/auto-reply/#_2-%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 自动回复界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/autoReply/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/autoReply(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/message/MpAutoReplyController.java" target="_blank" rel="noopener noreferrer">MpAutoReplyController(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-关注回复"><span></span></a><a href="https://doc.iocoder.cn/mp/auto-reply/#_3-%E5%85%B3%E6%B3%A8%E5%9B%9E%E5%A4%8D" target="_blank" rel="noopener noreferrer">#</a>3. 关注回复</h2>
<p>用户关注公众号时，被动回复用户消息，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/message/MpAutoReplyServiceImpl.java#L181-L200" target="_blank" rel="noopener noreferrer">MpAutoReplyServiceImpl (opens new window)</a>的 <code>replyForSubscribe</code> 方法来生成回复内容。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/自动回复/关注回复.png" alt="关注回复" tabindex="0" loading="lazy"><figcaption>关注回复</figcaption></figure>
<h2><a class="header-anchor" href="#_4-消息回复-关键字回复"><span></span></a><a href="https://doc.iocoder.cn/mp/auto-reply/#_4-%E6%B6%88%E6%81%AF%E5%9B%9E%E5%A4%8D-%E5%85%B3%E9%94%AE%E5%AD%97%E5%9B%9E%E5%A4%8D" target="_blank" rel="noopener noreferrer">#</a>4. 消息回复 &amp; 关键字回复</h2>
<p>用户发送消息给公众号时，自动回复消息给用户，分为两种情况：</p>
<ul>
<li>关键字回复：消息类型为文本时，匹配到关键字，自动回复消息</li>
<li>消息回复：没有匹配到关键字时，根据消息类型，自动回复消息</li>
</ul>
<p>这两种情况，由 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/message/MessageAutoReplyHandler.java" target="_blank" rel="noopener noreferrer">MessageAutoReplyHandler (opens new window)</a>调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/message/MpAutoReplyServiceImpl.java#L154-L179" target="_blank" rel="noopener noreferrer">MpAutoReplyServiceImpl (opens new window)</a>的 <code>replyForMessage</code> 方法来生成回复内容。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/自动回复/消息回复.png" alt="消息回复" tabindex="0" loading="lazy"><figcaption>消息回复</figcaption></figure>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D/%E7%95%8C%E9%9D%A2.png" type="image/png"/>
    </item>
    <item>
      <title>公众号菜单</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/7.%E5%85%AC%E4%BC%97%E5%8F%B7%E8%8F%9C%E5%8D%95.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/7.%E5%85%AC%E4%BC%97%E5%8F%B7%E8%8F%9C%E5%8D%95.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号菜单</source>
      <description>公众号菜单 本章节，讲解公众号菜单的相关内容，对应 [公众号管理 -&amp;gt; 菜单管理] 菜单，对应 《微信公众号官方文档 —— 自定义菜单》 (opens new window)文档。如下图所示： 界面界面 #1. 表结构 公众号菜单对应 mp_menu 表，结构如下图所示： 表结构表结构 type 字段：按钮类型。如果类型为 CLICK 点击回复时，可进...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解公众号菜单的相关内容，对应 [公众号管理 -&gt; 菜单管理] 菜单，对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Custom_Menus/Creating_Custom-Defined_Menu.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 自定义菜单》 (opens new window)</a>文档。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号菜单/界面.png" alt="界面" tabindex="0" loading="lazy"><figcaption>界面</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/menu/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>公众号菜单对应 <code>mp_menu</code> 表，结构如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号菜单/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<p><code>type</code> 字段：按钮类型。如果类型为 <code>CLICK</code> 点击回复时，可进行文本、图片、语音、视频、图文、音乐消息。</p>
<h2><a class="header-anchor" href="#_2-菜单管理界面"><span></span></a><a href="https://doc.iocoder.cn/mp/menu/#_2-%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 菜单管理界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/menu/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/menu(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/menu/MpMenuController.java" target="_blank" rel="noopener noreferrer">MpMenuController(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-点击回复"><span></span></a><a href="https://doc.iocoder.cn/mp/menu/#_3-%E7%82%B9%E5%87%BB%E5%9B%9E%E5%A4%8D" target="_blank" rel="noopener noreferrer">#</a>3. 点击回复</h2>
<p>用户点击菜单按钮时，会接收事件消息，进而被 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/menu/MenuHandler.java" target="_blank" rel="noopener noreferrer">MenuHandler (opens new window)</a>处理。如果类型为 <code>CLICK</code> 点击回复时，自动回复对应的消息。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号菜单/点击回复.png" alt="点击回复" tabindex="0" loading="lazy"><figcaption>点击回复</figcaption></figure>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E8%8F%9C%E5%8D%95/%E7%95%8C%E9%9D%A2.png" type="image/png"/>
    </item>
    <item>
      <title>公众号素材</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号素材</source>
      <description>公众号素材 本章节，讲解公众号素材的相关内容，包括图片、语音、视频素材，不包括图文素材。对应 [公众号管理 -&amp;gt; 素材管理] 菜单，如下图所示： 界面界面 在配置公众号的自动回复、菜单的自动回复、主动给用户发送消息时，都可以使用素材。 #1. 表结构 公众号素材对应 mp_material 表，结构如下图所示： 表结构表结构 ① type 字段：素材类...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解公众号素材的相关内容，包括图片、语音、视频素材，不包括图文素材。对应 [公众号管理 -&gt; 素材管理] 菜单，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号素材/界面.png" alt="界面" tabindex="0" loading="lazy"><figcaption>界面</figcaption></figure>
<p>在配置公众号的自动回复、菜单的自动回复、主动给用户发送消息时，都可以使用素材。</p>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/material/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>公众号素材对应 <code>mp_material</code> 表，结构如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号素材/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<p>① <code>type</code> 字段：素材类型。对应微信的素材类型，包括 <code>image</code> 图片、<code>voice</code> 语音、<code>video</code> 视频。</p>
<p>② <code>media_id</code> 字段：素材的媒体编号，对应微信公众号的 media_id。</p>
<p>③ <code>permanent</code> 字段：是否永久。<code>true</code> 代表 <a href="https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/Adding_Permanent_Assets.html" target="_blank" rel="noopener noreferrer">永久素材 (opens new window)</a>，<code>false</code> 代表 <a href="https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/New_temporary_materials.html" target="_blank" rel="noopener noreferrer">临时素材 (opens new window)</a>。</p>
<p>④ <code>mp_url</code> 字段：公众号存储素材的 URL 地址，有且仅有永久素材才有。</p>
<p>⑤ <code>url</code> 字段：存储在自己文件服务器上的 URL 地址，解决临时素材只在微信服务器上保存 3 天的问题，也解决图片素材的 <code>mp_url</code> 无法在自己管理后台显示的问题。</p>
<h2><a class="header-anchor" href="#_2-素材管理界面"><span></span></a><a href="https://doc.iocoder.cn/mp/material/#_2-%E7%B4%A0%E6%9D%90%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 素材管理界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/material/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/material(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/material/MpMaterialController.java" target="_blank" rel="noopener noreferrer">MpMaterialController(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-永久素材"><span></span></a><a href="https://doc.iocoder.cn/mp/material/#_3-%E6%B0%B8%E4%B9%85%E7%B4%A0%E6%9D%90" target="_blank" rel="noopener noreferrer">#</a>3. 永久素材</h2>
<blockquote>
<p>对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/Adding_Permanent_Assets.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 永久素材》 (opens new window)</a>文档。</p>
</blockquote>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/material/MpMaterialController.java#L40-L47" target="_blank" rel="noopener noreferrer">MpMaterialController (opens new window)</a>的 <code>uploadPermanentMaterial</code> 方法对应的接口，实现了上传【永久】素材到公众号。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号素材/上传永久素材.png" alt="上传永久素材" tabindex="0" loading="lazy"><figcaption>上传永久素材</figcaption></figure>
<h2><a class="header-anchor" href="#_4-临时素材"><span></span></a><a href="https://doc.iocoder.cn/mp/material/#_4-%E4%B8%B4%E6%97%B6%E7%B4%A0%E6%9D%90" target="_blank" rel="noopener noreferrer">#</a>4. 临时素材</h2>
<blockquote>
<p>对应 <a href="https://developers.weixin.qq.com/doc/offiaccount/Asset_Management/New_temporary_materials.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 临时素材》 (opens new window)</a>文档。</p>
</blockquote>
<p>① 来源一：主动发送客服消息给用户时，如果是图片、语音、视频素材，需要先上传到微信服务器，获得到 <code>media_id</code> 后，才能发送给用户。</p>
<p>此时，可调用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/material/MpMaterialController.java#L31-L38" target="_blank" rel="noopener noreferrer">MpMaterialController (opens new window)</a>的 <code>uploadTemporaryMaterial</code> 方法对应的接口，实现了上传【临时】素材到公众号。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号素材/上传临时素材.png" alt="上传临时素材" tabindex="0" loading="lazy"><figcaption>上传临时素材</figcaption></figure>
<p>② 来源二：在接收到用户消息时，如果是图片、语音、视频素材，需要先下载到自己的文件服务器上，避免超过 3 天后无法访问的问题。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号素材/下载临时素材.png" alt="下载临时素材" tabindex="0" loading="lazy"><figcaption>下载临时素材</figcaption></figure>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E7%B4%A0%E6%9D%90/%E7%95%8C%E9%9D%A2.png" type="image/png"/>
    </item>
    <item>
      <title>公众号图文</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/9.%E5%85%AC%E4%BC%97%E5%8F%B7%E5%9B%BE%E6%96%87.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/8.%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/9.%E5%85%AC%E4%BC%97%E5%8F%B7%E5%9B%BE%E6%96%87.html</guid>
      <source url="https://springg.us.kg/rss.xml">公众号图文</source>
      <description>公众号图文 本章节，讲解公众号图文的相关内容，包括两部分： ① 在 [公众号管理 -&amp;gt; 图文草稿箱] 菜单中，创建一个图文草稿。如下图所示： 界面 —— 图文草稿箱界面 —— 图文草稿箱 ② 点击【发布】按钮，将图文草稿发布到公众号，成为一个图文记录，展示在 [公众号管理 -&amp;gt; 图文发表记录] 菜单中。如下图所示： 界面 —— 图文发表记录界面 —— ...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，讲解公众号图文的相关内容，包括两部分：</p>
<p>① 在 [公众号管理 -&gt; 图文草稿箱] 菜单中，创建一个图文草稿。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号图文/界面-图文草稿箱.png" alt="界面 —— 图文草稿箱" tabindex="0" loading="lazy"><figcaption>界面 —— 图文草稿箱</figcaption></figure>
<p>② 点击【发布】按钮，将图文草稿发布到公众号，成为一个图文记录，展示在 [公众号管理 -&gt; 图文发表记录] 菜单中。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/公众号手册/公众号图文/界面-图文发表记录.png" alt="界面 —— 图文发表记录" tabindex="0" loading="lazy"><figcaption>界面 —— 图文发表记录</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mp/article/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<p>暂无，全部基于微信公众号提供的 API 接口。</p>
<ul>
<li>图文草稿箱：<a href="https://developers.weixin.qq.com/doc/offiaccount/Draft_Box/Add_draft.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 草稿箱》(opens new window)</a></li>
<li>图文发表记录：<a href="https://developers.weixin.qq.com/doc/offiaccount/Publish/Publish.html" target="_blank" rel="noopener noreferrer">《微信公众号官方文档 —— 发布能力》(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_2-图文草稿箱界面"><span></span></a><a href="https://doc.iocoder.cn/mp/article/#_2-%E5%9B%BE%E6%96%87%E8%8D%89%E7%A8%BF%E7%AE%B1%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>2. 图文草稿箱界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/draft/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/draft(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/news/MpDraftController.java" target="_blank" rel="noopener noreferrer">MpDraftController(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-图文发表记录界面"><span></span></a><a href="https://doc.iocoder.cn/mp/article/#_3-%E5%9B%BE%E6%96%87%E5%8F%91%E8%A1%A8%E8%AE%B0%E5%BD%95%E7%95%8C%E9%9D%A2" target="_blank" rel="noopener noreferrer">#</a>3. 图文发表记录界面</h2>
<ul>
<li>前端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/mp/freePublish/index.vue" target="_blank" rel="noopener noreferrer">/@views/mp/freePublish(opens new window)</a></li>
<li>后端：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/news/MpFreePublishController.java" target="_blank" rel="noopener noreferrer">MpFreePublishController(opens new window)</a></li>
</ul>
<p>上次更新: 2023/07/09, 22:14:26</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E5%85%AC%E4%BC%97%E5%8F%B7%E5%9B%BE%E6%96%87/%E7%95%8C%E9%9D%A2-%E5%9B%BE%E6%96%87%E8%8D%89%E7%A8%BF%E7%AE%B1.png" type="image/png"/>
    </item>
    <item>
      <title>短信配置</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/1.%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/1.%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://springg.us.kg/rss.xml">短信配置</source>
      <description>短信配置 友情提示： 该功能依赖“消息队列”，需要参考 《消息队列》 文档进行开启消息队列。 本章节，介绍项目的短信功能。该功能提供统一的短信 API 给其它模块，使它们可以快速接入短信功能，无需关心不同短信平台的具体对接。 短信采用异步发送，基于 Redis 消息队列，如下图所示： 整体流程整体流程 yudao-spring-boot-starter...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>友情提示：</p>
<p>该功能依赖“消息队列”，需要参考 <a href="https://doc.iocoder.cn/message-queue/" target="_blank" rel="noopener noreferrer">《消息队列》</a> 文档进行开启消息队列。</p>
<p>本章节，介绍项目的短信功能。该功能提供统一的短信 API 给其它模块，使它们可以快速接入短信功能，无需关心不同短信平台的具体对接。</p>
<p>短信采用异步发送，基于 <a href="https://doc.iocoder.cn/message-queue" target="_blank" rel="noopener noreferrer">Redis 消息队列</a>，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/01.png" alt="整体流程" tabindex="0" loading="lazy"><figcaption>整体流程</figcaption></figure>
<ul>
<li><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-sms/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-biz-sms</code> (opens new window)</a>业务组件：封装不同短信平台的客户端。</li>
<li><code>yudao-module-system</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/sms/" target="_blank" rel="noopener noreferrer"><code>sms</code> (opens new window)</a>业务模块，提供短信渠道、模板的配置，短信日志的查看，短信的发送等功能。</li>
</ul>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/sms/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<figure><img src="https://doc.iocoder.cn/img/短信配置/02.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<h2><a class="header-anchor" href="#_2-短信配置"><span></span></a><a href="https://doc.iocoder.cn/sms/#_2-%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>2. 短信配置</h2>
<p>本小节，讲解如何配置短信功能，整个过程如下：</p>
<ul>
<li>新建一个短信【渠道】，配置对应短信平台的账号</li>
<li>新建一个短信【模版】，配置对应短信平台的模板</li>
<li>测试该短信模板，查看对应的短信【日志】，确认是否发送成功</li>
</ul>
<h3><a class="header-anchor" href="#_2-1-新建短信渠道"><span></span></a><a href="https://doc.iocoder.cn/sms/#_2-1-%E6%96%B0%E5%BB%BA%E7%9F%AD%E4%BF%A1%E6%B8%A0%E9%81%93" target="_blank" rel="noopener noreferrer">#</a>2.1 新建短信渠道</h3>
<p>① 点击 [系统管理 -&gt; 短信管理 -&gt; 短信渠道] 菜单，查看短信渠道的列表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/03.png" alt="短信渠道的列表" tabindex="0" loading="lazy"><figcaption>短信渠道的列表</figcaption></figure>
<p>② 点击 [新增] 按钮，选择渠道编码为【调试（钉钉）】，并填写信息如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/04.png" alt="短信渠道的新增" tabindex="0" loading="lazy"><figcaption>短信渠道的新增</figcaption></figure>
<div class="language-yaml" data-ext="yaml" data-title="yaml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">短信 API 的账号</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">696b5d8ead48071237e4aa5861ff08dbadb2b4ded1c688a7b7c9afc615579859</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">短信 API 的密钥</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">SEC5c4e5ff888bc8a9923ae47f59e7ccd30af1f14d93c55b4e2c9cb094e35aeed67</span></span></code></pre>
</div><p>疑问 1：为什么选择渠道编码为【调试（钉钉）】？</p>
<p>该类型使用钉钉机器人来模拟短信发送，用于日常调试。</p>
<ul>
<li>短信 API 的账号，对应机器人的 Webhook 的 <code>access_token</code> 参数</li>
<li>短信 API 的密钥，对应机器人的安全设置的加签</li>
</ul>
<p>上图使用的配置，是艿艿自己的钉钉机器人。正式使用时，必须参考 <a href="https://open.dingtalk.com/document/group/custom-robot-access" target="_blank" rel="noopener noreferrer">《钉钉开放平台 —— 自定义机器人接入 》 (opens new window)</a>文档，申请自己的专属机器人。</p>
<p>疑问 2：可以选择其它渠道编码吗？</p>
<p>当然可以，这里主要考虑部分同学暂时没有申请短信平台，所以使用【调试（钉钉）】渠道编码。</p>
<p>不同短信平台的配置，可见 <a href="https://doc.iocoder.cn/sms/#_6-%E7%9F%AD%E4%BF%A1%E5%B9%B3%E5%8F%B0%E9%99%84%E5%BD%95" target="_blank" rel="noopener noreferrer">「6. 短信平台附录」</a> 小节。</p>
<h3><a class="header-anchor" href="#_2-2-新建短信模板"><span></span></a><a href="https://doc.iocoder.cn/sms/#_2-2-%E6%96%B0%E5%BB%BA%E7%9F%AD%E4%BF%A1%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">#</a>2.2 新建短信模板</h3>
<p>① 点击 [系统管理 -&gt; 短信管理 -&gt; 短信模板] 菜单，查看短信模板的列表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/05.png" alt="短信模板的新增" tabindex="0" loading="lazy"><figcaption>短信模板的新增</figcaption></figure>
<p>② 点击 [新增] 按钮，选择刚创建的短信渠道，并填写信息如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/06.png" alt="短信模板的新增" tabindex="0" loading="lazy"><figcaption>短信模板的新增</figcaption></figure>
<ul>
<li>短信渠道编号：发送该短信模板时，使用的短信渠道，即使用哪个短信平台进行发送</li>
<li>模板编号：短信模板的唯一标识，使用短信 API 时，通过它标识使用的短信模板</li>
<li>模板内容：短信模板的内容，使用 <code>{var}</code> 作为占位符，例如说 <code>{name}</code>、<code>{code}</code> 等</li>
<li>短信 API 模板编号：短信平台的短信模板的编号，需要保证该模板在短信平台已经审核通过</li>
<li>开启状态：短信模板被禁用时，该短信模板将不发送短信，只记录短信日志</li>
</ul>
<p>疑问：为什么设计短信模板的功能？</p>
<p>在一些场景下，需要修改短信模板所使用的短信平台。例如说：短信平台出现故障，或者切换短信平台等等。</p>
<p>此时，只需要修改短信模板的两个属性：短信渠道编号、短信 API 模板编号，无需重启应用。</p>
<h3><a class="header-anchor" href="#_2-3-查看短信日志"><span></span></a><a href="https://doc.iocoder.cn/sms/#_2-3-%E6%9F%A5%E7%9C%8B%E7%9F%AD%E4%BF%A1%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">#</a>2.3 查看短信日志</h3>
<p>① 使用钉钉，扫码 <a href="https://doc.iocoder.cn/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/07.jpg" target="_blank" rel="noopener noreferrer">图片</a> 加入机器人所在的【ruoyi-vue-pro 短信测试群】，查看测试短信的模拟发送。</p>
<p>② 点击 [测试] 按钮，输入任一手机号，进行该短信模板的模拟发送。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/08.png" alt="测试短信模板" tabindex="0" loading="lazy"><figcaption>测试短信模板</figcaption></figure>
<figure><img src="https://doc.iocoder.cn/img/短信配置/09.png" alt="测试短信模板" tabindex="0" loading="lazy"><figcaption>测试短信模板</figcaption></figure>
<p>友情提示：如果使用的短信渠道是阿里云、腾讯云等正式的短信平台，则会发送到填写的手机号中。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/10.png" alt="接收示例" tabindex="0" loading="lazy"><figcaption>接收示例</figcaption></figure>
<p>③ 点击 [系统管理 -&gt; 短信管理 -&gt; 短信日志] 采单，可以查看到每条短信的发送状态、接收状态。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/11.png" alt="短信日志" tabindex="0" loading="lazy"><figcaption>短信日志</figcaption></figure>
<h2><a class="header-anchor" href="#_3-短信发送"><span></span></a><a href="https://doc.iocoder.cn/sms/#_3-%E7%9F%AD%E4%BF%A1%E5%8F%91%E9%80%81" target="_blank" rel="noopener noreferrer">#</a>3. 短信发送</h2>
<h3><a class="header-anchor" href="#_3-1-smssendapi"><span></span></a><a href="https://doc.iocoder.cn/sms/#_3-1-smssendapi" target="_blank" rel="noopener noreferrer">#</a>3.1 SmsSendApi</h3>
<p>使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/sms/SmsSendApi.java" target="_blank" rel="noopener noreferrer">SmsSendApi (opens new window)</a>进行短信的发送，支持多种用户类型。它的方法如下：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/21.png" alt="短信发送" tabindex="0" loading="lazy"><figcaption>短信发送</figcaption></figure>
<h3><a class="header-anchor" href="#_3-2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/sms/#_3-2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>3.2 实战案例</h3>
<p>以工作流申请通过时，发送短信为例子，讲解 SmsSendApi 的使用。</p>
<p>① 引入 <code>yudao-module-system-api</code> 依赖，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/22.png" alt=" 依赖" tabindex="0" loading="lazy"><figcaption> 依赖</figcaption></figure>
<p>② 新建对应的短信模板，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/23.png" alt="新建短信模板" tabindex="0" loading="lazy"><figcaption>新建短信模板</figcaption></figure>
<p>③ 使用 Spring 注入 SmsSendApi Bean，调用对应的短信发送方法。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/24.png" alt="调用 SmsSendApi 方法" tabindex="0" loading="lazy"><figcaption>调用 SmsSendApi 方法</figcaption></figure>
<h2><a class="header-anchor" href="#_4-验证码发送"><span></span></a><a href="https://doc.iocoder.cn/sms/#_4-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%91%E9%80%81" target="_blank" rel="noopener noreferrer">#</a>4. 验证码发送</h2>
<h3><a class="header-anchor" href="#_4-1-smscodeapi"><span></span></a><a href="https://doc.iocoder.cn/sms/#_4-1-smscodeapi" target="_blank" rel="noopener noreferrer">#</a>4.1 SmsCodeApi</h3>
<p>使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/sms/SmsCodeApi.java" target="_blank" rel="noopener noreferrer">SmsCodeApi (opens new window)</a>进行【验证码】短信的发送，例如说：用户手机验证码登录、用户忘记密码等等。它的方法如下：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/21.png" alt="短信发送" tabindex="0" loading="lazy"><figcaption>短信发送</figcaption></figure>
<p>验证码使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/sms/SmsCodeDO.java" target="_blank" rel="noopener noreferrer"><code>system_sms_code</code> (opens new window)</a>表进行存储，默认每天最多发送 10 条，每分钟发送 1 条，有效期为 10 分钟，可通过 <code>yudao.sms-code</code> 配置项进行自定义：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/32.png" alt=" 配置项" tabindex="0" loading="lazy"><figcaption> 配置项</figcaption></figure>
<h3><a class="header-anchor" href="#_4-2-实战案例"><span></span></a><a href="https://doc.iocoder.cn/sms/#_4-2-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>4.2 实战案例</h3>
<p>以会员用户手机验证码登录为例子，讲解 SmsCodeApi 的使用。</p>
<p>① 引入 <code>yudao-module-system-api</code> 依赖，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/34.png" alt=" 依赖" tabindex="0" loading="lazy"><figcaption> 依赖</figcaption></figure>
<p>② 新建对应的短信模板，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/35.png" alt="新建短信模板" tabindex="0" loading="lazy"><figcaption>新建短信模板</figcaption></figure>
<p>③ 在 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/enums/sms/SmsSceneEnum.java" target="_blank" rel="noopener noreferrer">SmsSceneEnum (opens new window)</a>中，枚举会员用户的手机号登录的场景，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/36.png" alt="SmsSceneEnum 枚举" tabindex="0" loading="lazy"><figcaption>SmsSceneEnum 枚举</figcaption></figure>
<p>④ 使用 Spring 注入 SmsCodeApi Bean，调用对应的短信验证码的发送与使用方法。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/33.png" alt="调用 SmsCodeApi 方法" tabindex="0" loading="lazy"><figcaption>调用 SmsCodeApi 方法</figcaption></figure>
<h2><a class="header-anchor" href="#_5-短信客户端"><span></span></a><a href="https://doc.iocoder.cn/sms/#_5-%E7%9F%AD%E4%BF%A1%E5%AE%A2%E6%88%B7%E7%AB%AF" target="_blank" rel="noopener noreferrer">#</a>5. 短信客户端</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-sms/" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-biz-sms</code> (opens new window)</a>业务组件，对接阿里云、腾讯云等短信平台，提供统一的短信客户端，提供给 <code>yudao-module-system</code> 的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/sms/" target="_blank" rel="noopener noreferrer"><code>sms</code> (opens new window)</a>业务模块来调用。</p>
<h3><a class="header-anchor" href="#_5-1-smsclient"><span></span></a><a href="https://doc.iocoder.cn/sms/#_5-1-smsclient" target="_blank" rel="noopener noreferrer">#</a>5.1 SmsClient</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-sms/src/main/java/cn/iocoder/yudao/framework/sms/core/client/SmsClient.java" target="_blank" rel="noopener noreferrer">SmsClient (opens new window)</a>接口，定义短信客户端的方法。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/41.png" alt="SmsClient 接口" tabindex="0" loading="lazy"><figcaption>SmsClient 接口</figcaption></figure>
<p>每个短信平台，都对应一个 SmsClient 实现类。</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/42.png" alt="SmsClient 实现" tabindex="0" loading="lazy"><figcaption>SmsClient 实现</figcaption></figure>
<h3><a class="header-anchor" href="#_5-2-smscodemapping"><span></span></a><a href="https://doc.iocoder.cn/sms/#_5-2-smscodemapping" target="_blank" rel="noopener noreferrer">#</a>5.2 SmsCodeMapping</h3>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-sms/src/main/java/cn/iocoder/yudao/framework/sms/core/client/SmsCodeMapping.java" target="_blank" rel="noopener noreferrer">SmsCodeMapping (opens new window)</a>接口，定义短信平台错误码转换成 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-sms/src/main/java/cn/iocoder/yudao/framework/sms/core/enums/SmsFrameworkErrorCodeConstants.java" target="_blank" rel="noopener noreferrer">标准错误码 (opens new window)</a>的方法。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/43.png" alt="SmsClient 接口" tabindex="0" loading="lazy"><figcaption>SmsClient 接口</figcaption></figure>
<p>每个短信平台，都对应一个 SmsCodeMapping 实现类。</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/44.png" alt="SmsClient 实现" tabindex="0" loading="lazy"><figcaption>SmsClient 实现</figcaption></figure>
<h3><a class="header-anchor" href="#_5-3-对接其它短信平台"><span></span></a><a href="https://doc.iocoder.cn/sms/#_5-3-%E5%AF%B9%E6%8E%A5%E5%85%B6%E5%AE%83%E7%9F%AD%E4%BF%A1%E5%B9%B3%E5%8F%B0" target="_blank" rel="noopener noreferrer">#</a>5.3 对接其它短信平台</h3>
<p>如果你想要对接其它短信平台，自定义一个 SmsClient + SmsCodeMapping 实现类，并使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-sms/src/main/java/cn/iocoder/yudao/framework/sms/core/client/impl/SmsClientFactoryImpl.java#L77-L90" target="_blank" rel="noopener noreferrer">SmsClientFactoryImpl (opens new window)</a>进行创建。代码如下：</p>
<figure><img src="https://doc.iocoder.cn/img/短信配置/45.png" alt="SmsClientFactoryImpl 创建客户端" tabindex="0" loading="lazy"><figcaption>SmsClientFactoryImpl 创建客户端</figcaption></figure>
<h2><a class="header-anchor" href="#_6-短信平台附录"><span></span></a><a href="https://doc.iocoder.cn/sms/#_6-%E7%9F%AD%E4%BF%A1%E5%B9%B3%E5%8F%B0%E9%99%84%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>6. 短信平台附录</h2>
<p>一般情况下，建议接入 2-3 个短信平台，避免某个短信平台故障时，影响业务的正常运行。</p>
<p>例如说，手机验证码的短信平台 A 故障时，赶紧将短信验证码切换到短信平台 B 上，否则用户将无法正常登录或是注册。</p>
<h3><a class="header-anchor" href="#_6-1-阿里云"><span></span></a><a href="https://doc.iocoder.cn/sms/#_6-1-%E9%98%BF%E9%87%8C%E4%BA%91" target="_blank" rel="noopener noreferrer">#</a>6.1 阿里云</h3>
<ul>
<li>短信 API 的账号、密钥，可通过 <a href="https://ram.console.aliyun.com/manage/ak" target="_blank" rel="noopener noreferrer">阿里云 —— AccessKey (opens new window)</a>获取。</li>
<li>短信发送回调 URL，可通过 <a href="https://dysms.console.aliyun.com/general/upward" target="_blank" rel="noopener noreferrer">阿里云 —— 短信服务 —— 通用设置 (opens new window)</a>配置。</li>
</ul>
<h3><a class="header-anchor" href="#_6-2-腾讯云"><span></span></a><a href="https://doc.iocoder.cn/sms/#_6-2-%E8%85%BE%E8%AE%AF%E4%BA%91" target="_blank" rel="noopener noreferrer">#</a>6.2 腾讯云</h3>
<ul>
<li>
<p>短信 API 的账号、密钥，可通过 <a href="https://console.cloud.tencent.com/cam/capi" target="_blank" rel="noopener noreferrer">腾讯云 —— API 密钥管理 (opens new window)</a>获取。</p>
<p>注意！！！</p>
<p>腾讯云需要额外使用 <a href="https://console.cloud.tencent.com/smsv2/app-manage" target="_blank" rel="noopener noreferrer">SDKAppID (opens new window)</a>参数，它的账号需要采用 <code>SDKAppID secretId</code> 格式，具体可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-sms/src/main/java/cn/iocoder/yudao/framework/sms/core/client/impl/tencent/TencentSmsChannelProperties.java" target="_blank" rel="noopener noreferrer">TencentSmsChannelProperties (opens new window)</a>类。</p>
</li>
<li>
<p>短信发送回调 URL，可通过 <a href="https://console.cloud.tencent.com/smsv2/app-setting" target="_blank" rel="noopener noreferrer">腾讯云 —— 短信 —— 基础配置 (opens new window)</a>配置。</p>
</li>
</ul>
<p>上次更新: 2023/07/29, 15:56:49</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/01.png" type="image/png"/>
    </item>
    <item>
      <title>邮件配置</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/2.%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/2.%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://springg.us.kg/rss.xml">邮件配置</source>
      <description>邮件配置 友情提示： 该功能依赖“消息队列”，需要参考 《消息队列》 文档进行开启消息队列。 本章节，介绍项目的邮件功能。它在管理后台有三个菜单，分别是： ① 邮箱账号：配置邮件的发送账号 邮箱账号邮箱账号 ② 邮件模版：管理邮件的内容模版 邮件模版邮件模版 ③ 邮件记录：查看邮件的发送记录 邮件记录邮件记录 #1. 表结构 表结构表结构 #2. 实现...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>友情提示：</p>
<p>该功能依赖“消息队列”，需要参考 <a href="https://doc.iocoder.cn/message-queue/" target="_blank" rel="noopener noreferrer">《消息队列》</a> 文档进行开启消息队列。</p>
<p>本章节，介绍项目的邮件功能。它在管理后台有三个菜单，分别是：</p>
<p><strong>① 邮箱账号：配置邮件的发送账号</strong></p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/演示-邮箱账号.png" alt="邮箱账号" tabindex="0" loading="lazy"><figcaption>邮箱账号</figcaption></figure>
<p><strong>② 邮件模版：管理邮件的内容模版</strong></p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/演示-邮件模版.png" alt="邮件模版" tabindex="0" loading="lazy"><figcaption>邮件模版</figcaption></figure>
<p><strong>③ 邮件记录：查看邮件的发送记录</strong></p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/演示-邮件记录.png" alt="邮件记录" tabindex="0" loading="lazy"><figcaption>邮件记录</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/mail/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<h2><a class="header-anchor" href="#_2-实现原理"><span></span></a><a href="https://doc.iocoder.cn/mail/#_2-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>2. 实现原理</h2>
<p>邮件功能提供统一的 API 给其它模块，使它们可以快速实现发送邮件的功能，无需关心不同邮件平台的具体对接。</p>
<p>邮件采用异步发送，基于 <a href="https://doc.iocoder.cn/message-queue" target="_blank" rel="noopener noreferrer">Redis 消息队列</a>，如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/实现原理.png" alt="实现原理" tabindex="0" loading="lazy"><figcaption>实现原理</figcaption></figure>
<ul>
<li>前端代码：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/mail/" target="_blank" rel="noopener noreferrer">views/system/mail(opens new window)</a></li>
<li>后端代码：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/mail/" target="_blank" rel="noopener noreferrer">controller/admin/mail(opens new window)</a></li>
</ul>
<p>最终使用 Hutool 的 <a href="https://apidoc.gitee.com/dromara/hutool/cn/hutool/extra/mail/MailUtil.html" target="_blank" rel="noopener noreferrer">MailUtil (opens new window)</a>发送邮件。</p>
<h2><a class="header-anchor" href="#_3-邮箱配置"><span></span></a><a href="https://doc.iocoder.cn/mail/#_3-%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>3. 邮箱配置</h2>
<p>本小节，讲解如何配置邮件功能，整个过程如下：</p>
<ol>
<li>新建一个邮箱【账号】，配置邮件的发送账号</li>
<li>新建一个邮件【模版】，配置邮件的内容模版</li>
<li>测试该邮件模板，查看对应的邮件【日志】，确认是否发送成功</li>
</ol>
<h3><a class="header-anchor" href="#_3-1-新建邮箱账号"><span></span></a><a href="https://doc.iocoder.cn/mail/#_3-1-%E6%96%B0%E5%BB%BA%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7" target="_blank" rel="noopener noreferrer">#</a>3.1 新建邮箱账号</h3>
<p>① 点击 [系统管理 -&gt; 邮件管理 -&gt; 邮箱账号] 菜单，查看邮箱账号的列表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/演示-邮箱账号.png" alt="邮箱账号" tabindex="0" loading="lazy"><figcaption>邮箱账号</figcaption></figure>
<p>② 点击 [新增] 按钮，添加一个邮箱账号，并填写信息如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/邮箱配置-新建邮箱账号.png" alt="新增邮箱账号" tabindex="0" loading="lazy"><figcaption>新增邮箱账号</figcaption></figure>
<p>友情提示：</p>
<p>邮件发送基于 <a href="https://baike.baidu.com/item/SMTP/175887" target="_blank" rel="noopener noreferrer">SMTP (opens new window)</a>协议实现，需要开通账号的 STMP 服务。例如说：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/邮箱配置-SMTP服务.png" alt="网易 163 邮箱的 SMTP 服务" tabindex="0" loading="lazy"><figcaption>网易 163 邮箱的 SMTP 服务</figcaption></figure>
<p>不同邮件平台的 SMTP 配置，可见 <a href="https://doc.iocoder.cn/mail/#_5-%E9%82%AE%E7%AE%B1%E5%B9%B3%E5%8F%B0%E9%99%84%E5%BD%95" target="_blank" rel="noopener noreferrer">「5. 邮箱平台附录」</a> 小节。</p>
<p>③ 新增完成后，确认你的邮箱账号是否可以发送邮件，可通过如下代码：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.hutool.extra.mail.MailAccount</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">import</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> cn.hutool.extra.mail.MailUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Test</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> testDemo</span><span style="color:#E06C75;--shiki-dark:#E06C75">() {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    MailAccount</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mailAccount </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MailAccount</span><span style="color:#E06C75;--shiki-dark:#E06C75">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">//                .setFrom("奥特曼 &lt;ydym_test@163.com&gt;")</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setFrom</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ydym_test@163.com"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 邮箱地址</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setHost</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"smtp.163.com"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setPort</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">465</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setSslEnable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // SMTP 服务器</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setAuth</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setUser</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"ydym_test@163.com"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setPass</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"WBZTEINMIFVRYSOE"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> // 登录账号密码</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> messageId </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MailUtil</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">send</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(mailAccount, </span><span style="color:#98C379;--shiki-dark:#98C379">"7685413@qq.com"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"主题"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"内容"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    System</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">out</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">println</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"发送结果："</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> messageId);</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
</div><h3><a class="header-anchor" href="#_3-2-新建邮箱模版"><span></span></a><a href="https://doc.iocoder.cn/mail/#_3-2-%E6%96%B0%E5%BB%BA%E9%82%AE%E7%AE%B1%E6%A8%A1%E7%89%88" target="_blank" rel="noopener noreferrer">#</a>3.2 新建邮箱模版</h3>
<p>① 点击 [系统管理 -&gt; 邮箱管理 -&gt; 邮件模板] 菜单，查看邮件模板的列表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/演示-邮件模版.png" alt="邮件模版" tabindex="0" loading="lazy"><figcaption>邮件模版</figcaption></figure>
<p>② 点击 [新增] 按钮，选择刚创建的邮箱账号，并填写信息如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/邮箱配置-新增邮件模版.png" alt="邮件模板的新增" tabindex="0" loading="lazy"><figcaption>邮件模板的新增</figcaption></figure>
<ul>
<li>邮箱账号：发送该邮件模板时，使用的邮件账号，即使用哪个邮箱进行发送邮件</li>
<li>模版编号：邮件模板的唯一标识，使用邮件 API 时，通过它标识使用的邮件模板</li>
<li>发件人名称：发送邮件显示的发件人名字</li>
<li>模板内容：邮件模板的内容，使用 <code>{var}</code> 作为占位符，例如说 <code>{name}</code>、<code>{code}</code> 等</li>
<li>开启状态：邮件模板被禁用时，该邮件模板将不发送邮件，只记录邮件日志</li>
</ul>
<p>疑问：为什么设计邮件模板的功能？</p>
<p>在一些场景下，产品会希望修改发送邮件的标题、内容，甚至邮箱账号，此时只需要修改邮件模版的对应属性，无需重启应用。</p>
<h3><a class="header-anchor" href="#_3-3-查看邮件日志"><span></span></a><a href="https://doc.iocoder.cn/mail/#_3-3-%E6%9F%A5%E7%9C%8B%E9%82%AE%E4%BB%B6%E6%97%A5%E5%BF%97" target="_blank" rel="noopener noreferrer">#</a>3.3 查看邮件日志</h3>
<p>① 点击 [测试] 按钮，输入测试的收件邮箱地址，进行该邮件模板的模拟发送。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/邮箱配置-测试邮件.png" alt="测试邮件" tabindex="0" loading="lazy"><figcaption>测试邮件</figcaption></figure>
<p>② 打开收件邮箱，查看邮件是否发送成功。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/邮箱配置-收件箱.png" alt="邮件箱" tabindex="0" loading="lazy"><figcaption>邮件箱</figcaption></figure>
<p>③ 点击 [系统管理 -&gt; 邮箱管理 -&gt; 邮件日志] 采单，可以查看到每条邮件的发送状态。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/邮箱配置-邮件发送日志.png" alt="邮件发送日志" tabindex="0" loading="lazy"><figcaption>邮件发送日志</figcaption></figure>
<h2><a class="header-anchor" href="#_4-邮件发送"><span></span></a><a href="https://doc.iocoder.cn/mail/#_4-%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81" target="_blank" rel="noopener noreferrer">#</a>4. 邮件发送</h2>
<h3><a class="header-anchor" href="#_4-1-mailsendapi"><span></span></a><a href="https://doc.iocoder.cn/mail/#_4-1-mailsendapi" target="_blank" rel="noopener noreferrer">#</a>4.1 MailSendApi</h3>
<p><a href="https://doc.iocoder.cn/mail/#_3-%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">邮箱配置</a>完成后，可使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/mail/MailSendApi.java" target="_blank" rel="noopener noreferrer">MailSendApi (opens new window)</a>进行邮件的发送，支持多种用户类型。它的方法如下：</p>
<figure><img src="https://doc.iocoder.cn/img/邮件配置/邮件发送-MailSendApi.png" alt="MailSendApi" tabindex="0" loading="lazy"><figcaption>MailSendApi</figcaption></figure>
<h3><a class="header-anchor" href="#_4-2-接入示例"><span></span></a><a href="https://doc.iocoder.cn/mail/#_4-2-%E6%8E%A5%E5%85%A5%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>4.2 接入示例</h3>
<p>以 <code>yudao-module-infra</code> 模块，需要发邮件为例子，讲解 SmsCodeApi 的使用。</p>
<p>① 在 <code>yudao-module-infra-biz</code> 模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>引入 <code>yudao-module-system-api</code> 依赖，如所示：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-system-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 在代码中注入 SmsCodeApi Bean，并调用发送邮件的方法。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TestDemoServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TestDemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 0. 注入 MailSendApi Bean</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Resource</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> MailSendApi</span><span style="color:#E06C75;--shiki-dark:#E06C75"> mailSendApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> sendDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 1. 准备参数</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> userId</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 示例中写死，你可以改成你业务中的 userId 噢</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> templateCode</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "test_01"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 邮件模版，记得在【邮箱管理】中配置噢</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">templateParams</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HashMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        templateParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"奥特曼"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        templateParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key2"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"变身"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 2. 发送邮件</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        mailSendApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sendSingleMailToAdmin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> MailSendSingleToUserReqDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setUserId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(userId).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setTemplateCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(templateCode).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setTemplateParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(templateParams));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2><a class="header-anchor" href="#_5-邮箱平台附录"><span></span></a><a href="https://doc.iocoder.cn/mail/#_5-%E9%82%AE%E7%AE%B1%E5%B9%B3%E5%8F%B0%E9%99%84%E5%BD%95" target="_blank" rel="noopener noreferrer">#</a>5. 邮箱平台附录</h2>
<ul>
<li><a href="http://t.zoukankan.com/kimsbo-p-10671851.html" target="_blank" rel="noopener noreferrer">《QQ 邮箱的 SMTP 设置》(opens new window)</a></li>
<li><a href="https://blog.csdn.net/qq_39933045/article/details/126957074" target="_blank" rel="noopener noreferrer">《网易 163 邮箱的 SMTP 设置》(opens new window)</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/551399559" target="_blank" rel="noopener noreferrer">《QQ 邮箱、网易邮箱、腾讯企业邮箱、网易企业邮箱的 SMTP 设置》(opens new window)</a></li>
</ul>
<p>上次更新: 2023/07/29, 15:56:49</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E6%BC%94%E7%A4%BA-%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7.png" type="image/png"/>
    </item>
    <item>
      <title>站内信</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/3.%E7%AB%99%E5%86%85%E4%BF%A1%E9%85%8D%E7%BD%AE.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/3.%E7%AB%99%E5%86%85%E4%BF%A1%E9%85%8D%E7%BD%AE.html</guid>
      <source url="https://springg.us.kg/rss.xml">站内信</source>
      <description>站内信 本章节，介绍项目的站内信功能。它在管理后台有三个菜单，分别是： ① 站内信模版：管理站内信的内容模版 站内信模版站内信模版 ② 站内信管理：查看站内信的发送记录 站内信管理站内信管理 ③ 我的站内信：查看发送给我的站内信 我的站内信我的站内信 #1. 表结构 表结构表结构 #2. 实现代码 前端代码：views/system/notify(op...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，介绍项目的站内信功能。它在管理后台有三个菜单，分别是：</p>
<p><strong>① 站内信模版：管理站内信的内容模版</strong></p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/演示-站内信模版.png" alt="站内信模版" tabindex="0" loading="lazy"><figcaption>站内信模版</figcaption></figure>
<p><strong>② 站内信管理：查看站内信的发送记录</strong></p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/演示-站内信管理.png" alt="站内信管理" tabindex="0" loading="lazy"><figcaption>站内信管理</figcaption></figure>
<p><strong>③ 我的站内信：查看发送给我的站内信</strong></p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/演示-我的站内信.png" alt="我的站内信" tabindex="0" loading="lazy"><figcaption>我的站内信</figcaption></figure>
<h2><a class="header-anchor" href="#_1-表结构"><span></span></a><a href="https://doc.iocoder.cn/notify/#_1-%E8%A1%A8%E7%BB%93%E6%9E%84" target="_blank" rel="noopener noreferrer">#</a>1. 表结构</h2>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/表结构.png" alt="表结构" tabindex="0" loading="lazy"><figcaption>表结构</figcaption></figure>
<h2><a class="header-anchor" href="#_2-实现代码"><span></span></a><a href="https://doc.iocoder.cn/notify/#_2-%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener noreferrer">#</a>2. 实现代码</h2>
<ul>
<li>前端代码：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/notify/" target="_blank" rel="noopener noreferrer">views/system/notify(opens new window)</a></li>
<li>后端代码：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/notify/" target="_blank" rel="noopener noreferrer">controller/admin/notify(opens new window)</a></li>
</ul>
<h2><a class="header-anchor" href="#_3-站内信配置"><span></span></a><a href="https://doc.iocoder.cn/notify/#_3-%E7%AB%99%E5%86%85%E4%BF%A1%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">#</a>3. 站内信配置</h2>
<p>本小节，讲解如何配置站内信功能，整个过程如下：</p>
<ol>
<li>新建一个站内信【模版】，配置站内信的内容模版</li>
<li>测试该站内信模板，查看对应的站内信【记录】，确认是否发送成功</li>
</ol>
<h3><a class="header-anchor" href="#_3-1-新建站内信模版"><span></span></a><a href="https://doc.iocoder.cn/notify/#_3-1-%E6%96%B0%E5%BB%BA%E7%AB%99%E5%86%85%E4%BF%A1%E6%A8%A1%E7%89%88" target="_blank" rel="noopener noreferrer">#</a>3.1 新建站内信模版</h3>
<p>① 点击 [系统管理 -&gt; 站内信管理 -&gt; 模板管理] 菜单，查看站内信模板的列表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/演示-站内信模版.png" alt="站内信模版" tabindex="0" loading="lazy"><figcaption>站内信模版</figcaption></figure>
<p>② 点击 [新增] 按钮，填写信息如下图：</p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/站内信配置-新增站内信模版.png" alt="站内信模板的新增" tabindex="0" loading="lazy"><figcaption>站内信模板的新增</figcaption></figure>
<ul>
<li>模版编号：站内信模板的唯一标识，使用站内信 API 时，通过它标识使用的站内信模板</li>
<li>发件人名称：发送站内信显示的发件人名字</li>
<li>模板内容：站内信模板的内容，使用 <code>{var}</code> 作为占位符，例如说 <code>{name}</code>、<code>{code}</code> 等</li>
<li>模版类型：站内信的分类，可使用 <code>system_notify_template_type</code> 字典进行自定义</li>
<li>开启状态：站内信模板被禁用时，该站内信模板将不发送站内信，只打印 logger 日志</li>
</ul>
<p>疑问：为什么设计站内信模板的功能？</p>
<p>在一些场景下，产品会希望修改发送站内信的内容、发送人昵称，此时只需要修改站内信模版的对应属性，无需重启应用。</p>
<h3><a class="header-anchor" href="#_3-2-测试站内信模版"><span></span></a><a href="https://doc.iocoder.cn/notify/#_3-2-%E6%B5%8B%E8%AF%95%E7%AB%99%E5%86%85%E4%BF%A1%E6%A8%A1%E7%89%88" target="_blank" rel="noopener noreferrer">#</a>3.2 测试站内信模版</h3>
<p>① 点击 [测试] 按钮，选择接收人为「芋道源码」，进行该站内信模板的模拟发送。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/站内信配置-测试站内信.png" alt="测试站内信" tabindex="0" loading="lazy"><figcaption>测试站内信</figcaption></figure>
<p>② 点击 [系统管理 -&gt; 站内信管理 -&gt; 消息记录] 菜单，可以查看到刚发送的站内信。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/站内信配置-站内信发送日志.png" alt="站内信发送日志" tabindex="0" loading="lazy"><figcaption>站内信发送日志</figcaption></figure>
<p>③ 点击右上角的 [消息] 图标，也可以查看到刚发送的站内信。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/站内信配置-站内信接收日志.png" alt="站内信接收日志" tabindex="0" loading="lazy"><figcaption>站内信接收日志</figcaption></figure>
<h2><a class="header-anchor" href="#_4-站内信发送"><span></span></a><a href="https://doc.iocoder.cn/notify/#_4-%E7%AB%99%E5%86%85%E4%BF%A1%E5%8F%91%E9%80%81" target="_blank" rel="noopener noreferrer">#</a>4. 站内信发送</h2>
<h3><a class="header-anchor" href="#_4-1-notifymessagesendapi"><span></span></a><a href="https://doc.iocoder.cn/notify/#_4-1-notifymessagesendapi" target="_blank" rel="noopener noreferrer">#</a>4.1 NotifyMessageSendApi</h3>
<p><a href="https://doc.iocoder.cn/#_3-%E7%AB%99%E5%86%85%E4%BF%A1%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">站内信配置</a>完成后，可使用 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/notify/NotifyMessageSendApi.java" target="_blank" rel="noopener noreferrer">NotifyMessageSendApi (opens new window)</a>进行站内信的发送，支持多种用户类型。它的方法如下：</p>
<figure><img src="https://doc.iocoder.cn/img/站内信配置/站内信发送-NotifyMessageSendApi.png" alt="NotifyMessageSendApi" tabindex="0" loading="lazy"><figcaption>NotifyMessageSendApi</figcaption></figure>
<h3><a class="header-anchor" href="#_4-2-接入示例"><span></span></a><a href="https://doc.iocoder.cn/notify/#_4-2-%E6%8E%A5%E5%85%A5%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#</a>4.2 接入示例</h3>
<p>以 <code>yudao-module-infra</code> 模块，需要发站内信为例子，讲解 SmsCodeApi 的使用。</p>
<p>① 在 <code>yudao-module-infra-biz</code> 模块的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/pom.xml" target="_blank" rel="noopener noreferrer"><code>pom.xml</code> (opens new window)</a>引入 <code>yudao-module-system-api</code> 依赖，如所示：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-system-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 在代码中注入 NotifyMessageSendApi Bean，并调用发送站内信的方法。代码如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TestDemoServiceImpl</span><span style="color:#C678DD;--shiki-dark:#C678DD"> implements</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> TestDemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // 0. 注入 NotifyMessageSendApi Bean</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Resource</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> NotifyMessageSendApi</span><span style="color:#E06C75;--shiki-dark:#E06C75"> notifySendApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> sendDemo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 1. 准备参数</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Long</span><span style="color:#E06C75;--shiki-dark:#E06C75"> userId</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1L</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 示例中写死，你可以改成你业务中的 userId 噢</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> templateCode</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#98C379;--shiki-dark:#98C379"> "test_01"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 站内信模版，记得在【站内信管理】中配置噢</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        Map</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Object</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;--shiki-dark:#E06C75">templateParams</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> new</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> HashMap</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;&gt;();</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        templateParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key1"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"奥特曼"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        templateParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">put</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"key2"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#98C379;--shiki-dark:#98C379">"变身"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 2. 发送站内信</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        notifySendApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">sendSingleNotifylToAdmin</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#C678DD;--shiki-dark:#C678DD">new</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> NotifySendSingleToUserReqDTO</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                .</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setUserId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(userId).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setTemplateCode</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(templateCode).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">setTemplateParams</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(templateParams));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上次更新: 2023/01/29, 19:16:45</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E7%AB%99%E5%86%85%E4%BF%A1%E9%85%8D%E7%BD%AE/%E6%BC%94%E7%A4%BA-%E7%AB%99%E5%86%85%E4%BF%A1%E6%A8%A1%E7%89%88.png" type="image/png"/>
    </item>
    <item>
      <title>数据脱敏</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/4.%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/4.%E6%95%B0%E6%8D%AE%E8%84%B1%E6%95%8F.html</guid>
      <source url="https://springg.us.kg/rss.xml">数据脱敏</source>
      <description>数据脱敏 接口在返回一些敏感或隐私数据时，是需要进行脱敏处理，通常的手段是使用 * 隐藏一部分数据。例如说： #1. 脱敏组件 yudao-spring-boot-starter-desensitize (opens new window)基于 Jackson 拓展，只需要在字段上添加脱敏注解，即可实现对该字段进行脱敏。 使用步骤如下： ① 在 pom...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>接口在返回一些<strong>敏感</strong>或<strong>隐私</strong>数据时，是需要进行脱敏处理，通常的手段是使用 <code>*</code> 隐藏一部分数据。例如说：</p>
<p>| 类型   | 原始数据           | 脱敏数据           |<br>
|</p>
]]></content:encoded>
    </item>
    <item>
      <title>敏感词</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/5.%E6%95%8F%E6%84%9F%E8%AF%8D.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/5.%E6%95%8F%E6%84%9F%E8%AF%8D.html</guid>
      <source url="https://springg.us.kg/rss.xml">敏感词</source>
      <description>敏感词 本章节，介绍项目的敏感词功能，可用于文本检测，高效过滤色情、广告、敏感、暴恐等违规内容。例如说，用户昵称、评论、私信等文本内容，都可以使用敏感词功能进行过滤。 #1. 实现原理 敏感词采用 前缀树 (opens new window)算法，，核心代码见 SimpleTrie (opens new window)类。 #2. 使用教程 对应的管理...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p>本章节，介绍项目的敏感词功能，可用于文本检测，高效过滤色情、广告、敏感、暴恐等违规内容。例如说，用户昵称、评论、私信等文本内容，都可以使用敏感词功能进行过滤。</p>
<h2><a class="header-anchor" href="#_1-实现原理"><span></span></a><a href="https://doc.iocoder.cn/sensitive-word/#_1-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">#</a>1. 实现原理</h2>
<p>敏感词采用 <a href="https://zh.m.wikipedia.org/zh-hans/Trie" target="_blank" rel="noopener noreferrer">前缀树 (opens new window)</a>算法，，核心代码见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/util/collection/SimpleTrie.java" target="_blank" rel="noopener noreferrer">SimpleTrie (opens new window)</a>类。</p>
<h2><a class="header-anchor" href="#_2-使用教程"><span></span></a><a href="https://doc.iocoder.cn/sensitive-word/#_2-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B" target="_blank" rel="noopener noreferrer">#</a>2. 使用教程</h2>
<p>对应的管理后台，可以在 [系统管理 -&gt; 敏感词] 菜单，进行敏感词的管理。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/敏感词/敏感词管理.png" alt="敏感词管理" tabindex="0" loading="lazy"><figcaption>敏感词管理</figcaption></figure>
<ul>
<li>前端实现：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/sensitiveWord/index.vue" target="_blank" rel="noopener noreferrer">sensitiveWord/index.vue(opens new window)</a></li>
<li>后端实现：<a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/sensitiveword/SensitiveWordController.java" target="_blank" rel="noopener noreferrer">SensitiveWordController(opens new window)</a></li>
</ul>
<h3><a class="header-anchor" href="#_2-1-添加敏感词"><span></span></a><a href="https://doc.iocoder.cn/sensitive-word/#_2-1-%E6%B7%BB%E5%8A%A0%E6%95%8F%E6%84%9F%E8%AF%8D" target="_blank" rel="noopener noreferrer">#</a>2.1 添加敏感词</h3>
<figure><img src="https://doc.iocoder.cn/img/敏感词/添加敏感词.png" alt="添加敏感词" tabindex="0" loading="lazy"><figcaption>添加敏感词</figcaption></figure>
<ul>
<li>标签：用于敏感词分组，不同的场景会需要使用不同的敏感词，通过标签进行分组。</li>
</ul>
<p>添加完敏感词后，刷新下界面。</p>
<h3><a class="header-anchor" href="#_2-2-测试敏感词"><span></span></a><a href="https://doc.iocoder.cn/sensitive-word/#_2-2-%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E8%AF%8D" target="_blank" rel="noopener noreferrer">#</a>2.2 测试敏感词</h3>
<p>① 输入检测文本为“你是白痴么？”，选择标签为“测试”，检测到有敏感词：</p>
<figure><img src="https://doc.iocoder.cn/img/敏感词/测试敏感词-有.png" alt="测试敏感词" tabindex="0" loading="lazy"><figcaption>测试敏感词</figcaption></figure>
<p>② 选择标签为“蔬菜”，检测到米有敏感词：</p>
<figure><img src="https://doc.iocoder.cn/img/敏感词/测试敏感词-无.png" alt="测试敏感词" tabindex="0" loading="lazy"><figcaption>测试敏感词</figcaption></figure>
<h2><a class="header-anchor" href="#_3-敏感词的使用"><span></span></a><a href="https://doc.iocoder.cn/sensitive-word/#_3-%E6%95%8F%E6%84%9F%E8%AF%8D%E7%9A%84%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">#</a>3. 敏感词的使用</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/sensitiveword/SensitiveWordApi.java" target="_blank" rel="noopener noreferrer">SensitiveWordApi (opens new window)</a>提供了敏感词的 API 接口，可以在任意地方使用。方法如下：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> interface</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SensitiveWordApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 获得文本所包含的不合法的敏感词数组</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> text</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 文本</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> tags</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 标签数组</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 不合法的敏感词数组</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">    List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> validateText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> text</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">tags</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 判断文本是否包含敏感词</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> text</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 文本</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> tags</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 表述数组</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 是否包含</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    boolean</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> isTextValid</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> text</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; </span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">tags</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用步骤如下：</p>
<p>① 在需要使用的 <code>yudao-module-*-biz</code> 模块的 <code>pom.xml</code> 中，引入 <code>yudao-module-system-api</code> 依赖。代码如下：</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;cn.iocoder.boot&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">groupId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;yudao-module-system-api&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">artifactId</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;${revision}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">version</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">dependency</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><p>② 注入 SensitiveWordApi Bean，调用对应的方法即可。例如说：</p>
<div class="language-java" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">@</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Service</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> DemoService</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    @</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Resource</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> SensitiveWordApi</span><span style="color:#E06C75;--shiki-dark:#E06C75"> sensitiveWordApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> void</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> demo</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        sensitiveWordApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">validateText</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"你是白痴吗"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">singletonList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"测试"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        sensitiveWordApi</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">isTextValid</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"你是白痴吗"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Collections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">singletonList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"蔬菜"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">));</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
</div><p>上次更新: 2023/01/26, 21:09:52</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E6%95%8F%E6%84%9F%E8%AF%8D/%E6%95%8F%E6%84%9F%E8%AF%8D%E7%AE%A1%E7%90%86.png" type="image/png"/>
    </item>
    <item>
      <title>地区 &amp; IP 库</title>
      <link>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/6.%E5%9C%B0%E5%8C%BA%20_%20IP%20%E5%BA%93.html</link>
      <guid>https://springg.us.kg/posts/Java/Ruoyi-Vue-Pro/9.%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C/6.%E5%9C%B0%E5%8C%BA%20_%20IP%20%E5%BA%93.html</guid>
      <source url="https://springg.us.kg/rss.xml">地区 &amp; IP 库</source>
      <description>地区 &amp; IP 库 yudao-spring-boot-starter-biz-ip (opens new window)业务组件，提供地区 &amp; IP 库的封装。 #1. 地区 AreaUtils (opens new window)是地区工具类，可以查询中国的省、市、区县，也可以查询国外的国家。 它的数据来自 Administrative-divis...</description>
      <pubDate>Thu, 21 Nov 2024 07:41:53 GMT</pubDate>
      <content:encoded><![CDATA[
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-ip" target="_blank" rel="noopener noreferrer"><code>yudao-spring-boot-starter-biz-ip</code> (opens new window)</a>业务组件，提供地区 &amp; IP 库的封装。</p>
<h2><a class="header-anchor" href="#_1-地区"><span></span></a><a href="https://doc.iocoder.cn/area-and-ip/#_1-%E5%9C%B0%E5%8C%BA" target="_blank" rel="noopener noreferrer">#</a>1. 地区</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-ip/src/main/java/cn/iocoder/yudao/framework/ip/core/utils/AreaUtils.java" target="_blank" rel="noopener noreferrer">AreaUtils (opens new window)</a>是地区工具类，可以查询中国的省、市、区县，也可以查询国外的国家。</p>
<p>它的数据来自 <a href="https://github.com/modood/Administrative-divisions-of-China" target="_blank" rel="noopener noreferrer">Administrative-divisions-of-China (opens new window)</a>项目，最终整理到项目的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-ip/src/main/resources/area.csv" target="_blank" rel="noopener noreferrer">area.csv (opens new window)</a>文件。每一行的数据，对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-ip/src/main/java/cn/iocoder/yudao/framework/ip/core/Area.java" target="_blank" rel="noopener noreferrer">Area (opens new window)</a>对象。代码所示：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> class</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Area</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 名字</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 类型</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 枚举 {@link AreaTypeEnum}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 1 - 国家</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 2 - 省份</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 3 - 城市</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 4 - 地区, 例如说县、镇、区等</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 父节点</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Area</span><span style="color:#E06C75;--shiki-dark:#E06C75"> parent</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     * 子节点</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">     */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    private</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> List</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Area</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span><span style="color:#E06C75;--shiki-dark:#E06C75"> children</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    </span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>AreaUtils 主要有如下两个方法：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// AreaUtils.java</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 获得指定编号对应的区域</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> id</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 区域编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 区域</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Area</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getArea</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> id) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // ... 省略具体实现</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 格式化区域</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 例如说：</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *      1. id = “静安区”时：上海 上海市 静安区</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *      2. id = “上海市”时：上海 上海市</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *      3. id = “上海”时：上海</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *      4. id = “美国”时：美国</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 当区域在中国时，默认不显示中国</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> id</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 区域编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> separator</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 分隔符</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 格式化后的区域</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> format</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">Integer</span><span style="color:#E06C75;--shiki-dark:#E06C75"> id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> separator) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // ... 省略具体实现</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>具体的使用，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-ip/src/test/java/cn/iocoder/yudao/framework/ip/core/utils/AreaUtilsTest.java" target="_blank" rel="noopener noreferrer">AreaUtilsTest (opens new window)</a>测试类。</li>
</ul>
<p>另外，管理后台提供了 [系统管理 -&gt; 地区管理] 菜单，可以按照树形结构查看地区列表。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/地区与IP/地区管理.png" alt="地区管理" tabindex="0" loading="lazy"><figcaption>地区管理</figcaption></figure>
<ul>
<li>后端代码，对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/ip/AreaController.java#L29-L35" target="_blank" rel="noopener noreferrer">AreaController (opens new window)</a>的 <code>/admin-api/system/area/tree</code> 接口</li>
<li>前端代码，对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-ui-admin/src/views/system/area/index.vue" target="_blank" rel="noopener noreferrer">system/area/index.vue (opens new window)</a>界面</li>
</ul>
<h2><a class="header-anchor" href="#_2-ip"><span></span></a><a href="https://doc.iocoder.cn/area-and-ip/#_2-ip" target="_blank" rel="noopener noreferrer">#</a>2. IP</h2>
<p><a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-ip/src/main/java/cn/iocoder/yudao/framework/ip/core/utils/IPUtils.java" target="_blank" rel="noopener noreferrer">IPUtils (opens new window)</a>是 IP 工具类，可以查询 IP 对应的城市信息。</p>
<p>它的数据来自 <a href="https://gitee.com/lionsoul/ip2region" target="_blank" rel="noopener noreferrer">ip2region (opens new window)</a>项目，最终整理到项目的 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-ip/src/main/resources/ip2region.xdb" target="_blank" rel="noopener noreferrer">ip2region.xdb (opens new window)</a>文件。</p>
<p>IPUtils 主要有如下两个方法：</p>
<div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// IPUtils.java</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 查询 IP 对应的地区编号</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> ip</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> IP 地址，格式为 127.0.0.1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 地区id</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Integer</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getAreaId</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ip) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // ... 省略具体实现</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">/**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * 查询 IP 对应的地区</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> *</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@param</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic"> ip</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> IP 地址，格式为 127.0.0.1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> * </span><span style="color:#C678DD;font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic">@return</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 地区</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> */</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">public</span><span style="color:#C678DD;--shiki-dark:#C678DD"> static</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> Area</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> getArea</span><span style="color:#E06C75;--shiki-dark:#E06C75">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">String</span><span style="color:#E06C75;--shiki-dark:#E06C75"> ip) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // ... 省略具体实现</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>具体的使用，可见 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-biz-ip/src/test/java/cn/iocoder/yudao/framework/ip/core/utils/IPUtilsTest.java" target="_blank" rel="noopener noreferrer">IPUtilsTest (opens new window)</a>测试类。</li>
</ul>
<p>另外，管理后台提供了 [系统管理 -&gt; 地区管理] 菜单，也提供了 IP 查询城市的示例。如下图所示：</p>
<figure><img src="https://doc.iocoder.cn/img/地区与IP/IP查询城市.png" alt="IP 查询城市" tabindex="0" loading="lazy"><figcaption>IP 查询城市</figcaption></figure>
<ul>
<li>后端代码，对应 <a href="https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/ip/AreaController.java#L37-L48" target="_blank" rel="noopener noreferrer">AreaController (opens new window)</a>的 <code>/admin-api/system/area/get-by-ip</code> 接口</li>
</ul>
<p>上次更新: 2023/01/27, 21:55:46</p>
]]></content:encoded>
      <enclosure url="https://doc.iocoder.cn/img/%E5%9C%B0%E5%8C%BA%E4%B8%8EIP/%E5%9C%B0%E5%8C%BA%E7%AE%A1%E7%90%86.png" type="image/png"/>
    </item>
    <item>
      <title>Element 实现动态的el-tab</title>
      <link>https://springg.us.kg/posts/Web/frontend-vue/vue-tabs.html</link>
      <guid>https://springg.us.kg/posts/Web/frontend-vue/vue-tabs.html</guid>
      <source url="https://springg.us.kg/rss.xml">Element 实现动态的el-tab</source>
      <description>Element 实现动态的el-tab 因业务要求要改造el-tabs组件，根据页面上的交互来动态新增和删除el-tabs组件，现在el-tabs组件下放置着el-table，el-table下涉及到分页、导出、其他交互功能，改造组件如下。页面结构代码如下，activeName是当前面板的索引值，handleClick为切换el-tabs的方法，根据业...</description>
      <pubDate>Fri, 15 Nov 2024 07:03:37 GMT</pubDate>
      <content:encoded><![CDATA[
<p>因业务要求要改造el-tabs组件，根据页面上的交互来动态新增和删除el-tabs组件，现在el-tabs组件下放置着el-table，el-table下涉及到分页、导出、其他交互功能，改造组件如下。页面结构代码如下，activeName是当前面板的索引值，handleClick为切换el-tabs的方法，根据业务情况来觉得怎么使用，handleTabsEdit为关闭el-tabs标签的动作，关闭后要跳转到当前页签的前一个页签。新增页签时，已经存在的不再新建。</p>
<h2>vue 代码</h2>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tabs</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-model</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'activeName'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'card'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @tab-click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'handleClick'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @edit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'handleTabsEdit'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'(tab, index) in tabList'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.label'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.label'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                :name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.name'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :closable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.close'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-table</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.data'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'width: 100%'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                v-loading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"tab.tableLoading"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                :header-cell-style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"{background:'#91c9f7  !important',color:'#125289','text-align':'center'}"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                :row-style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"{height: '1'}"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                :cell-style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"{'text-align':'center',padding: '0','line-height':'25px','font-size':'14px'}"</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-table-column</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'(column, colIndex) in tab.columns'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :key</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'colIndex'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'column.prop'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'column.label'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :align</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'column.align'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :show-overflow-tooltip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"column.tooltip"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :min-width</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"column.width ? column.width : column.label.length * 12 + 20"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-table-column</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-table</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'pagination-wrapper'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">            style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'float: right; display: flex; align-items: center;'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.export'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'success'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"mini"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                    @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'exportButtonClick(index)'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'el-icon-download'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'color: #FFFFFF'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt; 导出</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-pagination</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.pagination'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        background</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        @current-change</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'handleCurrentChange(index, $event)'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :current-page</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.page'</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.total'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        :page-size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'tab.size'</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">                        layout</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'total, prev, pager, next'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-pagination</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tab-pane</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>定义所需要的变量值，如果el-tabs初始要加载第一个tab-pane 则给定tabList初始值，否则不需要定义，在页面逻辑中需要呈现的时候给tabList添加值即可。</p>
<div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">export</span><span style="color:#C678DD;--shiki-dark:#C678DD"> default</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">  data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">    return</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        activeName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        tabIndex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'站址级'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">'0'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            data</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            columns</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                {</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">"stime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">align</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'center'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">width</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                {</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">2</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">"importTime"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'扩容时间'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">align</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'center'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">width</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">90</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                {</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">"city"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'城市'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">align</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'center'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">width</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">100</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                {</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">4</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">"fullArea"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'所属区域'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">align</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'center'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">},</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                {</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">prop</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">"area_name"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'扩容物理站址名'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">align</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">'center'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">clickable</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">width</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">200</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span><span style="color:#E06C75;--shiki-dark:#E06C75">tooltip</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            ],</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            tableLoading</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            pagination</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            export</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            total</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            page</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            pageSize</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#D19A66;--shiki-dark:#D19A66">10</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">            //当前标签下分页导出需要的参数</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">            params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                stime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                etime</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                city</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                nettype</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                covertype</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: </span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                areaname</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">:</span><span style="color:#98C379;--shiki-dark:#98C379">''</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        ],</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">    methods</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        handleClick</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">tab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">event</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        handleTabsEdit</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">targetName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">action</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75">action</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#98C379;--shiki-dark:#98C379"> 'remove'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tabs</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> currentTab</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">find</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">tab</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E06C75;--shiki-dark:#E06C75"> targetName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75">currentTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> index</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">currentTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">splice</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">            // 更新 activeName，选择下一个标签页或第一个标签页作为选中项</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            let</span><span style="color:#E06C75;--shiki-dark:#E06C75"> nextTabName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75">nextTabName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E06C75;--shiki-dark:#E06C75"> targetName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> nextTab</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] </span><span style="color:#56B6C2;--shiki-dark:#56B6C2">||</span><span style="color:#E06C75;--shiki-dark:#E06C75"> tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">];</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                nextTabName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> nextTab</span><span style="color:#C678DD;--shiki-dark:#C678DD"> ?</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> nextTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#E06C75;--shiki-dark:#E06C75"> tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">] </span><span style="color:#C678DD;--shiki-dark:#C678DD">?</span><span style="color:#E06C75;--shiki-dark:#E06C75"> tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#C678DD;--shiki-dark:#C678DD"> :</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 默认选中第一个标签页，或者为空字符串</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> nextTabName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> tabs</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 更新标签列表</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        async</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> handleCurrentChange</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">currentPage</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">        for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">let</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">++</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">activeName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">tableLoading</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> params</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">page</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> currentPage</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">pageSize</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">pageSize</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            var</span><span style="color:#E06C75;--shiki-dark:#E06C75"> result</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {}</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'标签条件'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">){</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                result</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">AAAAA</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'标签条件'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">){</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                result</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">BBBBB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'标签条件'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">){</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">                result</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#C678DD;--shiki-dark:#C678DD"> await</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">CCCCC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> []</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> result</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">total</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> result</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">total</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">tableLoading</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            break</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 新增tabs关键代码</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">        createNewTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(){</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> res</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">data</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  //数据</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">total</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> res</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">total</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> //数据总数</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">stime</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> '_'</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">city</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> '_'</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> row</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">area_name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> '_'</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> //tab名称</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            let</span><span style="color:#E06C75;--shiki-dark:#E06C75"> newTabName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ++</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabIndex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#98C379;--shiki-dark:#98C379"> ''</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> newTabName</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">            //判断是否存在  存在同样标签  则不添加</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> existingTab</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">find</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">existing</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> existing</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">!</span><span style="color:#E06C75;--shiki-dark:#E06C75">existingTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">push</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">obj</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E06C75;--shiki-dark:#E06C75"> newTabName</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">            // 在这里你可以操作向 el-tabs 动态添加新 tab 的逻辑</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            } </span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">            this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> existingTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#E06C75;--shiki-dark:#E06C75">        async</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> exportButtonClick</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">            for</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#C678DD;--shiki-dark:#C678DD">let</span><span style="color:#E06C75;--shiki-dark:#E06C75"> i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &lt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">length</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">++</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">i</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">activeName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">toString</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> params</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'多tab条件'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">){</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ExportAAA</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'多tab条件'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">){</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ExportBBB</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#C678DD;--shiki-dark:#C678DD"> if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E06C75;--shiki-dark:#E06C75">index</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">label</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">indexOf</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">'多tab条件'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">&gt;-</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">){</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                    await</span><span style="color:#61AFEF;--shiki-dark:#61AFEF"> ExportCCC</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">params</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">).</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">then</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">                break</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">                }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        },</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果单元格需要点击操作，可以通过对象中的属性值来控制，比如tabList中column对象的属性来决定进行什么样的操作。</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#D19A66;--shiki-dark:#D19A66"> slot-scope</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">'scope'</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">span</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"column.clickable"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"handleGisClick(scope.row, scope.column)"</span></span>
<span class="line"><span style="color:#D19A66;--shiki-dark:#D19A66">        style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"cursor: pointer; color: #009dd9;"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">            {{ scope.row[column.prop] }}</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">span</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">span</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;{{ scope.row[column.prop] }}&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">span</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">template</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
</div><figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/20241105155035.png" alt="实际效果" tabindex="0" loading="lazy"><figcaption>实际效果</figcaption></figure>
<h2>添加右键菜单</h2>
<p>el-tabs 组件中添加以下方法：</p>
<p><strong>@contextmenu.prevent.native="openContextMenu1($event)"</strong></p>
<p>添加html代码</p>
<div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">&lt;!-- 右键功能 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#D19A66;--shiki-dark:#D19A66"> v-show</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"contextMenuVisible"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">ul</span><span style="color:#D19A66;--shiki-dark:#D19A66"> :style</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"{left:menuLeft +'px',top:menuTop+'px'}"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> class</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"contextmenu"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"closeAll()"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"mini"</span><span style="color:#D19A66;--shiki-dark:#D19A66">  icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-error"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;关闭所有&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"closeOther()"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"mini"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-circle-close"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> &gt;关闭其他&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"closeLeft()"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"mini"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-d-arrow-left"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;关闭左侧&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">          &lt;</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#D19A66;--shiki-dark:#D19A66"> type</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"text"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> @click</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"closeRight()"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> size</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"mini"</span><span style="color:#D19A66;--shiki-dark:#D19A66"> icon</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">=</span><span style="color:#98C379;--shiki-dark:#98C379">"el-icon-d-arrow-right"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;关闭右侧&lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">el-button</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">        &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">li</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">ul</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    &lt;/</span><span style="color:#E06C75;--shiki-dark:#E06C75">div</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">&gt;</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">//关闭所有功能</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    closeAll</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(){ </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 关闭所有标签卡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      //这里写你自己的关闭标签页的逻辑代码</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]]; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 只保留第一个标签页</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabIndex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 确保激活第一个Tab</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      //最后调用隐藏菜单的方法</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">closeMenu</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(); </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">//完成点击事件后，关闭菜单</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    closeOther</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      // 保留当前标签和第一个标签，移除其他标签</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> currentTab</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">find</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">tab</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75">currentTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">], </span><span style="color:#E06C75;--shiki-dark:#E06C75">currentTab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">]; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 只保留第一个标签和当前标签</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">closeMenu</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(); </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 隐藏右键菜单</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    closeLeft</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> currentIndex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findIndex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">tab</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75">currentIndex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &gt;</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 保留第一个标签和当前索引及右边的所有标签</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> [</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">], ...</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">slice</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">currentIndex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)];</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 激活当前标签</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">closeMenu</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    closeRight</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      const</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> currentIndex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">findIndex</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">tab</span><span style="color:#C678DD;--shiki-dark:#C678DD"> =&gt;</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> tab</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> ===</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E06C75;--shiki-dark:#E06C75">currentIndex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> &gt;=</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // 保留当前标签及所有左侧标签</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">slice</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#D19A66;--shiki-dark:#D19A66">0</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">, </span><span style="color:#E06C75;--shiki-dark:#E06C75">currentIndex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> +</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">); </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 只保留当前及左侧所有标签</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">activeName</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#E5C07B;--shiki-dark:#E5C07B"> this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">[</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">tabList</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">length</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> -</span><span style="color:#D19A66;--shiki-dark:#D19A66"> 1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">].</span><span style="color:#E06C75;--shiki-dark:#E06C75">name</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// 激活当前标签</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">      this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">closeMenu</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    //解决空白标签页右键</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF">    openContextMenu1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#E06C75;--shiki-dark:#E06C75">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD">      if</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF"> (</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">srcElement</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">id</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> !=</span><span style="color:#98C379;--shiki-dark:#98C379">''</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">contextMenuVisible</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> true</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // console.log(e.srcElement);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // console.log(e.srcElement.id);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        //这个参数是获取右键标签页的id属性，应该和你的key有关，你要截取-后面部分的</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">closeindex</span><span style="color:#56B6C2;--shiki-dark:#56B6C2">=</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">e</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">srcElement</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E5C07B;--shiki-dark:#E5C07B">id</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#61AFEF;--shiki-dark:#61AFEF">split</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">(</span><span style="color:#98C379;--shiki-dark:#98C379">"-"</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">)[</span><span style="color:#D19A66;--shiki-dark:#D19A66">1</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">];</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">        // console.log(this.closeindex);</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span><span style="color:#C678DD;--shiki-dark:#C678DD">else</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E5C07B;--shiki-dark:#E5C07B">        this</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">.</span><span style="color:#E06C75;--shiki-dark:#E06C75">contextMenuVisible</span><span style="color:#56B6C2;--shiki-dark:#56B6C2"> =</span><span style="color:#D19A66;--shiki-dark:#D19A66"> false</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF">    },</span></span></code></pre>
<div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/20241105160158.png" alt="右键菜单效果" tabindex="0" loading="lazy"><figcaption>右键菜单效果</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/20241105155035.png" type="image/png"/>
    </item>
    <item>
      <title>01 大数据生态圈</title>
      <link>https://springg.us.kg/posts/BigData/</link>
      <guid>https://springg.us.kg/posts/BigData/</guid>
      <source url="https://springg.us.kg/rss.xml">01 大数据生态圈</source>
      <description>01 大数据生态圈 这是一份有关于大数据生态圈学习过程中各类知识点整理的思维导图集，最近一次更新为 00_装配文件：在此模块中，我对大数据相关软件在 Linux 和 Mac 环境下的安装进行了详细的说明，以确保大数据软件能够尽可能成功的运行在你的电脑上。 0.5_Shell：学习大数据究竟需不需要 Shell 脚本基础，这取决于你自身，若没有 Shel...</description>
      <pubDate>Mon, 28 Oct 2024 01:58:08 GMT</pubDate>
      <content:encoded><![CDATA[
<p>这是一份有关于大数据生态圈学习过程中各类知识点整理的思维导图集，最近一次更新为</p>
<ol>
<li>
<p><code>00_装配文件</code>：在此模块中，我对大数据相关软件在 <code>Linux</code> 和 <code>Mac</code> 环境下的安装进行了详细的说明，以确保大数据软件能够尽可能成功的运行在你的电脑上。</p>
</li>
<li>
<p><code>0.5_Shell</code>：学习大数据究竟需不需要 <code>Shell</code> 脚本基础，这取决于你自身，若没有 <code>Shell</code> 脚本基础，也不妨碍你进行大数据的学习，若是拥有 <code>Shell</code> 脚本基础，那么你在处理一些进程的时候，将会事半功倍。</p>
</li>
<li>
<p><code>01_数据源</code>：这部分的思路是 <code>Docker （数据库安装环境）</code>→ <code>Database （数据库）</code>→<code> DataX （数据转换离线同步）</code>，是一个从无到有的过程， <code>Database</code> 部分目前（2019年6月28日）拥有<code> Oracle</code>、<code>MySQL</code>、<code>HBase</code>、<code>Redis</code>、<code>ClickHouse</code>五个部分。</p>
</li>
<li>
<p><code>02_接入层</code>：主要是<code>Flume</code>和<code>Sqoop</code>以及<code>Kafka</code>。</p>
</li>
<li>
<p><code>03_数据处理层</code>：这一层面的内容十分丰富，因而我又做了一次划分，主要分为五个部分:<code>数据存储：如HDFS</code>，<code>数据计算：MapReduce及Spark</code>，<code>数据查询：Hive及Impala</code>，<code>任务调度：Oozie，Azkaban，Kettle等</code>，<code>监控报警：Zookeeper</code>。</p>
</li>
</ol>
<p>针对每一个框架，思维导图的思路如下：</p>
<p>1.每一个框架我都会整理两个文件：理论文件和代码文件。（如无代码文件需要我会专门说明）</p>
<p>2.在理论文件中，我会解释清楚每个框架运作的原理，相应需要注意的细节点。在此部分中将不会或很少会出现代码。</p>
<p>3.在代码文件中，基于理论文件的理解，我会将理论文件中每一部分的功能具体实现写明，以便于在工作中可以直接查询或使用。</p>
<p>说明：红色标记的是重要点</p>
<p>最后说一句我想说的话：</p>
<blockquote>
<p>理解原理或许很简单，但如何在理解原理以后根据它的原理去进行使用创新，是一件非常困难的事，经过了长久的学习以后并非旅程的终点，而是旅程的起点。</p>
</blockquote>
<h1>索引</h1>
<!-- TOC -->
<ul>
<li>
<p><a href="#%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%BD%AF%E4%BB%B6%E8%A3%85%E9%85%8D">1.大数据软件装配</a></p>
</li>
<li>
<p><a href="#Shell">2.Shell</a></p>
</li>
<li>
<p><a href="#%E6%95%B0%E6%8D%AE%E6%BA%90">3.数据源</a></p>
</li>
</ul>
<p>- <a href="#Docker">Docker</a></p>
<p>- <a href="#Database">Database</a></p>
<p>- <a href="#MySQL">MySQL</a></p>
<p>- <a href="#Oracle">Oracle</a></p>
<p>- <a href="#Redis">Redis</a></p>
<p>- <a href="#HBase">HBase</a></p>
<p>- <a href="#ClickHouse">ClickHouse</a></p>
<p>- <a href="#DataX">DataX</a></p>
<ul>
<li><a href="#%E6%8E%A5%E5%85%A5%E5%B1%82">4.接入层</a></li>
</ul>
<p>- <a href="#Flume">Flume</a></p>
<p>- <a href="#Sqoop">Sqoop</a></p>
<p>- <a href="#Kafka">Kafka</a></p>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B1%82">5.数据处理层</a></li>
</ul>
<p>- <a href="#%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8">数据存储</a></p>
<p>- <a href="#HDFS">HDFS</a></p>
<p>- <a href="#Yarn">Yarn</a></p>
<p>- <a href="#%E6%95%B0%E6%8D%AE%E8%AE%A1%E7%AE%97">数据计算</a></p>
<p>- <a href="#MapReduce">MapReduce</a></p>
<p>- <a href="#Spark">Spark</a></p>
<p>- <a href="#%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2">数据查询</a></p>
<p>- <a href="#Hive">Hive</a></p>
<p>- <a href="#Impala">Impala</a></p>
<p>- <a href="#%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6">任务调度</a></p>
<p>- <a href="#Oozie">Oozie</a></p>
<p>- <a href="#Azkaban">Azkaban</a></p>
<p>- <a href="#Kettle">Kettle</a></p>
<p>- <a href="#%E7%9B%91%E6%8E%A7%E6%8A%A5%E8%AD%A6">监控报警</a></p>
<p>- <a href="#Zookeeper">Zookeeper</a></p>
<!-- /TOC -->
<h1>大数据软件装配</h1>
<blockquote>
<p>工欲善其事，必先利其器。</p>
</blockquote>
<p>我的配置环境是：</p>
<p><code>CentOs 6.8</code></p>
<p><code>Hadoop Apache 2.7.2</code></p>
<p><code>Zookeeper 3.4.10</code></p>
<p><code>Hive 1.2.1</code></p>
<p><code>Flume 1.7.0</code></p>
<p><code>Kafka 2.11-0.11.0.2</code></p>
<p><code>HBase 1.3.1</code></p>
<p><code>Sqoop 1.4.6</code></p>
<p><code>Oozie 4.0.0</code></p>
<p><code>Azkaban 2.5.0</code></p>
<p><code>ClickHouse 19.7.3.9</code></p>
<p><code>DataX</code></p>
<p><code>Oracle 18.3.0(这部分内容在Docker中)</code></p>
<p><code>MogoDB 4.0.10</code></p>
<h1>大数据软件装配</h1>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/01_大数据各软件详细安装流程.png" alt="01_大数据各软件详细安装流程" tabindex="0" loading="lazy"><figcaption>01_大数据各软件详细安装流程</figcaption></figure>
<h1>Shell</h1>
<p>本框架内部所做的<code>Shell</code>思维导图仅仅是一个简单的入门，学习结束以后可以看懂基本的脚本流程，和撰写一些简单的脚本，更深入的推荐去看<code>Linux命令行与shell脚本编程大全</code>。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261012170.png" alt="Shell" tabindex="0" loading="lazy"><figcaption>Shell</figcaption></figure>
<h1>数据源</h1>
<h2>Docker</h2>
<p><code>Docker</code>是一个解决了运行环境和配置问题的软件容器，主要由三部分组成，<code>镜像（Image）</code>、<code>容器(Container)</code>、以及 <code>仓库(Repository)</code> ，我使用 <code>Docker</code> 的主要目的是在<code>Mac</code>系统上安装<code>Oracle</code>，因而在<code>Docker</code>的文档中，如何安装与使用是我的重点。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261012213.png" alt="Docker" tabindex="0" loading="lazy"><figcaption>Docker</figcaption></figure>
<h2>Database</h2>
<h3>MySQL</h3>
<p><code>MySQL</code>目前需要更新的地方仍然很多，目前有一份依照<code>DDL、DML及DCL</code>思路进行制作的说明文档。</p>
<h3>Oracle</h3>
<p>暂无</p>
<h3>Redis</h3>
<p><code>Redis</code>是一个开源的<code>key-value</code>式存储系统，配合关系型数据库做高速缓存，由于其拥有持久化能力,利用其多样的数据结构存储特定的数据是它的两个主要用途。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261010940.png" alt="Redis" tabindex="0" loading="lazy"><figcaption>Redis</figcaption></figure>
<h3>HBase</h3>
<h4>理论文件</h4>
<p><code>HBase</code> 作为基于 <code>hadoop</code> 的 <code>NoSQL</code> 数据库，其原理性和操作性的要求都比较强，在原理阶段讲解了 <code>HBase</code> 的逻辑结构和物理存储结构，以及针对于其结构进行优化的的操作手段。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/1726554.png" alt="HBase" tabindex="0" loading="lazy"><figcaption>HBase</figcaption></figure>
<h4>代码文件</h4>
<p><code>HBase</code>的代码文件是基于<code>HbaseAPI</code>操作搭建了一个微博项目，项目源码已写好，但具体分析文件还在制作中。</p>
<h3>ClickHouse</h3>
<p><code>ClickHouse</code>能够使用<code>SQL</code>查询实时生成分析数据报告，主要用于在线分析处理查询。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016963.png" alt="ClickHouse" tabindex="0" loading="lazy"><figcaption>ClickHouse</figcaption></figure>
<h2>DataX</h2>
<p><code>DataX</code>是一个异构数据源离线同步工具，致力于实现各种数据库间的数据同步功能，它的框架设计与<code>Flume</code>有些类似，通过<code>Reader</code>、<code>Framework</code>、<code>Writer</code>进行数据的转换同步，它的使用重点在于通过<code>json</code>的配置文件设定执行任务。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016003.png" alt="DataX" tabindex="0" loading="lazy"><figcaption>DataX</figcaption></figure>
<h1>接入层</h1>
<h2>Flume</h2>
<p><code>Flume</code>是一个基于流式架构数据采集、聚合和传输系统，因而它实用性较强，通过<code>Source</code> ，<code>Channel</code>，<code>Sink</code> 进行控制。所以我把它理论和代码文件归并。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016039.png" alt="Flume" tabindex="0" loading="lazy"><figcaption>Flume</figcaption></figure>
<h2>Sqoop</h2>
<p><code>Sqoop</code> 是一个用于 <code>Hadoop</code> 和关系型数据库数据互导的小框架，其原理就是讲导入导出操作译作 <code>MapReduce</code> 语言，最关键的操作就是根据其语法进行脚本写作，因而理论与代码文件合并，同时整理出了 <code>Sqoop</code> 的常用命令。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016086.png" alt="Sqoop" tabindex="0" loading="lazy"><figcaption>Sqoop</figcaption></figure>
<h2>Kafka</h2>
<p><code>Kafka</code>的用途多种多样，并不只局限于数据接入一种，它可以进行日志收集，消息系统，用户活动跟踪，流式处理等，要理解<code>Kafka</code>，首先要了解它的架构运行，其次了解它的文件存储机制。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016131.png" alt="Kafka" tabindex="0" loading="lazy"><figcaption>Kafka</figcaption></figure>
<h1>数据处理层</h1>
<h2>数据存储</h2>
<h3>HDFS</h3>
<h4>理论文件</h4>
<p><code>HDFS</code> 是 <code>Hadoop</code> 的基石，因此我把 <code>Hadoop</code> 的概述与它进行了合并，作为一个小简介，从而引出 <code>HDFS</code> ,<code>HDFS</code>的主要部分在于理解<code>NN</code>、<code>DN</code>、<code>Client</code>和<code>2NN</code>的运行机制。</p>
<p>在2019年7月13日<code>HDFS理论文件</code>进行了一次更新，将<code>HDFS</code>架构，读写流程，以及<code>NN与2NN</code>的关系纳入了<code>HDFS运作原理</code>模块中，同时新增了<code>Hadoop压缩格式</code>，及<code>Hadoop优化</code>两个模块，完善了<code>HDFS</code>的内容。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016160.png" alt="HDFS" tabindex="0" loading="lazy"><figcaption>HDFS</figcaption></figure>
<h4>代码文件</h4>
<p>已更新，主要是<code>Hadoop</code>在<code>shell</code>命令行中的一些常用命令整理归纳</p>
<h3>Yarn</h3>
<p><code>Yarn</code>是<code>Hadoop</code>中的资源调度平台，在这一内容中的重点主要有<code>Yarn工作机制</code>（以<code>MapReduce</code>程序为例，详细的介绍了<code>Yarn</code>的资源调度流程），<code>Yarn资源调度器</code>(介绍了<code>Yarn</code>的三种资源调度器)，以及<code>Yarn的资源推测执行机制</code>。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016181.png" alt="Yarn" tabindex="0" loading="lazy"><figcaption>Yarn</figcaption></figure>
<h2>数据计算</h2>
<h3>MapReduce</h3>
<h4>理论文件</h4>
<p><code>MapReduce</code> 是 <code>Hadoop</code> 中的分布式计算系统，在之后的内容中，有许多框架都是基于 <code>MapReduce</code> 所进行的，比如 <code>Oozie</code> ，比如 <code>Hive</code> ，因而理解 <code>MapReduce</code> 的原理是非常必要的。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016206.png" alt="MR" tabindex="0" loading="lazy"><figcaption>MR</figcaption></figure>
<h4>备注</h4>
<p><code>MapReduce</code> 的知识框架整理方面，还是存在一些代码混杂于理论文件之中的情况，在接下来的版本中应该会对这一点进行更新。</p>
<h3>Spark</h3>
<p><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/13_Spark笔记.png" alt="13_Spark笔记" loading="lazy"><br>
<img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/14_Spark内核.png" alt="14_Spark内核" loading="lazy"><br>
<img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/15_Spark调优.png" alt="15_Spark调优" loading="lazy"></p>
<h2>数据查询</h2>
<h3>Hive</h3>
<p><code>Hive</code> 的情况恰恰与 <code>Zookeeper</code> 相反，<code>Hive</code> 作为一个基于 <code>Hadoop</code> 的数仓工具，其原理运作并不难，即底层基于 <code>MapRuduce</code> 的类 <code>SQL</code> 查询工具，因此 <code>Hive</code> 更注重的是代码文件，其中 <code>4 ~ 9</code> 章我以 <code>sql</code> 整理出来。</p>
<p><code>Hive理论文档</code>在2019年7月14日又进行了一次更新，这次更新主要是增加了其与数据库的关系、保存元数据的方式，以及针对压缩和调优，进行了一次总结。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016231.png" alt="Hive" tabindex="0" loading="lazy"><figcaption>Hive</figcaption></figure>
<h3>Impala</h3>
<h2>任务调度</h2>
<h3>Oozie</h3>
<p><code>Oozie</code> 是一个任务调度的小框架，其原理是把<code> xml</code> 语言转译为<code> mapreduce</code> 程序来做，但 <code>Oozie1</code> 只有<code>Map</code>阶段，此处我们归纳总结的是<code> Oozie1</code>。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016257.png" alt="Oozie" tabindex="0" loading="lazy"><figcaption>Oozie</figcaption></figure>
<h3>Azkaban</h3>
<p><code>Azkaban</code>作为任务调度框架，其易用性无论从环境配置上来讲，以及配置文件的撰写上来讲，都要比<code>Oozie</code>更好。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016289.png" alt="Azkaban" tabindex="0" loading="lazy"><figcaption>Azkaban</figcaption></figure>
<h3>Kettle</h3>
<p><code>Kettle</code>是一个可视化的<code>ETL工具</code>，简单易上手，使用很轻松。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016314.png" alt="Kettle" tabindex="0" loading="lazy"><figcaption>Kettle</figcaption></figure>
<h2>监控报警</h2>
<h3>Zookeeper</h3>
<p><code>Zookeeper</code> 的主要目的是为了监控集群中的修改操作，它的架设与操作都非常简单，因此 <code>Zookeeper</code> 只有理论文件，在理论中，尤其要注意理解的是它的监听器原理和选举机制（类 <code>Paxos</code> 算法），此外，<code>Zookeeper</code>的写数据流程也值得注意。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202410261016341.png" alt="Zookeeper" tabindex="0" loading="lazy"><figcaption>Zookeeper</figcaption></figure>
]]></content:encoded>
      <enclosure url="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/01_大数据各软件详细安装流程.png" type="image/png"/>
    </item>
    <item>
      <title>架构-架构基础</title>
      <link>https://springg.us.kg/posts/Architect/base/arch-basic.html</link>
      <guid>https://springg.us.kg/posts/Architect/base/arch-basic.html</guid>
      <source url="https://springg.us.kg/rss.xml">架构-架构基础</source>
      <description>架构-架构基础 1. 软件架构简介 所谓架构，见仁见智，很难有一个明确或标准的定义；但架构并非镜花水月或阳春白雪，有系统的地方就需要架构，大到航空飞机，小到一个电商系统里面的一个功能组件，都需要设计和架构。抽象而言，架构就是对系统中的实体以及实体之间的关系所进行的抽象描述，是对物/信息的功能与形式元素之间的对应情况所做的分配，是对元素之间的关系以及元素...</description>
      <category>架构</category>
      <pubDate>Mon, 28 Oct 2024 01:58:08 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>1. 软件架构简介</h2>
<p>所谓架构，见仁见智，很难有一个明确或标准的定义；但架构并非镜花水月或阳春白雪，有系统的地方就需要架构，大到航空飞机，小到一个电商系统里面的一个功能组件，都需要设计和架构。<strong>抽象而言，架构就是对系统中的实体以及实体之间的关系所进行的抽象描述，是对物/信息的功能与形式元素之间的对应情况所做的分配，是对元素之间的关系以及元素同周边环境之间的关系所做的定义</strong>。架构能将目标系统按某个原则进行切分，切分的原则，是要便于不同的角色进行并行工作，结构良好的创造活动要优于毫无结构的创造活动。</p>
<p>软件架构的核心价值，即是控制系统的复杂性，将核心业务逻辑和技术细节的分离与解耦。软件架构是系统的草图，它描述的对象是直接构成系统的抽象组件；各个组件之间的连接则明确和相对细致地描述组件之间的通信。在实现阶段，这些抽象组件被细化为实际的组件，比如具体某个类或者对象。在面向对象领域中，组件之间的连接通常用接口来实现。架构师的职责是努力训练自己的思维，用它去理解复杂的系统，通过合理的分解和抽象，理解并解析需求，创建有用的模型，确认、细化并扩展模型，管理架构；能够进行系统分解形成整体架构，能够正确的技术选型，能够制定技术规格说明并有效推动实施落地。</p>
<h2>2. 系统复杂性的来源与应对</h2>
<p>在软件开发中，程序员往往能够脱离现实规律的束缚，创造出天马行空的世界，其也是最具有创造力的活动之一。编程唯一需要的是创造力思维和思维组织能力，这意味着在软件开发过程中最大限制是理解我们正在创建的对象。随着软件的演进，加入更多的功能点，系统变得越来越复杂：各个模块（Module）间存在着各种微妙的依赖关系。系统的复杂性随着时间积累，对于程序员来说，修改系统时考虑周全所有的的相关因素变得越来越困难。这就会使软件开放进度变缓慢，并且引入 Bug，而导致会进一步延缓开发进度，增加开发成本。在任何一个系统的生命周期中，复杂性不可避免会增加；系统越大，需要更多的人开发，管理系统复杂性的工作就越困难。</p>
<p>Eric Evans 在 Domain‐Driven Design 一书中吐槽了所谓的意大利面式架构，即代码确实做了有用的事，但很难解释它是如何去执行的；他认为造成这种窘境的主要原因是，将领域问题的复杂度与技术细节的复杂度混合在了一起，最终导致整体复杂度的指数级增长。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300852051.png" alt="image-20220704092621383" tabindex="0" loading="lazy"><figcaption>image-20220704092621383</figcaption></figure>
<p>复杂性不是凭空而来，很多时候也不是刻意为之，这也就意味着复杂性的增加往往不会以我们的主观意志为转移。就像房间里的大象，我们无法逃避，也不能视而不见。复杂性的来源可能是：</p>
<ul>
<li>吸积与持续迭代：增量式设计意味着软件设计永不结束，设计在系统的生命周期中持续发生，程序员要时刻考虑设计问题。增量开发也意味着持续重构。一个系统的初始设计几乎从来都不是最好的方案。随着经验的增加，必然会发现更好的设计方案。</li>
<li>交互且无扩展性设计：当吸积效应导致的大规模系统，结合了交互这个特性，会使技术系统更加复杂。一个技术系统除了作用于自身，还会与其它大量系统产生交互。比如下单购买一件商品，那么订单系统，商品系统，支付系统，物流系统，卡券系统就会交互协作。这样吸积的复杂性，由于交互特性的出现，会呈现几何级数上升。</li>
<li>不合理的业务封装：不合理的业务封装是一个相对宽泛的概念，其具体的表现譬如面向过程而不是对象、分层不合理等。</li>
<li>缺乏统一语言：典型的敏捷开发的结构，流水线上的各个角色往往会专注于自己负责的环节，精细化的分工也限制了每个角色的全局视角；虽然我们经常提倡所谓的主人翁意识，但是在落地时又很难去推进。</li>
<li>缺乏约束与规范：在团队协作开发的背景下，缺少规范和约束会严重损害架构的一致性（Consistency），代码的可维护性将急剧下降。可能规范在实现层面就是命名、分包等不影响代码运行的小问题，但是千里之堤，溃于蚁穴，正是这些微末的不注意导致了整体复杂性的雪崩。</li>
</ul>
<p>复杂性的应对永远不会是一劳永逸，我们需要不断地推陈出新，是动态、渐进的重塑自己对软件系统的认识，不断认识问题和寻找更优解的持续迭代。第一个控制复杂性的途径是代码简单，意图清晰（Obvious）。例如: 减少特殊场景的处理，或变量命名一致性都能降低系统复杂性。另一种方式就是对复杂问题的抽象然后分而治之。</p>
<h2>3. 大型网站的特点</h2>
<ul>
<li>用户多，分布广泛</li>
<li>大流量，高并发</li>
<li>海量数据，服务高可用</li>
<li>安全环境恶劣，易受网络攻击</li>
<li>功能多，变更快，频繁发布</li>
<li>从小到大，渐进发展</li>
<li>以用户为中心</li>
<li>免费服务，付费体验</li>
</ul>
<h2>4. 大型网站架构目标</h2>
<ul>
<li>高性能：提供快速的访问体验。</li>
<li>高可用：网站服务一直可以正常访问。</li>
<li>可伸缩：通过硬件增加/减少，提高/降低处理能力。</li>
<li>安全性：提供网站安全访问和数据加密，安全存储等策略。</li>
<li>扩展性：方便的通过新增/移除方式，增加/减少新的功能/模块。</li>
<li>敏捷性：随需应变，快速响应；</li>
</ul>
<h2>参考文章</h2>
<p><a href="https://pdai.tech/md/arch/arch-x-basic.html" target="_blank" rel="noopener noreferrer">架构 - 架构基础: 特点,本质...</a></p>
]]></content:encoded>
      <enclosure url="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300852051.png" type="image/png"/>
    </item>
    <item>
      <title>架构-理解架构的核心要素</title>
      <link>https://springg.us.kg/posts/Architect/base/arch-x-core-metrics.html</link>
      <guid>https://springg.us.kg/posts/Architect/base/arch-x-core-metrics.html</guid>
      <source url="https://springg.us.kg/rss.xml">架构-理解架构的核心要素</source>
      <description>架构-理解架构的核心要素 一般来说软件架构需要关注性能、可用性、伸缩性、扩展性和安全性这5个架构要素。 1. 架构的核心要素 所谓架构，一种通俗的说法就是“最高层次的规划，难以改变的决定”，这些规划和决定奠定了事物未来发展的方向和最终的蓝图。 而软件架构即“有关软件整体结构与组件的抽象描述，用于指导大型软件系统各方面的设计”。一般来说软件架构需要关注性...</description>
      <category>架构</category>
      <pubDate>Mon, 28 Oct 2024 01:58:08 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>一般来说软件架构需要关注<strong>性能、可用性、伸缩性、扩展性和安全性这5个架构要素</strong>。</p>
</blockquote>
<h2>1. 架构的核心要素</h2>
<p>所谓架构，一种通俗的说法就是“最高层次的规划，难以改变的决定”，这些规划和决定奠定了事物未来发展的方向和最终的蓝图。</p>
<p>而软件架构即“有关软件整体结构与组件的抽象描述，用于指导大型软件系统各方面的设计”。一般来说软件架构需要关注性能、可用性、伸缩性、扩展性和安全性这5个架构要素。</p>
<h3>1.1 性能</h3>
<p>性能是网站架构设计的一个重要方面，任何软件架构设计方案都必须考虑可能带来的性能问题。也正因为性能问题几乎无处不在，所以优化网站性能的手段也非常多：</p>
<ul>
<li><code>浏览器端</code>：可以通过浏览器缓存、页面压缩传输、合理布局页面、减少Cookie传输等手段，甚至可以使用CDN加速功能。</li>
<li><code>应用服务器端</code>：可以使用服务器本地缓存和分布式缓存，也可以通过异步操作方式来加快响应，在高并发请求的情况下，可以将多台应用服务器组成一个集群共同对外服务，提高整体处理能力，改善性能。</li>
<li><code>数据库服务器端</code>：可用使用索引、缓存、SQL性能优化等手段，还可以使用NoSQL数据库来优化数据模型、存储结构等。</li>
</ul>
<p>衡量网站性能有一系列指标，重要的有响应时间、TPS、系统性能计数器等，通过这些指标以确定系统设计是否达到目标。</p>
<h3>1.2 可用性</h3>
<p>可用性即能够不间断提供服务的时间。几乎所有网站都承诺7×24小时可用，但事实上任何网站都不可能达到完全的7×24，总会有一些故障时间，扣除这些故障时间，就是网站的可用时间。一些大型网站可以做到4个9以上的可用性，也就是99.99%。</p>
<p>网站高可用的主要手段就是冗余，应用部署在多台服务器上同时提供服务，数据存储在多台服务器上相互备份，任何一台服务器都不会影响应用的整体可以，通常的实现手段即把多台服务器通过负载均衡设备组成一个集群。</p>
<p>衡量一个系统架构设计是否满足高可用的目标，就是假设系统中任何一台或者多台服务器宕机时，以及出现各种不可预期的问题时，系统整体是否依然可用。</p>
<h3>1.3 伸缩性</h3>
<p>大型网站需要面对大量用户的高并发访问和存储海量数据，网站通过集群的方式将多台服务器组成一个整体共同提供服务。所谓伸缩性是指通过不断向集群中加入服务器的手段来缓解不断整体上市用户并发访问压力和不断增长的数据存储需求。</p>
<p>衡量架构伸缩性的主要标准就是是否可用多台服务器构建集群，是否容易向集群中添加新的服务器。加入新的服务器后是否可以提供和原来的服务器无差别的服务。集群中可容纳的总服务器数量是否有限制。</p>
<h3>1.4 扩展性</h3>
<p>不同于其他架构要素主要关注非功能性需求，网站的扩展性架构直接关注网站的功能需求。网站快速发展，功能不断扩展，如何设计网站的架构使其能够快速响应需求变化，是网站可扩展架构的主要目标。</p>
<p>衡量网站架构扩展性好坏的主要标准就是在网站增加新的业务产品时，是否可以实现对现有产品透明无影响，不同产品之间是否很少耦合等。</p>
<p>网站可扩展架构的主要手段是事件驱动架构和分布式服务。</p>
<p>事件驱动通常利用消息队列实现，通过这种方式将消息生产和处理逻辑分隔开。</p>
<p>服务器服务则是将业务和可复用服务分离开来，通过分布式服务框架调用。新增加产品可用通过调用可复用的服务来实现自身的业务逻辑，而对现有产品没有任何影响。</p>
<h3>1.5 安全性</h3>
<p>互联网是开放的，任何人在任何地方都可以访问网站。网站的安全架构就是保护网站不受恶意访问和攻击，保护网站的重要数据不被窃取。</p>
<p>衡量网站安全架构的标准就是针对现存和潜在的各种攻击和窃密手段，是否有可靠的应对策略。</p>
<h2>参考文章</h2>
<p><a href="https://pdai.tech/md/arch/arch-x-core-metrics.html" target="_blank" rel="noopener noreferrer"><strong>架构 - 理解架构的核心要素</strong></a></p>
]]></content:encoded>
    </item>
    <item>
      <title>架构-理解架构的演进</title>
      <link>https://springg.us.kg/posts/Architect/base/arch-x-evolution.html</link>
      <guid>https://springg.us.kg/posts/Architect/base/arch-x-evolution.html</guid>
      <source url="https://springg.us.kg/rss.xml">架构-理解架构的演进</source>
      <description>架构-理解架构的演进 在学习架构时，第一步不要去学习框架，而是要学习架构的演进。强烈推荐李智慧老师的《大型网站技术架构》，这本书翻起来很快，对构筑你自己的体系很有帮助，本文的内容来源于它，在此基础上拓展了下 1. 架构演进 大型网站的技术挑战主要来自于庞大的用户，高并发的访问和海量的数据，任何简单的业务一旦需要处理数以P计的数据和面对数以亿计的用户，问...</description>
      <category>架构</category>
      <pubDate>Mon, 28 Oct 2024 01:58:08 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>在学习架构时，<strong>第一步不要去学习框架，而是要学习架构的演进</strong>。强烈推荐李智慧老师的《大型网站技术架构》，这本书翻起来很快，对构筑你自己的体系很有帮助，本文的内容来源于它，在此基础上拓展了下</p>
</blockquote>
<h2>1. 架构演进</h2>
<p>大型网站的技术挑战主要来自于庞大的用户，高并发的访问和海量的数据，任何简单的业务一旦需要处理数以P计的数据和面对数以亿计的用户，问题就会变得很棘手。大型网站架构主要就是解决这类问题。</p>
<p>架构选型是根据当前业务需要来的，在满足业务需求的前提下，既要有足够的扩展性也不能过度设计，每次的架构升级都是为了解决系统瓶颈而做的。</p>
<h3>1.1 初始阶段的网站架构</h3>
<p>初始阶段都比较简单，通常一台服务器就可以搞定一个网站了，看图。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856967.png" alt="image-20220704202232501.png" tabindex="0" loading="lazy"><figcaption>image-20220704202232501.png</figcaption></figure>
<h3>1.2 应用服务和数据服务分离</h3>
<p>随着网站业务的发展，一台服务器逐渐不能满足需求；这时候就需要将应用和数据分离，如图。<br>
<img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856005.png" alt="image-20220704202540782.png" loading="lazy"></p>
<h3>1.3 使用缓存改善网站性能</h3>
<p>毫无疑问，现在的网站基本上都会使用缓存，即：80%的业务访问都会集中在20%的数据上。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856044.png" alt="image-20220704202615168.png" tabindex="0" loading="lazy"><figcaption>image-20220704202615168.png</figcaption></figure>
<h3>1.4 使用应用服务器集群改善网站的并发处理能力</h3>
<p>因为单一应用服务器能够处理的请求连接有限，在网站访问高峰时期，应用服务器会成为整个网站的瓶颈。因此使用负载均衡处理器势在必然。通过负载均衡调度服务器，可将来自浏览器的访问请求分发到应用的集群中的任何一台服务器上。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856073.png" alt="image-20220704202752594" tabindex="0" loading="lazy"><figcaption>image-20220704202752594</figcaption></figure>
<h3>1.5 数据库读写分离</h3>
<p>当用户达到一定规模后，数据库因为负载压力过高而成为网站的瓶颈。而目前主流的数据库都提供主从热备功能，通过配置两台数据库主从关系，可以将一台数据库的数据更新同步到另一台服务器上。网站利用数据库这一功能实现数据库读写分离，从而改善数据库负载压力。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856123.png" alt="image-20220704202808118" tabindex="0" loading="lazy"><figcaption>image-20220704202808118</figcaption></figure>
<h3>1.6 使用反向代理和CDN加速网站响应</h3>
<p>提高网站的访问速度，主要手段有使用CDN和反向代理。</p>
<p>CDN和反向代理的基本原理都是缓存，区别在于CDN部署在网络提供商的机房，而反向代理是部署在网站的中心机房，当用户请求到达中心机房后，首先访问的反向代理，如果反向代理缓存着用户请求的资源，则直接返回给用户。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856164.png" alt="image-20220704202934009" tabindex="0" loading="lazy"><figcaption>image-20220704202934009</figcaption></figure>
<h3>1.7 使用分布式文件系统和分布式数据库系统</h3>
<p>任何强大的单一服务器都满足不了大型网站持续增长的业务需求。</p>
<p>分布式数据库时网站数据库拆分的最后手段，只用在单表数据规模非常大的时候才使用。不到不得已时，网站更常用的数据库拆分手段是业务拆分，将不同业务的数据部署在不同的物理服务器上。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856193.png" alt="image-20220704203026849" tabindex="0" loading="lazy"><figcaption>image-20220704203026849</figcaption></figure>
<h3>1.8 使用NoSQL和搜索引擎</h3>
<p>搜索引擎也基本已经形成现在大型网站必须提供的功能了，网站需要采用一些非关系数据库技术如NoSQL和非数据库查询技术如搜索引擎。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856224.png" alt="image-20220704203106737" tabindex="0" loading="lazy"><figcaption>image-20220704203106737</figcaption></figure>
<h3>1.9 业务拆分</h3>
<p>大型网站为了应对日益复杂的业务场景，通过使用分而治之的手段将整个网站业务拆分成不同的产品线。</p>
<p>具体到技术上，也会根据产品线划分，将一个网站拆分成许多不同的应用，每个应用独立部署维护。应用之间可以通过超链接建立管理，也可以通过消息队列进行数据分发，<strong>当然最多的还是通过访问同一个数据存储系统来构成一个关联的完整系统</strong>。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856260.png" alt="image-20220704203305103" tabindex="0" loading="lazy"><figcaption>image-20220704203305103</figcaption></figure>
<h3>1.10 分布式服务</h3>
<p>由于每一个应用系统都需要执行许多相同的业务操作，比如用户管理，session管理，那么可以将这些公用的业务提取出来，独立部署。</p>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856294.png" alt="image-20220704203400514" tabindex="0" loading="lazy"><figcaption>image-20220704203400514</figcaption></figure>
<h2>2. 示例:电商系统架构演进</h2>
<p>具体以电子商务网站为例， 展示web应用的架构演变过程。</p>
<h3>1.0时代</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856326.png" alt="image-20220704203436208.png" tabindex="0" loading="lazy"><figcaption>image-20220704203436208.png</figcaption></figure>
<p>这个时候是一个web项目里包含了所有的模块，一个数据库里包含了所需要的所有表，这时候网站访问量增加时，首先遇到瓶颈的是应用服务器连接数，比如tomcat连接数不能无限增加，线程数上限受进程内存大小、CPU内核数等因素影响，当线程数到达一定数时候，线程上下文的切换对性能的损耗会越来越严重，响应会变慢，通过增加web应用服务器方式的横向扩展对架构影响最小，这时候架构会变成下面这样：</p>
<h3>2.0时代</h3>
<p><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856361.png" alt="image-20220704203621715.png" loading="lazy"><br>
这时候随着网站访问量继续增加，继续增加应用服务器数量后发现数据库成了瓶颈，而数据库的最主要的瓶颈体现在两方面：</p>
<ul>
<li>数据库的最大连接数是有限的，比如当前数据库的连接数设置8000，如果每个应用服务器与数据库的初始连接数设置40，那么200台web服务器是极限， 并且连接数太多后，数据库的读写压力增大，耗时增加</li>
<li>当单表数量过大时，对该表的操作耗时会增加，索引优化也是缓兵之计</li>
</ul>
<p>这时，根据业务特点，如果读写比差距不大，并且对数据一致性要求不是很高的情况下，数据库可以采用主从方式进行读写分离的方案，并且引入缓存机制来抗读流量。如果读写比差距很大或者对数据一致性要求高时，就不适合用读写分离方案，需要考虑业务的垂直拆分，这时期的系统架构图如下：</p>
<h3>3.0时代</h3>
<h4>3.1 读写分离</h4>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856391.png" alt="image-20220704203808145.png" tabindex="0" loading="lazy"><figcaption>image-20220704203808145.png</figcaption></figure>
<p>这时候仍然是垂直架构，所有业务集中在一个项目里。项目维护、快速迭代问题会越来越严重，单个模块的开发都需要发布整个项目，项目稳定性也受到很大挑战，这是需要考虑业务的垂直拆分，需要将一些大的模块单独拆出来，这时候的架构图如下：</p>
<h3>4.0 业务垂直拆分</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856425.png" alt="image-20220704203919468" tabindex="0" loading="lazy"><figcaption>image-20220704203919468</figcaption></figure>
<p>这时候为了进一步提升用户体验，加速用户的网站访问速度，会使用CDN来缓存信息，用户会访问最近的CDN节点来提升访问速度。此时的架构图如下：</p>
<h4>4.1 使用CDN来缓存信息</h4>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856463.png" alt="image-20220704204007659.png" tabindex="0" loading="lazy"><figcaption>image-20220704204007659.png</figcaption></figure>
<p>随着业务量增大，一些核心系统数据库单表数量达到几千万甚至亿级，这时候对该表的数据操作效率会大大降低，并且虽然有缓存来抗读的压力，但是对于大量的写操作和一些缓存miss的流量到达一定量时，单库的负荷也会到达极限，这时候需要将表拆分，一般直接采用分库分表，因为只做分表的话，单个库的连接瓶颈仍然无法解决。分库分表后的架构如下：</p>
<h4>4.2分库分表架构</h4>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856501.png" alt="image-20220704204058186" tabindex="0" loading="lazy"><figcaption>image-20220704204058186</figcaption></figure>
<p>随着流量的进一步增大，这时候系统仍然会有瓶颈出现，以订单系统为例： 单个机房的机器是有限的，不能一直新增下去，并且基于容灾的考虑，一般采用同城双机房的方式，机房之间用专线链接，同城跨机房质检的延时在几毫秒，此时的架构图如下：</p>
<h4>4.3 同城双机房</h4>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856538.png" alt="image-20220704204203286" tabindex="0" loading="lazy"><figcaption>image-20220704204203286</figcaption></figure>
<p>由于数据库主库只能是在一个机房，所以仍然会有一半的数据库访问是跨机房的，虽然延时只有几毫秒，但是一个调用链里的数据库访问太多后，这个延时也会积少成多。其次这个架构还是没能解决数据库连接数瓶颈问题</p>
<ul>
<li>随着应用服务器的增加，虽然是分库分表，但每增加一台应用服务器，都会与每个分库建立连接，比如数据库连接池默认连接数是40，而如果mysql数据库的最大连接数是8000的话，那么200台应用服务器就是极限。</li>
<li>当应用的量级太大后，单个城市的机器、电、带宽等资源无法满足业务的持续增长。这时就需要考虑SET化架构，也就是单元化架构，大体思路就是将一些核心系统拆成多个中心，每个中心成为一个单元，流量会按照一定的规则分配给每个单元，这样每个单元只负责处理自己的流量就可以了。每个单元要尽量自包含、高内聚。这是从整体层面将流量分而治之的思路。这是单元化后的机构简图如下：</li>
</ul>
<h3>5.0 单元化</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856573.png" alt="image-20220704204400586" tabindex="0" loading="lazy"><figcaption>image-20220704204400586</figcaption></figure>
<p>从上面的架构图里能看到，流量从接入层按照路由规则（比如以用户ID来路由）路由到不同单元，每个单元内都是高内聚，包含了核心系统，数据层面的分片逻辑是与接入层路有逻辑一致，也解决了数据库连接的瓶颈问题，但是一些跨单元的调用是无法避免的，同时也有些无法拆分的业务需要放在中心单元，供所有其他单元调用。</p>
<h2>参考文章</h2>
<p><a href="https://pdai.tech/md/arch/arch-x-evolution.html" target="_blank" rel="noopener noreferrer"><strong>架构 - 理解架构的演进</strong></a></p>
]]></content:encoded>
      <enclosure url="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300856967.png" type="image/png"/>
    </item>
    <item>
      <title>架构-理解架构的模式2</title>
      <link>https://springg.us.kg/posts/Architect/base/arch-x-pattern-2.html</link>
      <guid>https://springg.us.kg/posts/Architect/base/arch-x-pattern-2.html</guid>
      <source url="https://springg.us.kg/rss.xml">架构-理解架构的模式2</source>
      <description>架构-理解架构的模式2 革命尚未成功，同志们还需努力。需要多揣摩揣摩 TIP 本文整理自朱晔的互联网架构实践心得, 他是结合了 微软给出的云架构的一些模式的基础上加入他自己的理解来总结互联网架构中具体的一些模式。 朱晔：设计模式是前人通过大量的实践总结出来的一些经验总结和最佳实践。在经过多年的软件开发实践之后，回过头来去看23种设计模式你会发现很多平时...</description>
      <category>架构</category>
      <pubDate>Mon, 28 Oct 2024 01:58:08 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>革命尚未成功，同志们还需努力。需要多揣摩揣摩</p>
</blockquote>
<blockquote>
<p>TIP</p>
<p>本文整理自<a href="https://www.cnblogs.com/lovecindywang/p/9670356.html" target="_blank" rel="noopener noreferrer">朱晔的互联网架构实践心得</a>, 他是结合了 <strong>微软给出的云架构的一些模式</strong>的基础上加入他自己的理解来总结互联网架构中具体的一些模式。</p>
</blockquote>
<blockquote>
<p>朱晔：设计模式是前人通过大量的实践总结出来的一些经验总结和最佳实践。在经过多年的软件开发实践之后，回过头来去看23种设计模式你会发现很多平时写代码的套路和OO的套路和设计模式里总结的类似，这也说明了你悟到的东西和别人悟到的一样，经过大量实践总能趋向性得出一些最佳实践的结论。架构设计也是一样，这里结合自己的理解分析一下微软给出的云架构的一些模式。话说微软干这方面的事情真的很厉害，之前翻译过的《微软应用架构指南》写的也很不错。有了模式的好处是，技术人员和技术人员之间的对话可以毫不费力的通过几个模式关键词进行交流，就像现在大家沟通提到职责链模式，如果双方都理解这个模式的意义那么这五个字替代的可能就是半小时的解释。废话不多说，接下去来看一下这些其实已经很熟悉亲切的模式。</p>
</blockquote>
<h2>管理和监控</h2>
<h3>1. 大使模式：创建代表消费者服务或应用程序发送网络请求的帮助服务</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947736.png" alt="image-20220704231448639" tabindex="0" loading="lazy"><figcaption>image-20220704231448639</figcaption></figure>
<p>进程外的代理服务（之前介绍中间件的时候也提到了，很多框架层面的事情可以以软件框架的形式寄宿在进程内，也可以以独立的代理形式做一个网络中间件）。这里的大使模式意思就是这么一个网络代理进程，用于和远端的服务进行通讯，完成下面的工作：</p>
<ul>
<li>服务路由</li>
<li>服务熔断</li>
<li>服务跟踪</li>
<li>服务监控</li>
<li>服务授权</li>
<li>数据加密</li>
<li>日志记录</li>
</ul>
<p>由于是独立进程的网络服务，所以这个模式适合于我们有多语言多框架都需要干同样的事情，那么我们的框架中客户端部分的很多工作可以移出来放到大使服务中去。当然了，多一层网络调用多一层开销，大使服务的部署也要考虑到性能不一定可以集中部署，这些都是要考虑的问题。</p>
<h3>2. 反腐模式：在现代应用程序和遗留系统之间实现装饰或适配器层</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947777.png" alt="image-20220704231641497" tabindex="0" loading="lazy"><figcaption>image-20220704231641497</figcaption></figure>
<p>使用一层反腐层来作为新老系统通讯的中间人。这样新系统可以完全使用新的通讯方式和架构方式，老的系统又不用进行特别改造可以暂时保留，等老系统不用之后可以废弃这个反腐层。这种模式适合新老系统迁移的过渡方案，不属于永久使用的架构设计模式</p>
<h3>3. 外部配置存储：将应用程序部署包中的配置信息移动到中心化的位置</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947799.png" alt="image-20220704231728207" tabindex="0" loading="lazy"><figcaption>image-20220704231728207</figcaption></figure>
<p>这个模式说的就是可以有一个外部的配置服务来保存配置信息，在之前第五篇文章介绍中间件的时候我详细说明过配置服务的功能。不管是处于管理运维的角度还是方便安全的角度，具有配置共享配置外存特点的独立配置服务对于大型的网站来说必不可少。实现的话有很多开源项目提供了配置服务。</p>
<h3>4. 网关聚合模式：使用网关将多个单独的请求聚合到一个请求中</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947821.png" alt="image-20220704231830304.png" tabindex="0" loading="lazy"><figcaption>image-20220704231830304.png</figcaption></figure>
<p>应用程序如果需要和多个服务交互的话，在中间构建起一个聚合网关层，网关并发发出多个请求给后面的服务，然后汇总数据给到应用程序。这种模式有几个好处：</p>
<ul>
<li>允许并发调用多个服务提高性能，允许只返回部分数据</li>
<li>网关里可以做一些弹性设计方案（熔断、重试、限流）</li>
<li>网关里可以做一些缓存方案</li>
<li>对于外网通讯的时候，可以让网关作为一个网络中间层</li>
<li>当然，使用这种模式需要考虑到网关的负载、高可用、高性能（异步IO）等等。</li>
</ul>
<p>其实这种模式不仅仅用于纯后端服务之间的通讯，很多面向前端的API请求都会做一个聚合层，这样前端可以只发一个请求的情况下任意向后端一次性索取多个API的返回，减少网络请求次数提高性能。</p>
<p>实现上最简单的方式可以使用OpenResty或Nginx实现。</p>
<h3>5. 网关卸压模式：把共享或特定的服务功能放到网关代理</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947852.png" alt="image-20220704231932879" tabindex="0" loading="lazy"><figcaption>image-20220704231932879</figcaption></figure>
<p>名字有点难以理解，其实这种模式我们可能一直在用。就是用一个代理网关层做一些和业务无关的又麻烦的点，比如SSL，实现上用Nginx实现就很简单。我们经常会对外启用HTTPS服务，然后对内服务实际提供的是HTTP接口，通过网关做一下协议转换。</p>
<h3>6. 网关路由模式：使用单个端点将请求路由到多个服务</h3>
<p><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947884.png" alt="image-20220704232037739" loading="lazy"><br>
这也是很常见的作法，我们对外的接口可能是/cart、/order、/search这样的API，在其背后其实是不同的服务，通过网关层进行转发，不仅仅可以做后端服务的负载均衡和故障转移，在后端服务变更切换对外API路径（比如版本升级）的时候我们也可以进行灵活的路由，确保了对外接口的一致性。可以使用Nginx来实现，相信大部分公司都是由Nginx这样的网关来对外的，不会把域名直接解析到底层服务上对外。</p>
<h3>7. 健康端点监控模式：在应用程序中执行功能检查，外部工具可以定期通过暴露的端点访问</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947915.png" alt="image-20220704232130905" tabindex="0" loading="lazy"><figcaption>image-20220704232130905</figcaption></figure>
<p>这个模式其实是挺重要的一点，有几个点需要注意：</p>
<ul>
<li>需要暴露哪些信息？不仅仅是服务本身或框架本身是否启动成功，尽可能暴露出服务依赖的外部存储或系统是否可用，原因是网络通讯是复杂的，从外部看到某个服务可用不代表我们的网站就可以成功连接，如果底层的数据库都无法连接，即使这个网站本身启动成功，那么我们应该认为这个服务是不健康的。外部存储即使对于A节点是可以连通对于B节点不能连通也是有可能的，可能是因为网络问题或权限问题，还可能因为负载问题，有的时候对于长连接的请求A节点因为始终连着存储不会有问题，新的B节点要求连接的时候因为超出最大连接限制无法连接。如果有可能的话还暴露一些服务内部各种线程池、连接池和队列的信息吧（对象数，队列长度等），这些指标很关键，但是因为在程序内部所以外围很难感知到，有了一些关键指标的外露对于排查性能问题会方便很多。</li>
<li>不只是网站，服务也应该暴露出健康信息，一来我们可以在外部收集这些信息进行监控汇总，二来我们的负载均衡器或发布系统需要有一个方式来判断服务是否可用，不可用的时候进行重启或故障转移。</li>
<li>对外的服务注意health端口的授权，这里可能会有一些敏感信息，不宜让匿名用户看到。</li>
</ul>
<p>实现上，我们应当把health端口作为插件形式集成到系统，配置一下即可启用，用不着每一个系统都自己开发一套。如果使用SpringBoot的话可以直接使用Actuator模块实现。</p>
<h3>8. 绞杀者模式：通过使用新的应用程序和服务逐渐替换特定功能部件来逐步迁移旧系统</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947945.png" alt="image-20220704232408285" tabindex="0" loading="lazy"><figcaption>image-20220704232408285</figcaption></figure>
<p>名字挺吓人，这个模式说的是如何做迁移。通过建立一个门面来作为后端新老服务的路由，慢慢把服务替换为新服务，最后当所有的服务都是新服务后删除这个门面即可。这样对于消费者感知不到这个迁移的过程。在上一篇文章中我们提到的换引擎的方式其实说的是保留原有的门面，也是通过这个门面做底层引擎的替换。其实我觉得对于减少外围影响这种模式是完全可以理所当然想到的，真正难的过程还是之前说的数据迁移和底层服务实现的过程。</p>
<h2>性能和可扩展性</h2>
<h3>9. 缓存辅助模式：按需将数据从数据存储加载到缓存中</h3>
<p><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947969.png" alt="image-20220704232506125" loading="lazy"><br>
这个模式说的不是广义上的缓存使用，而是其中的一种使用方式。我们对于缓存的使用一般有这么几种方式：</p>
<ul>
<li>查缓存，不存在查库，然后更新缓存</li>
<li>直接维护一大块“全量”数据，尽量和数据库同步</li>
</ul>
<p>这个模式说的是后一种方式，对于数据变动不大，这种模式是性能最好的，几乎实现了100%的命中率，而且如果数据量不大可以容纳进进程的话不需要跨进程通讯。往细致一点去想，这里还有一层性能优化的点，因为我们在内存中维护了一套复杂的全量数据的数据结构，内存中对象的引用只是指针引用，内存中的数据搜索可以很快，对于数据量不大但是关系复杂的数据，这个搜索效率可以是数据库的几百倍。实现上一般会在应用程序启动的时候把数据完全加入内存，在后续通过一些策略进行数据更新：</p>
<ul>
<li>定时更新同步数据，不同数据可以有不同的更新频率由后台线程来更新</li>
<li>数据具有不同的过期时间，过期后由请求触发主动更新或回调方式被动更新</li>
<li>数据修改后同步修改缓存和数据库中的数据</li>
</ul>
<h3>10. 命令和查询责任分离模式：通过使用单独的接口来分离读取数据和更新数据的操作</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947989.png" alt="image-20220704232715071" tabindex="0" loading="lazy"><figcaption>image-20220704232715071</figcaption></figure>
<p>英文缩写是CQRS，看到这个关键字你可能会觉得有点熟悉了。CQRS原来说的是我们可以有两套数据模型分别用于读和写。好处是，我们可以让读和写具有完全不同的数据结构，减少相互的干扰，减少权限控制的复杂度。这里说的不一定是指架构层面我们可以这么做，也指在程序内部，我们可以有两套命令模型来处理读写这两个事情，分别进行优化和定制。</p>
<p>现在一般的做法是类似于上图的做法，为读写配置两套独立的数据源，并且和事件溯源的方式结合起来做（见后面一节）。我们来说说读写两套模型在存储上分离这个事情，在《相辅相成的存储五件套》一文中我们的架构图其实就有这方面的意思。对于读写这两个事情，我们完全可以不用一套数据源，为读建立专门的物化视图，可以针对读进行优化，避免在读的时候做很多Join的工作，可以把性能做到极致（后面会有物化视图模式的介绍）。事件溯源+CQRS+物化视图三者一般会结合起来使用。</p>
<h3>11. 事件溯源模式：使用仅追加存储去记录描述对域中的数据采取的操作的完整系列事件</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947017.png" alt="image-20220704232750858" tabindex="0" loading="lazy"><figcaption>image-20220704232750858</figcaption></figure>
<p>事件溯源（ES）是一种有趣的模式，说的是我们记录的不是数据的当前状态而是叠加的数据变化序列（是不是想到了区块链的数据记录方式）。传统的CRUD方式因为有更新这个操作，所以会产生性能并发方面的局限性，而且我们还需要配备额外的日志来做审计，否则就产生了信息丢失。而事件溯源模式记录的是事件而不是当前状态，所以有下面的特点：</p>
<ul>
<li>事件不可变，只是追加新的事件，没有冲突，性能高</li>
<li>以事件驱动做外部处理，耦合低</li>
<li>保留第一手原始信息，信息没有损耗</li>
</ul>
<p>其实有一些业务场景下这种模式会比CRUD存储更适合：</p>
<ul>
<li>业务更看重数据的意图和目的而不是当前的状态，注重审计、回滚、历史方面的功能</li>
<li>希望避免数据更新的冲突，希望数据的产生能有较高性能，又能接受数据状态的最终一致性</li>
<li>整个系统中本身就是以事件在驱动的（我们可以想一下在真实的世界中，物体和物体之间相互影响，通过事件来影响，每个物体观察到其它物体发出的事件来做出自己的反映，这是最自然的，而不是观察到别的物体属性的变化来调整自己的属性）</li>
</ul>
<p>反过来说，业务逻辑很简单的系统，需要强一致性的系统，数据很少更新的系统不适合这种模式。不知你所了解到的采用ES模式的业务场景有哪些？大家一起交流一下。</p>
<h3>12. 物化视图模式：针对所需的查询操作，当数据没有理想地格式化时，在一个或多个数据存储中的数据上生成预填充视图</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947045.png" alt="image-20220704232902291" tabindex="0" loading="lazy"><figcaption>image-20220704232902291</figcaption></figure>
<p>我们在使用数据存储的时候往往会更多考虑存储而不是读取。我们使用各种数据库范式来设计数据库，在读取数据的时候我们需要做大量的关联查询以输出符合需要的查询结果。这个时候性能往往会成为瓶颈，物化视图是一种空间换时间的做法。与其在查询的时候做关联，倒不如提前保存一份面向于查询和输出的数据格式。因此，物化视图适合下面的场景：</p>
<ul>
<li>经过复杂的计算才能查询出数据</li>
<li>背后存储可能会有不稳定的情况</li>
<li>需要连接多个不同类型的存储才能查询到结果</li>
</ul>
<p>但是因为需要考虑到物化视图计算保存的开销，所以也不太适合于数据变化太频繁的情况，因为数据加工需要时间，所以不适合需要数据强一致性的场景。</p>
<p>实现上一般是基于消息监听做额外维护一套物化视图的数据源和主流程解耦。惠普的Vertica是一款高性能的列式分析数据库，它的一个特性就是物化视图，通过事先提供SQL语句直接缓存面向于统计的查询结果，极大程度提高了性能，也是空间换时间的思想。</p>
<h3>13. 基于队列的负载均衡模式：使用一个队列作为任务和服务之间的缓冲区，平滑间歇性重负载</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947064.png" alt="image-20220704232956349" tabindex="0" loading="lazy"><figcaption>image-20220704232956349</figcaption></figure>
<p>消息队列我们太熟悉了，之前我们也反复提高过好多次，甚至我说这是架构三马车之一。这个模式在这里强调的是削峰的优势。这里我还想提几点：</p>
<ul>
<li>引入消息队列不会提高处理能力，而是会降低性能，只是我们把耦合解开了允许每一个部件单独有自己的弹性，对于不能负荷的部分在队列中进行缓冲，缓冲不是存储不意味无限制</li>
<li>队列看的是处理速度和入队速度的比例，一般而言，我们需要预先做评估确保处理TPS超过2倍的最高峰的入队TPS，确保留出一半的富裕，这样在业务逻辑有修改的时候处理TPS哪怕下降了30%，还能抗住压力</li>
</ul>
<h3>14. 优先级队列模式：确定发送到服务的请求的优先级，使得具有较高优先级的请求更快地被接收和处理</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947090.png" alt="image-20220704233208874" tabindex="0" loading="lazy"><figcaption>image-20220704233208874</figcaption></figure>
<p>区别于FIFO结构的队列，优先级队列允许消息标识处理优先级。这里实现上如上面两个图有两种方式：</p>
<ul>
<li>消息优先级方式。在队列中进行实时位置重排，永远优先处理级别较高的消息。</li>
<li>不同的处理池方式。我们可以针对不同的处理级别配备专门的处理池来处理这些消息，高级别的消息具有更多的处理资源，更好的硬件来处理，这样势必会有较高的处理能力。</li>
</ul>
<p>在方案选择和实现上要考虑消息优先级是否需要绝对按照优先级来处理，还是说相对优先处理即可，如果需要绝对优先那么除了消息位置重排还需要有抢占处理。还有，如果我们采用第二种多池的方式来处理的话可能会发生低级别的消息处理时间比高级别的消息更快的可能性（如果两者处理业务逻辑是完全不同的话）。</p>
<p>实现上的话RabbitMQ 3.5以上版本支持了消息优先级，实现的是第一种方式，在消息有缓冲的堆积的时候进行消息重排，消费端可以先看到先处理优先级高的消息，这种方式在消费速度大于产出速度的场景下是无法实现高级别消息优先处理的。</p>
<p>补充一点，对于队列中的消息，还有一种需要特别考虑的就是一直停留在队列的消息应当视为低优先级或是死信消息来处理，最好是有单独的消费者来处理，避免此类消息影响了整个队列的处理，见过很多个事故是由于队列中被废弃消息卡死导致彻底丧失处理能力的。</p>
<h3>15. 限流模式：控制应用程序，个人租户或整个服务的实例消耗的资源</h3>
<p>在做压力测试的时候我们会发现，随着压力的上升系统的吞吐慢慢变大而且这个时候响应时间可以基本保持可控（1秒内），当压力突破一个边界后，响应时间一下子会不可控，随之系统的吞吐就会下降，最后会彻底崩溃。任何系统对于压力的负荷是有边界的，超过这个边界之后系统的SLA肯定无法满足标准，导致大家都无法好好用这个服务。因为系统的扩展往往不是秒级可以做到的，所以这个时候最快的手段就是限流，只有限流了才能保护现在的系统不至于突破这个边界彻底崩溃。对于业务量超大的系统搞活动，对关键服务甚至入口层面做限流是必然的，别无它法，淘宝双11凌晨0点那一刻也能看到一定比例的下单被限流了。</p>
<p>常见的限流算法有这么几种：</p>
<ul>
<li>计数器算法。最简单的算法，资源使用加一，释放减一，达到一定的计数拒绝服务。</li>
<li>令牌桶算法。按照固定速率往桶里加令牌，桶里最多存放n个令牌，填满丢弃。处理的时候需要获取令牌，获取不到则拒绝请求。</li>
<li>漏桶算法。一个固定容量的漏洞，按照一定的速度流出水滴（任务）。可以以任意速度流入水滴（任务），满了则溢出丢弃。</li>
</ul>
<p>令牌桶算法限制的是平均流入速度，允许一定程度的突发请求，漏桶算法限制的是常量的流出速率用于平滑流入的速度。实现上，常用的一些开源类库都会有相关的实现，比如google的Guava提供的RateLimiter就是令牌桶算法。</p>
<p>限流模式有下面的一些注意事项：</p>
<ul>
<li>限流需要快速执行，任何一个超出流量控制的请求不允许放行，否则没有意义。</li>
<li>限流需要提前执行，最好在系统能力达到80%的时候进行限流，越晚限流风险越大。</li>
<li>可以返回特定的限流控制错误代码给客户端，让用户知道这不是错误是限流，可以稍后再试。</li>
<li>因为我们的系统很多地方都会做限流，在监控图上我们最好对这类限流的曲线有敏感，限流后的曲线是一下子失去了增长的梯度变为了平稳的状态，如果监控图看的时间范围过小的话会误判这是一个正常的请求量。</li>
<li>限流可以在边缘节点做。我们来考虑秒杀的场景，如果一秒有100万个请求，这100万个请求全部打到我们的应用服务器没有意义，我们可以在边缘节点（CDN）甚至客户端上做简单的边缘计算，让这100万个请求采用命中注定的方式直接随机放弃其中的99.9%留下1000个请求，最终可以进入我们的业务服务，这样TPS在1000一般是没有问题的。所以很多时候我们参与秒杀，系统会在极短的时间内毫无思考告知你活动已结束，说明你已经是被选中的命中注定的无法进入后端系统来参与秒杀的那些人。</li>
</ul>
<h2>数据管理模式</h2>
<h3>16. 分片模式：将数据存储区划分为一组水平分区或分片</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947117.png" alt="image-20220704233331801" tabindex="0" loading="lazy"><figcaption>image-20220704233331801</figcaption></figure>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947142.png" alt="image-20220704233343555" tabindex="0" loading="lazy"><figcaption>image-20220704233343555</figcaption></figure>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947162.png" alt="image-20220704233353950" tabindex="0" loading="lazy"><figcaption>image-20220704233353950</figcaption></figure>
<p>一直有一个说法就是不到没路可走的时候不要考虑数据库分片。有的时候业务量大到单个业务表在经过缓存+队列削峰等措施之后的平均的TPS超过1万，单表实在是扛不住，还是只能考虑分片手段。</p>
<p>分片前：</p>
<ul>
<li>需要根据数据分布、压力情况、业务逻辑确定分片的方式，按照条件还是范围还是哈希等等（三个图展示了三种策略）。</li>
<li>需要进行业务代码改造，改掉所有不允许的SQL。</li>
<li>需要确定用HardCode方式还是框架方式还是中间件方式做数据路由。</li>
</ul>
<p>分片后：</p>
<ul>
<li>需要有运维工具可以对这么多套分片的数据进行统一的加索引等操作。</li>
<li>最好有数据仓库可以汇总所有数据，使得adhoc查询可以更方便。</li>
<li>最好有辅助工具可以用来帮助定位数据会在哪个分片中。</li>
</ul>
<h3>17. 静态内容托管模式：将静态内容部署到基于云的存储服务，可以将它们直接传递给客户端</h3>
<p>相信互联网公司90%+肯定都使用了这个模式。把静态资源从动态网站中剥离由Nginx等高性能服务器来处理静态资源，然后使用三方CDN对静态资源进行加速，不但减轻了动态网站的负载而且数据在边缘节点加速让用户的访问跟快，使用单独的一个或多个子域名做静态资源还能提高下载资源的并行度提高网页加载的速度。</p>
<p>使用CDN来进行资源加速一般有主动数据传送到CDN存储和在CDN配置回源站拉取两种方式，文件类一般使用主动推送数据，静态资源类一般使用回源方式。在使用CDN的时候考虑下面的问题：</p>
<ul>
<li>CDN以什么方式来认定同一个文件的，CDN提供了什么工具来刷新边缘节点的缓存？根据不同的策略做相应的缓存刷新方案。</li>
<li>源站对于相同的文件需要有一致性（最好版本变化后文件名变化），不能今天是这个版本明天是另一个版本，这样很可能导致边缘节点缓存了不同版本的文件，导致各种怪问题。</li>
<li>使用了CDN后不同地区的用户访问的都是CDN节点上的数据，一旦出现问题排查比较困难，考虑引入前端的错误处理框架来记录前端出现脚本错误时的调用栈，方便定位问题。</li>
</ul>
<h3>18. 索引表模式：为查询经常引用的数据存储区中的字段创建索引</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947187.png" alt="image-20220704233457711" tabindex="0" loading="lazy"><figcaption>image-20220704233457711</figcaption></figure>
<p>出于下面的原因，我们会考虑索引表：</p>
<ul>
<li>虽然我们的关系型数据库大多支持主键之外的非聚集索引，但是在某些情况下直接对大表做很多索引性能并不好。</li>
<li>做了Sharding后我们确实没有办法以分片键之外的维度来查询数据。</li>
<li>希望以空间换时间，直接把某个维度的复合查询作为主键单独保存一份数据。</li>
</ul>
<p>不过需要考虑一点索引只有在数据区分度高的情况下才能发挥价值，如果90%以上的数据都是相同的值，那么走索引进行查询性能会比全表扫还要差一点。</p>
<h2>设计和实现模式</h2>
<h3>19. 前端专用的后端模式：通过使用单独的接口来分离读取数据和更新数据的操作</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947216.png" alt="image-20220704233641416" tabindex="0" loading="lazy"><figcaption>image-20220704233641416</figcaption></figure>
<p>这里说的是不同的前端配以不同的专用后端。比如PC网站和APP的后端是两套程序。这种模式是否适合其实还是看两端的后端提供的数据差异有多大，我们总是希望可以尽量统一一套后端，业务逻辑不用重复写，但是我们要考虑到PC网站和APP的差异性：</p>
<ul>
<li>APP系统的接口交互一般会签名验证，有的时候还会加密</li>
<li>PC系统的流程一般和APP系统不一样</li>
<li>PC一个页面能显示的内容会比APP一个界面显示的更多</li>
<li>安全性设计上PC和APP不一样，APP很少有图形验证码</li>
</ul>
<p>考虑到这些差异，我们是在一个工程内根据来源做适配，还是独立两套工程来做独立的后端取决于差异度有多大了。</p>
<h3>20. 计算资源整合模式：将多个任务或操作整合到单个计算单元中</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947235.png" alt="image-20220704233737997" tabindex="0" loading="lazy"><figcaption>image-20220704233737997</figcaption></figure>
<p>这个模式从资源节省的角度来说我们的计算单元任务可以进行一些合并，减少因为资源限制导致不必要的开销。</p>
<h3>21. 选举模式：通过选举一个实例作为负责管理其它实例的负责人，来协调分布式应用程序中的协作任务实例集合执行的操作</h3>
<p>对于分布式服务，我们趋向于把服务设计为无状态可以任意扩展的，但是在某些业务场景下我们不得不在服务中选举出一个Leader（Primary节点，Master节点）来做一些不适合重复做的协调管理工作。这个时候我们需要有算法来做选举。</p>
<p>最常见的实现方式是使用Zookeeper来实现，我们知道ZK的znode有Sequence和NonSequence两种，前者多个客户端只有一个可创建成功同名节点，后者创建后会自动加上序列号命名多个客户端可以创建多个同名节点，利用这个特性有两种常见实现方式：</p>
<ul>
<li><strong>非公平实现</strong>。多个客户端同时创建EPHEMERAL+NONSEQUENCE节点。只有一个可以创建成功，创建成功的就是Leader，其它的Follower需要注册watch，一旦Leader放弃节点（注意，EPHEMERAL意味着Leader待机后Session结束节点被删除），再一次重复之前的过程注册节点抢占成为Leader。这个模式实现简单，问题是在节点数量过多的时候一旦发生重新竞选，这个时候可能会有性能问题。</li>
<li><strong>公平实现</strong>。多个客户端同时创建EPHEMERAL+SEQUENCE节点。客户端都可以创建成功节点，客户端如果判断自己是最小的节点则为Leader否则为Follower。每一个Follower都去watch序号比自己小的节点（大家都看前一位）。一旦有Leader节点因为宕机被删除（还是EPHEMERAL特性），收到通知的节点会看自己是不是最小的序号，如果是的话成为Leader。节点宕机后，原先watch宕机节点的客户端重新watch比自己序号小的有效节点。这个模式实现复杂，但是由于watch的都只是一个节点所以不会发生像非公平实现的性能问题，而且竞选根据节点序号来而不是抢占式所以显得Leader的选举公平有序。</li>
</ul>
<h3>22. 管道和过滤器模式：将需要执行复杂处理的任务分解成可以重复使用的一系列单独的元素</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947263.png" alt="image-20220704233828863" tabindex="0" loading="lazy"><figcaption>image-20220704233828863</figcaption></figure>
<p>在软件设计模式中过滤器构成的管道这种模式很常见（图上的业务逻辑就是Handler，之前的那些Task就是Filter，模式上可以是Filter+Handler也可以是Filter+Handler+Filter也可以是Handler+Filter），不管是Spring MVC框架也好，Netty这种网络框架也好都提供了这样的设计。每一个过滤器单独完成一个功能，可以独立插拔随意组合配置成一套管道，不但数据处理的整个过程清晰可见还增加了灵活性。</p>
<p>对于架构上也可以有这样的模式，在数据源进入到业务逻辑处理之前（或之后，或前后），我们可以配置一系列的数据过滤器完成各种数据转化和处理的任务。Task和Task之间可以是同步调用，也可以使用MQ做一定的可伸缩性设计。还可以把过滤器的配置信息保存在配置系统中甚至根据上下文动态构建出管道，实现更灵活的前置或后置流程处理。</p>
<h2>消息模式</h2>
<h3>23. 竞争消费者模式：使用多个并发消费者来处理在同一消息通道上接收的消息</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947289.png" alt="image-20220704233914820" tabindex="0" loading="lazy"><figcaption>image-20220704233914820</figcaption></figure>
<p>这里说的是消息队列的消息消费者是一组对等的消费者，通过竞争方式来拉取数据执行。之前提到过这是MQ的最常见的一种模式，一般而言我们会部署多个消费节点进行负载均衡，在负载较大的时候可以方便得增加消费者进行消费能力扩容。不过对于这种模式消费者应当是对等的无状态的，在某个消费者在消费失败的时候消息重新回到队列随后可能会被另一个消费者进行处理。</p>
<h3>24. 重试模式：在应用程序尝试连接到服务或网络资源遇到预期的临时故障时，让程序通过透明地重试以前失败的操作来处理</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947315.png" alt="image-20220704233949973" tabindex="0" loading="lazy"><figcaption>image-20220704233949973</figcaption></figure>
<p>重试适用于瞬态故障，之后会提到断路器模式，两种模式可以结合使用。首先说说重试的几个发起人：</p>
<ul>
<li>让用户自己发起，遇到错误的时候及时返回错误信息，让用户自己稍后重试整个业务功能。这种方式不容易产生瞬时的压力，但是体验较差。</li>
<li>在中间件自动发起，比如在RPC调用的时候遇到服务超时自动进行一定次数的重试，这样可以在外部没有感知的情况下有一定概率消除错误。这个方式要求服务是支持重试的。</li>
<li>由业务逻辑手动发起，不同的业务逻辑根据需求在代码中去写重试的逻辑（当然也可以通过类似Spring-Retry这种组件来做）。实现繁琐但是不容易出错。</li>
<li>由补偿逻辑发起进行同步转异步操作，非重要逻辑同步行则行，不行不在主流程重试，由单独的异步流程进行重试补偿。</li>
</ul>
<p>重试也要考虑几种策略：</p>
<ul>
<li>次数。最多重试几次。</li>
<li>异常。遇到什么样的异常（黑白名单）应该去重试。</li>
<li>等待。考虑每次重试是相同的间隔呢还是有一个延迟的递增，随着重试次数增加而增加延时时间。</li>
</ul>
<h3>25. 调度、代理、主管模式：在一组分布式服务和其它远程资源之间协调一组操作</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947336.png" alt="image-20220704234033054" tabindex="0" loading="lazy"><figcaption>image-20220704234033054</figcaption></figure>
<p>这个模式说的是三者的角色：</p>
<ul>
<li>调度负责安排任务，在执行每个步骤的时候维护任务的状态，具体业务逻辑由代理负责。</li>
<li>代理负责和远程的服务和资源进行通讯，实现错误处理和重试。</li>
<li>管理者负责监视任务的执行状态，作为调度的补充，在合适的时候要求调度进行补偿。</li>
</ul>
<p>三个角色相互配合完成复杂的，具有较多远程服务参与的任务，确保任务的最终有效执行。在之前架构三马车一文中说到定时任务的时候提到过一种任务驱动表的模式，说到了一些驱动表的实现细节，其实整体和这个模式是类似的思想。当我们的一个复杂逻辑有多个步骤构成，每一步都依赖外部服务，这个时候我们可以选择全程MQ+补偿方式（乐观方式），也可以选择全程任务驱动的被动模式（悲观方式），具体选择取决于更看重可靠性还是及时性。</p>
<h2>弹性模式</h2>
<h3>26. 舱壁模式：将应用程序的元素隔离到池中，如果其中一个失败，其它的将继续运行</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947358.png" alt="image-20220704234117476" tabindex="0" loading="lazy"><figcaption>image-20220704234117476</figcaption></figure>
<p>资源隔离有好几个层次，可以在进程内部做线程池或队列的隔离，在微服务的服务划分上考虑隔离出单独的物理服务，或是在服务器层面通过虚拟化技术或Docker技术进行资源隔离。隔离了就不会相互影响，但是会有成本、性能、管理便利性方面的开销。实现能够根据需求分析出可能的资源相互影响的点，提前规划隔离往往可以避免很多问题的发生。之前有遇到过几个事故是这样的：</p>
<ul>
<li>程序内部大量使用了Java8的ParallelStream特性进行并行处理，由于默认共享了相同的线程池，某一个业务的执行占满了线程影响了其它业务的正常进行。</li>
<li>消息队列因为没有对执行过多次失败的死信消息和正常的新消息进行隔离，导致一些业务下线后无法处理的死消息占满了整个队列，正常消息无法消费。</li>
<li>某个服务提供了类似文件上传的重量级操作，也提供了数据查询的轻量级操作，在上传业务大的时候服务的线程都被IO所占满，导致其它查询操作无法进行。</li>
</ul>
<h3>27. 断路器模式：连接到远程服务或资源时, 处理可能需要花费时间来修复的故障</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947383.png" alt="image-20220704234159148" tabindex="0" loading="lazy"><figcaption>image-20220704234159148</figcaption></figure>
<p>分布式应用环节多网络环境复杂，如果遇到依赖服务调用失败的情况我们或许可以进行重试期待服务马上可以恢复，但是在某些时候依赖的服务是彻底挂了而不是网络故障无法及时恢复，如果不考虑进行熔断的，可能服务调用方会被服务提供方拖死。这个时候可以引入断路器机制，如图所示断路器一般采用三态实现，瞬间恢复可能会让底层服务压力过大：</p>
<ul>
<li>关闭：出现错误的时候增加计数器</li>
<li>打开：计数器到达阈值打开断路器，直接返回错误</li>
<li>半开：超时后允许一定的请求通过，成功率达到阈值关闭断路器，操作还是失败的话还是进入打开状态</li>
</ul>
<p>实现模式的时候考虑下面注意点：</p>
<ul>
<li>考虑熔断后怎么来处理，熔断后我们肯定拿不到实际的处理结果，这个时候考虑是功能降级还是采用后备的数据提供方来提供数据</li>
<li>紧急的时候需要人工介入，最好在外部提供手动的方式可以干预断路器的三态</li>
<li>不同的业务考虑不同的断路器打开阈值，每一个错误还能有不同的权重，比如对于下游程序返回了太多请求的错误，每次错误可以+2提高权重尽可能早断路</li>
<li>断路器应当记录熔断时的请求原始信息，在之后必要的时候可以进行重放或数据修复工作</li>
<li>注意设置好外部服务的超时，如果客户端超时比服务端短，很可能进行错误的熔断</li>
</ul>
<p>实现上我们可以看一下Netflix的Hystrix进行进一步了解。</p>
<h3>28. 事务补偿模式：撤消通过一系列步骤执行的工作，它们一起定义最终一致的操作</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947402.png" alt="image-20220704234234642" tabindex="0" loading="lazy"><figcaption>image-20220704234234642</figcaption></figure>
<p>这个模式说的是失败时必须进行撤销的操作，可以由一组补偿程序来做相应的补偿。在这里我想说的更广一点，在服务调用的时候，调用失败有几种可能：</p>
<ul>
<li>请求客户端发出但是没到服务端，业务逻辑没有执行</li>
<li>请求客户端发出服务端收到也处理成功了，业务逻辑执行了客户端没收到结果</li>
<li>请求客户端发出服务端收到但处理失败了，客户端没收到结果</li>
</ul>
<p>所以在出现服务调用失败或超时的时候，服务端执行究竟有没有成功客户端是不明确的（只有客户端收到了明确的服务端返回的业务错误才真正代表执行失败），这个时候需要有补偿逻辑来同步服务端的执行状态。如果这样的补偿不可避免而且需要补偿的服务特别多，这样的逻辑逐一来写是一件很烦的事情，我们可以把这个工作封装成一个补偿中间件来处理：</p>
<ul>
<li>所有关键服务调用标记为需要自动补偿</li>
<li>补偿中间件在数据库记录服务的调用状态</li>
<li>关键服务的提供者提供统一状态查询接口，消费者提供统一的补偿回调接口（来处理成功和失败的情况）</li>
<li>补偿中间件根据数据库的记录调用服务提供方的状态查询和服务消费方的补偿回调接口进行补偿</li>
</ul>
<p>这样，我们在服务调用的时候就不需要考虑补偿逻辑的实现，只要实现这个标准即可。</p>
<h2>安全模式</h2>
<h3>29. 代客密钥模式：使用向客户端提供对特定资源或服务的有限直接访问权限的令牌或密钥</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947427.png" alt="image-20220704234318864" tabindex="0" loading="lazy"><figcaption>image-20220704234318864</figcaption></figure>
<p>这个模式说的是，在访问敏感资源的时候，我们可以不必让应用程序在其中作为一个代理转一层做权限控制，而是生成一个密钥，让用户直接拿着密钥到资源池换数据。</p>
<p>一些CDN在提供资源上传下载服务的时候一般都会提供类似的安全策略，需要实现生成Token才能去使用下载和上传服务，避免了CDN数据被非法利用作为图床的可能。</p>
<p>实现上比较简单，应用程序和资源提供方约定好Token的生成算法，对资源+请求资源的时间+密钥联合在一起做签名，资源提供方如果校验到签名不正确或Token过期或资源不匹配都将拒绝服务。</p>
<h3>30. 联合身份模式：将认证委托给外部身份提供者</h3>
<figure><img src="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947452.png" alt="image-20220704234435596" tabindex="0" loading="lazy"><figcaption>image-20220704234435596</figcaption></figure>
<p>这个模式说的是将身份验证委托给专门的程序或模块来做。使用专门的模块来统一负责登录授权不仅仅可以提供单点登录的功能，而且服务实现上更简单不需要每次都考虑登录那套东西。实现上可以看一下Spring Security实现的OAuth 2.0。</p>
<h2>总结</h2>
<p>总结一下，对于其中的很多模式，我们可以发现其实在之前的一些介绍或多或少有一些涉及。这里提到的30种模式有些体现的是一些设计细节，有些体现的是一种设计理念，它们大多时候是组合使用的，适合的就是最好的，大家可以细细品味一下每种模式的适合场景，在合适的时候可以想到它或许会有一种豁然开朗的感觉。</p>
<h2>参考文章</h2>
<p><a href="https://pdai.tech/md/arch/arch-x-pattern-2.html" target="_blank" rel="noopener noreferrer"><strong>架构 - 理解架构的模式2</strong></a></p>
]]></content:encoded>
      <enclosure url="https://cdn.jsdelivr.net/gh/MrJackC/PicGoImages/other/202404300947736.png" type="image/png"/>
    </item>
    <item>
      <title>架构-理解架构的模式1</title>
      <link>https://springg.us.kg/posts/Architect/base/arch-x-pattern.html</link>
      <guid>https://springg.us.kg/posts/Architect/base/arch-x-pattern.html</guid>
      <source url="https://springg.us.kg/rss.xml">架构-理解架构的模式1</source>
      <description>架构-理解架构的模式1 架构演进中有很多知识点，总体上可以归结为以下模式，这里说的模式本质是架构中技术点的抽象。 1. 架构的模式 每一个模式描述了一个在我们周围不断重复发生的问题及该问题解决方案的核心。这样，你就能一次又一次地使用该方案而不必做重复工作。 所谓网站架构模式即为了解决大型网站面临的高并发访问、海量数据、高可靠运行等一系列问题与挑战。为此...</description>
      <category>架构</category>
      <pubDate>Mon, 28 Oct 2024 01:58:08 GMT</pubDate>
      <content:encoded><![CDATA[
<blockquote>
<p>架构演进中有很多知识点，总体上可以归结为以下模式，<strong>这里说的模式本质是架构中技术点的抽象</strong>。</p>
</blockquote>
<h2>1. 架构的模式</h2>
<p>每一个模式描述了一个在我们周围不断重复发生的问题及该问题解决方案的核心。这样，你就能一次又一次地使用该方案而不必做重复工作。</p>
<p>所谓网站架构模式即为了解决大型网站面临的高并发访问、海量数据、高可靠运行等一系列问题与挑战。为此，在实践中提出了许多解决方案，以实现网站高性能、高可靠性、易伸缩、可扩展、安全等各种技术架构目标。</p>
<h3>1.1 分层</h3>
<p>分层是企业应用系统中最常见的一种架构模式，将系统在横向维度上切分成几个部分，每个部分负责一部分相对简单并比较单一的职责，然后通过上层对下层的依赖和调度组成一个完整的系统。</p>
<p>在网站的分层架构中，常见的为3层，即<code>应用层</code>、<code>服务层</code>、<code>数据层</code>:</p>
<ul>
<li>应用层具体负责业务和视图的展示；</li>
<li>服务层为应用层提供服务支持；</li>
<li>数据库提供数据存储访问服务，如数据库、缓存、文件、搜索引擎等。</li>
</ul>
<p>分层架构是逻辑上的，在物理部署上，三层架构可以部署在同一个物理机器上，但是随着网站业务的发展，必然需要对已经分层的模块分离部署，即三层结构分别部署在不同的服务器上，是网站拥有更多的计算资源以应对越来越多的用户访问。</p>
<p>所以虽然分层架构模式最初的目的是规划软件清晰的逻辑结构以便于开发维护，但在网站的发展过程中，分层结构对网站支持高并发向分布式方向的发展至关重要。</p>
<h3>1.2 分隔</h3>
<p>如果说分层是将软件在横向方面进行切分，那么分隔就是在纵向方面对软件进行切分。</p>
<p>网站越大，功能越复杂，服务和数据处理的种类也越多，将这些不同的功能和服务分隔开来，包装成高内聚低耦合的模块单元，不仅有助于软件的开发维护也便于不同模块的分布式部署，提高网站的并发处理能力和功能扩展能力。</p>
<p>大型网站分隔的粒度可能会很小。比如在应用层，将不同业务进行分隔，例如将购物、论坛、搜索、广告分隔成不同的应用，有对立的团队负责，部署在不同的服务器上。</p>
<h3>1.3 分布式</h3>
<p>对于大型网站，分层和分隔的一个主要目的是为了切分后的模块便于分布式部署，即将不同模块部署在不同的服务器上，通过远程调用协同工作。分布式意味着可以使用更多的计算机完同样的工作，计算机越多，CPU、内存、存储资源就越多，能过处理的并发访问和数据量就越大，进而能够为更多的用户提供服务。</p>
<p>在网站应用中，常用的分布式方案有一下几种.</p>
<ul>
<li><code>分布式应用和服务</code>：将分层和分隔后的应用和服务模块分布式部署，可以改善网站性能和并发性、加快开发和发布速度、减少数据库连接资源消耗。</li>
<li><code>分布式静态资源</code>：网站的静态资源如JS、CSS、Logo图片等资源对立分布式部署，并采用独立的域名，即人们常说的动静分离。静态资源分布式部署可以减轻应用服务器的负载压力；通过使用独立域名加快浏览器并发加载的速度。</li>
<li><code>分布式数据和存储</code>：大型网站需要处理以P为单位的海量数据，单台计算机无法提供如此大的存储空间，这些数据库需要分布式存储。</li>
<li><code>分布式计算</code>：目前网站普遍使用Hadoop和MapReduce分布式计算框架进行此类批处理计算，其特点是移动计算而不是移动数据，将计算程序分发到数据所在的位置以加速计算和分布式计算。</li>
</ul>
<h3>1.4 集群</h3>
<p>对于用户访问集中的模块需要将独立部署的服务器集群化，即多台服务器部署相同的应用构成一个集群，通过负载均衡设备共同对外提供服务。</p>
<p>服务器集群能够为相同的服务提供更多的并发支持，因此当有更多的用户访问时，只需要向集群中加入新的机器即可；另外可以实现当其中的某台服务器发生故障时，可以通过负载均衡的失效转移机制将请求转移至集群中其他的服务器上，因此可以提高系统的可用性。</p>
<h3>1.5 缓存</h3>
<p>缓存目的就是减轻服务器的计算，使数据直接返回给用户。在现在的软件设计中，缓存已经无处不在。具体实现有CDN、反向代理、本地缓存、分布式缓存等。</p>
<p>使用缓存有两个条件：访问数据热点不均衡，即某些频繁访问的数据需要放在缓存中；数据在某个时间段内有效，不过很快过期，否则会因为数据过期而脏读，影响数据的正确性。</p>
<h3>1.6 异步</h3>
<p>使用异步，业务之间的消息传递不是同步调用，而是将一个业务操作分成多个阶段，每个阶段之间通过共享数据的方法异步执行进行协作。</p>
<p>具体实现则在单一服务器内部可用通过多线程共享内存对了的方式处理；在分布式系统中可用通过分布式消息队列来实现异步。</p>
<p>异步架构的典型就是生产者消费者方式，两者不存在直接调用。</p>
<h3>1.7 冗余</h3>
<p>网站需要7×24小时连续运行，那么就得有相应的冗余机制，以防某台机器宕掉时无法访问，而冗余则可以通过部署至少两台服务器构成一个集群实现服务高可用。数据库除了定期备份还需要实现冷热备份。甚至可以在全球范围内部署灾备数据中心。</p>
<h3>1.8 自动化</h3>
<p>具体有自动化发布过程，自动化代码管理、自动化测试、自动化安全检测、自动化部署、自动化监控、自动化报警、自动化失效转移、自动化失效恢复等。</p>
<h3>1.9 安全</h3>
<p>网站在安全架构方面有许多模式：通过密码和手机校验码进行身份认证；登录、交易需要对网络通信进行加密；为了防止机器人程序滥用资源，需要使用验证码进行识别；对常见的XSS攻击、SQL注入需要编码转换；垃圾信息需要过滤等。</p>
<h3>1.10 敏捷性</h3>
<p>积极接受需求变更，快速响应业务发展需求。</p>
<h2>参考文章</h2>
<p><a href="https://pdai.tech/md/arch/arch-x-pattern.html" target="_blank" rel="noopener noreferrer"><strong>架构 - 理解架构的模式1</strong></a></p>
]]></content:encoded>
    </item>
    <item>
      <title>架构-保障架构安全</title>
      <link>https://springg.us.kg/posts/Architect/base/arch-x-security.html</link>
      <guid>https://springg.us.kg/posts/Architect/base/arch-x-security.html</guid>
      <source url="https://springg.us.kg/rss.xml">架构-保障架构安全</source>
      <description>架构-保障架构安全 1. 架构安全 对已知问题有有效的解决方案，对未知/潜在问题建立发现和防御机制。对于安全问题，首先要提高安全意识，建立一个安全的有效机制，从政策层面，组织层面进行保障。比如服务器密码不能泄露，密码每月更新，并且三次内不能重复；每周安全扫描等。以制度化的方式，加强安全体系的建设。同时，需要注意与安全有关的各个环节。安全问题不容忽视。包...</description>
      <category>架构</category>
      <pubDate>Mon, 28 Oct 2024 01:58:08 GMT</pubDate>
      <content:encoded><![CDATA[
<h2>1. 架构安全</h2>
<p>对已知问题有有效的解决方案，对未知/潜在问题建立发现和防御机制。对于安全问题，首先要提高安全意识，建立一个安全的有效机制，从政策层面，组织层面进行保障。比如服务器密码不能泄露，密码每月更新，并且三次内不能重复；每周安全扫描等。以制度化的方式，加强安全体系的建设。同时，需要注意与安全有关的各个环节。安全问题不容忽视。包括基础设施安全，应用系统安全，数据保密安全等。</p>
<h3>1.1 基础设施安全</h3>
<p>硬件采购，操作系统，网络环境方面的安全。一般采用，正规渠道购买高质量的产品，选择安全的操作系统，及时修补漏洞，安装杀毒软件防火墙。防范病毒，后门。设置防火墙策略，建立DDOS防御系统，使用攻击检测系统，进行子网隔离等手段。</p>
<h3>1.2 应用系统安全</h3>
<p>在程序开发时，对已知常用问题，使用正确的方式，在代码层面解决掉。防止跨站脚本攻击（XSS），注入攻击，跨站请求伪造（CSRF），错误信息，HTML注释，文件上传，路径遍历等。还可以使用Web应用防火墙（比如：ModSecurity），进行安全漏洞扫描等措施，加强应用级别的安全。</p>
<h3>1.3 数据保密安全</h3>
<p>存储安全（存在在可靠的设备，实时，定时备份），保存安全（重要的信息加密保存，选择合适的人员复杂保存和检测等），传输安全（防止数据窃取和数据篡改）；</p>
<h3>1.4 其它 - 算法</h3>
<p>常用的加解密算法（单项散列加密[MD5,SHA]，对称加密[DES,3DES,RC]），非对称加密[RSA]等。</p>
<h2>参考文章</h2>
<p><a href="https://pdai.tech/md/arch/arch-x-security.html" target="_blank" rel="noopener noreferrer"><strong>架构 - 保障架构安全</strong></a></p>
]]></content:encoded>
    </item>
  </channel>
</rss>